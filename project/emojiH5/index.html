<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" id="eqMobileViewport" content="width=640,initial-scale=1,user-scalable=no" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>选择表情</title>
    <link rel="stylesheet" href="css/main.css">
    <script>
        window.addEventListener("load",resetMeta)
        //            window.addEventListener("resize",resetMeta)
        function resetMeta(){
            var g=window.innerWidth,h=window.innerHeight,k;
            (g/h)>=320/504?k=h/1008:k=g/640;
            document.getElementById("eqMobileViewport").setAttribute("content","width=320,initial-scale="+k+",maximum-scale="+k+",user-scalable=no")
        }
    </script>
</head>
<body>
<div class="app-wrap">
   <div style="display: none">
       <input type="file" accept="image/*;capture=camrea" />
       <button id="filterBtn">滤镜</button>
       <button id="backUserMoveBtn">返回拖拽</button>

       <button id="beginEraser">开始橡皮擦</button>
       <button id="backFilterBtn">返回滤镜</button>

       <div class="photoFrame" >
       <!--    <canvas id="photoCanvas" width="260" height="260"></canvas>
           <canvas id="filterCanvas" width="260" height="260" data-caman-hidpi-disabled style="height:260px;width: 260px;"></canvas>
           <canvas id="eraserCanvas" width="260" height="260"  style="height:260px;width: 260px;"></canvas>-->
       </div>
       <ul>
           <li>
               <img src="img/emoji1_thumb.png"/>
           </li>
       </ul>
   </div>
    <div class="main-box">
        <div class="main-inner">
            <!--upload box-->
                   <div class="photo-input-box centerXY" data-step="choose-emoji">
                       <div class="photo-input-mask step-tip">
                           <input type="file"   accept="image/*;capture=camrea" id="photoInput"/>
                       </div>
                   </div>
            <!--main photo frame box-->
                  <div class="photoFrame centerXY" id="photoFrame">
                      <div class="photo-bg" id="emojiBg"></div>
                      <canvas id="photoCanvas" width="400" height="400" ></canvas>
                          <canvas id="filterCanvas" width="400" height="400" data-caman-hidpi-disabled style="display: none"></canvas>
                          <canvas id="eraserCanvas" width="400" height="400"  style="display: none"></canvas>
                      <div class="photo-cover" id="emojiCover"></div>
                      <canvas id="resultCanvas" width="400" height="400"  style="display: none;"></canvas>

                  </div>
                 <!--steps list-->
                <div class="step main-step" data-step="text-emoji" >
                    <div class="textarea-bg step-tip">
                              <textarea id="emojiTextArea">

                    </textarea>
                    </div>
                </div>
            </div>
    </div>
    <div class="op-box">
        <div class="step" data-step="choose-emoji" id="emoji-tpl-list">
            <div class="scroller">
                <ul class="inline vm step-tip">
                    <li>
                        <img src="img/emoji1_thumb.png"/>
                    </li>
                    <li>
                        <img src="img/emoji1_thumb.png"/>
                    </li>
                    <li>
                        <img src="img/emoji1_thumb.png"/>
                    </li>
                    <li>
                        <img src="img/emoji1_thumb.png"/>
                    </li>
                    <li>
                        <img src="img/emoji1_thumb.png"/>
                    </li>
                </ul>
                <div class="verticalAlign"></div>
             </div>
        </div>
        <div class="step" data-step="filter-emoji" >
            <div class="range-bar">
                <div class="info-line clearfix"><span class="pull-left">对比度</span><span  class="output pull-right">0</span></div>
                <input type="range" max="100" min="-100" style="width: 200px" step="1" value="0" class="adjust-input" id="contrast"  data-rangeslider/>
            </div>
            <div class="range-bar">
                <div class="info-line clearfix"><span class="pull-left">曝光度</span><span  class="output pull-right">0</span></div>
        <input type="range" max="100" min="-100" style="width: 200px" step="1" value="0" class="adjust-input" id="exposure" data-rangeslider/>
            </div>
        </div>
        <div class="step" data-step="erase-emoji">
            <div class="reset-eraser">
                <a class='inline vm' id="resetEraser"><i class="ico-reset"></i>重擦</a>
            </div>
            <div  class="range-bar">
                <div class="info-line clearfix"><span class="pull-left">粗细</span><span  class="output pull-right">10</span></div>
                <input type="range" max="100" min="10" style="width: 200px" step="10" value="30" class="adjust-input" id="eraserRange"  data-rangeslider/>
            </div>
        </div>

        <div class="step" data-step="text-emoji" id="emoji-text-list">
                <div class="scroller">
                    <div class="item-row vm step-tip">
                      <div class="item-box">
                          <div class="item">卧勒个槽！</div>
                          <div class="item">年轻人，你的思想很危险啊！</div>
                      </div>
                        <div class="item-box">
                            <div class="item">么么哒～</div>
                            <div class="item">去你表妹！</div>
                        </div>
                        <div class="item-box">
                            <div class="item">哎哟卧操！</div>
                            <div class="item">孩子，你需要治疗</div>
                        </div>
                        <div class="item-box">
                            <div class="item">呵呵呵</div>
                            <div class="item">我是女神我怕谁</div>
                        </div>
                    </div>
                    <div class="verticalAlign"></div>
                </div>
        </div>
        <div class="step" data-step="confirm-emoji" >
        </div>

    </div>
    <div class="op-bar">
        <div class="step" data-step="choose-emoji" >
            <a class="btn-label back-step" disabled>重拍</a>
            <a class="btn-yellow pull-right next-step">下一步</a>
        </div>
        <div class="step" data-step="filter-emoji" >
            <a class="btn-label back-step" >上一步</a>
            <a class="btn-yellow pull-right next-step">下一步</a>
        </div>
        <div class="step" data-step="erase-emoji" >
            <a class="btn-label back-step">上一步</a>
            <a class="btn-yellow pull-right next-step">下一步</a>
        </div>
        <div class="step" data-step="text-emoji" >
            <a class="btn-label back-step" >上一步</a>
            <a class="btn-yellow pull-right next-step">完成</a>
        </div>
        <div class="step" data-step="confirm-emoji" >
            <a class="btn-label back-step" >上一步</a>
            <a class="btn-yellow pull-right next-step">确认添加</a>
        </div>
    </div>
</div>
</body>
<script  data-main="app" src="../../vendor/require.js" ></script>
<script>
    var uploadUrl='http://127.0.0.1/test/upload.php';
    function sendFile(data){
        var form = new FormData();
        form.append("filetype", data.filetype);
        form.append("imageData", data.imageData);
        var xhrForm = new XMLHttpRequest();
        xhrForm.open("POST", uploadUrl);
        xhrForm.setRequestHeader("Access-Control-Allow-Origin","*");
        xhrForm.send(form);
    }
    document.addEventListener("touchmove",function(e){
            e.preventDefault();
    })
  </script>
</html>