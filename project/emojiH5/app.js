/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */

/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */

/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */

/*! Hammer.JS - v1.0.3 - 2013-03-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

/*
  CompoundBlur - Blurring with varying radii for Canvas
  
  Version:   0.1
  Author:  Mario Klingemann
  Contact:   mario@quasimondo.com
  Website:  http://www.quasimondo.com/StackBlurForCanvas
  Twitter:  @quasimondo
  Modified By: Ryan LeFevre (@meltingice)
  
  In case you find this class useful - especially in commercial projects -
  I am not totally unhappy for a small donation to my PayPal account
  mario@quasimondo.de
  
  Copyright (c) 2011 Mario Klingemann
  
  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation
  files (the "Software"), to deal in the Software without
  restriction, including without limitation the rights to use,
  copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following
  conditions:
  
  The above copyright notice and this permission notice shall be
  included in all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  OTHER DEALINGS IN THE SOFTWARE.
  */

/*
  StackBlur - a fast almost Gaussian Blur For Canvas v0.31 modified for CamanJS
  
  Version:   0.31
  Author:    Mario Klingemann
  Contact:   mario@quasimondo.com
  Website:  http://www.quasimondo.com/StackBlurForCanvas
  Twitter:  @quasimondo
  Modified By: Ryan LeFevre (@meltingice)
  
  In case you find this class useful - especially in commercial projects -
  I am not totally unhappy for a small donation to my PayPal account
  mario@quasimondo.de
  
  Or support me on flattr: 
  https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript
  
  Copyright (c) 2010 Mario Klingemann
  
  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation
  files (the "Software"), to deal in the Software without
  restriction, including without limitation the rights to use,
  copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following
  conditions:
  
  The above copyright notice and this permission notice shall be
  included in all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  OTHER DEALINGS IN THE SOFTWARE.
  */

/**
 * @license jCanvas v15.08.17
 * Copyright 2015 Caleb Evans
 * Released under the MIT license
 */

/*! rangeslider.js - v1.3.3 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */

(function(a,b){console.log("jquery init"),typeof module=="object"&&typeof module.exports=="object"?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)})(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(a){var b="length"in a&&a.length,c=jQuery.type(a);return c==="function"||jQuery.isWindow(a)?!1:a.nodeType===1&&b?!0:c==="array"||b===0||typeof b=="number"&&b>0&&b-1 in a}function winnow(a,b,c){if(jQuery.isFunction(b))return jQuery.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return jQuery.grep(a,function(a){return a===b!==c});if(typeof b=="string"){if(risSimple.test(b))return jQuery.filter(b,a,c);b=jQuery.filter(b,a)}return jQuery.grep(a,function(a){return indexOf.call(b,a)>=0!==c})}function sibling(a,b){while((a=a[b])&&a.nodeType!==1);return a}function createOptions(a){var b=optionsCache[a]={};return jQuery.each(a.match(rnotwhite)||[],function(a,c){b[c]=!0}),b}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Data.uid++}function dataAttr(a,b,c){var d;if(c===undefined&&a.nodeType===1){d="data-"+b.replace(rmultiDash,"-$1").toLowerCase(),c=a.getAttribute(d);if(typeof c=="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:+c+""===c?+c:rbrace.test(c)?jQuery.parseJSON(c):c}catch(e){}data_user.set(a,b,c)}else c=undefined}return c}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(a){}}function manipulationTarget(a,b){return jQuery.nodeName(a,"table")&&jQuery.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function disableScript(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function restoreScript(a){var b=rscriptTypeMasked.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function setGlobalEval(a,b){var c=0,d=a.length;for(;c<d;c++)data_priv.set(a[c],"globalEval",!b||data_priv.get(b[c],"globalEval"))}function cloneCopyEvent(a,b){var c,d,e,f,g,h,i,j;if(b.nodeType!==1)return;if(data_priv.hasData(a)){f=data_priv.access(a),g=data_priv.set(b,f),j=f.events;if(j){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)jQuery.event.add(b,e,j[e][c])}}data_user.hasData(a)&&(h=data_user.access(a),i=jQuery.extend({},h),data_user.set(b,i))}function getAll(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return b===undefined||b&&jQuery.nodeName(a,b)?jQuery.merge([a],c):c}function fixInput(a,b){var c=b.nodeName.toLowerCase();if(c==="input"&&rcheckableType.test(a.type))b.checked=a.checked;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}function actualDisplay(a,b){var c,d=jQuery(b.createElement(a)).appendTo(b.body),e=window.getDefaultComputedStyle&&(c=window.getDefaultComputedStyle(d[0]))?c.display:jQuery.css(d[0],"display");return d.detach(),e}function defaultDisplay(a){var b=document,c=elemdisplay[a];if(!c){c=actualDisplay(a,b);if(c==="none"||!c)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=iframe[0].contentDocument,b.write(),b.close(),c=actualDisplay(a,b),iframe.detach();elemdisplay[a]=c}return c}function curCSS(a,b,c){var d,e,f,g,h=a.style;return c=c||getStyles(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(g===""&&!jQuery.contains(a.ownerDocument,a)&&(g=jQuery.style(a,b)),rnumnonpx.test(g)&&rmargin.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),g!==undefined?g+"":g}function addGetHookIf(a,b){return{get:function(){if(a()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}function vendorPropName(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=cssPrefixes.length;while(e--){b=cssPrefixes[e]+c;if(b in a)return b}return d}function setPositiveNumber(a,b,c){var d=rnumsplit.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function augmentWidthOrHeight(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2)c==="margin"&&(g+=jQuery.css(a,c+cssExpand[f],!0,e)),d?(c==="content"&&(g-=jQuery.css(a,"padding"+cssExpand[f],!0,e)),c!=="margin"&&(g-=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e))):(g+=jQuery.css(a,"padding"+cssExpand[f],!0,e),c!=="padding"&&(g+=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e)));return g}function getWidthOrHeight(a,b,c){var d=!0,e=b==="width"?a.offsetWidth:a.offsetHeight,f=getStyles(a),g=jQuery.css(a,"boxSizing",!1,f)==="border-box";if(e<=0||e==null){e=curCSS(a,b,f);if(e<0||e==null)e=a.style[b];if(rnumnonpx.test(e))return e;d=g&&(support.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+augmentWidthOrHeight(a,b,c||(g?"border":"content"),d,f)+"px"}function showHide(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=data_priv.get(d,"olddisplay"),c=d.style.display,b?(!f[g]&&c==="none"&&(d.style.display=""),d.style.display===""&&isHidden(d)&&(f[g]=data_priv.access(d,"olddisplay",defaultDisplay(d.nodeName)))):(e=isHidden(d),(c!=="none"||!e)&&data_priv.set(d,"olddisplay",e?c:jQuery.css(d,"display")))}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none"}return a}function Tween(a,b,c,d,e){return new Tween.prototype.init(a,b,c,d,e)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(a,b){var c,d=0,e={height:a};b=b?1:0;for(;d<4;d+=2-b)c=cssExpand[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function createTween(a,b,c){var d,e=(tweeners[b]||[]).concat(tweeners["*"]),f=0,g=e.length;for(;f<g;f++)if(d=e[f].call(c,b,a))return d}function defaultPrefilter(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&isHidden(a),p=data_priv.get(a,"fxshow");c.queue||(h=jQuery._queueHooks(a,"fx"),h.unqueued==null&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,jQuery.queue(a,"fx").length||h.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=jQuery.css(a,"display"),k=j==="none"?data_priv.get(a,"olddisplay")||defaultDisplay(a.nodeName):j,k==="inline"&&jQuery.css(a,"float")==="none"&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b){e=b[d];if(rfxtypes.exec(e)){delete b[d],f=f||e==="toggle";if(e===(o?"hide":"show")){if(e!=="show"||!p||p[d]===undefined)continue;o=!0}m[d]=p&&p[d]||jQuery.style(a,d)}else j=undefined}if(!jQuery.isEmptyObject(m)){p?"hidden"in p&&(o=p.hidden):p=data_priv.access(a,"fxshow",{}),f&&(p.hidden=!o),o?jQuery(a).show():l.done(function(){jQuery(a).hide()}),l.done(function(){var b;data_priv.remove(a,"fxshow");for(b in m)jQuery.style(a,b,m[b])});for(d in m)g=createTween(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start=d==="width"||d==="height"?1:0))}else(j==="none"?defaultDisplay(a.nodeName):j)==="inline"&&(n.display=j)}function propFilter(a,b){var c,d,e,f,g;for(c in a){d=jQuery.camelCase(c),e=b[d],f=a[c],jQuery.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=jQuery.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function Animation(a,b,c){var d,e,f=0,g=animationPrefilters.length,h=jQuery.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;var b=fxNow||createFxNow(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:jQuery.extend({},b),opts:jQuery.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:fxNow||createFxNow(),duration:c.duration,tweens:[],createTween:function(b,c){var d=jQuery.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=!0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;propFilter(k,j.opts.specialEasing);for(;f<g;f++){d=animationPrefilters[f].call(j,a,k,j.opts);if(d)return d}return jQuery.map(k,createTween,j),jQuery.isFunction(j.opts.start)&&j.opts.start.call(a,j),jQuery.fx.timer(jQuery.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function addToPrefiltersOrTransports(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(c))while(d=f[e++])d[0]==="+"?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function inspectPrefiltersOrTransports(a,b,c,d){function g(h){var i;return e[h]=!0,jQuery.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j=="string"&&!f&&!e[j])return b.dataTypes.unshift(j),g(j),!1;if(f)return!(i=j)}),i}var e={},f=a===transports;return g(b.dataTypes[0])||!e["*"]&&g("*")}function ajaxExtend(a,b){var c,d,e=jQuery.ajaxSettings.flatOptions||{};for(c in b)b[c]!==undefined&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&jQuery.extend(!0,a,d),a}function ajaxHandleResponses(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*")i.shift(),d===undefined&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function ajaxConvert(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}return{state:"success",data:b}}function buildParams(a,b,c,d){var e;if(jQuery.isArray(b))jQuery.each(b,function(b,e){c||rbracket.test(a)?d(a,e):buildParams(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&jQuery.type(b)==="object")for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}function getWindow(a){return jQuery.isWindow(a)?a:a.nodeType===9&&a.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,version="2.1.4",jQuery=function(a,b){return new jQuery.fn.init(a,b)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(a,b){return b.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(a){return a!=null?a<0?this[a+this.length]:this[a]:slice.call(this)},pushStack:function(a){var b=jQuery.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return jQuery.each(this,a,b)},map:function(a){return this.pushStack(jQuery.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;typeof g=="boolean"&&(j=g,g=arguments[h]||{},h++),typeof g!="object"&&!jQuery.isFunction(g)&&(g={}),h===i&&(g=this,h--);for(;h<i;h++)if((a=arguments[h])!=null)for(b in a){c=g[b],d=a[b];if(g===d)continue;j&&d&&(jQuery.isPlainObject(d)||(e=jQuery.isArray(d)))?(e?(e=!1,f=c&&jQuery.isArray(c)?c:[]):f=c&&jQuery.isPlainObject(c)?c:{},g[b]=jQuery.extend(j,f,d)):d!==undefined&&(g[b]=d)}return g},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return jQuery.type(a)==="function"},isArray:Array.isArray,isWindow:function(a){return a!=null&&a===a.window},isNumeric:function(a){return!jQuery.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a)?!1:a.constructor&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?class2type[toString.call(a)]||"object":typeof a},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(a){return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a);if(c)if(g)for(;e<f;e++){d=b.apply(a[e],c);if(d===!1)break}else for(e in a){d=b.apply(a[e],c);if(d===!1)break}else if(g)for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===!1)break}else for(e in a){d=b.call(a[e],e,a[e]);if(d===!1)break}return a},trim:function(a){return a==null?"":(a+"").replace(rtrim,"")},makeArray:function(a,b){var c=b||[];return a!=null&&(isArraylike(Object(a))?jQuery.merge(c,typeof a=="string"?[a]:a):push.call(c,a)),c},inArray:function(a,b,c){return b==null?-1:indexOf.call(b,a,c)},merge:function(a,b){var c=+b.length,d=0,e=a.length;for(;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length,h=!c;for(;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a),h=[];if(g)for(;e<f;e++)d=b(a[e],e,c),d!=null&&h.push(d);else for(e in a)d=b(a[e],e,c),d!=null&&h.push(d);return concat.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return typeof b=="string"&&(c=a[b],b=a,a=c),jQuery.isFunction(a)?(d=slice.call(arguments,2),e=function(){return a.apply(b||this,d.concat(slice.call(arguments)))},e.guid=a.guid=a.guid||jQuery.guid++,e):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){class2type["[object "+b+"]"]=b.toLowerCase()});var Sizzle=function(a){function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;(b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType;if(typeof a!="string"||!a||k!==1&&k!==9&&k!==11)return d;if(!e&&p){if(k!==11&&(f=_.exec(a)))if(j=f[1]){if(k===9){h=b.getElementById(j);if(!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){s=r=u,w=b,x=k!==1&&a;if(k===1&&b.nodeName.toLowerCase()!=="object"){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function hb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&typeof a.getElementsByTagName!="undefined"&&a}function qb(){}function rb(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=x++;return b.first?function(b,c,f){while(b=b[d])if(b.nodeType===1||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if(b.nodeType===1||e)if(a(b,c,g))return!0}else while(b=b[d])if(b.nodeType===1||e){i=b[u]||(b[u]={});if((h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];i[d]=j;if(j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){var d=0,e=b.length;for(;d<e;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?vb(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){j=vb(r,n),d(j,[],h,i),k=j.length;while(k--)if(l=j[k])r[n[k]]=!(q[n[k]]=l)}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];for(;i<f;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{c=d.filter[a[i].type].apply(null,a[i].matches);if(c[u]){e=++i;for(;e<f;e++)if(d.relative[a[e].type])break;return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:a[i-2].type===" "?"*":""})).replace(R,"$1"),c,i<e&&xb(a.slice(i,e)),e<f&&xb(a=a.slice(e)),e<f&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=t==null?1:Math.random()||.1,x=u.length;k&&(j=g!==n&&g);for(;q!==x&&(l=u[q])!=null;q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}p+=q;if(c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)!r[q]&&!s[q]&&(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){var c=0,d=a.length;for(;c<d;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|"+".*"+")\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,d&1023|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;if(g===n||g.nodeType!==9||!g.documentElement)return n;n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",eb,!1):e.attachEvent&&e.attachEvent("onunload",eb)),p=!f(g),c.attributes=jb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!="undefined"&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a);if(c.qsa)return b.querySelectorAll(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++])c.nodeType===1&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if(p)return b.getElementsByClassName(a)},r=[],q=[];if(c.qsa=$.test(g.querySelectorAll))jb(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a>"+"<select id='"+u+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),jb(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")});return(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&d.nodeType===1&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,d&1||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:d&4?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){(a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']");if(c.matchesSelector&&p&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&a.document.nodeType!==11)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):undefined;return f!==undefined?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B);if(l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(!f)while(b=a[d++])c+=e(b);else if(f===1||f===9||f===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(f===3||f===4)return a.nodeValue;return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1].slice(0,3)==="nth"?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd")),a[5]=+(a[7]+a[8]||a[3]==="odd")):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return a==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!="undefined"&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return e==null?b==="!=":b?(e+="",b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return!1;o=p=a==="only"&&!o&&"nextSibling"}return!0}o=[g?q.firstChild:q.lastChild];if(g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(l.nodeType===1&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){s&&((l[u]||(l[u]={}))[a]=[w,m]);if(l===b)break}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ib(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||"")||gb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||c.indexOf(a+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text")},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[c<0?c+b:c]}),even:ob(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a}),odd:ob(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);return qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){if(!c||(e=S.exec(h)))e&&(h=h.slice(e[0].length)||h),i.push(f=[]);c=!1;if(e=T.exec(h))c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length);for(g in d.filter)(e=X[g].exec(h))&&(!j[g]||(e=j[g](e)))&&(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)},h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n=typeof a=="function"&&a,o=!f&&g(a=n.selector||a);e=e||[];if(o.length===1){j=o[0]=o[0].slice(0);if(j.length>2&&(k=j[0]).type==="ID"&&c.getById&&b.nodeType===9&&p&&d.relative[j[1].type]){b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0];if(!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){k=j[i];if(d.relative[l=k.type])break;if(m=d.find[l])if(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b)){j.splice(i,1),a=f.length&&rb(j);if(!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return a.compareDocumentPosition(n.createElement("div"))&1}),jb(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild.getAttribute("href")==="#"})||kb("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,b.toLowerCase()==="type"?1:2)}),(!c.attributes||!jb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),a.firstChild.getAttribute("value")===""}))&&kb("value",function(a,b,c){if(!c&&a.nodeName.toLowerCase()==="input")return a.defaultValue}),jb(function(a){return a.getAttribute("disabled")==null})||kb(K,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),b.length===1&&d.nodeType===1?jQuery.find.matchesSelector(d,a)?[d]:[]:jQuery.find.matches(a,jQuery.grep(b,function(a){return a.nodeType===1}))},jQuery.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if(typeof a!="string")return this.pushStack(jQuery(a).filter(function(){for(b=0;b<c;b++)if(jQuery.contains(e[b],this))return!0}));for(b=0;b<c;b++)jQuery.find(a,e[b],d);return d=this.pushStack(c>1?jQuery.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(winnow(this,a||[],!1))},not:function(a){return this.pushStack(winnow(this,a||[],!0))},is:function(a){return!!winnow(this,typeof a=="string"&&rneedsContext.test(a)?jQuery(a):a||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(a,b){var c,d;if(!a)return this;if(typeof a=="string"){a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?c=[null,a,null]:c=rquickExpr.exec(a);if(c&&(c[1]||!b)){if(c[1]){b=b instanceof jQuery?b[0]:b,jQuery.merge(this,jQuery.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:document,!0));if(rsingleTag.test(c[1])&&jQuery.isPlainObject(b))for(c in b)jQuery.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=document.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=document,this.selector=a,this}return!b||b.jquery?(b||rootjQuery).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):jQuery.isFunction(a)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(a):a(jQuery):(a.selector!==undefined&&(this.selector=a.selector,this.context=a.context),jQuery.makeArray(a,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(a,b,c){var d=[],e=c!==undefined;while((a=a[b])&&a.nodeType!==9)if(a.nodeType===1){if(e&&jQuery(a).is(c))break;d.push(a)}return d},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}}),jQuery.fn.extend({has:function(a){var b=jQuery(a,this),c=b.length;return this.filter(function(){var a=0;for(;a<c;a++)if(jQuery.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g=rneedsContext.test(a)||typeof a!="string"?jQuery(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&jQuery.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?jQuery.unique(f):f)},index:function(a){return a?typeof a=="string"?indexOf.call(jQuery(a),this[0]):indexOf.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(a,b))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),jQuery.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return jQuery.dir(a,"parentNode")},parentsUntil:function(a,b,c){return jQuery.dir(a,"parentNode",c)},next:function(a){return sibling(a,"nextSibling")},prev:function(a){return sibling(a,"previousSibling")},nextAll:function(a){return jQuery.dir(a,"nextSibling")},prevAll:function(a){return jQuery.dir(a,"previousSibling")},nextUntil:function(a,b,c){return jQuery.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return jQuery.dir(a,"previousSibling",c)},siblings:function(a){return jQuery.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return jQuery.sibling(a.firstChild)},contents:function(a){return a.contentDocument||jQuery.merge([],a.childNodes)}},function(a,b){jQuery.fn[a]=function(c,d){var e=jQuery.map(this,b,c);return a.slice(-5)!=="Until"&&(d=c),d&&typeof d=="string"&&(e=jQuery.filter(d,e)),this.length>1&&(guaranteedUnique[a]||jQuery.unique(e),rparentsprev.test(a)&&e.reverse()),this.pushStack(e)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(a){a=typeof a=="string"?optionsCache[a]||createOptions(a):jQuery.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;for(;h&&g<f;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;(function g(b){jQuery.each(b,function(b,c){var d=jQuery.type(c);d==="function"?(!a.unique||!k.has(c))&&h.push(c):c&&c.length&&d!=="string"&&g(c)})})(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&jQuery.each(arguments,function(a,b){var c;while((c=jQuery.inArray(b,h,c))>-1)h.splice(c,1),d&&(c<=f&&f--,c<=g&&g--)}),this},has:function(a){return a?jQuery.inArray(a,h)>-1:!!h&&!!h.length},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=undefined,this},disabled:function(){return!h},lock:function(){return i=undefined,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return h&&(!c||i)&&(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},jQuery.extend({Deferred:function(a){var b=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return jQuery.Deferred(function(c){jQuery.each(b,function(b,f){var g=jQuery.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&jQuery.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return a!=null?jQuery.extend(a,d):d}},e={};return d.pipe=d.then,jQuery.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=slice.call(arguments),d=c.length,e=d!==1||a&&jQuery.isFunction(a.promise)?d:0,f=e===1?a:jQuery.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?slice.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&jQuery.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}});var readyList;jQuery.fn.ready=function(a){return jQuery.ready.promise().done(a),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(a){a?jQuery.readyWait++:jQuery.ready(!0)},ready:function(a){if(a===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(a!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))}}),jQuery.ready.promise=function(a){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(a)},jQuery.ready.promise();var access=jQuery.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(jQuery.type(c)==="object"){e=!0;for(h in c)jQuery.access(a,b,h,c[h],!0,f,g)}else if(d!==undefined){e=!0,jQuery.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(jQuery(a),c)}));if(b)for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}return e?a:j?b.call(a):i?b(a[0],c):f};jQuery.acceptData=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(a){if(!Data.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=Data.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,jQuery.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(typeof b=="string")f[b]=c;else if(jQuery.isEmptyObject(f))jQuery.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return b===undefined?c:c[b]},access:function(a,b,c){var d;return b===undefined||b&&typeof b=="string"&&c===undefined?(d=this.get(a,b),d!==undefined?d:this.get(a,jQuery.camelCase(b))):(this.set(a,b,c),c!==undefined?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(b===undefined)this.cache[f]={};else{jQuery.isArray(b)?d=b.concat(b.map(jQuery.camelCase)):(e=jQuery.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(rnotwhite)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!jQuery.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(a){return data_user.hasData(a)||data_priv.hasData(a)},data:function(a,b,c){return data_user.access(a,b,c)},removeData:function(a,b){data_user.remove(a,b)},_data:function(a,b,c){return data_priv.access(a,b,c)},_removeData:function(a,b){data_priv.remove(a,b)}}),jQuery.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(a===undefined){if(this.length){e=data_user.get(f);if(f.nodeType===1&&!data_priv.get(f,"hasDataAttrs")){c=g.length;while(c--)g[c]&&(d=g[c].name,d.indexOf("data-")===0&&(d=jQuery.camelCase(d.slice(5)),dataAttr(f,d,e[d])));data_priv.set(f,"hasDataAttrs",!0)}}return e}return typeof a=="object"?this.each(function(){data_user.set(this,a)}):access(this,function(b){var c,d=jQuery.camelCase(a);if(f&&b===undefined){c=data_user.get(f,a);if(c!==undefined)return c;c=data_user.get(f,d);if(c!==undefined)return c;c=dataAttr(f,d,undefined);if(c!==undefined)return c;return}this.each(function(){var c=data_user.get(this,d);data_user.set(this,d,b),a.indexOf("-")!==-1&&c!==undefined&&data_user.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){data_user.remove(this,a)})}}),jQuery.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=data_priv.get(a,b),c&&(!d||jQuery.isArray(c)?d=data_priv.access(a,b,jQuery.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=jQuery.queue(a,b),d=c.length,e=c.shift(),f=jQuery._queueHooks(a,b),g=function(){jQuery.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return data_priv.get(a,c)||data_priv.access(a,c,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(a,[b+"queue",c])})})}}),jQuery.fn.extend({queue:function(a,b){var c=2;return typeof a!="string"&&(b=a,a="fx",c--),arguments.length<c?jQuery.queue(this[0],a):b===undefined?this:this.each(function(){var c=jQuery.queue(this,a,b);jQuery._queueHooks(this,a),a==="fx"&&c[0]!=="inprogress"&&jQuery.dequeue(this,a)})},dequeue:function(a){return this.each(function(){jQuery.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=jQuery.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};typeof a!="string"&&(b=a,a=undefined),a=a||"fx";while(g--)c=data_priv.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(a,b){return a=b||a,jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var a=document.createDocumentFragment(),b=a.appendChild(document.createElement("div")),c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),support.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.get(a);if(!q)return;c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=jQuery.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof jQuery!==strundefined&&jQuery.event.triggered!==b.type?jQuery.event.dispatch.apply(a,arguments):undefined}),b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n)continue;l=jQuery.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=jQuery.event.special[n]||{},k=jQuery.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&jQuery.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,(!l.setup||l.setup.call(a,d,o,g)===!1)&&a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),jQuery.event.global[n]=!0}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.hasData(a)&&data_priv.get(a);if(!q||!(i=q.events))return;b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n){for(n in i)jQuery.event.remove(a,n+b[j],c,d,!0);continue}l=jQuery.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],(e||p===k.origType)&&(!c||c.guid===k.guid)&&(!h||h.test(k.namespace))&&(!d||d===k.selector||d==="**"&&k.selector)&&(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&((!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&jQuery.removeEvent(a,n,q.handle),delete i[n])}jQuery.isEmptyObject(i)&&(delete q.handle,data_priv.remove(a,"events"))},trigger:function(a,b,c,d){var e,f,g,h,i,j,k,l=[c||document],m=hasOwn.call(a,"type")?a.type:a,n=hasOwn.call(a,"namespace")?a.namespace.split("."):[];f=g=c=c||document;if(c.nodeType===3||c.nodeType===8)return;if(rfocusMorph.test(m+jQuery.event.triggered))return;m.indexOf(".")>=0&&(n=m.split("."),m=n.shift(),n.sort()),i=m.indexOf(":")<0&&"on"+m,a=a[jQuery.expando]?a:new jQuery.Event(m,typeof a=="object"&&a),a.isTrigger=d?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=undefined,a.target||(a.target=c),b=b==null?[a]:jQuery.makeArray(b,[a]),k=jQuery.event.special[m]||{};if(!d&&k.trigger&&k.trigger.apply(c,b)===!1)return;if(!d&&!k.noBubble&&!jQuery.isWindow(c)){h=k.delegateType||m,rfocusMorph.test(h+m)||(f=f.parentNode);for(;f;f=f.parentNode)l.push(f),g=f;g===(c.ownerDocument||document)&&l.push(g.defaultView||g.parentWindow||window)}e=0;while((f=l[e++])&&!a.isPropagationStopped())a.type=e>1?h:k.bindType||m,j=(data_priv.get(f,"events")||{})[a.type]&&data_priv.get(f,"handle"),j&&j.apply(f,b),j=i&&f[i],j&&j.apply&&jQuery.acceptData(f)&&(a.result=j.apply(f,b),a.result===!1&&a.preventDefault());return a.type=m,!d&&!a.isDefaultPrevented()&&(!k._default||k._default.apply(l.pop(),b)===!1)&&jQuery.acceptData(c)&&i&&jQuery.isFunction(c[m])&&!jQuery.isWindow(c)&&(g=c[i],g&&(c[i]=null),jQuery.event.triggered=m,c[m](),jQuery.event.triggered=undefined,g&&(c[i]=g)),a.result},dispatch:function(a){a=jQuery.event.fix(a);var b,c,d,e,f,g=[],h=slice.call(arguments),i=(data_priv.get(this,"events")||{})[a.type]||[],j=jQuery.event.special[a.type]||{};h[0]=a,a.delegateTarget=this;if(j.preDispatch&&j.preDispatch.call(this,a)===!1)return;g=jQuery.event.handlers.call(this,a,i),b=0;while((e=g[b++])&&!a.isPropagationStopped()){a.currentTarget=e.elem,c=0;while((f=e.handlers[c++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,d=((jQuery.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),d!==undefined&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation())}return j.postDispatch&&j.postDispatch.call(this,a),a.result},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click"))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||a.type!=="click"){d=[];for(c=0;c<h;c++)f=b[c],e=f.selector+" ",d[e]===undefined&&(d[e]=f.needsContext?jQuery(e,this).index(i)>=0:jQuery.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return a.pageX==null&&b.clientX!=null&&(c=a.target.ownerDocument||document,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.which&&f!==undefined&&(a.which=f&1?1:f&2?3:f&4?2:0),a}},fix:function(a){if(a[jQuery.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=rmouseEvent.test(e)?this.mouseHooks:rkeyEvent.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new jQuery.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=document),a.target.nodeType===3&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(a){return jQuery.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==undefined&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=jQuery.extend(new jQuery.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?jQuery.event.trigger(e,null,b):jQuery.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},jQuery.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},jQuery.Event=function(a,b){if(!(this instanceof jQuery.Event))return new jQuery.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===undefined&&a.returnValue===!1?returnTrue:returnFalse):this.type=a,b&&jQuery.extend(this,b),this.timeStamp=a&&a.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=returnTrue,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=returnTrue,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){jQuery.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!jQuery.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){jQuery.event.simulate(b,a.target,jQuery.event.fix(a),!0)};jQuery.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b);e||d.addEventListener(a,c,!0),data_priv.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b)-1;e?data_priv.access(d,b,e):(d.removeEventListener(a,c,!0),data_priv.remove(d,b))}}}),jQuery.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a=="object"){typeof b!="string"&&(c=c||b,b=undefined);for(g in a)this.on(g,b,c,a[g],e);return this}c==null&&d==null?(d=b,c=b=undefined):d==null&&(typeof b=="string"?(d=c,c=undefined):(d=c,c=b,b=undefined));if(d===!1)d=returnFalse;else if(!d)return this;return e===1&&(f=d,d=function(a){return jQuery().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,jQuery(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof a=="object"){for(e in a)this.off(e,b,a[e]);return this}if(b===!1||typeof b=="function")c=b,b=undefined;return c===!1&&(c=returnFalse),this.each(function(){jQuery.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){jQuery.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return jQuery.event.trigger(a,b,c,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=jQuery.contains(a.ownerDocument,a);if(!support.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){g=getAll(h),f=getAll(a);for(d=0,e=f.length;d<e;d++)fixInput(f[d],g[d])}if(b)if(c){f=f||getAll(a),g=g||getAll(h);for(d=0,e=f.length;d<e;d++)cloneCopyEvent(f[d],g[d])}else cloneCopyEvent(a,h);return g=getAll(h,"script"),g.length>0&&setGlobalEval(g,!i&&getAll(a,"script")),h},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;for(;m<n;m++){e=a[m];if(e||e===0)if(jQuery.type(e)==="object")jQuery.merge(l,e.nodeType?[e]:e);else if(!rhtml.test(e))l.push(b.createTextNode(e));else{f=f||k.appendChild(b.createElement("div")),g=(rtagName.exec(e)||["",""])[1].toLowerCase(),h=wrapMap[g]||wrapMap._default,f.innerHTML=h[1]+e.replace(rxhtmlTag,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;jQuery.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}}k.textContent="",m=0;while(e=l[m++]){if(d&&jQuery.inArray(e,d)!==-1)continue;i=jQuery.contains(e.ownerDocument,e),f=getAll(k.appendChild(e),"script"),i&&setGlobalEval(f);if(c){j=0;while(e=f[j++])rscriptType.test(e.type||"")&&c.push(e)}}return k},cleanData:function(a){var b,c,d,e,f=jQuery.event.special,g=0;for(;(c=a[g])!==undefined;g++){if(jQuery.acceptData(c)){e=c[data_priv.expando];if(e&&(b=data_priv.cache[e])){if(b.events)for(d in b.events)f[d]?jQuery.event.remove(c,d):jQuery.removeEvent(c,d,b.handle);data_priv.cache[e]&&delete data_priv.cache[e]}}delete data_user.cache[c[data_user.expando]]}}}),jQuery.fn.extend({text:function(a){return access(this,function(a){return a===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){var c,d=a?jQuery.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++)!b&&c.nodeType===1&&jQuery.cleanData(getAll(c)),c.parentNode&&(b&&jQuery.contains(c.ownerDocument,c)&&setGlobalEval(getAll(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++)a.nodeType===1&&(jQuery.cleanData(getAll(a,!1)),a.textContent="");return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return jQuery.clone(this,a,b)})},html:function(a){return access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined&&b.nodeType===1)return b.innerHTML;if(typeof a=="string"&&!rnoInnerhtml.test(a)&&!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rxhtmlTag,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},b.nodeType===1&&(jQuery.cleanData(getAll(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,jQuery.cleanData(getAll(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=concat.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=jQuery.isFunction(m);if(n||j>1&&typeof m=="string"&&!support.checkClone&&rchecked.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j){c=jQuery.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,c.childNodes.length===1&&(c=d);if(d){e=jQuery.map(getAll(c,"script"),disableScript),f=e.length;for(;i<j;i++)g=c,i!==l&&(g=jQuery.clone(g,!0,!0),f&&jQuery.merge(e,getAll(g,"script"))),b.call(this[i],g,i);if(f){h=e[e.length-1].ownerDocument,jQuery.map(e,restoreScript);for(i=0;i<f;i++)g=e[i],rscriptType.test(g.type||"")&&!data_priv.access(g,"globalEval")&&jQuery.contains(h,g)&&(g.src?jQuery._evalUrl&&jQuery._evalUrl(g.src):jQuery.globalEval(g.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(a){var c,d=[],e=jQuery(a),f=e.length-1,g=0;for(;g<=f;g++)c=g===f?this:this.clone(!0),jQuery(e[g])[b](c),push.apply(d,c.get());return this.pushStack(d)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(a){return a.ownerDocument.defaultView.opener?a.ownerDocument.defaultView.getComputedStyle(a,null):window.getComputedStyle(a,null)};(function(){function f(){e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e.innerHTML="",c.appendChild(d);var f=window.getComputedStyle(e,null);a=f.top!=="1%",b=f.width==="4px",c.removeChild(d)}var a,b,c=document.documentElement,d=document.createElement("div"),e=document.createElement("div");if(!e.style)return;e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=e.style.backgroundClip==="content-box",d.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",d.appendChild(e),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return f(),a},boxSizingReliable:function(){return b==null&&f(),b},reliableMarginRight:function(){var a,b=e.appendChild(document.createElement("div"));return b.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",b.style.marginRight=b.style.width="0",e.style.width="1px",c.appendChild(d),a=!parseFloat(window.getComputedStyle(b,null).marginRight),c.removeChild(d),e.removeChild(b),a}})})(),jQuery.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=curCSS(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var e,f,g,h=jQuery.camelCase(b),i=a.style;b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(i,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h];if(c===undefined)return g&&"get"in g&&(e=g.get(a,!1,d))!==undefined?e:i[b];f=typeof c,f==="string"&&(e=rrelNum.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(jQuery.css(a,b)),f="number");if(c==null||c!==c)return;f==="number"&&!jQuery.cssNumber[h]&&(c+="px"),!support.clearCloneStyle&&c===""&&b.indexOf("background")===0&&(i[b]="inherit");if(!g||!("set"in g)||(c=g.set(a,c,d))!==undefined)i[b]=c},css:function(a,b,c,d){var e,f,g,h=jQuery.camelCase(b);return b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(a.style,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),e===undefined&&(e=curCSS(a,b,d)),e==="normal"&&b in cssNormalTransform&&(e=cssNormalTransform[b]),c===""||c?(f=parseFloat(e),c===!0||jQuery.isNumeric(f)?f||0:e):e}}),jQuery.each(["height","width"],function(a,b){jQuery.cssHooks[b]={get:function(a,c,d){if(c)return rdisplayswap.test(jQuery.css(a,"display"))&&a.offsetWidth===0?jQuery.swap(a,cssShow,function(){return getWidthOrHeight(a,b,d)}):getWidthOrHeight(a,b,d)},set:function(a,c,d){var e=d&&getStyles(a);return setPositiveNumber(a,c,d?augmentWidthOrHeight(a,b,d,jQuery.css(a,"boxSizing",!1,e)==="border-box",e):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(a,b){if(b)return jQuery.swap(a,{display:"inline-block"},curCSS,[a,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(a,b){jQuery.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c=="string"?c.split(" "):[c];for(;d<4;d++)e[a+cssExpand[d]+b]=f[d]||f[d-2]||f[0];return e}},rmargin.test(a)||(jQuery.cssHooks[a+b].set=setPositiveNumber)}),jQuery.fn.extend({css:function(a,b){return access(this,function(a,b,c){var d,e,f={},g=0;if(jQuery.isArray(b)){d=getStyles(a),e=b.length;for(;g<e;g++)f[b[g]]=jQuery.css(a,b[g],!1,d);return f}return c!==undefined?jQuery.style(a,b,c):jQuery.css(a,b)},a,b,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(jQuery.cssNumber[c]?"":"px")},cur:function(){var a=Tween.propHooks[this.prop];return a&&a.get?a.get(this):Tween.propHooks._default.get(this)},run:function(a){var b,c=Tween.propHooks[this.prop];return this.options.duration?this.pos=b=jQuery.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=jQuery.css(a.elem,a.prop,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){jQuery.fx.step[a.prop]?jQuery.fx.step[a.prop](a):a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])?jQuery.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},jQuery.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=rfxnum.exec(b),f=e&&e[3]||(jQuery.cssNumber[a]?"":"px"),g=(jQuery.cssNumber[a]||f!=="px"&&+d)&&rfxnum.exec(jQuery.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,jQuery.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&h!==1&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(a,b){jQuery.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],tweeners[c]=tweeners[c]||[],tweeners[c].unshift(b)},prefilter:function(a,b){b?animationPrefilters.unshift(a):animationPrefilters.push(a)}}),jQuery.speed=function(a,b,c){var d=a&&typeof a=="object"?jQuery.extend({},a):{complete:c||!c&&b||jQuery.isFunction(a)&&a,duration:a,easing:c&&b||b&&!jQuery.isFunction(b)&&b};d.duration=jQuery.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){jQuery.isFunction(d.old)&&d.old.call(this),d.queue&&jQuery.dequeue(this,d.queue)},d},jQuery.fn.extend({fadeTo:function(a,b,c,d){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=jQuery.isEmptyObject(a),f=jQuery.speed(b,c,d),g=function(){var b=Animation(this,jQuery.extend({},a),f);(e||data_priv.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return typeof a!="string"&&(c=b,b=a,a=undefined),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=a!=null&&a+"queueHooks",f=jQuery.timers,g=data_priv.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rrun.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem===this&&(a==null||f[e].queue===a)&&(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&jQuery.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=data_priv.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=jQuery.timers,g=d?d.length:0;c.finish=!0,jQuery.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),jQuery.each(["toggle","show","hide"],function(a,b){var c=jQuery.fn[b];jQuery.fn[b]=function(a,d,e){return a==null||typeof a=="boolean"?c.apply(this,arguments):this.animate(genFx(b,!0),a,d,e)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){jQuery.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),jQuery.timers=[],jQuery.fx.tick=function(){var a,b=0,c=jQuery.timers;fxNow=jQuery.now();for(;b<c.length;b++)a=c[b],!a()&&c[b]===a&&c.splice(b--,1);c.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(a){jQuery.timers.push(a),a()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(a,b){return a=jQuery.fx?jQuery.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=document.createElement("input"),b=document.createElement("select"),c=b.appendChild(document.createElement("option"));a.type="checkbox",support.checkOn=a.value!=="",support.optSelected=c.selected,b.disabled=!0,support.optDisabled=!c.disabled,a=document.createElement("input"),a.value="t",a.type="radio",support.radioValue=a.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(a,b){return access(this,jQuery.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){jQuery.removeAttr(this,a)})}}),jQuery.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2)return;if(typeof a.getAttribute===strundefined)return jQuery.prop(a,b,c);if(f!==1||!jQuery.isXMLDoc(a))b=b.toLowerCase(),d=jQuery.attrHooks[b]||(jQuery.expr.match.bool.test(b)?boolHook:nodeHook);if(c===undefined)return d&&"get"in d&&(e=d.get(a,b))!==null?e:(e=jQuery.find.attr(a,b),e==null?undefined:e);if(c!==null)return d&&"set"in d&&(e=d.set(a,c,b))!==undefined?e:(a.setAttribute(b,c+""),c);jQuery.removeAttr(a,b)},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(rnotwhite);if(f&&a.nodeType===1)while(c=f[e++])d=jQuery.propFix[c]||c,jQuery.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!support.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),boolHook={set:function(a,b,c){return b===!1?jQuery.removeAttr(a,c):a.setAttribute(c,c),c}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(a,b){var c=attrHandle[b]||jQuery.find.attr;attrHandle[b]=function(a,b,d){var e,f;return d||(f=attrHandle[b],attrHandle[b]=e,e=c(a,b,d)!=null?b.toLowerCase():null,attrHandle[b]=f),e}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(a,b){return access(this,jQuery.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[jQuery.propFix[a]||a]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;return f=g!==1||!jQuery.isXMLDoc(a),f&&(b=jQuery.propFix[b]||b,e=jQuery.propHooks[b]),c!==undefined?e&&"set"in e&&(d=e.set(a,c,b))!==undefined?d:a[b]=c:e&&"get"in e&&(d=e.get(a,b))!==null?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||rfocusable.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).addClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):" ");if(d){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=jQuery.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=arguments.length===0||typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).removeClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):"");if(d){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?jQuery.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return typeof b=="boolean"&&c==="string"?b?this.addClass(a):this.removeClass(a):jQuery.isFunction(a)?this.each(function(c){jQuery(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var b,d=0,e=jQuery(this),f=a.match(rnotwhite)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else if(c===strundefined||c==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||a===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(rclass," ").indexOf(b)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e)return b=jQuery.valHooks[e.type]||jQuery.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&(c=b.get(e,"value"))!==undefined?c:(c=e.value,typeof c=="string"?c.replace(rreturn,""):c==null?"":c);return}return d=jQuery.isFunction(a),this.each(function(c){var e;if(this.nodeType!==1)return;d?e=a.call(this,c,jQuery(this).val()):e=a,e==null?e="":typeof e=="number"?e+="":jQuery.isArray(e)&&(e=jQuery.map(e,function(a){return a==null?"":a+""})),b=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,e,"value")===undefined)this.value=e})}}),jQuery.extend({valHooks:{option:{get:function(a){var b=jQuery.find.attr(a,"value");return b!=null?b:jQuery.trim(jQuery.text(a))}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!jQuery.nodeName(c.parentNode,"optgroup"))){b=jQuery(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=jQuery.makeArray(b),g=e.length;while(g--){d=e[g];if(d.selected=jQuery.inArray(d.value,f)>=0)c=!0}return c||(a.selectedIndex=-1),f}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(a,b){if(jQuery.isArray(b))return a.checked=jQuery.inArray(jQuery(a).val(),b)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){jQuery.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),jQuery.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(a){return JSON.parse(a+"")},jQuery.parseXML=function(a){var b,c;if(!a||typeof a!="string")return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=undefined}return(!b||b.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+a),b};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):ajaxExtend(jQuery.ajaxSettings,a)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(a,b){function w(a,b,f,h){var j,q,r,t,v,w=b;if(s===2)return;s=2,g&&clearTimeout(g),c=undefined,e=h||"",u.readyState=a>0?4:0,j=a>=200&&a<300||a===304,f&&(t=ajaxHandleResponses(k,u,f)),t=ajaxConvert(k,t,u,j);if(j)k.ifModified&&(v=u.getResponseHeader("Last-Modified"),v&&(jQuery.lastModified[d]=v),v=u.getResponseHeader("etag"),v&&(jQuery.etag[d]=v)),a===204||k.type==="HEAD"?w="nocontent":a===304?w="notmodified":(w=t.state,q=t.data,r=t.error,j=!r);else{r=w;if(a||!w)w="error",a<0&&(a=0)}u.status=a,u.statusText=(b||w)+"",j?n.resolveWith(l,[q,w,u]):n.rejectWith(l,[u,w,r]),u.statusCode(p),p=undefined,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[u,k,j?q:r]),o.fireWith(l,[u,w]),i&&(m.trigger("ajaxComplete",[u,k]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof a=="object"&&(b=a,a=undefined),b=b||{};var c,d,e,f,g,h,i,j,k=jQuery.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?jQuery(l):jQuery.event,n=jQuery.Deferred(),o=jQuery.Callbacks("once memory"),p=k.statusCode||{},q={},r={},s=0,t="canceled",u={readyState:0,getResponseHeader:function(a){var b;if(s===2){if(!f){f={};while(b=rheaders.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return s===2?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return s||(a=r[c]=r[c]||a,q[a]=b),this},overrideMimeType:function(a){return s||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(s<2)for(b in a)p[b]=[p[b],a[b]];else u.always(a[u.status]);return this},abort:function(a){var b=a||t;return c&&c.abort(b),w(0,b),this}};n.promise(u).complete=o.add,u.success=u.done,u.error=u.fail,k.url=((a||k.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=jQuery.trim(k.dataType||"*").toLowerCase().match(rnotwhite)||[""],k.crossDomain==null&&(h=rurl.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ajaxLocParts[1]&&h[2]===ajaxLocParts[2]&&(h[3]||(h[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),k.data&&k.processData&&typeof k.data!="string"&&(k.data=jQuery.param(k.data,k.traditional)),inspectPrefiltersOrTransports(prefilters,k,b,u);if(s===2)return u;i=jQuery.event&&k.global,i&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!rnoContent.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(rquery.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=rts.test(d)?d.replace(rts,"$1_="+nonce++):d+(rquery.test(d)?"&":"?")+"_="+nonce++)),k.ifModified&&(jQuery.lastModified[d]&&u.setRequestHeader("If-Modified-Since",jQuery.lastModified[d]),jQuery.etag[d]&&u.setRequestHeader("If-None-Match",jQuery.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&u.setRequestHeader("Content-Type",k.contentType),u.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)u.setRequestHeader(j,k.headers[j]);if(!k.beforeSend||k.beforeSend.call(l,u,k)!==!1&&s!==2){t="abort";for(j in{success:1,error:1,complete:1})u[j](k[j]);c=inspectPrefiltersOrTransports(transports,k,b,u);if(!c)w(-1,"No Transport");else{u.readyState=1,i&&m.trigger("ajaxSend",[u,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){u.abort("timeout")},k.timeout));try{s=1,c.send(q,w)}catch(v){if(!(s<2))throw v;w(-1,v)}}return u}return u.abort()},getJSON:function(a,b,c){return jQuery.get(a,b,c,"json")},getScript:function(a,b){return jQuery.get(a,undefined,b,"script")}}),jQuery.each(["get","post"],function(a,b){jQuery[b]=function(a,c,d,e){return jQuery.isFunction(c)&&(e=e||d,d=c,c=undefined),jQuery.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),jQuery._evalUrl=function(a){return jQuery.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(a){var b;return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapAll(a.call(this,b))}):(this[0]&&(b=jQuery(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapInner(a.call(this,b))}):this.each(function(){var b=jQuery(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=jQuery.isFunction(a);return this.each(function(c){jQuery(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},jQuery.expr.filters.visible=function(a){return!jQuery.expr.filters.hidden(a)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,b){var c,d=[],e=function(a,b){b=jQuery.isFunction(b)?b():b==null?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===undefined&&(b=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){e(this.name,this.value)});else for(c in a)buildParams(c,a[c],b,e);return d.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=jQuery.prop(this,"elements");return a?jQuery.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&(this.checked||!rcheckableType.test(a))}).map(function(a,b){var c=jQuery(this).val();return c==null?null:jQuery.isArray(c)?jQuery.map(c,function(a){return{name:b.name,value:a.replace(rCRLF,"\r\n")}}):{name:b.name,value:c.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var a in xhrCallbacks)xhrCallbacks[a]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(a){var b;if(support.cors||xhrSupported&&!a.crossDomain)return{send:function(c,d){var e,f=a.xhr(),g=++xhrId;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete xhrCallbacks[g],b=f.onload=f.onerror=null,a==="abort"?f.abort():a==="error"?d(f.status,f.statusText):d(xhrSuccessStatus[f.status]||f.status,f.statusText,typeof f.responseText=="string"?{text:f.responseText}:undefined,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=xhrCallbacks[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return jQuery.globalEval(a),a}}}),jQuery.ajaxPrefilter("script",function(a){a.cache===undefined&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),jQuery.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=jQuery("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e(a.type==="error"?404:200,a.type)}),document.head.appendChild(b[0])},abort:function(){c&&c()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[a]=!0,a}}),jQuery.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=a.jsonp!==!1&&(rjsonp.test(a.url)?"url":typeof a.data=="string"&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(a.data)&&"data");if(g||a.dataTypes[0]==="jsonp")return d=a.jsonpCallback=jQuery.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(rjsonp,"$1"+d):a.jsonp!==!1&&(a.url+=(rquery.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return f||jQuery.error(d+" was not called"),f[0]},a.dataTypes[0]="json",e=window[d],window[d]=function(){f=arguments},c.always(function(){window[d]=e,a[d]&&(a.jsonpCallback=b.jsonpCallback,oldCallbacks.push(d)),f&&jQuery.isFunction(e)&&e(f[0]),f=e=undefined}),"script"}),jQuery.parseHTML=function(a,b,c){if(!a||typeof a!="string")return null;typeof b=="boolean"&&(c=b,b=!1),b=b||document;var d=rsingleTag.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=jQuery.buildFragment([a],b,e),e&&e.length&&jQuery(e).remove(),jQuery.merge([],d.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(a,b,c){if(typeof a!="string"&&_load)return _load.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=jQuery.trim(a.slice(h)),a=a.slice(0,h)),jQuery.isFunction(b)?(c=b,b=undefined):b&&typeof b=="object"&&(e="POST"),g.length>0&&jQuery.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?jQuery("<div>").append(jQuery.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){jQuery.fn[b]=function(a){return this.on(b,a)}}),jQuery.expr.filters.animated=function(a){return jQuery.grep(jQuery.timers,function(b){return a===b.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=jQuery.css(a,"position"),l=jQuery(a),m={};k==="static"&&(a.style.position="relative"),h=l.offset(),f=jQuery.css(a,"top"),i=jQuery.css(a,"left"),j=(k==="absolute"||k==="fixed")&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),jQuery.isFunction(b)&&(b=b.call(a,c,h)),b.top!=null&&(m.top=b.top-h.top+g),b.left!=null&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},jQuery.fn.extend({offset:function(a){if(arguments.length)return a===undefined?this:this.each(function(b){jQuery.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(!f)return;return b=f.documentElement,jQuery.contains(b,d)?(typeof d.getBoundingClientRect!==strundefined&&(e=d.getBoundingClientRect()),c=getWindow(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(!this[0])return;var a,b,c=this[0],d={top:0,left:0};return jQuery.css(c,"position")==="fixed"?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),jQuery.nodeName(a[0],"html")||(d=a.offset()),d.top+=jQuery.css(a[0],"borderTopWidth",!0),d.left+=jQuery.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-jQuery.css(c,"marginTop",!0),left:b.left-d.left-jQuery.css(c,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||docElem;while(a&&!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")a=a.offsetParent;return a||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;jQuery.fn[a]=function(d){return access(this,function(a,d,e){var f=getWindow(a);if(e===undefined)return f?f[b]:a[d];f?f.scrollTo(c?window.pageXOffset:e,c?e:window.pageYOffset):a[d]=e},a,d,arguments.length,null)}}),jQuery.each(["top","left"],function(a,b){jQuery.cssHooks[b]=addGetHookIf(support.pixelPosition,function(a,c){if(c)return c=curCSS(a,b),rnumnonpx.test(c)?jQuery(a).position()[b]+"px":c})}),jQuery.each({Height:"height",Width:"width"},function(a,b){jQuery.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){jQuery.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!="boolean"),g=c||(d===!0||e===!0?"margin":"border");return access(this,function(b,c,d){var e;return jQuery.isWindow(b)?b.document.documentElement["client"+a]:b.nodeType===9?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):d===undefined?jQuery.css(b,c,g):jQuery.style(b,c,d,g)},b,f?d:undefined,f,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(a){return window.$===jQuery&&(window.$=_$),a&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),function(){function a(a){var b=a.naturalWidth,c=a.naturalHeight;if(b*c>1048576){var d=document.createElement("canvas");d.width=d.height=1;var e=d.getContext("2d");return e.drawImage(a,-b+1,0),e.getImageData(0,0,1,1).data[3]===0}return!1}function b(a,b,c){var d=document.createElement("canvas");d.width=1,d.height=c;var e=d.getContext("2d");e.drawImage(a,0,0);var f=e.getImageData(0,0,1,c).data,g=0,h=c,i=c;while(i>g){var j=f[(i-1)*4+3];j===0?h=i:g=i,i=h+g>>1}var k=i/c;return k===0?1:k}function c(a,b,c){var e=document.createElement("canvas");return d(a,e,b,c),e.toDataURL("image/jpeg",b.quality||.8)}function d(c,d,f,g){var h=c.naturalWidth,i=c.naturalHeight;if(!(h+i))return;var j=f.width,k=f.height,l=d.getContext("2d");l.save(),j||(j=Math.min(h,1024),k=i*j/h),e(d,l,j,k,f.orientation);var m=a(c);m&&(h/=2,i/=2);var n=1024,o=document.createElement("canvas");o.width=o.height=n;var p=o.getContext("2d"),q=g?b(c,h,i):1,r=Math.ceil(n*j/h),s=Math.ceil(n*k/i/q),t=0,u=0;while(t<i){var v=0,w=0;while(v<h)p.clearRect(0,0,n,n),p.drawImage(c,-v,-t),l.drawImage(o,0,0,n,n,w,u,r,s),v+=n,w+=r;t+=n,u+=s}l.restore(),o=p=null}function e(a,b,c,d,e){switch(e){case 5:case 6:case 7:case 8:a.width=d,a.height=c;break;default:a.width=c,a.height=d}switch(e){case 2:b.translate(c,0),b.scale(-1,1);break;case 3:b.translate(c,d),b.rotate(Math.PI);break;case 4:b.translate(0,d),b.scale(1,-1);break;case 5:b.rotate(.5*Math.PI),b.scale(1,-1);break;case 6:b.rotate(.5*Math.PI),b.translate(0,-d);break;case 7:b.rotate(.5*Math.PI),b.translate(c,-d),b.scale(-1,1);break;case 8:b.rotate(-0.5*Math.PI),b.translate(-c,0);break;default:}}function g(a){if(window.Blob&&a instanceof Blob){if(!f)throw Error("No createObjectURL function found to create blob url");var b=new Image;b.src=f.createObjectURL(a),this.blob=a,a=b}if(!a.naturalWidth&&!a.naturalHeight){var c=this;a.onload=a.onerror=function(){var a=c.imageLoadListeners;if(a){c.imageLoadListeners=null;for(var b=0,d=a.length;b<d;b++)a[b]()}},this.imageLoadListeners=[]}this.srcImage=a}var f=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;g.prototype.render=function(a,b,e){if(this.imageLoadListeners){var g=this;this.imageLoadListeners.push(function(){g.render(a,b,e)});return}b=b||{};var h=this.srcImage.naturalWidth,i=this.srcImage.naturalHeight,j=b.width,k=b.height,l=b.maxWidth,m=b.maxHeight,n=!this.blob||this.blob.type==="image/jpeg";j&&!k?k=i*j/h<<0:k&&!j?j=h*k/i<<0:(j=h,k=i),l&&j>l&&(j=l,k=i*j/h<<0),m&&k>m&&(k=m,j=h*k/i<<0);var o={width:j,height:k};for(var p in b)o[p]=b[p];var q=a.tagName.toLowerCase();q==="img"?a.src=c(this.srcImage,o,n):q==="canvas"&&d(this.srcImage,a,o,n),typeof this.onrender=="function"&&this.onrender(a),e&&e(),this.blob&&(this.blob=null,f.revokeObjectURL(this.srcImage.src))},typeof define=="function"&&define.amd?define("megapix-image",[],function(){return g}):typeof exports=="object"?module.exports=g:this.MegaPixImage=g}(),function(a){typeof define=="function"&&define.amd!=undefined?define("tomLib",["jquery","megapix-image"],a):a(jQuery,MegaPixImage,!0)}(function(a,b,c){function e(a,b,c,d,e){}function f(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(a.style[c]!==undefined)return{end:b[c]};return!1}var d={};if(c===!0)var b=window.MegaPixImage;d.support={},d.prefixStyle=function(a){var b=document.createElement("div"),c="webkitT,t,,MozT,msT,OT".split(","),d;a=a.slice(1);for(d in c)if(b.style[c[d]+a]!=undefined)return c[d]+a},d.animateFrame=function(a,b,c,d,e,f,g,h,i,j,k,l){function s(){var a=!0;this.list=o,this.isInit=!0,this.reset=t,this.interval=null,this.timeout=null,this.isPlay=!0,this.stop=function(){a=!1},this.start=function(){a=!0},this.getPlayState=function(){return a}}function t(){clearInterval(m.interval),o.filter(function(a,b){return b>0}).removeClass("show"),m.start(),clearTimeout(m.timeout)}var m=a.data("plugin"),n,o,p=m?!0:!1,q=m?m.getPlayState():!1;if(q)return;if(!p){for(var r=0;r<=c;r++)n="png-frame p"+(r+1)+(r==0?" show":""),a.append("<div class='"+n+"'></div>");o=a.find(".png-frame"),a.data("plugin",m=new s)}else m.reset(),o=m.list;return function(){function r(){m.interval=setInterval(function(){if(!m.getPlayState())return;if(k&&k==a){if(!p){p=+(new Date);return}if(+(new Date)-p<l)return;k=null}q=a,e||a++,a==c&&(g&&g--,clearInterval(m.interval),f&&(g!=0||g==null)&&(m.timeout=setTimeout(function(){e&&(a=0),r()},h)),f&&g==0?(m.stop(),typeof i=="function"&&i()):f||m.stop(),typeof i=="function"&&f==0&&i()),e&&a++,a==c+1&&(a=0),o.eq(a).addClass("show"),o.eq(q).removeClass("show"),typeof j=="function"&&j(a)},d)}var a=b,n,p,q;r()}(),m},e.gender=function(a){},function(){function b(b,d){this.dfdList=[],this.$dfdList=[],this.callback=d;var e=a.Deferred(),f;for(var g=0,h=b;g<h;g++)f=new c,e.then(f),g==0&&e.resolve(),e=f.defer,this.dfdList.push(f),this.$dfdList.push(f.defer);typeof d=="function"&&a.when(this.$dfdList).then(d)}function c(){this.defer=a.Deferred(),this.cstate="unfilled"}b.prototype.getItem=function(a){return this.dfdList[a]},b.prototype.dealItem=function(a){var b=!0;for(var c=a-1;c>-1;c--)this.getItem(c).defer.state()!=="resolved"&&(b=!1);return b?(this.getItem(a).changeState("filled"),this.dealWaitList(a)):this.getItem(a).changeState("wait"),this.getItem(a).cstate},b.prototype.dealWaitList=function(a){var b=this.dfdList;for(var c=a+1,d=b.length;c<d;c++){if(this.getItem(c).cstate!=="wait")return!1;this.getItem(c).changeState("filled")}},c.prototype.addCallbacks=function(a,b){this.defer.done(a).fail(b)},c.prototype.changeState=function(a){this.cstate=a,a==="filled"&&this.defer.resolve()},d.DeferredList=b}(),d.getParams=function(a){if(!a)return;typeof a=="string"&&(a=[a]);if(typeof a.slice!="function")return;var b=window.location.search.slice(1),c=b.split("&"),d=0,e=[],f;for(var g=0,h=c.length;g<h;g++)f=c[g].split("="),c[g]={},f.length==2&&(c[g].param=f[0],c[g].value=f[1]);for(var i=0,h=a.length;i<h;i++){while(d<c.length)c[d]["param"]==a[i]?e.push(decodeURI(c[d].value)):d==c.length-1&&!e[i]&&e.push(null),d++;d=0}return e};var g=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;return d.cropImage=function(c){function u(){var a=j.preview.naturalWidth,b=j.preview.naturalHeight,d,e,f=0,g=0,h,i=c.cropWidth*c.devicePixelRatio,k=c.cropHeight*c.devicePixelRatio;return m.clearRect(0,0,l.width,l.height),i/k<a/b?(console.log("填高"),h=k/b,e=k,d=a*h,f=-(a*h-i)/2):(console.log("填宽"),h=i/a,d=i,e=b*h,g=-(b*h-k)/2),{x:f,y:g,dWidth:d,dHeight:e,scale:h,iWidth:a,iHeight:b}}function v(a){var b=u(),d=-b.dWidth/2*j.scale+j.x,e=-b.dHeight/2*j.scale+j.y,f;return a=a||{},a.lowDpi&&c.enableRatio&&(b.dHeight/=c.devicePixelRatio,b.dWidth/=c.devicePixelRatio,l.width/=c.devicePixelRatio,l.height/=c.devicePixelRatio),m.save(),a.background&&(m.fillStyle=a.background,m.fillRect(0,0,l.width,l.height)),m.translate(l.width/2,l.height/2),m.rotate(Math.PI*j.rotate/180),j.rotate==90?(d=-b.dWidth/2*j.scale+j.y,e=-b.dHeight/2*j.scale-j.x):j.rotate==180?(d=-b.dWidth/2*j.scale-j.x,e=-b.dHeight/2*j.scale-j.y):j.rotate==270&&(d=-b.dWidth/2*j.scale-j.y,e=-b.dHeight/2*j.scale+j.x),m.drawImage(j.preview,d,e,b.dWidth*j.scale,b.dHeight*j.scale),m.restore(),f=l.toDataURL("image/"+a.type?a.type:"png"),a.lowDpi&&c.enableRatio&&(l.width*=c.devicePixelRatio,l.height*=c.devicePixelRatio),f}function w(){}function x(b){a.extend(j,b)}var e="ontouchstart"in window?!0:!1,f="touchstart mousedown",h="touchmove mousemove",i="touchend mouseup";console.log(),c=a.extend({enableRatio:!0,cropWidth:260,cropHeight:260,container:document.body,canvas:document.createElement("canvas"),success:function(a){},onChange:function(a){},onLoad:function(a){}},c),c.devicePixelRatio=c.enableRatio?window.devicePixelRatio:1;var j={preview:null,moveX:0,moveY:0,scale:1,rotate:0,ratio:c.devicePixelRatio},k=d.prefixStyle("transform"),l=c.canvas,m=l.getContext("2d"),n,o,p,q=a(l).offset(),r=c.bindPreview||a(),s;a(l).prop({width:c.cropWidth*c.devicePixelRatio,height:c.cropHeight*c.devicePixelRatio}).css({width:c.cropWidth,height:c.cropHeight});if(c.bindFile)if(typeof c.bindFile=="string"){var t;t=new Image,t.onload=v.bind(null,t),t.src=c.bindFile,j.preview=t}else a(c.bindFile).is("input[type=file]")?(c.bindFile.attr("cropId",++d.cropImage.id),x({x:0,y:0,scale:1}),a(document).delegate("[cropId="+d.cropImage.id+"]","change",function(){r.prop("src",""),m.clearRect(0,0,l.width,l.height);if(this.files){var a,d,e=this.files[0],f=new Image,h=!0;f.onload=function(){h==1&&(d=new b(f),d.render(f,{maxWidth:800,maxHeight:800,quality:1},function(){setTimeout(function(){j.preview=f;var a=u();r.prop("style",""),c.onLoad({originSrc:f.src,width:a.dWidth,height:a.dHeight,ratio:j.ratio,x:a.x,y:a.y,dWidth:a.dWidth,dHeight:a.dHeight,scale:a.scale})},0)}),h=!1)},f.src=g.createObjectURL(e)}c.bindFile.after(c.bindFile.clone()).remove()})):(j.preview=c.bindFile,v());return c.useHammer||(a(document).on(i,function(a){s=!1}),a(l).on(f,function(b){s=!0,b=b.originalEvent,q=a(l).offset();var c=e?b.targetTouches[0].clientX-q.left:b.clientX-q.left,d=e?b.targetTouches[0].clientY-q.top:b.clientY-q.top;n=c,o=d}),a(l).on(h,function(a){if(!s)return;a=a.originalEvent;var b=e?a.targetTouches[0].clientX-q.left:a.clientX-q.left,c=e?a.targetTouches[0].clientY-q.top:a.clientY-q.top;j.moveX+=b-n,j.moveY+=c-o,r.css(k,"translate3d("+j.moveX+"px,"+j.moveY+"px,0)"),n=b,o=c})),{getCropFile:v,getCropInfo:u,setCropStyle:x}},d.cropImage.id=0,d.animateGroup=function(a){function g(){e.addClass(a.frameClass[f]||a.frameClass[0])}var b=a.group,c,d=a.duration+(a.gap||0),e=b.eq(0),f=a.startIndex||0;return setTimeout(function(){g(),c=setInterval(function(){a.classSwitch!==!1&&e.removeClass(a.frameClass[f]||a.frameClass[0]),f++,f>b.length-1&&(a.loopTimes--,f=0),e=b.eq(f),(a.loopTimes==null||a.loopTimes!=0)&&g(),a.loopTimes==0&&(clearInterval(c),typeof a.callback=="function"&&a.callback())},d+70)},a.waitTime||0),c},c===!0&&(window.tomLib=d),d}),function(a){typeof define=="function"&&define.amd!=undefined?define("iscroll-lite",[],a):a(window,document,Math)}(function(a,b,c){function f(a,c){this.wrapper=typeof a=="string"?b.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in c)this.options[d]=c[d];this.translateZ=this.options.HWCompositing&&e.hasPerspective?" translateZ(0)":"",this.options.useTransition=e.hasTransition&&this.options.useTransition,this.options.useTransform=e.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY,this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=typeof this.options.bounceEasing=="string"?e.ease[this.options.bounceEasing]||e.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}a=a?a:this,b=b?b:a.document,c=c?c:a.Math;var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},e=function(){function g(a){return f===!1?!1:f===""?a:f+a.charAt(0).toUpperCase()+a.substr(1)}var d={},e=b.createElement("div").style,f=function(){var a=["t","webkitT","MozT","msT","OT"],b,c=0,d=a.length;for(;c<d;c++){b=a[c]+"ransform";if(b in e)return a[c].substr(0,a[c].length-1)}return!1}();d.getTime=Date.now||function(){return(new Date).getTime()},d.extend=function(a,b){for(var c in b)a[c]=b[c]},d.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},d.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},d.prefixPointerEvent=function(b){return a.MSPointerEvent?"MSPointer"+b.charAt(9).toUpperCase()+b.substr(10):b},d.momentum=function(a,b,d,e,f,g){var h=a-b,i=c.abs(h)/d,j,k;return g=g===undefined?6e-4:g,j=a+i*i/(2*g)*(h<0?-1:1),k=i/g,j<e?(j=f?e-f/2.5*(i/8):e,h=c.abs(j-a),k=h/i):j>0&&(j=f?f/2.5*(i/8):0,h=c.abs(a)+j,k=h/i),{destination:c.round(j),duration:k}};var h=g("transform");return d.extend(d,{hasTransform:h!==!1,hasPerspective:g("perspective")in e,hasTouch:"ontouchstart"in a,hasPointer:a.PointerEvent||a.MSPointerEvent,hasTransition:g("transition")in e}),d.isBadAndroid=/Android /.test(a.navigator.appVersion)&&!/Chrome\/\d/.test(a.navigator.appVersion),d.extend(d.style={},{transform:h,transitionTimingFunction:g("transitionTimingFunction"),transitionDuration:g("transitionDuration"),transitionDelay:g("transitionDelay"),transformOrigin:g("transformOrigin")}),d.hasClass=function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return c.test(a.className)},d.addClass=function(a,b){if(d.hasClass(a,b))return;var c=a.className.split(" ");c.push(b),a.className=c.join(" ")},d.removeClass=function(a,b){if(!d.hasClass(a,b))return;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")},d.offset=function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},d.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},d.extend(d.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),d.extend(d.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,d=.4;return a===0?0:a==1?1:d*c.pow(2,-10*a)*c.sin((a-b/4)*2*c.PI/b)+1}}}),d.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},d.click=function(a){var c=a.target,d;/(SELECT|INPUT|TEXTAREA)/i.test(c.tagName)||(d=b.createEvent("MouseEvents"),d.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),d._constructed=!0,c.dispatchEvent(d))},d}();return f.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){if(a.target!=this.scroller||!this.isInTransition)return;this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd"))},_start:function(a){if(e.eventType[a.type]!=1&&a.button!==0)return;if(!this.enabled||this.initiated&&e.eventType[a.type]!==this.initiated)return;this.options.preventDefault&&!e.isBadAndroid&&!e.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b=a.touches?a.touches[0]:a,d;this.initiated=e.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=e.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,d=this.getComputedPosition(),this._translate(c.round(d.x),c.round(d.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=b.pageX,this.pointY=b.pageY,this._execEvent("beforeScrollStart")},_move:function(a){if(!this.enabled||e.eventType[a.type]!==this.initiated)return;this.options.preventDefault&&a.preventDefault();var b=a.touches?a.touches[0]:a,d=b.pageX-this.pointX,f=b.pageY-this.pointY,g=e.getTime(),h,i,j,k;this.pointX=b.pageX,this.pointY=b.pageY,this.distX+=d,this.distY+=f,j=c.abs(this.distX),k=c.abs(this.distY);if(g-this.endTime>300&&j<10&&k<10)return;!this.directionLocked&&!this.options.freeScroll&&(j>k+this.options.directionLockThreshold?this.directionLocked="h":k>=j+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n");if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")a.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}f=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")a.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}d=0}d=this.hasHorizontalScroll?d:0,f=this.hasVerticalScroll?f:0,h=this.x+d,i=this.y+f;if(h>0||h<this.maxScrollX)h=this.options.bounce?this.x+d/3:h>0?0:this.maxScrollX;if(i>0||i<this.maxScrollY)i=this.options.bounce?this.y+f/3:i>0?0:this.maxScrollY;this.directionX=d>0?-1:d<0?1:0,this.directionY=f>0?-1:f<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(h,i),g-this.startTime>300&&(this.startTime=g,this.startX=this.x,this.startY=this.y)},_end:function(a){if(!this.enabled||e.eventType[a.type]!==this.initiated)return;this.options.preventDefault&&!e.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b=a.changedTouches?a.changedTouches[0]:a,d,f,g=e.getTime()-this.startTime,h=c.round(this.x),i=c.round(this.y),j=c.abs(h-this.startX),k=c.abs(i-this.startY),l=0,m="";this.isInTransition=0,this.initiated=0,this.endTime=e.getTime();if(this.resetPosition(this.options.bounceTime))return;this.scrollTo(h,i);if(!this.moved){this.options.tap&&e.tap(a,this.options.tap),this.options.click&&e.click(a),this._execEvent("scrollCancel");return}if(this._events.flick&&g<200&&j<100&&k<100){this._execEvent("flick");return}this.options.momentum&&g<300&&(d=this.hasHorizontalScroll?e.momentum(this.x,this.startX,g,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:h,duration:0},f=this.hasVerticalScroll?e.momentum(this.y,this.startY,g,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:i,duration:0},h=d.destination,i=f.destination,l=c.max(d.duration,f.duration),this.isInTransition=1);if(h!=this.x||i!=this.y){if(h>0||h<this.maxScrollX||i>0||i<this.maxScrollY)m=e.ease.quadratic;this.scrollTo(h,i,l,m);return}this._execEvent("scrollEnd")},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var a=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=e.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(!this._events[a])return;var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)},_execEvent:function(a){if(!this._events[a])return;var b=0,c=this._events[a].length;if(!c)return;for(;b<c;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||e.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,f,g){a=a.nodeType?a:this.scroller.querySelector(a);if(!a)return;var h=e.offset(a);h.left-=this.wrapperOffset.left,h.top-=this.wrapperOffset.top,d===!0&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),f===!0&&(f=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),h.left-=d||0,h.top-=f||0,h.left=h.left>0?0:h.left<this.maxScrollX?this.maxScrollX:h.left,h.top=h.top>0?0:h.top<this.maxScrollY?this.maxScrollY:h.top,b=b===undefined||b===null||b==="auto"?c.max(c.abs(this.x-h.left),c.abs(this.y-h.top)):b,this.scrollTo(h.left,h.top,b,g)},_transitionTime:function(a){a=a||0,this.scrollerStyle[e.style.transitionDuration]=a+"ms",!a&&e.isBadAndroid&&(this.scrollerStyle[e.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(a){this.scrollerStyle[e.style.transitionTimingFunction]=a},_translate:function(a,b){this.options.useTransform?this.scrollerStyle[e.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b},_initEvents:function(b){var c=b?e.removeEvent:e.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),e.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,e.prefixPointerEvent("pointerdown"),this),c(d,e.prefixPointerEvent("pointermove"),this),c(d,e.prefixPointerEvent("pointercancel"),this),c(d,e.prefixPointerEvent("pointerup"),this)),e.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b=a.getComputedStyle(this.scroller,null),c,d;return this.options.useTransform?(b=b[e.style.transform].split(")")[0].split(", "),c=+(b[12]||b[4]),d=+(b[13]||b[5])):(c=+b.left.replace(/[^-\d.]/g,""),d=+b.top.replace(/[^-\d.]/g,"")),{x:c,y:d}},_animate:function(a,b,c,f){function l(){var m=e.getTime(),n,o,p;if(m>=k){g.isAnimating=!1,g._translate(a,b),g.resetPosition(g.options.bounceTime)||g._execEvent("scrollEnd");return}m=(m-j)/c,p=f(m),n=(a-h)*p+h,o=(b-i)*p+i,g._translate(n,o),g.isAnimating&&d(l)}var g=this,h=this.x,i=this.y,j=e.getTime(),k=j+c;this.isAnimating=!0,l()},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}}},f.utils=e,typeof module!="undefined"&&module.exports?module.exports=f:a.IScroll=f,f}),function(a){function b(){if(!c.READY){c.event.determineEventTypes();for(var a in c.gestures)c.gestures.hasOwnProperty(a)&&c.detection.register(c.gestures[a]);c.event.onTouch(document,c.EVENT_MOVE,c.detection.detect),c.event.onTouch(document,c.EVENT_END,c.detection.endDetect),c.READY=!0}}var c=function(a,b){return new c.Instance(a,b||{})};c.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},c.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,c.HAS_TOUCHEVENTS="ontouchstart"in a,c.EVENT_TYPES={},c.DIRECTION_DOWN="down",c.DIRECTION_LEFT="left",c.DIRECTION_UP="up",c.DIRECTION_RIGHT="right",c.POINTER_MOUSE="mouse",c.POINTER_TOUCH="touch",c.POINTER_PEN="pen",c.EVENT_START="start",c.EVENT_MOVE="move",c.EVENT_END="end",c.plugins={},c.READY=!1,c.Instance=function(a,d){var e=this;return b(),this.element=a,this.enabled=!0,this.options=c.utils.extend(c.utils.extend({},c.defaults),d||{}),this.options.stop_browser_behavior&&c.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),c.event.onTouch(a,c.EVENT_START,function(a){e.enabled&&c.detection.startDetect(e,a)}),this},c.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=document.createEvent("Event");return c.initEvent(a,!0,!0),c.gesture=b,this.element.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var d=null,e=!1,f=!1;c.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;d.length>e;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,g){var h=this;this.bindDom(a,c.EVENT_TYPES[b],function(j){var k=j.type.toLowerCase();return k.match(/mouseup/)&&f?(f=!1,void 0):((k.match(/touch/)||k.match(/mouse/)&&1===j.which||c.HAS_POINTEREVENTS&&k.match(/down/))&&(e=!0),k.match(/touch|pointer/)&&(f=!0),!e||f&&k.match(/mouse/)||(c.HAS_POINTEREVENTS&&b!=c.EVENT_END&&c.PointerEvent.updatePointer(b,j),b===c.EVENT_END&&null!==d?j=d:d=j,g.call(c.detection,h.collectEventData(a,b,j)),c.HAS_POINTEREVENTS&&b==c.EVENT_END&&c.PointerEvent.updatePointer(b,j)),k.match(/up|cancel|end/)&&(e=!1,d=null,c.PointerEvent.reset()),void 0)})},determineEventTypes:function(){var a;a=c.HAS_POINTEREVENTS?c.PointerEvent.getEvents():["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],c.EVENT_TYPES[c.EVENT_START]=a[0],c.EVENT_TYPES[c.EVENT_MOVE]=a[1],c.EVENT_TYPES[c.EVENT_END]=a[2]},getTouchList:function(a){return c.HAS_POINTEREVENTS?c.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,d){var e=this.getTouchList(d,b),f=c.POINTER_TOUCH;return(d.type.match(/mouse/)||c.PointerEvent.matchType(c.POINTER_MOUSE,d))&&(f=c.POINTER_MOUSE),{center:c.utils.getCenter(e),timestamp:d.timestamp||(new Date).getTime(),target:d.target,touches:e,eventType:b,pointerType:f,srcEvent:d,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return c.detection.stopDetect()}}}},c.PointerEvent={pointers:{},getTouchList:function(){var a=this.pointers,b=[];return Object.keys(a).sort().forEach(function(c){b.push(a[c])}),b},updatePointer:function(a,b){a==c.EVENT_END?delete this.pointers[b.pointerId]:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b)},matchType:function(a,b){if(!b.pointerType)return!1;var d={};return d[c.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==c.POINTER_MOUSE,d[c.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==c.POINTER_TOUCH,d[c.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==c.POINTER_PEN,d[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},c.utils={extend:function(a,b){for(var c in b)a[c]=b[c];return a},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var d=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return d>=e?a.pageX-b.pageX>0?c.DIRECTION_LEFT:c.DIRECTION_RIGHT:a.pageY-b.pageY>0?c.DIRECTION_UP:c.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==c.DIRECTION_UP||a==c.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;d.length>e;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},c.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:c.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,d=this.gestures.length;d>c;c++){var e=this.gestures[c];if(!this.stopped&&b[e.name]!==!1&&e.handler.call(e,a,this.current.inst)===!1){this.stopDetect();break}}this.current&&(this.current.lastEvent=a)}},endDetect:function(a){this.detect(a),this.stopDetect()},stopDetect:function(){this.previous=c.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var d=0,e=a.touches.length;e>d;d++)b.touches.push(c.utils.extend({},a.touches[d]))}var f=a.timestamp-b.timestamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=c.utils.getVelocity(f,g,h);return c.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:c.utils.getDistance(b.center,a.center),angle:c.utils.getAngle(b.center,a.center),direction:c.utils.getDirection(b.center,a.center),scale:c.utils.getScale(b.touches,a.touches),rotation:c.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var b=a.defaults||{};return b[a.name]===void 0&&(b[a.name]=!0),c.utils.extend(c.defaults,b),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},c.gestures=c.gestures||{},c.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case c.EVENT_START:clearTimeout(this.timer),c.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==c.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case c.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case c.EVENT_END:clearTimeout(this.timer)}}},c.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==c.EVENT_END){var d=c.detection.previous;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c.detection.current.name=d&&"tap"==d.name&&a.timestamp-d.lastEvent.timestamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance?"doubletap":"tap",b.trigger(c.detection.current.name,a)}}},c.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==c.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},c.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1},triggered:!1,handler:function(a,b){if(c.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case c.EVENT_START:this.triggered=!1;break;case c.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&c.detection.current.name!=this.name)return;c.detection.current.name=this.name;var d=c.detection.current.lastEvent.direction;b.options.drag_lock_to_axis&&d!==a.direction&&(a.direction=c.utils.isVertical(d)?0>a.deltaY?c.DIRECTION_UP:c.DIRECTION_DOWN:0>a.deltaX?c.DIRECTION_LEFT:c.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&c.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!c.utils.isVertical(a.direction))&&a.preventDefault();break;case c.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},c.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(c.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(2>a.touches.length))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case c.EVENT_START:this.triggered=!1;break;case c.EVENT_MOVE:var d=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(b.options.transform_min_scale>d&&b.options.transform_min_rotation>e)return;c.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),d>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case c.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},c.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1},handler:function(a,b){b.options.prevent_default&&a.preventDefault(),a.eventType==c.EVENT_START&&b.trigger(this.name,a)}},c.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==c.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=c:(a.Hammer=c,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return c}))}(this),define("hammer",function(){}),function(a){typeof define=="function"&&define.amd!=undefined?define("hammer.fake",["hammer","jquery"],a):a(Hammer,jQuery)}(function(a,b){a.plugins.fakeMultitouch=function(){var b=!1;a.HAS_POINTEREVENTS=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>=1,a.event.getTouchList=function(c,d){if(a.HAS_POINTEREVENTS)return a.PointerEvent.getTouchList();if(c.touches)return c.touches;d==a.EVENT_START&&(b=!1);if(c.shiftKey){b||(b={pageX:c.pageX,pageY:c.pageY});var e=b.pageX-c.pageX,f=b.pageY-c.pageY;return[{identifier:1,pageX:b.pageX-e-50,pageY:b.pageY-f- -50,target:c.target},{identifier:2,pageX:b.pageX+e- -50,pageY:b.pageY+f-50,target:c.target}]}return b=!1,[{identifier:1,pageX:c.pageX,pageY:c.pageY,target:c.target}]}}}),function(a){typeof define=="function"&&define.amd!=undefined?define("hammer.showtouch",["hammer","jquery"],a):a(Hammer,jQuery)}(function(a,b){a.plugins.showTouches=function(c){function g(){for(var a in e)e.hasOwnProperty(a)&&!f[a]&&(e[a].remove(),delete e[a])}var d='<div style="position:absolute;z-index:9999;left:0;top:0;height:14px;width:14px;border:solid 2px #777;background:rgba(255,255,255,.7);border-radius:20px;pointer-events:none;margin-top:-9px;margin-left:-9px;"></div>',e={},f={};a.detection.register({name:"show_touches",priority:0,handler:function(h,i){f={};if(h.pointerType!=a.POINTER_MOUSE&&!c){g();return}for(var j=0,k=h.touches.length;j<k;j++){var l=h.touches[j],m=l.identifier;f[m]=l,e[m]||(e[m]=b(d).appendTo(document.body)),e[m].css({left:l.pageX,top:l.pageY})}g()}})}}),function(a){typeof define=="function"&&define.amd!=undefined?define("tomPlugin",["jquery","hammer","hammer.fake","hammer.showtouch","megapix-image"],a):a()}(function(a){(function(){function c(b){return this.each(function(){var c=a(this),e=c.data("tom.hammer"),f=a.extend({},d.DEFAULTS,c.data(),typeof b=="object"&&b);e||c.data("tom.hammer",e=new d(this,f)),typeof f=="string"&&e[f]()})}function d(a,b){function p(a){switch(a.type){case"touch":j=i,l=k;break;case"drag":c=a.gesture.deltaX+e,d=a.gesture.deltaY+f,b.gestureCb.call(n,{x:c,y:d});break;case"transform":k=l+a.gesture.rotation,i=Math.max(0,Math.min(j*a.gesture.scale,10)),b.gestureCb.call(n,{scale:i,rotate:k});break;case"dragend":e=c,f=d}}console.log(b.gestureCb.toString());var c=0,d=0,e=0,f=0,g=0,h=0,i=1,j=1,k=1,l,m=0,n=this,o=Hammer(a,b);o.on("touch drag dragend transform",function(a){n.isStop||p(a)}),this.reset=function(){c=0,d=0,e=0,f=0,g=0,h=0,i=1,j=1,k=1}}!Hammer.HAS_TOUCHEVENTS&&!Hammer.HAS_POINTEREVENTS&&Hammer.plugins.showTouches(),!Hammer.HAS_TOUCHEVENTS&&!Hammer.HAS_POINTEREVENTS&&Hammer.plugins.fakeMultitouch(),a.fn.hammer=c,a.fn.hammer.Constructor=d,a.fn.hammer.noConflict=function(){return a.fn.hammer=b,this};var b=a.fn.hammer;d.DEFAULTS={transform_always_block:!0,transform_min_scale:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_min_distance:0,gestureCb:function(){console.log("���������ƻص�")}},d.prototype.stop=function(){this.isStop=!0},d.prototype.start=function(){this.isStop=!1}})()}),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z={}.hasOwnProperty,A=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},B=[].slice,C=this;x=Array.prototype.slice,a=function(a,b){return b==null&&(b=document),typeof a=="object"||typeof exports!="undefined"&&exports!==null?a:b.querySelector(a)},v=function(){function a(){}return a.uniqid=function(){var a;return a=0,{get:function(){return a++}}}(),a.extend=function(a){var b,c,d,e,f,g;c=a,e=x.call(arguments,1);for(f=0,g=e.length;f<g;f++){b=e[f];for(d in b){if(!z.call(b,d))continue;c[d]=b[d]}}return c},a.clampRGB=function(a){return a<0?0:a>255?255:a},a.copyAttributes=function(a,b,c){var d,e,f,g,h,i;c==null&&(c={}),g=a.attributes,i=[];for(e=0,f=g.length;e<f;e++){d=g[e];if(c.except!=null&&(h=d.nodeName,A.call(c.except,h)>=0))continue;i.push(b.setAttribute(d.nodeName,d.nodeValue))}return i},a.dataArray=function(a){return a==null&&(a=0),e.NodeJS||window.Uint8Array!=null?new Uint8Array(a):new Array(a)},a}(),typeof exports!="undefined"&&exports!==null?(t=exports,g=require("canvas"),m=g.Image,j=require("fibers"),w=require("fs")):t=window,t.Caman=e=function(){function c(){var a,d,e,f=this;if(arguments.length===0)throw"Invalid arguments";if(this instanceof c){this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),a=arguments[0];if(!c.NodeJS){e=parseInt(c.getAttrId(a[0]),10),d=typeof a[1]=="function"?a[1]:typeof a[2]=="function"?a[2]:function(){};if(!isNaN(e)&&u.has(e))return u.execute(e,d)}return this.id=v.uniqid.get(),this.initializedPixelData=this.originalPixelData=null,this.cropCoordinates={x:0,y:0},this.cropped=!1,this.resized=!1,this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new b(this),this.renderer=new s(this),this.domIsLoaded(function(){return f.parseArguments(a),f.setup()}),this}return new c(arguments)}return c.version={release:"4.1.1",date:"4/8/2013"},c.DEBUG=!1,c.NodeJS=typeof exports!="undefined"&&exports!==null,c.autoload=!c.NodeJS,c.allowRevert=!0,c.crossOrigin="anonymous",c.toString=function(){return"Version "+c.version.release+", Released "+c.version.date},c.remoteProxy="",c.proxyParam="camanProxyUrl",c.getAttrId=function(b){return c.NodeJS?!0:(typeof b=="string"&&(b=a(b)),b==null||b.getAttribute==null?null:b.getAttribute("data-caman-id"))},c.prototype.domIsLoaded=function(a){var b,d=this;return c.NodeJS?setTimeout(function(){return a.call(d)},0):document.readyState==="complete"?(o.debug("DOM initialized"),setTimeout(function(){return a.call(d)},0)):(b=function(){if(document.readyState==="complete")return o.debug("DOM initialized"),a.call(d)},document.addEventListener("readystatechange",b,!1))},c.prototype.parseArguments=function(a){var b,c,d,e;if(a.length===0)throw"Invalid arguments given";this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(a[0]);if(a.length===1)return;switch(typeof a[1]){case"string":this.imageUrl=a[1];break;case"function":this.callback=a[1]}if(a.length===2)return;this.callback=a[2];if(a.length===4){d=a[4],e=[];for(b in d){if(!z.call(d,b))continue;c=d[b],e.push(this.options[b]=c)}return e}},c.prototype.setInitObject=function(b){if(c.NodeJS){this.initObj=b,this.initType="node";return}typeof b=="object"?this.initObj=b:this.initObj=a(b);if(this.initObj==null)throw"Could not find image or canvas for initialization.";return this.initType=this.initObj.nodeName.toLowerCase()},c.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},c.prototype.initNode=function(){var a=this;return o.debug("Initializing for NodeJS"),this.image=new m,this.image.onload=function(){return o.debug("Image loaded. Width = "+a.imageWidth()+", Height = "+a.imageHeight()),a.canvas=new g(a.imageWidth(),a.imageHeight()),a.finishInit()},this.image.onerror=function(a){throw a},this.image.src=this.initObj},c.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),v.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},c.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),this.imageUrl!=null?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},c.prototype.imageAdjustments=function(){this.needsHiDPISwap()&&(o.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement());if(l.isRemote(this.image))return this.image.src=l.proxyUrl(this.image.src),o.debug("Remote image detected, using URL = "+this.image.src)},c.prototype.waitForImageLoaded=function(){return this.isImageLoaded()?this.imageLoaded():this.image.onload=this.imageLoaded},c.prototype.isImageLoaded=function(){return this.image.complete?this.image.naturalWidth!=null&&this.image.naturalWidth===0?!1:!0:!1},c.prototype.imageWidth=function(){return this.image.width||this.image.naturalWidth},c.prototype.imageHeight=function(){return this.image.height||this.image.naturalHeight},c.prototype.imageLoaded=function(){return o.debug("Image loaded. Width = "+this.imageWidth()+", Height = "+this.imageHeight()),this.swapped?(this.canvas.width=this.imageWidth()/this.hiDPIRatio(),this.canvas.height=this.imageHeight()/this.hiDPIRatio()):(this.canvas.width=this.imageWidth(),this.canvas.height=this.imageHeight()),this.finishInit()},c.prototype.finishInit=function(){var a,b,d,e,f;this.context==null&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.preScaledWidth=this.width=this.canvas.width,this.originalHeight=this.preScaledHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.hasId()||this.assignId(),this.image!=null&&this.context.drawImage(this.image,0,0,this.imageWidth(),this.imageHeight(),0,0,this.preScaledWidth,this.preScaledHeight),this.reloadCanvasData();if(c.allowRevert){this.initializedPixelData=v.dataArray(this.pixelData.length),this.originalPixelData=v.dataArray(this.pixelData.length),f=this.pixelData;for(a=d=0,e=f.length;d<e;a=++d)b=f[a],this.initializedPixelData[a]=b,this.originalPixelData[a]=b}return this.dimensions={width:this.canvas.width,height:this.canvas.height},u.put(this.id,this),this.callback.call(this,this),this.callback=function(){}},c.prototype.reloadCanvasData=function(){return this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data},c.prototype.resetOriginalPixelData=function(){var a,b,d,e,f;if(!c.allowRevert)throw"Revert disabled";this.originalPixelData=v.dataArray(this.pixelData.length),e=this.pixelData,f=[];for(b=0,d=e.length;b<d;b++)a=e[b],f.push(this.originalPixelData.push(a));return f},c.prototype.hasId=function(){return c.getAttrId(this.canvas)!=null},c.prototype.assignId=function(){if(c.NodeJS||this.canvas.getAttribute("data-caman-id"))return;return this.canvas.setAttribute("data-caman-id",this.id)},c.prototype.hiDPIDisabled=function(){return this.canvas.getAttribute("data-caman-hidpi-disabled")!==null},c.prototype.hiDPIAdjustments=function(){var a;if(c.NodeJS||this.hiDPIDisabled())return;a=this.hiDPIRatio();if(a!==1)return o.debug("HiDPI ratio = "+a),this.scaled=!0,this.preScaledWidth=this.canvas.width,this.preScaledHeight=this.canvas.height,this.canvas.width=this.preScaledWidth*a,this.canvas.height=this.preScaledHeight*a,this.canvas.style.width=""+this.preScaledWidth+"px",this.canvas.style.height=""+this.preScaledHeight+"px",this.context.scale(a,a),this.width=this.originalWidth=this.canvas.width,this.height=this.originalHeight=this.canvas.height},c.prototype.hiDPIRatio=function(){var a,b;return b=window.devicePixelRatio||1,a=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,b/a},c.prototype.hiDPICapable=function(){return window.devicePixelRatio!=null&&window.devicePixelRatio!==1},c.prototype.needsHiDPISwap=function(){return this.hiDPIDisabled()||!this.hiDPICapable()?!1:this.hiDPIReplacement()!==null},c.prototype.hiDPIReplacement=function(){return this.image==null?null:this.image.getAttribute("data-caman-hidpi")},c.prototype.replaceCanvas=function(a){var b;return b=this.canvas,this.canvas=a,this.context=this.canvas.getContext("2d"),b.parentNode.replaceChild(this.canvas,b),this.width=this.canvas.width,this.height=this.canvas.height,this.reloadCanvasData(),this.dimensions={width:this.canvas.width,height:this.canvas.height}},c.prototype.render=function(a){var b=this;return a==null&&(a=function(){}),i.trigger(this,"renderStart"),this.renderer.execute(function(){return b.context.putImageData(b.imageData,0,0),a.call(b)})},c.prototype.revert=function(){var a,b,d,e,f;if(!c.allowRevert)throw"Revert disabled";f=this.originalVisiblePixels();for(a=d=0,e=f.length;d<e;a=++d)b=f[a],this.pixelData[a]=b;return this.context.putImageData(this.imageData,0,0)},c.prototype.reset=function(){var a,b,c,d,e,f,g,h,i;a=document.createElement("canvas"),v.copyAttributes(this.canvas,a),a.width=this.originalWidth,a.height=this.originalHeight,b=a.getContext("2d"),d=b.getImageData(0,0,a.width,a.height),f=d.data,i=this.initializedPixelData;for(c=g=0,h=i.length;g<h;c=++g)e=i[c],f[c]=e;return b.putImageData(d,0,0),this.cropCoordinates={x:0,y:0},this.resized=!1,this.replaceCanvas(a)},c.prototype.originalVisiblePixels=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w;if(!c.allowRevert)throw"Revert disabled";k=[],m=this.cropCoordinates.x,e=m+this.width,n=this.cropCoordinates.y,f=n+this.height;if(this.resized){a=document.createElement("canvas"),a.width=this.originalWidth,a.height=this.originalHeight,d=a.getContext("2d"),h=d.getImageData(0,0,a.width,a.height),j=h.data,t=this.originalPixelData;for(g=p=0,s=t.length;p<s;g=++p)i=t[g],j[g]=i;d.putImageData(h,0,0),l=document.createElement("canvas"),l.width=this.width,l.height=this.height,d=l.getContext("2d"),d.drawImage(a,0,0,this.originalWidth,this.originalHeight,0,0,this.width,this.height),j=d.getImageData(0,0,this.width,this.height).data,o=this.width}else j=this.originalPixelData,o=this.originalWidth;for(g=r=0,u=j.length;r<u;g=r+=4)b=q.locationToCoordinates(g,o),m<=(v=b.x)&&v<e&&n<=(w=b.y)&&w<f&&k.push(j[g],j[g+1],j[g+2],j[g+3]);return k},c.prototype.process=function(a,b){return this.renderer.add({type:k.Type.Single,name:a,processFn:b}),this},c.prototype.processKernel=function(a,b,c,d){var e,f,g;if(!c){c=0;for(e=f=0,g=b.length;0<=g?f<g:f>g;e=0<=g?++f:--f)c+=b[e]}return this.renderer.add({type:k.Type.Kernel,name:a,adjust:b,divisor:c,bias:d||0}),this},c.prototype.processPlugin=function(a,b){return this.renderer.add({type:k.Type.Plugin,plugin:a,args:b}),this},c.prototype.newLayer=function(a){var b;return b=new n(this),this.canvasQueue.push(b),this.renderer.add({type:k.Type.LayerDequeue}),a.call(b),this.renderer.add({type:k.Type.LayerFinished}),this},c.prototype.executeLayer=function(a){return this.pushContext(a)},c.prototype.pushContext=function(a){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=a,this.pixelData=a.pixelData},c.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},c.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},c}(),b=function(){function a(a){this.c=a}return a.prototype.calculateLevels=function(){var a,b,c,d,e,f,g;b={r:{},g:{},b:{}};for(a=d=0;d<=255;a=++d)b.r[a]=0,b.g[a]=0,b.b[a]=0;for(a=e=0,g=this.c.pixelData.length;e<g;a=e+=4)b.r[this.c.pixelData[a]]++,b.g[this.c.pixelData[a+1]]++,b.b[this.c.pixelData[a+2]]++;c=this.c.pixelData.length/4;for(a=f=0;f<=255;a=++f)b.r[a]/=c,b.g[a]/=c,b.b[a]/=c;return b},a}(),e.DOMUpdated=function(){var a,b,c,d,e,g;b=document.querySelectorAll("img[data-caman]");if(b.length>0){g=[];for(d=0,e=b.length;d<e;d++)a=b[d],g.push(c=new f(a,function(){return this.parse(),this.execute()}));return g}return},e.autoload&&function(){return document.readyState==="complete"?e.DOMUpdated():document.addEventListener("DOMContentLoaded",e.DOMUpdated,!1)}(),f=function(){function b(a,b){this.dataStr=a.getAttribute("data-caman"),this.caman=e(a,b.bind(this))}var a;return a="(\\w+)\\((.*?)\\)",b.prototype.parse=function(){var b,c,d,e,f,g,h,i,j,k,l,m;this.ele=this.caman.canvas,h=new RegExp(a,"g"),i=this.dataStr.match(h);if(i.length>0){h=new RegExp(a),m=[];for(j=0,k=i.length;j<k;j++){e=i[j],l=e.match(h),g=l[0],c=l[1],b=l[2],f=new Function("return function() {        this."+c+"("+b+");      };");try{d=f(),m.push(d.call(this.caman))}catch(n){m.push(o.debug(n))}}return m}return},b.prototype.execute=function(){var a;return a=this.ele,this.caman.render(function(){return a.parentNode.replaceChild(this.toImage(),a)})},b}(),e.Blender=c=function(){function a(){}return a.blenders={},a.register=function(a,b){return this.blenders[a]=b},a.execute=function(a,b,c){return this.blenders[a](b,c)},a}(),e.Calculate=d=function(){function a(){}return a.distance=function(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},a.randomRange=function(a,b,c){var d;return c==null&&(c=!1),d=a+Math.random()*(b-a),c?d.toFixed(c):Math.round(d)},a.luminance=function(a){return.299*a.r+.587*a.g+.114*a.b},a.bezier=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;u=a[0],y=a[1],v=b[0],z=b[1],w=c[0],A=c[1],x=d[0],B=d[1],m={},k=parseInt(3*(v-u),10),i=3*(w-v)-k,g=x-u-k-i,l=3*(z-y),j=3*(A-z)-l,h=B-y-l-j;for(p=C=0;C<1e3;p=++C)t=p/1e3,n=Math.round(g*Math.pow(t,3)+i*Math.pow(t,2)+k*t+u),o=Math.round(h*Math.pow(t,3)+j*Math.pow(t,2)+l*t+y),e&&o<e?o=e:f&&o>f&&(o=f),m[n]=o;if(m.length<d[0]+1)for(p=D=0,F=d[0];0<=F?D<=F:D>=F;p=0<=F?++D:--D)if(m[p]==null){r=[p-1,m[p-1]];for(q=E=p,G=d[0];p<=G?E<=G:E>=G;q=p<=G?++E:--E)if(m[q]!=null){s=[q,m[q]];break}m[p]=r[1]+(s[1]-r[1])/(s[0]-r[0])*(p-r[0])}return m[d[0]]==null&&(m[d[0]]=m[d[0]-1]),m},a}(),h=function(){function a(){}return a.hexToRGB=function(a){var b,c,d;return a.charAt(0)==="#"&&(a=a.substr(1)),d=parseInt(a.substr(0,2),16),c=parseInt(a.substr(2,2),16),b=parseInt(a.substr(4,2),16),{r:d,g:c,b:b}},a.rgbToHSL=function(a,b,c){var d,e,f,g,h,i;return typeof a=="object"&&(b=a.g,c=a.b,a=a.r),a/=255,b/=255,c/=255,g=Math.max(a,b,c),h=Math.min(a,b,c),f=(g+h)/2,g===h?e=i=0:(d=g-h,i=f>.5?d/(2-g-h):d/(g+h),e=function(){switch(g){case a:return(b-c)/d+(b<c?6:0);case b:return(c-a)/d+2;case c:return(a-b)/d+4}}(),e/=6),{h:e,s:i,l:f}},a.hslToRGB=function(a,b,c){var d,e,f,g,h;return typeof a=="object"&&(b=a.s,c=a.l,a=a.h),b===0?h=e=d=c:(g=c<.5?c*(1+b):c+b-c*b,f=2*c-g,h=this.hueToRGB(f,g,a+1/3),e=this.hueToRGB(f,g,a),d=this.hueToRGB(f,g,a-1/3)),{r:h*255,g:e*255,b:d*255}},a.hueToRGB=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},a.rgbToHSV=function(a,b,c){var d,e,f,g,h,i;return a/=255,b/=255,c/=255,f=Math.max(a,b,c),g=Math.min(a,b,c),i=f,d=f-g,h=f===0?0:d/f,f===g?e=0:(e=function(){switch(f){case a:return(b-c)/d+(b<c?6:0);case b:return(c-a)/d+2;case c:return(a-b)/d+4}}(),e/=6),{h:e,s:h,v:i}},a.hsvToRGB=function(a,b,c){var d,e,f,g,h,i,j,k;g=Math.floor(a*6),e=a*6-g,h=c*(1-b),i=c*(1-e*b),k=c*(1-(1-e)*b);switch(g%6){case 0:j=c,f=k,d=h;break;case 1:j=i,f=c,d=h;break;case 2:j=h,f=c,d=k;break;case 3:j=h,f=i,d=c;break;case 4:j=k,f=h,d=c;break;case 5:j=c,f=h,d=i}return{r:j*255,g:f*255,b:d*255}},a.rgbToXYZ=function(a,b,c){var d,e,f;return a/=255,b/=255,c/=255,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,b>.04045?b=Math.pow((b+.055)/1.055,2.4):b/=12.92,c>.04045?c=Math.pow((c+.055)/1.055,2.4):c/=12.92,d=a*.4124+b*.3576+c*.1805,e=a*.2126+b*.7152+c*.0722,f=a*.0193+b*.1192+c*.9505,{x:d*100,y:e*100,z:f*100}},a.xyzToRGB=function(a,b,c){var d,e,f;return a/=100,b/=100,c/=100,f=3.2406*a+ -1.5372*b+ -0.4986*c,e=-0.9689*a+1.8758*b+.0415*c,d=.0557*a+ -0.204*b+1.057*c,f>.0031308?f=1.055*Math.pow(f,.4166666667)-.055:f*=12.92,e>.0031308?e=1.055*Math.pow(e,.4166666667)-.055:e*=12.92,d>.0031308?d=1.055*Math.pow(d,.4166666667)-.055:d*=12.92,{r:f*255,g:e*255,b:d*255}},a.xyzToLab=function(a,b,c){var d,e,f,g,h,i;return typeof a=="object"&&(b=a.y,c=a.z,a=a.x),g=95.047,h=100,i=108.883,a/=g,b/=h,c/=i,a>.008856451679?a=Math.pow(a,.3333333333):a=7.787037037*a+.1379310345,b>.008856451679?b=Math.pow(b,.3333333333):b=7.787037037*b+.1379310345,c>.008856451679?c=Math.pow(c,.3333333333):c=7.787037037*c+.1379310345,f=116*b-16,d=500*(a-b),e=200*(b-c),{l:f,a:d,b:e}},a.labToXYZ=function(a,b,c){var d,e,f;return typeof a=="object"&&(b=a.a,c=a.b,a=a.l),e=(a+16)/116,d=e+b/500,f=e-c/200,d>.2068965517?d=d*d*d:d=.1284185493*(d-.1379310345),e>.2068965517?e=e*e*e:e=.1284185493*(e-.1379310345),f>.2068965517?f=f*f*f:f=.1284185493*(f-.1379310345),{x:d*95.047,y:e*100,z:f*108.883}},a.rgbToLab=function(a,b,c){var d;return typeof a=="object"&&(b=a.g,c=a.b,a=a.r),d=this.rgbToXYZ(a,b,c),this.xyzToLab(d)},a.labToRGB=function(a,b,c){},a}(),i=function(){function a(){}return a.events={},a.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],a.trigger=function(a,b,c){var d,e,f,g,h;if(this.events[b]&&this.events[b].length){g=this.events[b],h=[];for(e=0,f=g.length;e<f;e++)d=g[e],d.target===null||a.id===d.target.id?h.push(d.fn.call(a,c)):h.push(void 0);return h}},a.listen=function(a,b,c){var d,e;return typeof a=="string"&&(e=a,d=b,a=null,b=e,c=d),A.call(this.types,b)<0?!1:(this.events[b]||(this.events[b]=[]),this.events[b].push({target:a,fn:c}),!0)},a}(),e.Event=i,e.Filter=k=function(){function a(){}return a.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},a.register=function(a,b){return e.prototype[a]=b},a}(),e.IO=l=function(){function a(){}return a.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,a.isRemote=function(a){return a==null?!1:this.corsEnabled(a)?!1:this.isURLRemote(a.src)},a.corsEnabled=function(a){var b;return a.crossOrigin!=null&&((b=a.crossOrigin.toLowerCase())==="anonymous"||b==="use-credentials")},a.isURLRemote=function(a){var b;return b=a.match(this.domainRegex),b?b[1]!==document.domain:!1},a.remoteCheck=function(a){if(this.isURLRemote(a)){if(!!e.remoteProxy.length){if(e.isURLRemote(e.remoteProxy)){o.info("Cannot use a remote proxy for loading images.");return}return""+e.remoteProxy+"?camanProxyUrl="+encodeURIComponent(a)}o.info("Attempting to load a remote image without a configured proxy. URL: "+a)}},a.proxyUrl=function(a){return""+e.remoteProxy+"?"+e.proxyParam+"="+encodeURIComponent(a)},a.useProxy=function(a){var b;return b={ruby:"rb",python:"py",perl:"pl",javascript:"js"},a=a.toLowerCase(),b[a]!=null&&(a=b[a]),"proxies/caman_proxy."+a},a}(),e.prototype.save=function(){return typeof exports!="undefined"&&exports!==null?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},e.prototype.browserSave=function(a){var b;return a==null&&(a="png"),a=a.toLowerCase(),b=this.toBase64(a).replace("image/"+a,"image/octet-stream"),document.location.href=b},e.prototype.nodeSave=function(a,b){var c;b==null&&(b=!0);try{c=w.statSync(a);if(c.isFile()&&!b)return!1}catch(d){o.debug("Creating output file "+a)}return w.writeFile(a,this.canvas.toBuffer(),function(){return o.debug("Finished writing to "+a)})},e.prototype.toImage=function(a){var b;return b=document.createElement("img"),b.src=this.toBase64(a),b.width=this.dimensions.width,b.height=this.dimensions.height,window.devicePixelRatio&&(b.width/=window.devicePixelRatio,b.height/=window.devicePixelRatio),b},e.prototype.toBase64=function(a){return a==null&&(a="png"),a=a.toLowerCase(),this.canvas.toDataURL("image/"+a)},n=function(){function b(a){this.c=a,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=v.uniqid.get(),this.canvas=typeof exports!="undefined"&&exports!==null?new g:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return b.prototype.newLayer=function(a){return this.c.newLayer.call(this.c,a)},b.prototype.setBlendingMode=function(a){return this.options.blendingMode=a,this},b.prototype.opacity=function(a){return this.options.opacity=a/100,this},b.prototype.copyParent=function(){var a,b,c,d;b=this.c.pixelData;for(a=c=0,d=this.c.pixelData.length;c<d;a=c+=4)this.pixelData[a]=b[a],this.pixelData[a+1]=b[a+1],this.pixelData[a+2]=b[a+2],this.pixelData[a+3]=b[a+3];return this},b.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},b.prototype.overlayImage=function(b){return typeof b=="object"?b=b.src:typeof b=="string"&&b[0]==="#"&&(b=a(b).src),b?(this.c.renderer.renderQueue.push({type:k.Type.LoadOverlay,src:b,layer:this}),this):this},b.prototype.applyToParent=function(){var a,b,d,e,f,g,h,i,j;d=this.c.pixelStack[this.c.pixelStack.length-1],b=this.c.pixelData,j=[];for(a=h=0,i=b.length;h<i;a=h+=4)g={r:d[a],g:d[a+1],b:d[a+2],a:d[a+3]},f={r:b[a],g:b[a+1],b:b[a+2],a:b[a+3]},e=c.execute(this.options.blendingMode,f,g),e.r=v.clampRGB(e.r),e.g=v.clampRGB(e.g),e.b=v.clampRGB(e.b),e.a==null&&(e.a=f.a),d[a]=g.r-(g.r-e.r)*this.options.opacity*(e.a/255),d[a+1]=g.g-(g.g-e.g)*this.options.opacity*(e.a/255),j.push(d[a+2]=g.b-(g.b-e.b)*this.options.opacity*(e.a/255));return j},b}(),p=function(){function a(){var a,b,c,d;d=["log","info","warn","error"];for(b=0,c=d.length;b<c;b++)a=d[b],this[a]=function(a){return function(){var b;b=1<=arguments.length?B.call(arguments,0):[];if(!e.DEBUG)return;try{return console[a].apply(console,b)}catch(c){return console[a](b)}}}(a);this.debug=this.log}return a}(),o=new p,q=function(){function a(a){this.c=a,this.loc=0}return a.coordinatesToLocation=function(a,b,c){return(b*c+a)*4},a.locationToCoordinates=function(a,b){var c,d;return d=Math.floor(a/(b*4)),c=a%(b*4)/4,{x:c,y:d}},a.prototype.locationXY=function(){var a,b;return b=this.c.dimensions.height-Math.floor(this.loc/(this.c.dimensions.width*4)),a=this.loc%(this.c.dimensions.width*4)/4,{x:a,y:b}},a.prototype.getPixelRelative=function(a,b){var c;return c=this.loc+this.c.dimensions.width*4*b*-1+4*a,c>this.c.pixelData.length||c<0?{r:0,g:0,b:0,a:0}:{r:this.c.pixelData[c],g:this.c.pixelData[c+1],b:this.c.pixelData[c+2],a:this.c.pixelData[c+3]}},a.prototype.putPixelRelative=function(a,b,c){var d;d=this.loc+this.c.dimensions.width*4*b*-1+4*a;if(newLoc>this.c.pixelData.length||newLoc<0)return;return this.c.pixelData[newLoc]=c.r,this.c.pixelData[newLoc+1]=c.g,this.c.pixelData[newLoc+2]=c.b,this.c.pixelData[newLoc+3]=c.a,!0},a.prototype.getPixel=function(a,b){var c;return c=this.coordinatesToLocation(a,b,this.width),{r:this.c.pixelData[c],g:this.c.pixelData[c+1],b:this.c.pixelData[c+2],a:this.c.pixelData[c+3]}},a.prototype.putPixel=function(a,b,c){var d;return d=this.coordinatesToLocation(a,b,this.width),this.c.pixelData[d]=c.r,this.c.pixelData[d+1]=c.g,this.c.pixelData[d+2]=c.b,this.c.pixelData[d+3]=c.a},a}(),r=function(){function a(){}return a.plugins={},a.register=function(a,b){return this.plugins[a]=b},a.execute=function(a,b,c){return this.plugins[b].apply(a,c)},a}(),e.Plugin=r,e.Renderer=s=function(){function a(b){var c=this;this.c=b,this.processNext=function(){return a.prototype.processNext.apply(c,arguments)},this.renderQueue=[],this.modPixelData=null}return a.Blocks=e.NodeJS?require("os").cpus().length:4,a.prototype.add=function(a){if(a==null)return;return this.renderQueue.push(a)},a.prototype.processNext=function(){var a;if(this.renderQueue.length===0)return i.trigger(this,"renderFinished"),this.finishedFn!=null&&this.finishedFn.call(this.c),this;this.currentJob=this.renderQueue.shift();switch(this.currentJob.type){case k.Type.LayerDequeue:return a=this.c.canvasQueue.shift(),this.c.executeLayer(a),this.processNext();case k.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case k.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case k.Type.Plugin:return this.executePlugin();default:return this.executeFilter()}},a.prototype.execute=function(a){return this.finishedFn=a,this.modPixelData=v.dataArray(this.c.pixelData.length),this.processNext()},a.prototype.eachBlock=function(b){var c,d,f,g,h,i,k,l,m,n,o,p,q=this;this.blocksDone=0,l=this.c.pixelData.length,d=Math.floor(l/4/a.Blocks),c=d*4,k=c+l/4%a.Blocks*4,p=[];for(i=n=0,o=a.Blocks;0<=o?n<o:n>o;i=0<=o?++n:--n)m=i*c,g=m+(i===a.Blocks-1?k:c),e.NodeJS?(h=j(function(){return b.call(q,i,m,g)}),f=h.run(),p.push(this.blockFinished(f))):p.push(setTimeout(function(a,c,d){return function(){return b.call(q,a,c,d)}}(i,m,g),0));return p},a.prototype.executeFilter=function(){return i.trigger(this.c,"processStart",this.currentJob),this.currentJob.type===k.Type.Single?this.eachBlock(this.renderBlock):this.eachBlock(this.renderKernel)},a.prototype.executePlugin=function(){return o.debug("Executing plugin "+this.currentJob.plugin),r.execute(this.c,this.currentJob.plugin,this.currentJob.args),o.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},a.prototype.renderBlock=function(b,c,d){var f,g,h,k,l;o.debug("Block #"+b+" - Filter: "+this.currentJob.name+", Start: "+c+", End: "+d),i.trigger(this.c,"blockStarted",{blockNum:b,totalBlocks:a.Blocks,startPixel:c,endPixel:d}),f={r:0,g:0,b:0,a:0},h=new q(this.c);for(g=l=c;l<d;g=l+=4)h.loc=g,f.r=this.c.pixelData[g],f.g=this.c.pixelData[g+1],f.b=this.c.pixelData[g+2],f.a=this.c.pixelData[g+3],k=this.currentJob.processFn.call(h,f),k.a==null&&(k.a=f.a),this.c.pixelData[g]=v.clampRGB(k.r),this.c.pixelData[g+1]=v.clampRGB(k.g),this.c.pixelData[g+2]=v.clampRGB(k.b),this.c.pixelData[g+3]=v.clampRGB(k.a);return e.NodeJS?j.yield(b):this.blockFinished(b)},a.prototype.renderKernel=function(a,b,c){var d,f,g,h,i,k,l,m,n,p,r,s,t,u,w,x,y,z;s=this.currentJob.name,g=this.currentJob.bias,k=this.currentJob.divisor,r=this.c.pixelData.length,d=this.currentJob.adjust,f=Math.sqrt(d.length),p=[],o.debug("Rendering kernel - Filter: "+this.currentJob.name),b=Math.max(b,this.c.dimensions.width*4*((f-1)/2)),c=Math.min(c,r-this.c.dimensions.width*4*((f-1)/2)),h=(f-1)/2,u=new q(this.c);for(l=x=b;x<c;l=x+=4){u.loc=l,i=0;for(m=y=-h;-h<=h?y<=h:y>=h;m=-h<=h?++y:--y)for(n=z=h;h<=-h?z<=-h:z>=-h;n=h<=-h?++z:--z)t=u.getPixelRelative(m,n),p[i*3]=t.r,p[i*3+1]=t.g,p[i*3+2]=t.b,i++;w=this.processKernel(d,p,k,g),this.modPixelData[l]=v.clampRGB(w.r),this.modPixelData[l+1]=v.clampRGB(w.g),this.modPixelData[l+2]=v.clampRGB(w.b),this.modPixelData[l+3]=this.c.pixelData[l+3]}return e.NodeJS?j.yield(a):this.blockFinished(a)},a.prototype.blockFinished=function(b){var c,d,e;b>=0&&o.debug("Block #"+b+" finished! Filter: "+this.currentJob.name),this.blocksDone++,i.trigger(this.c,"blockFinished",{blockNum:b,blocksFinished:this.blocksDone,totalBlocks:a.Blocks});if(this.blocksDone===a.Blocks){if(this.currentJob.type===k.Type.Kernel)for(c=d=0,e=this.c.pixelData.length;0<=e?d<e:d>e;c=0<=e?++d:--d)this.c.pixelData[c]=this.modPixelData[c];return b>=0&&o.debug("Filter "+this.currentJob.name+" finished!"),i.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},a.prototype.processKernel=function(a,b,c,d){var e,f,g,h;f={r:0,g:0,b:0};for(e=g=0,h=a.length;0<=h?g<h:g>h;e=0<=h?++g:--g)f.r+=a[e]*b[e*3],f.g+=a[e]*b[e*3+1],f.b+=a[e]*b[e*3+2];return f.r=f.r/c+d,f.g=f.g/c+d,f.b=f.b/c+d,f},a.prototype.loadOverlay=function(a,b){var c,d,e=this;return c=document.createElement("img"),c.onload=function(){return a.context.drawImage(c,0,0,e.c.dimensions.width,e.c.dimensions.height),a.imageData=a.context.getImageData(0,0,e.c.dimensions.width,e.c.dimensions.height),a.pixelData=a.imageData.data,e.c.pixelData=a.pixelData,e.processNext()},d=l.remoteCheck(b),c.src=d!=null?d:b},a}(),e.Store=u=function(){function a(){}return a.items={},a.has=function(a){return this.items[a]!=null},a.get=function(a){return this.items[a]},a.put=function(a,b){return this.items[a]=b},a.execute=function(a,b){var c=this;return setTimeout(function(){return b.call(c.get(a),c.get(a))},0),this.get(a)},a.flush=function(a){return a==null&&(a=!1),a?delete this.items[a]:this.items={}},a}(),c.register("normal",function(a,b){return{r:a.r,g:a.g,b:a.b}}),c.register("multiply",function(a,b){return{r:a.r*b.r/255,g:a.g*b.g/255,b:a.b*b.b/255}}),c.register("screen",function(a,b){return{r:255-(255-a.r)*(255-b.r)/255,g:255-(255-a.g)*(255-b.g)/255,b:255-(255-a.b)*(255-b.b)/255}}),c.register("overlay",function(a,b){var c;return c={},c.r=b.r>128?255-2*(255-a.r)*(255-b.r)/255:b.r*a.r*2/255,c.g=b.g>128?255-2*(255-a.g)*(255-b.g)/255:b.g*a.g*2/255,c.b=b.b>128?255-2*(255-a.b)*(255-b.b)/255:b.b*a.b*2/255,c}),c.register("difference",function(a,b){return{r:a.r-b.r,g:a.g-b.g,b:a.b-b.b}}),c.register("addition",function(a,b){return{r:b.r+a.r,g:b.g+a.g,b:b.b+a.b}}),c.register("exclusion",function(a,b){return{r:128-2*(b.r-128)*(a.r-128)/255,g:128-2*(b.g-128)*(a.g-128)/255,b:128-2*(b.b-128)*(a.b-128)/255}}),c.register("softLight",function(a,b){var c;return c={},c.r=b.r>128?255-(255-b.r)*(255-(a.r-128))/255:b.r*(a.r+128)/255,c.g=b.g>128?255-(255-b.g)*(255-(a.g-128))/255:b.g*(a.g+128)/255,c.b=b.b>128?255-(255-b.b)*(255-(a.b-128))/255:b.b*(a.b+128)/255,c}),c.register("lighten",function(a,b){return{r:b.r>a.r?b.r:a.r,g:b.g>a.g?b.g:a.g,b:b.b>a.b?b.b:a.b}}),c.register("darken",function(a,b){return{r:b.r>a.r?a.r:b.r,g:b.g>a.g?a.g:b.g,b:b.b>a.b?a.b:b.b}}),k.register("fillColor",function(){var a;return arguments.length===1?a=h.hexToRGB(arguments[0]):a={r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(b){return b.r=a.r,b.g=a.g,b.b=a.b,b.a=255,b})}),k.register("brightness",function(a){return a=Math.floor(255*(a/100)),this.process("brightness",function(b){return b.r+=a,b.g+=a,b.b+=a,b})}),k.register("saturation",function(a){return a*=-0.01,this.process("saturation",function(b){var c;return c=Math.max(b.r,b.g,b.b),b.r!==c&&(b.r+=(c-b.r)*a),b.g!==c&&(b.g+=(c-b.g)*a),b.b!==c&&(b.b+=(c-b.b)*a),b})}),k.register("vibrance",function(a){return a*=-1,this.process("vibrance",function(b){var c,d,e;return e=Math.max(b.r,b.g,b.b),d=(b.r+b.g+b.b)/3,c=Math.abs(e-d)*2/255*a/100,b.r!==e&&(b.r+=(e-b.r)*c),b.g!==e&&(b.g+=(e-b.g)*c),b.b!==e&&(b.b+=(e-b.b)*c),b})}),k.register("greyscale",function(a){return this.process("greyscale",function(a){var b;return b=d.luminance(a),a.r=b,a.g=b,a.b=b,a})}),k.register("contrast",function(a){return a=Math.pow((a+100)/100,2),this.process("contrast",function(b){return b.r/=255,b.r-=.5,b.r*=a,b.r+=.5,b.r*=255,b.g/=255,b.g-=.5,b.g*=a,b.g+=.5,b.g*=255,b.b/=255,b.b-=.5,b.b*=a,b.b+=.5,b.b*=255,b})}),k.register("hue",function(a){return this.process("hue",function(b){var c,d,e;return d=h.rgbToHSV(b.r,b.g,b.b),c=d.h*100,c+=Math.abs(a),c%=100,c/=100,d.h=c,e=h.hsvToRGB(d.h,d.s,d.v),e.a=b.a,e})}),k.register("colorize",function(){var a,b;return arguments.length===2?(b=h.hexToRGB(arguments[0]),a=arguments[1]):arguments.length===4&&(b={r:arguments[0],g:arguments[1],b:arguments[2]},a=arguments[3]),this.process("colorize",function(c){return c.r-=(c.r-b.r)*(a/100),c.g-=(c.g-b.g)*(a/100),c.b-=(c.b-b.b)*(a/100),c})}),k.register("invert",function(){return this.process("invert",function(a){return a.r=255-a.r,a.g=255-a.g,a.b=255-a.b,a})}),k.register("sepia",function(a){return a==null&&(a=100),a/=100,this.process("sepia",function(b){return b.r=Math.min(255,b.r*(1-.607*a)+b.g*.769*a+b.b*.189*a),b.g=Math.min(255,b.r*.349*a+b.g*(1-.314*a)+b.b*.168*a),b.b=Math.min(255,b.r*.272*a+b.g*.534*a+b.b*(1-.869*a)),b})}),k.register("gamma",function(a){return this.process("gamma",function(b){return b.r=Math.pow(b.r/255,a)*255,b.g=Math.pow(b.g/255,a)*255,b.b=Math.pow(b.b/255,a)*255,b})}),k.register("noise",function(a){return a=Math.abs(a)*2.55,this.process("noise",function(b){var c;return c=d.randomRange(a*-1,a),b.r+=c,b.g+=c,b.b+=c,b})}),k.register("clip",function(a){return a=Math.abs(a)*2.55,this.process("clip",function(b){return b.r>255-a?b.r=255:b.r<a&&(b.r=0),b.g>255-a?b.g=255:b.g<a&&(b.g=0),b.b>255-a?b.b=255:b.b<a&&(b.b=0),b})}),k.register("channels",function(a){var b,c;if(typeof a!="object")return this;for(b in a){if(!z.call(a,b))continue;c=a[b];if(c===0){delete a[b];continue}a[b]/=100}return a.length===0?this:this.process("channels",function(b){return a.red!=null&&(a.red>0?b.r+=(255-b.r)*a.red:b.r-=b.r*Math.abs(a.red)),a.green!=null&&(a.green>0?b.g+=(255-b.g)*a.green:b.g-=b.g*Math.abs(a.green)),a.blue!=null&&(a.blue>0?b.b+=(255-b.b)*a.blue:b.b-=b.b*Math.abs(a.blue)),b})}),k.register("curves",function(){var a,b,c,e,f,g,h,i,j,k,l,m;b=arguments[0],c=2<=arguments.length?B.call(arguments,1):[],typeof b=="string"&&(b=b.split("")),b[0]==="v"&&(b=["r","g","b"]);if(c.length<3||c.length>4)throw"Invalid number of arguments to curves filter";i=c[0],e=c[1],f=c.length===4?c[2]:c[1],g=c[c.length-1],a=d.bezier(i,e,f,g,0,255);if(i[0]>0)for(h=j=0,l=i[0];0<=l?j<l:j>l;h=0<=l?++j:--j)a[h]=i[1];if(g[0]<255)for(h=k=m=g[0];m<=255?k<=255:k>=255;h=m<=255?++k:--k)a[h]=g[1];return this.process("curves",function(c){var d,e;for(h=d=0,e=b.length;0<=e?d<e:d>e;h=0<=e?++d:--d)c[b[h]]=a[c[b[h]]];return c})}),k.register("exposure",function(a){var b,c,d;return d=Math.abs(a)/100,b=[0,255*d],c=[255-255*d,255],a<0&&(b=b.reverse(),c=c.reverse()),this.curves("rgb",[0,0],b,c,[255,255])}),e.Plugin.register("crop",function(a,b,c,d){var e,f;return c==null&&(c=0),d==null&&(d=0),typeof exports!="undefined"&&exports!==null?e=new g(a,b):(e=document.createElement("canvas"),v.copyAttributes(this.canvas,e),e.width=a,e.height=b),f=e.getContext("2d"),f.drawImage(this.canvas,c,d,a,b,0,0,a,b),this.cropCoordinates={x:c,y:d},this.cropped=!0,this.replaceCanvas(e)}),e.Plugin.register("resize",function(a){var b,c;a==null&&(a=null);if(a===null||a.width==null&&a.height==null){o.error("Invalid or missing dimensions given for resize");return}return a.width==null?a.width=this.canvas.width*a.height/this.canvas.height:a.height==null&&(a.height=this.canvas.height*a.width/this.canvas.width),typeof exports!="undefined"&&exports!==null?b=new g(a.width,a.height):(b=document.createElement("canvas"),v.copyAttributes(this.canvas,b),b.width=a.width,b.height=a.height),c=b.getContext("2d"),c.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,a.width,a.height),this.resized=!0,this.replaceCanvas(b)}),e.Filter.register("crop",function(){return this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),e.Filter.register("resize",function(){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),e.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),e.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),e.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),e.Filter.register("motionBlur",function(a){var b;return a===0||a===180?b=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:a>0&&a<90||a>180&&a<270?b=[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:a===90||a===270?b=[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:b=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",b)}),e.Filter.register("sharpen",function(a){return a==null&&(a=100),a/=100,this.processKernel("Sharpen",[0,-a,0,-a,4*a+1,-a,0,-a,0])}),y={brightness:function(a,b,c){return a.r=a.r-a.r*b*c.strength,a.g=a.g-a.g*b*c.strength,a.b=a.b-a.b*b*c.strength,a},gamma:function(a,b,c){return a.r=Math.pow(a.r/255,Math.max(10*b*c.strength,1))*255,a.g=Math.pow(a.g/255,Math.max(10*b*c.strength,1))*255,a.b=Math.pow(a.b/255,Math.max(10*b*c.strength,1))*255,a},colorize:function(a,b,c){return a.r-=(a.r-c.color.r)*b,a.g-=(a.g-c.color.g)*b,a.b-=(a.b-c.color.b)*b,a}},k.register("vignette",function(a,b){var c,e,f,g;return b==null&&(b=60),typeof a=="string"&&a.substr(-1)==="%"&&(this.dimensions.height>this.dimensions.width?a=this.dimensions.width*(parseInt(a.substr(0,a.length-1),10)/100):a=this.dimensions.height*(parseInt(a.substr(0,a.length-1),10)/100)),b/=100,e=[this.dimensions.width/2,this.dimensions.height/2],g=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),f=g-a,c=d.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(g){var h,i,j;return j=this.locationXY(),h=d.distance(j.x,j.y,e[0],e[1]),h>f&&(i=Math.max(1,c[Math.round((h-f)/a*100)]/10*b),g.r=Math.pow(g.r/255,i)*255,g.g=Math.pow(g.g/255,i)*255,g.b=Math.pow(g.b/255,i)*255),g})}),k.register("rectangularVignette",function(a){var b,c,f,g,i,j,k;b={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},a=v.extend(b,a);if(!a.size)return this;if(typeof a.size=="string")f=parseInt(a.size,10)/100,a.size={width:this.dimensions.width*f,height:this.dimensions.height*f};else if(typeof a.size=="object"){k=["width","height"];for(i=0,j=k.length;i<j;i++)c=k[i],typeof a.size[c]=="string"&&(a.size[c]=this.dimensions[c]*(parseInt(a.size[c],10)/100))}else a.size==="number"&&(g=a.size,a.size={width:g,height:g});return typeof a.cornerRadius=="string"&&(a.cornerRadius=a.size.width/2*(parseInt(a.cornerRadius,10)/100)),a.strength/=100,a.size.width=Math.floor(a.size.width),a.size.height=Math.floor(a.size.height),a.image={width:this.dimensions.width,height:this.dimensions.height},a.method==="colorize"&&typeof a.color=="string"&&(a.color=h.hexToRGB(a.color)),a.coords={left:(this.dimensions.width-a.size.width)/2,right:this.dimensions.width-a.coords.left,bottom:(this.dimensions.height-a.size.height)/2,top:this.dimensions.height-a.coords.bottom},a.corners=[{x:a.coords.left+a.cornerRadius,y:a.coords.top-a.cornerRadius},{x:a.coords.right-a.cornerRadius,y:a.coords.top-a.cornerRadius},{x:a.coords.right-a.cornerRadius,y:a.coords.bottom+a.cornerRadius},{x:a.coords.left+a.cornerRadius,y:a.coords.bottom+a.cornerRadius}],a.maxDist=d.distance(0,0,a.corners[3].x,a.corners[3].y)-a.cornerRadius,this.process("rectangularVignette",function(b){var c,d,f;return d=this.locationXY(),d.x>a.corners[0].x&&d.x<a.corners[1].x&&d.y>a.coords.bottom&&d.y<a.coords.top?b:d.x>a.coords.left&&d.x<a.coords.right&&d.y>a.corners[3].y&&d.y<a.corners[2].y?b:(d.x>a.corners[0].x&&d.x<a.corners[1].x&&d.y>a.coords.top?c=(d.y-a.coords.top)/a.maxDist:d.y>a.corners[2].y&&d.y<a.corners[1].y&&d.x>a.coords.right?c=(d.x-a.coords.right)/a.maxDist:d.x>a.corners[0].x&&d.x<a.corners[1].x&&d.y<a.coords.bottom?c=(a.coords.bottom-d.y)/a.maxDist:d.y>a.corners[2].y&&d.y<a.corners[1].y&&d.x<a.coords.left?c=(a.coords.left-d.x)/a.maxDist:d.x<=a.corners[0].x&&d.y>=a.corners[0].y?(f=e.distance(d.x,d.y,a.corners[0].x,a.corners[0].y),c=(f-a.cornerRadius)/a.maxDist):d.x>=a.corners[1].x&&d.y>=a.corners[1].y?(f=e.distance(d.x,d.y,a.corners[1].x,a.corners[1].y),c=(f-a.cornerRadius)/a.maxDist):d.x>=a.corners[2].x&&d.y<=a.corners[2].y?(f=e.distance(d.x,d.y,a.corners[2].x,a.corners[2].y),c=(f-a.cornerRadius)/a.maxDist):d.x<=a.corners[3].x&&d.y<=a.corners[3].y&&(f=e.distance(d.x,d.y,a.corners[3].x,a.corners[3].y),c=(f-a.cornerRadius)/a.maxDist),c<0?b:y[a.method](b,c,a))})}),function(){var a,b,c,d,f;return d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],f=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],b=function(a,b,c,d,e,f,h){var i,j,k,l,m,n,o;return i=typeof exports!="undefined"&&exports!==null?new g:document.createElement("canvas"),i.width=a,i.height=b,l=c+Math.cos(e)*f*.5,n=d+Math.sin(e)*f*.5,m=c-Math.cos(e)*f*.5,o=d-Math.sin(e)*f*.5,j=i.getContext("2d"),k=j.createLinearGradient(l,n,m,o),h?(k.addColorStop(0,"white"),k.addColorStop(.5,"black"),k.addColorStop(1,"white")):(k.addColorStop(0,"white"),k.addColorStop(1,"black")),j.fillStyle=k,j.fillRect(0,0,a,b),j.getImageData(0,0,a,b)},c=function(a,b,c,d,e,f){var h,i,j;return h=typeof exports!="undefined"&&exports!==null?new g:document.createElement("canvas"),h.width=a,h.height=b,i=h.getContext("2d"),j=i.createRadialGradient(c,d,e,c,d,f),j.addColorStop(1,"white"),j.addColorStop(0,"black"),i.fillStyle=j,i.fillRect(0,0,a,b),i.getImageData(0,0,a,b)},a=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},e.Plugin.register("compoundBlur",function(b,c,e,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb;W=this.dimensions.width,q=this.dimensions.height,v=this.pixelData,I=b.data,U=W*q,V=U<<2,D=[];for(s=bb=0;0<=V?bb<V:bb>V;s=0<=V?++bb:--bb)D[s]=v[s];l=0,R=g,g-=1;while(R-->=0){x=c+.5|0;if(x===0)continue;x>256&&(x=256),m=x+x+1,T=W<<2,X=W-1,r=q-1,J=x+1,S=J*(J+1)/2,Q=new a,N=void 0,M=Q;for(s=cb=1;1<=m?cb<m:cb>m;s=1<=m?++cb:--cb)M=M.next=new a,s===J&&(N=M);M.next=Q,O=null,P=null,ab=$=0,z=d[x],L=f[x];for(Z=db=0;0<=q?db<q:db>q;Z=0<=q?++db:--db){F=n=h=H=p=j=0,G=J*(E=D[$]),o=J*(C=D[$+1]),i=J*(B=D[$+2]),H+=S*E,p+=S*C,j+=S*B,M=Q;for(s=eb=0;0<=J?eb<J:eb>J;s=0<=J?++eb:--eb)M.r=E,M.g=C,M.b=B,M=M.next;for(s=fb=1;1<=J?fb<J:fb>J;s=1<=J?++fb:--fb)A=$+((X<s?X:s)<<2),H+=(M.r=E=D[A])*(K=J-s),p+=(M.g=C=D[A+1])*K,j+=(M.b=B=D[A+2])*K,F+=E,n+=C,h+=B,M=M.next;O=Q,P=N;for(Y=gb=0;0<=W?gb<W:gb>W;Y=0<=W?++gb:--gb)D[$]=H*z>>L,D[$+1]=p*z>>L,D[$+2]=j*z>>L,H-=G,p-=o,j-=i,G-=O.r,o-=O.g,i-=O.b,A=ab+((A=Y+J)<X?A:X)<<2,F+=O.r=D[A],n+=O.g=D[A+1],h+=O.b=D[A+2],H+=F,p+=n,j+=h,O=O.next,G+=E=P.r,o+=C=P.g,i+=B=P.b,F-=E,n-=C,h-=B,P=P.next,$+=4;ab+=W}for(Y=hb=0;0<=W?hb<W:hb>W;Y=0<=W?++hb:--hb){n=h=F=p=j=H=0,$=Y<<2,G=J*(E=D[$]),o=J*(C=D[$+1]),i=J*(B=D[$+2]),H+=S*E,p+=S*C,j+=S*B,M=Q;for(s=ib=0;0<=J?ib<J:ib>J;s=0<=J?++ib:--ib)M.r=E,M.g=C,M.b=B,M=M.next;_=W;for(s=jb=1;1<=J?jb<J:jb>J;s=1<=J?++jb:--jb)$=_+Y<<2,H+=(M.r=E=D[$])*(K=J-s),p+=(M.g=C=D[$+1])*K,j+=(M.b=B=D[$+2])*K,F+=E,n+=C,h+=B,M=M.next,s<r&&(_+=W);$=Y,O=Q,P=N;for(Z=kb=0;0<=q?kb<q:kb>q;Z=0<=q?++kb:--kb)A=$<<2,D[A]=H*z>>L,D[A+1]=p*z>>L,D[A+2]=j*z>>L,H-=G,p-=o,j-=i,G-=O.r,o-=O.g,i-=O.b,A=Y+((A=Z+J)<r?A:r)*W<<2,H+=F+=O.r=D[A],p+=n+=O.g=D[A+1],j+=h+=O.b=D[A+2],O=O.next,G+=E=P.r,o+=C=P.g,i+=B=P.b,F-=E,n-=C,h-=B,P=P.next,$+=W}c*=e,s=U;while(--s>-1)u=s<<2,y=(I[u+2]&255)/255*g,w=y|0,w===l?(k=256*(y-(y|0)),t=256-k,v[u]=v[u]*t+D[u]*k>>8,v[u+1]=v[u+1]*t+D[u+1]*k>>8,v[u+2]=v[u+2]*t+D[u+2]*k>>8):w===l+1&&(v[u]=D[u],v[u+1]=D[u+1],v[u+2]=D[u+2]);l++}return this}),e.Filter.register("tiltShift",function(a){var c,d;return c={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},a=v.extend(c,a),a.angle*=Math.PI/180,d=b(this.dimensions.width,this.dimensions.height,a.center.x,a.center.y,a.angle,a.focusWidth,!0),this.processPlugin("compoundBlur",[d,a.startRadius,a.radiusFactor,a.steps])}),e.Filter.register("radialBlur",function(a){var b,d,e,f;return b={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},a=v.extend(b,a),a.radius||(a.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),e=a.radius/2-a.size,f=a.radius/2,d=c(this.dimensions.width,this.dimensions.height,a.center.x,a.center.y,e,f),this.processPlugin("compoundBlur",[d,a.startRadius,a.radiusFactor,a.steps])})}(),e.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),e.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),e.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),e.Filter.register("posterize",function(a){var b,c;return b=256/a,c=255/(a-1),this.process("posterize",function(a){return a.r=Math.floor(Math.floor(a.r/b)*c),a.g=Math.floor(Math.floor(a.g/b)*c),a.b=Math.floor(Math.floor(a.b/b)*c),a})}),e.Filter.register("vintage",function(a){a==null&&(a=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87);if(a)return this.vignette("40%",30)}),e.Filter.register("lomo",function(a){return a==null&&(a=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),a&&this.vignette("50%",60),this.brightness(5)}),e.Filter.register("clarity",function(a){return a==null&&(a=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),a&&(this.greyscale(),this.contrast(4)),this}),e.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),e.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),e.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),e.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),e.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),e.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),e.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),e.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),e.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),e.Filter.register("glowingSun",function(a){a==null&&(a=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8);if(a)return this.vignette("45%",20)}),e.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),e.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),e.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),e.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),e.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),function(){var a,b,c;return b=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],a=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},e.Plugin.register("stackBlur",function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;if(isNaN(d)||d<1)return;d|=0,s=this.pixelData,H=this.dimensions.width,l=this.dimensions.height,h=d+d+1,G=H<<2,I=H-1,m=l-1,x=d+1,F=x*(x+1)/2,E=new a,A=E;for(n=O=1;1<=h?O<h:O>h;n=1<=h?++O:--O)A=A.next=new a,n===x&&(B=A);A.next=E,C=null,D=null,N=L=0,o=b[d],z=c[d];for(K=P=0;0<=l?P<l:P>l;K=0<=l?++P:--P){u=i=e=w=k=g=0,v=x*(t=s[L]),j=x*(r=s[L+1]),f=x*(q=s[L+2]),w+=F*t,k+=F*r,g+=F*q,A=E;for(n=Q=0;0<=x?Q<x:Q>x;n=0<=x?++Q:--Q)A.r=t,A.g=r,A.b=q,A=A.next;for(n=R=1;1<=x?R<x:R>x;n=1<=x?++R:--R)p=L+((I<n?I:n)<<2),w+=(A.r=t=s[p])*(y=x-n),k+=(A.g=r=s[p+1])*y,g+=(A.b=q=s[p+2])*y,u+=t,i+=r,e+=q,A=A.next;C=E,D=B;for(J=S=0;0<=H?S<H:S>H;J=0<=H?++S:--S)s[L]=w*o>>z,s[L+1]=k*o>>z,s[L+2]=g*o>>z,w-=v,k-=j,g-=f,v-=C.r,j-=C.g,f-=C.b,p=N+((p=J+d+1)<I?p:I)<<2,u+=C.r=s[p],i+=C.g=s[p+1],e+=C.b=s[p+2],w+=u,k+=i,g+=e,C=C.next,v+=t=D.r,j+=r=D.g,f+=q=D.b,u-=t,i-=r,e-=q,D=D.next,L+=4;N+=H}for(J=T=0;0<=H?T<H:T>H;J=0<=H?++T:--T){i=e=u=k=g=w=0,L=J<<2,v=x*(t=s[L]),j=x*(r=s[L+1]),f=x*(q=s[L+2]),w+=F*t,k+=F*r,g+=F*q,A=E;for(n=U=0;0<=x?U<x:U>x;n=0<=x?++U:--U)A.r=t,A.g=r,A.b=q,A=A.next;M=H;for(n=V=1;1<=d?V<=d:V>=d;n=1<=d?++V:--V)L=M+J<<2,w+=(A.r=t=s[L])*(y=x-n),k+=(A.g=r=s[L+1])*y,g+=(A.b=q=s[L+2])*y,u+=t,i+=r,e+=q,A=A.next,n<m&&(M+=H);L=J,C=E,D=B;for(K=W=0;0<=l?W<l:W>l;K=0<=l?++W:--W)p=L<<2,s[p]=w*o>>z,s[p+1]=k*o>>z,s[p+2]=g*o>>z,w-=v,k-=j,g-=f,v-=C.r,j-=C.g,f-=C.b,p=J+((p=K+x)<m?p:m)*H<<2,w+=u+=C.r=s[p],k+=i+=C.g=s[p+1],g+=e+=C.b=s[p+2],C=C.next,v+=t=D.r,j+=r=D.g,f+=q=D.b,u-=t,i-=r,e-=q,D=D.next,L+=H}return this}),e.Filter.register("stackBlur",function(a){return this.processPlugin("stackBlur",[a])})}(),e.Filter.register("threshold",function(a){return this.process("threshold",function(b){var c;return c=.2126*b.r+.7152*b.g+.0722*b.b,c<a?(b.r=0,b.g=0,b.b=0):(b.r=255,b.g=255,b.b=255),b})})}.call(this),define("Caman",function(){}),function(a,b,c){typeof module=="object"&&typeof module.exports=="object"?module.exports=b.document&&typeof a!="undefined"?c(b,!0):function(a,b){return c(a,b)}:typeof define=="function"&&define.amd!=undefined?define("jcanvas",["jquery"],c):c(a,b)}(typeof window!="undefined"?window.$:{},typeof window!="undefined"?window:this,function(a,b){function G(a){var b=this,c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function I(){o(this,I.baseDefaults)}function J(a){return q(a)==="string"}function K(a){return!isNaN(h(a))&&!isNaN(i(a))}function L(a){return a&&a.getContext?a.getContext("2d"):l}function M(a){var b,c,d;for(b in a)a.hasOwnProperty(b)&&(d=a[b],c=q(d),c==="string"&&K(d)&&b!=="text"&&(a[b]=i(d)));a.text!==undefined&&(a.text=String(a.text))}function N(a){return a=o({},a),a.masks=a.masks.slice(0),a}function O(a,b){var c;a.save(),c=N(b.transforms),b.savedTransforms.push(c)}function P(a,b){b.savedTransforms.length===0?b.transforms=N(D):(a.restore(),b.transforms=b.savedTransforms.pop())}function Q(a,b,c,d){c[d]&&(r(c[d])?b[d]=c[d].call(a,c):b[d]=c[d])}function R(a,b,c){Q(a,b,c,"fillStyle"),Q(a,b,c,"strokeStyle"),b.lineWidth=c.strokeWidth,c.rounded?b.lineCap=b.lineJoin="round":(b.lineCap=c.strokeCap,b.lineJoin=c.strokeJoin,b.miterLimit=c.miterLimit),c.strokeDash||(c.strokeDash=[]),b.setLineDash&&b.setLineDash(c.strokeDash),b.webkitLineDash=b.mozDash=c.strokeDash,b.lineDashOffset=b.webkitLineDashOffset=b.mozDashOffset=c.strokeDashOffset,b.shadowOffsetX=c.shadowX,b.shadowOffsetY=c.shadowY,b.shadowBlur=c.shadowBlur,b.shadowColor=c.shadowColor,b.globalAlpha=c.opacity,b.globalCompositeOperation=c.compositing,c.imageSmoothing&&(b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=c.imageSmoothingEnabled)}function S(a,b,c){c.mask&&(c.autosave&&O(a,b),a.clip(),b.transforms.masks.push(c._args))}function T(a,b){b._transformed&&a.restore()}function U(a,b,c){var d;c.closed&&b.closePath(),c.shadowStroke&&c.strokeWidth!==0?(b.stroke(),b.fill(),b.shadowColor="transparent",b.shadowBlur=0,b.stroke()):(b.fill(),c.fillStyle!=="transparent"&&(b.shadowColor="transparent"),c.strokeWidth!==0&&b.stroke()),c.closed||b.closePath(),T(b,c),c.mask&&(d=W(a),S(b,d,c))}function V(a,b,c,d,e){c._toRad=c.inDegrees?t/180:1,c._transformed=j,b.save(),!c.fromCenter&&!c._centered&&d!==m&&(e===m&&(e=d),c.x+=d/2,c.y+=e/2,c._centered=j),c.rotate&&vb(b,c,l),(c.scale!==1||c.scaleX!==1||c.scaleY!==1)&&wb(b,c,l),(c.translate||c.translateX||c.translateY)&&xb(b,c,l)}function W(b){var c=C.dataCache,d;return c._canvas===b&&c._data?d=c._data:(d=a.data(b,"jCanvas"),d||(d={canvas:b,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:l,cursor:a(b).css("cursor"),drag:{layer:l,dragging:k},event:{type:l,x:l,y:l},events:{},transforms:N(D),savedTransforms:[],animating:k,animated:l,pixelRatio:1,scaled:k},a.data(b,"jCanvas",d)),c._canvas=b,c._data=d),d}function X(a,b,c){var d;for(d in H.events)H.events.hasOwnProperty(d)&&(c[d]||c.cursors&&c.cursors[d])&&Y(a,b,c,d);b.events.mouseout||(a.bind("mouseout.jCanvas",function(){var c=b.drag.layer,d;c&&(b.drag={},hb(a,b,c,"dragcancel"));for(d=0;d<b.layers.length;d+=1)c=b.layers[d],c._hovered&&a.triggerLayerEvent(b.layers[d],"mouseout");a.drawLayers()}),b.events.mouseout=j)}function Y(a,b,c,d){H.events[d](a,b),c._event=j}function Z(a,b,c){var d,e,f;if(c.draggable||c.cursors){d=["mousedown","mousemove","mouseup"];for(f=0;f<d.length;f+=1)e=d[f],Y(a,b,c,e);c._event=j}}function $(a,b,c,d){var e=b.layer.names;d?d.name!==m&&J(c.name)&&c.name!==d.name&&delete e[c.name]:d=c,J(d.name)&&(e[d.name]=c)}function _(a,b,c,d){var e=b.layer.groups,f,g,h,i,j;if(!d)d=c;else if(d.groups!==m&&c.groups!==l)for(h=0;h<c.groups.length;h+=1){g=c.groups[h],f=e[g];if(f){for(j=0;j<f.length;j+=1)if(f[j]===c){i=j,f.splice(j,1);break}f.length===0&&delete e[g]}}if(d.groups!==m&&d.groups!==l)for(h=0;h<d.groups.length;h+=1)g=d.groups[h],f=e[g],f||(f=e[g]=[],f.name=g),i===m&&(i=f.length),f.splice(i,0,c)}function ab(a){var b,c,d,e;b=l;for(c=a.intersecting.length-1;c>=0;c-=1){b=a.intersecting[c];if(b._masks){for(e=b._masks.length-1;e>=0;e-=1){d=b._masks[e];if(!d.intersects){b.intersects=k;break}}if(b.intersects&&!b.intangible)break}}return b&&b.intangible&&(b=l),b}function bb(a,b,c,d){c&&c.visible&&c._method&&(d?c._next=d:c._next=l,c._method.call(a,c))}function cb(a,b,c){var d,e,f,g,h,i,l,m,n,o;g=b.drag,e=g.layer,h=e&&e.dragGroups||[],d=b.layers;if(c==="mousemove"||c==="touchmove"){g.dragging||(g.dragging=j,e.dragging=j,e.bringToFront&&(d.splice(e.index,1),e.index=d.push(e)),e._startX=e.x,e._startY=e.y,e._endX=e._eventX,e._endY=e._eventY,hb(a,b,e,"dragstart"));if(g.dragging){n=e._eventX-(e._endX-e._startX),o=e._eventY-(e._endY-e._startY),e.dx=n-e.x,e.dy=o-e.y,e.restrictDragToAxis!=="y"&&(e.x=n),e.restrictDragToAxis!=="x"&&(e.y=o),hb(a,b,e,"drag");for(m=0;m<h.length;m+=1){l=h[m],i=b.layer.groups[l];if(e.groups&&i)for(f=0;f<i.length;f+=1)i[f]!==e&&(e.restrictDragToAxis!=="y"&&i[f].restrictDragToAxis!=="y"&&(i[f].x+=e.dx),e.restrictDragToAxis!=="x"&&i[f].restrictDragToAxis!=="x"&&(i[f].y+=e.dy))}}}else if(c==="mouseup"||c==="touchend")g.dragging&&(e.dragging=k,g.dragging=k,hb(a,b,e,"dragstop")),b.drag={}}function db(b,c,d){var e;c.cursors&&(e=c.cursors[d]),a.inArray(e,E.cursors)!==-1&&(e=E.prefix+e),e&&b.css({cursor:e})}function eb(a,b){a.css({cursor:b.cursor})}function fb(a,b,c,d,e){d[c]&&b._running&&!b._running[c]&&(b._running[c]=j,d[c].call(a[0],b,e),b._running[c]=k)}function gb(b,c){return!b.disableEvents&&(!b.intangible||a.inArray(c,F)===-1)}function hb(a,b,c,d,e){gb(c,d)&&(d!=="mouseout"&&db(a,c,d),fb(a,c,d,c,e),fb(a,c,d,b.eventHooks,e),fb(a,c,d,H.eventHooks,e))}function ib(b,c,d,e){var f,g,h,i=c._layer?d:c;c._args=d;if(c.draggable||c.dragGroups)c.layer=j,c.draggable=j;c._method||(e?c._method=e:c.method?c._method=a.fn[c.method]:c.type?c._method=a.fn[B.drawings[c.type]]:c._method=function(){});if(c.layer&&!c._layer){f=a(b),g=W(b),h=g.layers;if(i.name===l||J(i.name)&&g.layer.names[i.name]===m)M(c),i=new G(c),i.canvas=b,i.layer=j,i._layer=j,i._running={},i.data!==l?i.data=o({},i.data):i.data={},i.groups!==l?i.groups=i.groups.slice(0):i.groups=[],$(f,g,i),_(f,g,i),X(f,g,i),Z(f,g,i),c._event=i._event,i._method===a.fn.drawText&&f.measureText(i),i.index===l&&(i.index=h.length),h.splice(i.index,0,i),c._args=i,hb(f,g,i,"add")}else c.layer||M(c);return i}function jb(a){var b,c;for(c=0;c<E.props.length;c+=1)b=E.props[c],a[b]=a["_"+b]}function kb(a,b){var c,d;for(d=0;d<E.props.length;d+=1)c=E.props[d],a[c]!==m&&(a["_"+c]=a[c],E.propsObj[c]=j,b&&delete a[c])}function lb(a,b,c){var d,e,f,g;for(d in c)if(c.hasOwnProperty(d)){e=c[d],r(e)&&(c[d]=e.call(a,b,d));if(q(e)==="object"&&s(e)){for(f in e)e.hasOwnProperty(f)&&(g=e[f],b[d]!==m&&(b[d+"."+f]=b[d][f],c[d+"."+f]=g));delete c[d]}}return c}function mb(a){var b;for(b in a)a.hasOwnProperty(b)&&b.indexOf(".")!==-1&&delete a[b]}function nb(b){var d,e,f=[],g=1;return b.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&(b==="transparent"&&(b="rgba(0, 0, 0, 0)"),e=c.head,d=e.style.color,e.style.color=b,b=a.css(e,"color"),e.style.color=d),b.match(/^rgb/gi)&&(f=b.match(/(\d+(\.\d+)?)/gi),b.match(/%/gi)&&(g=2.55),f[0]*=g,f[1]*=g,f[2]*=g,f[3]!==m?f[3]=i(f[3]):f[3]=1),f}function ob(a){var b=3,c;q(a.start)!=="array"&&(a.start=nb(a.start),a.end=nb(a.end)),a.now=[];if(a.start[3]!==1||a.end[3]!==1)b=4;for(c=0;c<b;c+=1)a.now[c]=a.start[c]+(a.end[c]-a.start[c])*a.pos,c<3&&(a.now[c]=u(a.now[c]));a.start[3]!==1||a.end[3]!==1?a.now="rgba( "+a.now.join(",")+" )":(a.now.slice(0,3),a.now="rgb( "+a.now.join(",")+" )"),a.elem.nodeName?a.elem.style[a.prop]=a.now:a.elem[a.prop]=a.now}function pb(b){var c;for(c=0;c<b.length;c+=1)a.fx.step[b[c]]=ob}function qb(a){return B.touchEvents[a]&&(a=B.touchEvents[a]),a}function rb(a){return B.mouseEvents[a]&&(a=B.mouseEvents[a]),a}function sb(a){H.events[a]=function(b,c){function g(a){f.x=a.offsetX,f.y=a.offsetY,f.type=d,f.event=a,b.drawLayers({resetFire:j}),a.preventDefault()}var d,e,f;f=c.event,d=a==="mouseover"||a==="mouseout"?"mousemove":a,e=qb(d),c.events[d]||(e!==d?b.bind(d+".jCanvas "+e+".jCanvas",g):b.bind(d+".jCanvas",g),c.events[d]=j)}}function tb(a){var b;for(b=0;b<a.length;b+=1)sb(a[b])}function ub(a,b,c){var d,e,f,g,h,i,j,k;d=c._args,d&&(e=W(a),f=e.event,f.x!==l&&f.y!==l&&(i=f.x*e.pixelRatio,j=f.y*e.pixelRatio,g=b.isPointInPath(i,j)||b.isPointInStroke&&b.isPointInStroke(i,j)),h=e.transforms,d.eventX=f.x,d.eventY=f.y,d.event=f.event,k=e.transforms.rotate,i=d.eventX,j=d.eventY,k!==0?(d._eventX=i*x(-k)-j*w(-k),d._eventY=j*x(-k)+i*w(-k)):(d._eventX=i,d._eventY=j),d._eventX/=h.scaleX,d._eventY/=h.scaleY,g&&e.intersecting.push(d),d.intersects=!!g)}function vb(a,b,c){b._toRad=b.inDegrees?t/180:1,a.translate(b.x,b.y),a.rotate(b.rotate*b._toRad),a.translate(-b.x,-b.y),c&&(c.rotate+=b.rotate*b._toRad)}function wb(a,b,c){b.scale!==1&&(b.scaleX=b.scaleY=b.scale),a.translate(b.x,b.y),a.scale(b.scaleX,b.scaleY),a.translate(-b.x,-b.y),c&&(c.scaleX*=b.scaleX,c.scaleY*=b.scaleY)}function xb(a,b,c){b.translate&&(b.translateX=b.translateY=b.translate),a.translate(b.translateX,b.translateY),c&&(c.translateX+=b.translateX,c.translateY+=b.translateY)}function yb(a){while(a<0)a+=2*t;return a}function zb(a,b){return a.x+a.radius*x(b)}function Ab(a,b){return a.y+a.radius*w(b)}function Bb(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o;c===d?(m=0,n=0):(m=c.x,n=c.y),!d.inDegrees&&d.end===360&&(d.end=t*2),d.start*=c._toRad,d.end*=c._toRad,d.start-=t/2,d.end-=t/2,o=t/180,d.ccw&&(o*=-1),e=zb(d,d.start+o),f=Ab(d,d.start+o),g=zb(d,d.start),h=Ab(d,d.start),Db(a,b,c,d,e,f,g,h),b.arc(d.x+m,d.y+n,d.radius,d.start,d.end,d.ccw),i=zb(d,d.end+o),j=Ab(d,d.end+o),k=zb(d,d.end),l=Ab(d,d.end),Eb(a,b,c,d,k,l,i,j)}function Cb(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o;d.arrowRadius&&!c.closed&&(o=y(h-f,g-e),o-=t,m=c.strokeWidth*x(o),n=c.strokeWidth*w(o),i=g+d.arrowRadius*x(o+d.arrowAngle/2),j=h+d.arrowRadius*w(o+d.arrowAngle/2),k=g+d.arrowRadius*x(o-d.arrowAngle/2),l=h+d.arrowRadius*w(o-d.arrowAngle/2),b.moveTo(i-m,j-n),b.lineTo(g-m,h-n),b.lineTo(k-m,l-n),b.moveTo(g-m,h-n),b.lineTo(g+m,h+n),b.moveTo(g,h))}function Db(a,b,c,d,e,f,g,h){d._arrowAngleConverted||(d.arrowAngle*=c._toRad,d._arrowAngleConverted=j),d.startArrow&&Cb(a,b,c,d,e,f,g,h)}function Eb(a,b,c,d,e,f,g,h){d._arrowAngleConverted||(d.arrowAngle*=c._toRad,d._arrowAngleConverted=j),d.endArrow&&Cb(a,b,c,d,e,f,g,h)}function Fb(a,b,c,d){var e,f,g;e=2,Db(a,b,c,d,d.x2+c.x,d.y2+c.y,d.x1+c.x,d.y1+c.y),d.x1!==m&&d.y1!==m&&b.moveTo(d.x1+c.x,d.y1+c.y);while(j){f=d["x"+e],g=d["y"+e];if(f===m||g===m)break;b.lineTo(f+c.x,g+c.y),e+=1}e-=1,Eb(a,b,c,d,d["x"+(e-1)]+c.x,d["y"+(e-1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function Gb(a,b,c,d){var e,f,g,h,i;e=2,Db(a,b,c,d,d.cx1+c.x,d.cy1+c.y,d.x1+c.x,d.y1+c.y),d.x1!==m&&d.y1!==m&&b.moveTo(d.x1+c.x,d.y1+c.y);while(j){f=d["x"+e],g=d["y"+e],h=d["cx"+(e-1)],i=d["cy"+(e-1)];if(f===m||g===m||h===m||i===m)break;b.quadraticCurveTo(h+c.x,i+c.y,f+c.x,g+c.y),e+=1}e-=1,Eb(a,b,c,d,d["cx"+(e-1)]+c.x,d["cy"+(e-1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function Hb(a,b,c,d){var e,f,g,h,i,k,l,n;e=2,f=1,Db(a,b,c,d,d.cx1+c.x,d.cy1+c.y,d.x1+c.x,d.y1+c.y),d.x1!==m&&d.y1!==m&&b.moveTo(d.x1+c.x,d.y1+c.y);while(j){g=d["x"+e],h=d["y"+e],i=d["cx"+f],k=d["cy"+f],l=d["cx"+(f+1)],n=d["cy"+(f+1)];if(g===m||h===m||i===m||k===m||l===m||n===m)break;b.bezierCurveTo(i+c.x,k+c.y,l+c.x,n+c.y,g+c.x,h+c.y),e+=1,f+=2}e-=1,f-=2,Eb(a,b,c,d,d["cx"+(f+1)]+c.x,d["cy"+(f+1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function Ib(a,b,c){return b*=a._toRad,b-=t/2,c*x(b)}function Jb(a,b,c){return b*=a._toRad,b-=t/2,c*w(b)}function Kb(a,b,c,d){var e,f,g,h,i,k,l,n,o,p,q,r,s;c===d?(h=0,i=0):(h=c.x,i=c.y),e=1,k=n=p=r=d.x+h,l=o=q=s=d.y+i,Db(a,b,c,d,k+Ib(c,d.a1,d.l1),l+Jb(c,d.a1,d.l1),k,l),d.x!==m&&d.y!==m&&b.moveTo(k,l);while(j){f=d["a"+e],g=d["l"+e];if(f===m||g===m)break;p=r,q=s,r+=Ib(c,f,g),s+=Jb(c,f,g),e===1&&(n=r,o=s),b.lineTo(r,s),e+=1}Eb(a,b,c,d,p,q,r,s)}function Lb(a,b,c){isNaN(h(c.fontSize))||(c.fontSize+="px"),b.font=c.fontStyle+" "+c.fontSize+" "+c.fontFamily}function Mb(b,c,d,e){var f,g,h,j=C.propCache;if(j.text===d.text&&j.fontStyle===d.fontStyle&&j.fontSize===d.fontSize&&j.fontFamily===d.fontFamily&&j.maxWidth===d.maxWidth&&j.lineHeight===d.lineHeight)d.width=j.width,d.height=j.height;else{d.width=c.measureText(e[0]).width;for(h=1;h<e.length;h+=1)g=c.measureText(e[h]).width,g>d.width&&(d.width=g);f=b.style.fontSize,b.style.fontSize=d.fontSize,d.height=i(a.css(b,"fontSize"))*e.length*d.lineHeight,b.style.fontSize=f}}function Nb(a,b){var c=b.text,d=b.maxWidth,e=c.split("\n"),f=[],g,h,i,j,k,l;for(i=0;i<e.length;i+=1){j=e[i],k=j.split(" "),g=[],h="";if(k.length===1||a.measureText(j).width<d)g=[j];else{for(l=0;l<k.length;l+=1)a.measureText(h+k[l]).width>d&&(h!==""&&g.push(h),h=""),h+=k[l],l!==k.length-1&&(h+=" ");g.push(h)}f=f.concat(g.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return f}b=b?b:this;var c=b.document,d=b.Image,e=b.Array,f=b.getComputedStyle,g=b.Math,h=b.Number,i=b.parseFloat,j=!0,k=!1,l=null,m=undefined,n,o=a.extend,p=a.inArray,q=function(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},r=a.isFunction,s=a.isPlainObject,t=g.PI,u=g.round,v=g.abs,w=g.sin,x=g.cos,y=g.atan2,z=e.prototype.slice,A=a.event.fix,B={},C={dataCache:{},propCache:{},imageCache:{}},D={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},E={},F=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"],H={events:{},eventHooks:{},future:{}};I.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:j,baseline:"middle",bringToFront:k,ccw:k,closed:k,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:j,crossOrigin:l,cursors:l,disableEvents:k,draggable:k,dragGroups:l,groups:l,data:l,dx:l,dy:l,end:360,eventX:l,eventY:l,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:j,height:l,imageSmoothing:j,inDegrees:j,intangible:k,index:l,letterSpacing:l,lineHeight:1,layer:k,mask:k,maxWidth:l,miterLimit:10,name:l,opacity:1,r1:l,r2:l,radius:0,repeat:"repeat",respectAlign:k,restrictDragToAxis:null,rotate:0,rounded:k,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:k,shadowX:0,shadowY:0,sHeight:l,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:l,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:l,sx:l,sy:l,text:"",translate:0,translateX:0,translateY:0,type:l,visible:j,width:l,x:0,y:0},n=new I,G.prototype=n,H.extend=function(c){return c.name&&(c.props&&o(n,c.props),a.fn[c.name]=function d(a){var b=this,e,f,g,h,i;for(f=0;f<b.length;f+=1)e=b[f],g=L(e),g&&(h=new G(a),i=ib(e,h,a,d),R(e,g,h),c.fn.call(e,g,h));return b},c.type&&(B.drawings[c.type]=c.name)),a.fn[c.name]},a.fn.getEventHooks=function(){var b=this,c,d,e={};return b.length!==0&&(c=b[0],d=W(c),e=d.eventHooks),e},a.fn.setEventHooks=function(c){var d=this,e,f,g;for(f=0;f<d.length;f+=1)e=a(d[f]),g=W(d[f]),o(g.eventHooks,c);return d},a.fn.getLayers=function(b){var c=this,d,e,f,g,h,i=[];if(c.length!==0){d=c[0],e=W(d),f=e.layers;if(r(b))for(h=0;h<f.length;h+=1)g=f[h],b.call(d,g)&&i.push(g);else i=f}return i},a.fn.getLayer=function(b){var c=this,d,e,f,g,h,i;if(c.length!==0){d=c[0],e=W(d),f=e.layers,i=q(b);if(b&&b.layer)g=b;else if(i==="number")b<0&&(b=f.length+b),g=f[b];else if(i==="regexp"){for(h=0;h<f.length;h+=1)if(J(f[h].name)&&f[h].name.match(b)){g=f[h];break}}else g=e.layer.names[b]}return g},a.fn.getLayerGroup=function(b){var c=this,d,e,f,g,h,i=q(b);if(c.length!==0){d=c[0];if(i==="array")h=b;else if(i==="regexp"){e=W(d),f=e.layer.groups;for(g in f)if(g.match(b)){h=f[g];break}}else e=W(d),h=e.layer.groups[b]}return h},a.fn.getLayerIndex=function(b){var c=this,d=c.getLayers(),e=c.getLayer(b);return p(e,d)},a.fn.setLayer=function(c,d){var e=this,f,g,h,j,l,m,n;for(g=0;g<e.length;g+=1){f=a(e[g]),h=W(e[g]),j=a(e[g]).getLayer(c);if(j){$(f,h,j,d),_(f,h,j,d),M(d);for(l in d)d.hasOwnProperty(l)&&(m=d[l],n=q(m),n==="object"&&s(m)?(j[l]=o({},m),M(j[l])):n==="array"?j[l]=m.slice(0):n==="string"?m.indexOf("+=")===0?j[l]+=i(m.substr(2)):m.indexOf("-=")===0?j[l]-=i(m.substr(2)):!isNaN(m)&&K(m)?j[l]=i(m):j[l]=m:j[l]=m);X(f,h,j),Z(f,h,j),a.isEmptyObject(d)===k&&hb(f,h,j,"change",d)}}return e},a.fn.setLayers=function(c,d){var e=this,f,g,h,i;for(g=0;g<e.length;g+=1){f=a(e[g]),h=f.getLayers(d);for(i=0;i<h.length;i+=1)f.setLayer(h[i],c)}return e},a.fn.setLayerGroup=function(c,d){var e=this,f,g,h,i;for(g=0;g<e.length;g+=1){f=a(e[g]),h=f.getLayerGroup(c);if(h)for(i=0;i<h.length;i+=1)f.setLayer(h[i],d)}return e},a.fn.moveLayer=function(c,d){var e=this,f,g,h,i,j;for(g=0;g<e.length;g+=1)f=a(e[g]),h=W(e[g]),i=h.layers,j=f.getLayer(c),j&&(j.index=p(j,i),i.splice(j.index,1),i.splice(d,0,j),d<0&&(d=i.length+d),j.index=d,hb(f,h,j,"move"));return e},a.fn.removeLayer=function(c){var d=this,e,f,g,h,i;for(f=0;f<d.length;f+=1)e=a(d[f]),g=W(d[f]),h=e.getLayers(),i=e.getLayer(c),i&&(i.index=p(i,h),h.splice(i.index,1),delete i._layer,$(e,g,i,{name:l}),_(e,g,i,{groups:l}),hb(e,g,i,"remove"));return d},a.fn.removeLayers=function(c){var d=this,e,f,g,h,i,j;for(f=0;f<d.length;f+=1){e=a(d[f]),g=W(d[f]),h=e.getLayers(c);for(j=0;j<h.length;j+=1)i=h[j],e.removeLayer(i),j-=1;g.layer.names={},g.layer.groups={}}return d},a.fn.removeLayerGroup=function(c){var d=this,e,f,g,h,i,j;if(c!==m)for(f=0;f<d.length;f+=1){e=a(d[f]),g=W(d[f]),h=e.getLayers(),i=e.getLayerGroup(c);if(i){i=i.slice(0);for(j=0;j<i.length;j+=1)e.removeLayer(i[j])}}return d},a.fn.addLayerToGroup=function(c,d){var e=this,f,g,h,i=[d];for(g=0;g<e.length;g+=1)f=a(e[g]),h=f.getLayer(c),h.groups&&(i=h.groups.slice(0),p(d,h.groups)===-1&&i.push(d)),f.setLayer(h,{groups:i});return e},a.fn.removeLayerFromGroup=function(c,d){var e=this,f,g,h,i=[],j;for(g=0;g<e.length;g+=1)f=a(e[g]),h=f.getLayer(c),h.groups&&(j=p(d,h.groups),j!==-1&&(i=h.groups.slice(0),i.splice(j,1),f.setLayer(h,{groups:i})));return e},E.cursors=["grab","grabbing","zoom-in","zoom-out"],E.prefix=function(){var a=f(c.documentElement,""),b=(z.call(a).join("").match(/-(moz|webkit|ms)-/)||a.OLink===""&&["","o"])[1];return"-"+b+"-"}(),a.fn.triggerLayerEvent=function(b,c){var d=this,e,f,g;for(f=0;f<d.length;f+=1)e=a(d[f]),g=W(d[f]),b=e.getLayer(b),b&&hb(e,g,b,c);return d},a.fn.drawLayer=function(c){var d=this,e,f,g,h;for(e=0;e<d.length;e+=1)g=a(d[e]),f=L(d[e]),f&&(h=g.getLayer(c),bb(g,f,h));return d},a.fn.drawLayers=function(c){var d=this,e,f,g,h=c||{},i,m,n,o,p,q,r,s,t,u;p=h.index,p||(p=0);for(f=0;f<d.length;f+=1){e=a(d[f]),g=L(d[f]);if(g){r=W(d[f]),h.clear!==k&&e.clearCanvas(),i=r.layers;for(o=p;o<i.length;o+=1){m=i[o],m.index=o,h.resetFire&&(m._fired=k),bb(e,g,m,o+1),m._masks=r.transforms.masks.slice(0);if(m._method===a.fn.drawImage&&m.visible){u=!0;break}}if(u)break;q=o,m=ab(r),s=r.event,t=s.type,r.drag.layer&&cb(e,r,t),n=r.lastIntersected,n!==l&&m!==n&&n._hovered&&!n._fired&&!r.drag.dragging&&(r.lastIntersected=l,n._fired=j,n._hovered=k,hb(e,r,n,"mouseout"),eb(e,r)),m&&(m[t]||(t=rb(t)),m._event&&m.intersects&&(r.lastIntersected=m,(m.mouseover||m.mouseout||m.cursors)&&!r.drag.dragging&&!m._hovered&&!m._fired&&(m._fired=j,m._hovered=j,hb(e,r,m,"mouseover")),m._fired||(m._fired=j,s.type=l,hb(e,r,m,t)),m.draggable&&!m.disableEvents&&(t==="mousedown"||t==="touchstart")&&(r.drag.layer=m))),m===l&&!r.drag.dragging&&eb(e,r),q===i.length&&(r.intersecting.length=0,r.transforms=N(D),r.savedTransforms.length=0)}}return d},a.fn.addLayer=function(b){var c=this,d,e,f;for(d=0;d<c.length;d+=1)e=L(c[d]),e&&(f=new G(b),f.layer=j,ib(c[d],f,b));return c},E.props=["width","height","opacity","lineHeight"],E.propsObj={},a.fn.animateLayer=function(){function p(a,b,c){return function(){jb(c),mb(c),(!b.animating||b.animated===c)&&a.drawLayers(),c._animating=k,b.animating=k,b.animated=l,g[4]&&g[4].call(a[0],c),hb(a,b,c,"animateend")}}function s(a,b,c){return function(d,e){var f,h,i,k=!1;e.prop[0]==="_"&&(k=!0,e.prop=e.prop.replace("_",""),c[e.prop]=c["_"+e.prop]),e.prop.indexOf(".")!==-1&&(f=e.prop.split("."),h=f[0],i=f[1],c[h]&&(c[h][i]=e.now)),c._pos!==e.pos&&(c._pos=e.pos,!c._animating&&!b.animating&&(c._animating=j,b.animating=j,b.animated=c),(!b.animating||b.animated===c)&&a.drawLayers()),g[5]&&g[5].call(a[0],d,e,c),hb(a,b,c,"animate",e),k&&(e.prop="_"+e.prop)}}var c=this,d,e,f,g=z.call(arguments,0),h,i,n;q(g[2])==="object"?(g.splice(2,0,g[2].duration||l),g.splice(3,0,g[3].easing||l),g.splice(4,0,g[4].complete||l),g.splice(5,0,g[5].step||l)):(g[2]===m?(g.splice(2,0,l),g.splice(3,0,l),g.splice(4,0,l)):r(g[2])&&(g.splice(2,0,l),g.splice(3,0,l)),g[3]===m?(g[3]=l,g.splice(4,0,l)):r(g[3])&&g.splice(3,0,l));for(e=0;e<c.length;e+=1)d=a(c[e]),f=L(c[e]),f&&(h=W(c[e]),i=d.getLayer(g[0]),i&&i._method!==a.fn.draw&&(n=o({},g[1]),n=lb(c[e],i,n),kb(n,j),kb(i),i.style=E.propsObj,a(i).animate(n,{duration:g[2],easing:a.easing[g[3]]?g[3]:l,complete:p(d,h,i),step:s(d,h,i)}),hb(d,h,i,"animatestart")));return c},a.fn.animateLayerGroup=function(c){var d=this,e,f,g=z.call(arguments,0),h,i;for(f=0;f<d.length;f+=1){e=a(d[f]),h=e.getLayerGroup(c);if(h)for(i=0;i<h.length;i+=1)g[0]=h[i],e.animateLayer.apply(e,g)}return d},a.fn.delayLayer=function(c,d){var e=this,f,g,h,i;d=d||0;for(g=0;g<e.length;g+=1)f=a(e[g]),h=W(e[g]),i=f.getLayer(c),i&&(a(i).delay(d),hb(f,h,i,"delay"));return e},a.fn.delayLayerGroup=function(c,d){var e=this,f,g,h,i,j;d=d||0;for(g=0;g<e.length;g+=1){f=a(e[g]),h=f.getLayerGroup(c);if(h)for(j=0;j<h.length;j+=1)i=h[j],f.delayLayer(i,d)}return e},a.fn.stopLayer=function(c,d){var e=this,f,g,h,i;for(g=0;g<e.length;g+=1)f=a(e[g]),h=W(e[g]),i=f.getLayer(c),i&&(a(i).stop(d),hb(f,h,i,"stop"));return e},a.fn.stopLayerGroup=function(c,d){var e=this,f,g,h,i,j;for(g=0;g<e.length;g+=1){f=a(e[g]),h=f.getLayerGroup(c);if(h)for(j=0;j<h.length;j+=1)i=h[j],f.stopLayer(i,d)}return e},pb(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]),B.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},B.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},tb(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","contextmenu"]),a.event.fix=function(b){var c,d,e;return b=A.call(a.event,b),d=b.originalEvent,d&&(e=d.changedTouches,b.pageX!==m&&b.offsetX===m?(c=a(b.currentTarget).offset(),c&&(b.offsetX=b.pageX-c.left,b.offsetY=b.pageY-c.top)):e&&(c=a(b.currentTarget).offset(),c&&(b.offsetX=e[0].pageX-c.left,b.offsetY=e[0].pageY-c.top))),b},B.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},a.fn.draw=function Ob(b){var c=this,d,e,f,g=new G(b),h;if(B.drawings[g.type]&&g.type!=="function")c[B.drawings[g.type]](b);else for(e=0;e<c.length;e+=1)d=a(c[e]),f=L(c[e]),f&&(g=new G(b),h=ib(c[e],g,b,Ob),g.visible&&g.fn&&g.fn.call(c[e],f,g));return c},a.fn.clearCanvas=function Pb(a){var b=this,c,d,e=new G(a),f;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e.width===l||e.height===l?(d.save(),d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,b[c].width,b[c].height),d.restore()):(f=ib(b[c],e,a,Pb),V(b[c],d,e,e.width,e.height),d.clearRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height),T(d,e)));return b},a.fn.saveCanvas=function Qb(a){var b=this,c,d,e,f,g,h;for(c=0;c<b.length;c+=1){d=L(b[c]);if(d){g=W(b[c]),e=new G(a),f=ib(b[c],e,a,Qb);for(h=0;h<e.count;h+=1)O(d,g)}}return b},a.fn.restoreCanvas=function Rb(a){var b=this,c,d,e,f,g,h;for(c=0;c<b.length;c+=1){d=L(b[c]);if(d){g=W(b[c]),e=new G(a),f=ib(b[c],e,a,Rb);for(h=0;h<e.count;h+=1)P(d,g)}}return b},a.fn.rotateCanvas=function Sb(a){var b=this,c,d,e,f,g;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(g=W(b[c]),e=new G(a),f=ib(b[c],e,a,Sb),e.autosave&&O(d,g),vb(d,e,g.transforms));return b},a.fn.scaleCanvas=function Tb(a){var b=this,c,d,e,f,g;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(g=W(b[c]),e=new G(a),f=ib(b[c],e,a,Tb),e.autosave&&O(d,g),wb(d,e,g.transforms));return b},a.fn.translateCanvas=function Ub(a){var b=this,c,d,e,f,g;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(g=W(b[c]),e=new G(a),f=ib(b[c],e,a,Ub),e.autosave&&O(d,g),xb(d,e,g.transforms));return b},a.fn.drawRect=function Vb(a){var b=this,c,d,e,f,g,h,i,l,m,n;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,Vb),e.visible&&(V(b[c],d,e,e.width,e.height),R(b[c],d,e),d.beginPath(),e.width&&e.height&&(g=e.x-e.width/2,h=e.y-e.height/2,m=v(e.cornerRadius),m?(i=e.x+e.width/2,l=e.y+e.height/2,e.width<0&&(n=g,g=i,i=n),e.height<0&&(n=h,h=l,l=n),i-g-2*m<0&&(m=(i-g)/2),l-h-2*m<0&&(m=(l-h)/2),d.moveTo(g+m,h),d.lineTo(i-m,h),d.arc(i-m,h+m,m,3*t/2,t*2,k),d.lineTo(i,l-m),d.arc(i-m,l-m,m,0,t/2,k),d.lineTo(g+m,l),d.arc(g+m,l-m,m,t/2,t,k),d.lineTo(g,h+m),d.arc(g+m,h+m,m,t,3*t/2,k),e.closed=j):d.rect(g,h,e.width,e.height)),ub(b[c],d,e),U(b[c],d,e)));return b},a.fn.drawArc=function Wb(a){var b=this,c,d,e,f;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,Wb),e.visible&&(V(b[c],d,e,e.radius*2),R(b[c],d,e),d.beginPath(),Bb(b[c],d,e,e),ub(b[c],d,e),U(b[c],d,e)));return b},a.fn.drawEllipse=function Xb(a){var b=this,c,d,e,f,g,h;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,Xb),e.visible&&(V(b[c],d,e,e.width,e.height),R(b[c],d,e),g=e.width*(4/3),h=e.height,d.beginPath(),d.moveTo(e.x,e.y-h/2),d.bezierCurveTo(e.x-g/2,e.y-h/2,e.x-g/2,e.y+h/2,e.x,e.y+h/2),d.bezierCurveTo(e.x+g/2,e.y+h/2,e.x+g/2,e.y-h/2,e.x,e.y-h/2),ub(b[c],d,e),e.closed=j,U(b[c],d,e)));return b},a.fn.drawPolygon=function Yb(a){var b=this,c,d,e,f,g,h,i,k,l,m,n;for(c=0;c<b.length;c+=1){d=L(b[c]);if(d){e=new G(a),f=ib(b[c],e,a,Yb);if(e.visible){V(b[c],d,e,e.radius*2),R(b[c],d,e),h=2*t/e.sides,i=h/2,g=i+t/2,k=e.radius*x(i),d.beginPath();for(n=0;n<e.sides;n+=1)l=e.x+e.radius*x(g),m=e.y+e.radius*w(g),d.lineTo(l,m),e.concavity&&(l=e.x+(k+ -k*e.concavity)*x(g+i),m=e.y+(k+ -k*e.concavity)*w(g+i),d.lineTo(l,m)),g+=h;ub(b[c],d,e),e.closed=j,U(b[c],d,e)}}}return b},a.fn.drawSlice=function Zb(b){var c=this,d,e,f,g,h,i,k,l;for(e=0;e<c.length;e+=1)d=a(c[e]),f=L(c[e]),f&&(g=new G(b),h=ib(c[e],g,b,Zb),g.visible&&(V(c[e],f,g,g.radius*2),R(c[e],f,g),g.start*=g._toRad,g.end*=g._toRad,g.start-=t/2,g.end-=t/2,g.start=yb(g.start),g.end=yb(g.end),g.end<g.start&&(g.end+=2*t),i=(g.start+g.end)/2,k=g.radius*g.spread*x(i),l=g.radius*g.spread*w(i),g.x+=k,g.y+=l,f.beginPath(),f.arc(g.x,g.y,g.radius,g.start,g.end,g.ccw),f.lineTo(g.x,g.y),ub(c[e],f,g),g.closed=j,U(c[e],f,g)));return c},a.fn.drawLine=function $b(a){var b=this,c,d,e,f;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,$b),e.visible&&(V(b[c],d,e),R(b[c],d,e),d.beginPath(),Fb(b[c],d,e,e),ub(b[c],d,e),U(b[c],d,e)));return b},a.fn.drawQuadratic=function _b(a){var b=this,c,d,e,f;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,_b),e.visible&&(V(b[c],d,e),R(b[c],d,e),d.beginPath(),Gb(b[c],d,e,e),ub(b[c],d,e),U(b[c],d,e)));return b},a.fn.drawBezier=function ac(a){var b=this,c,d,e,f;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,ac),e.visible&&(V(b[c],d,e),R(b[c],d,e),d.beginPath(),Hb(b[c],d,e,e),ub(b[c],d,e),U(b[c],d,e)));return b},a.fn.drawVector=function bc(a){var b=this,c,d,e,f;for(c=0;c<b.length;c+=1)d=L(b[c]),d&&(e=new G(a),f=ib(b[c],e,a,bc),e.visible&&(V(b[c],d,e),R(b[c],d,e),d.beginPath(),Kb(b[c],d,e,e),ub(b[c],d,e),U(b[c],d,e)));return b},a.fn.drawPath=function cc(a){var b=this,c,d,e,f,g,h;for(c=0;c<b.length;c+=1){d=L(b[c]);if(d){e=new G(a),f=ib(b[c],e,a,cc);if(e.visible){V(b[c],d,e),R(b[c],d,e),d.beginPath(),g=1;while(j){h=e["p"+g];if(h===m)break;h=new G(h),h.type==="line"?Fb(b[c],d,e,h):h.type==="quadratic"?Gb(b[c],d,e,h):h.type==="bezier"?Hb(b[c],d,e,h):h.type==="vector"?Kb(b[c],d,e,h):h.type==="arc"&&Bb(b[c],d,e,h),g+=1}ub(b[c],d,e),U(b[c],d,e)}}}return b},a.fn.drawText=function dc(b){var c=this,d,e,f,g,h,j,k,m,n,o=500,p,q,r,s,u;for(e=0;e<c.length;e+=1){d=a(c[e]),f=L(c[e]);if(f){g=new G(b),h=ib(c[e],g,b,dc);if(g.visible){f.textBaseline=g.baseline,f.textAlign=g.align,Lb(c[e],f,g),g.maxWidth!==l?j=Nb(f,g):j=g.text.toString().split("\n"),Mb(c[e],f,g,j),h&&(h.width=g.width,h.height=g.height),V(c[e],f,g,g.width,g.height),R(c[e],f,g),s=g.x,g.align==="left"?g.respectAlign?g.x+=g.width/2:s-=g.width/2:g.align==="right"&&(g.respectAlign?g.x-=g.width/2:s+=g.width/2);if(g.radius){n=i(g.fontSize),g.letterSpacing===l&&(g.letterSpacing=n/o);for(m=0;m<j.length;m+=1){f.save(),f.translate(g.x,g.y),k=j[m],p=k.length,f.rotate(-(t*g.letterSpacing*(p-1))/2);for(r=0;r<p;r+=1)q=k[r],r!==0&&f.rotate(t*g.letterSpacing),f.save(),f.translate(0,-g.radius),f.fillText(q,0,0),f.restore();g.radius-=n,g.letterSpacing+=n/(o*2*t),f.restore()}}else for(m=0;m<j.length;m+=1)k=j[m],u=g.y+m*g.height/j.length-(j.length-1)*g.height/j.length/2,f.shadowColor=g.shadowColor,f.fillText(k,s,u),g.fillStyle!=="transparent"&&(f.shadowColor="transparent"),g.strokeWidth!==0&&f.strokeText(k,s,u);u=0,g.baseline==="top"?u+=g.height/2:g.baseline==="bottom"&&(u-=g.height/2),g._event&&(f.beginPath(),f.rect(g.x-g.width/2,g.y-g.height/2+u,g.width,g.height),ub(c[e],f,g),f.closePath()),T(f,g)}}}return C.propCache=g,c},a.fn.measureText=function(b){var c=this,d,e,f;e=c.getLayer(b);if(!e||e&&!e._layer)e=new G(b);return d=L(c[0]),d&&(Lb(c[0],d,e),f=Nb(d,e),Mb(c[0],d,e,f)),e},a.fn.drawImage=function ec(b){function r(a,b,c,d,e){d.width===l&&d.sWidth===l&&(d.width=d.sWidth=n.width),d.height===l&&d.sHeight===l&&(d.height=d.sHeight=n.height),e&&(e.width=d.width,e.height=d.height),d.sWidth!==l&&d.sHeight!==l&&d.sx!==l&&d.sy!==l?(d.width===l&&(d.width=d.sWidth),d.height===l&&(d.height=d.sHeight),d.cropFromCenter&&(d.sx+=d.sWidth/2,d.sy+=d.sHeight/2),d.sy-d.sHeight/2<0&&(d.sy=d.sHeight/2),d.sy+d.sHeight/2>n.height&&(d.sy=n.height-d.sHeight/2),d.sx-d.sWidth/2<0&&(d.sx=d.sWidth/2),d.sx+d.sWidth/2>n.width&&(d.sx=n.width-d.sWidth/2),V(a,b,d,d.width,d.height),R(a,b,d),b.drawImage(n,d.sx-d.sWidth/2,d.sy-d.sHeight/2,d.sWidth,d.sHeight,d.x-d.width/2,d.y-d.height/2,d.width,d.height)):(V(a,b,d,d.width,d.height),b.drawImage(n,d.x-d.width/2,d.y-d.height/2,d.width,d.height)),b.beginPath(),b.rect(d.x-d.width/2,d.y-d.height/2,d.width,d.height),ub(a,b,d),b.closePath(),T(b,d),S(b,c,d)}function s(b,c,d,e,f){return function(){var g=a(b);r(b,c,d,e,f),e.layer?hb(g,d,f,"load"):e.load&&e.load.call(g[0],f),e.layer&&(f._masks=d.transforms.masks.slice(0),e._next&&g.drawLayers({clear:k,resetFire:j,index:e._next}))}}var c=this,e,f,g,h,i,m,n,o,p,q=C.imageCache;for(f=0;f<c.length;f+=1)e=c[f],g=L(c[f]),g&&(h=W(c[f]),i=new G(b),m=ib(c[f],i,b,ec),i.visible&&(p=i.source,o=p.getContext,p.src||o?n=p:p&&(q[p]&&q[p].complete?n=q[p]:(n=new d,p.match(/^data:/i)||(n.crossOrigin=i.crossOrigin),n.src=p,q[p]=n)),n&&(n.complete||o?s(e,g,h,i,m)():(n.onload=s(e,g,h,i,m),n.src=n.src))));return c},a.fn.createPattern=function(c){function m(){j=f.createPattern(h,g.repeat),g.load&&g.load.call(e[0],j)}var e=this,f,g,h,i,j,k;return f=L(e[0]),f?(g=new G(c),k=g.source,r(k)?(h=a("<canvas />")[0],h.width=g.width,h.height=g.height,i=L(h),k.call(h,i),m()):(i=k.getContext,k.src||i?h=k:(h=new d,k.match(/^data:/i)||(h.crossOrigin=g.crossOrigin),h.src=k),h.complete||i?m():(h.onload=m(),h.src=h.src))):j=l,j},a.fn.createGradient=function(b){var c=this,d,e,f,g=[],h,i,j,k,n,o,p;e=new G(b),d=L(c[0]);if(d){e.x1=e.x1||0,e.y1=e.y1||0,e.x2=e.x2||0,e.y2=e.y2||0,e.r1!==l&&e.r2!==l?f=d.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2):f=d.createLinearGradient(e.x1,e.y1,e.x2,e.y2);for(k=1;e["c"+k]!==m;k+=1)e["s"+k]!==m?g.push(e["s"+k]):g.push(l);h=g.length,g[0]===l&&(g[0]=0),g[h-1]===l&&(g[h-1]=1);for(k=0;k<h;k+=1){if(g[k]!==l){o=1,p=0,i=g[k];for(n=k+1;n<h;n+=1){if(g[n]!==l){j=g[n];break}o+=1}i>j&&(g[n]=g[k])}else g[k]===l&&(p+=1,g[k]=i+p*((j-i)/o));f.addColorStop(g[k],e["c"+(k+1)])}}else f=l;return f},a.fn.setPixels=function fc(a){var b=this,c,d,e,f,g,h,i,j,k,m;for(d=0;d<b.length;d+=1){c=b[d],e=L(c);if(e){f=new G(a),g=ib(c,f,a,fc),V(b[d],e,f,f.width,f.height);if(f.width===l||f.height===l)f.width=c.width,f.height=c.height,f.x=f.width/2,f.y=f.height/2;if(f.width!==0&&f.height!==0){i=e.getImageData(f.x-f.width/2,f.y-f.height/2,f.width,f.height),j=i.data,m=j.length;if(f.each)for(k=0;k<m;k+=4)h={r:j[k],g:j[k+1],b:j[k+2],a:j[k+3]},f.each.call(c,h,f),j[k]=h.r,j[k+1]=h.g,j[k+2]=h.b,j[k+3]=h.a;e.putImageData(i,f.x-f.width/2,f.y-f.height/2),e.restore()}}}return b},a.fn.getCanvasImage=function(b,c){var d=this,e,f=l;return d.length!==0&&(e=d[0],e.toDataURL&&(c===m&&(c=1),f=e.toDataURL("image/"+b,c))),f},a.fn.detectPixelRatio=function(d){var e=this,f,g,h,i,k,l,m,n,o,p;for(h=0;h<e.length;h+=1)g=e[h],f=a(e[h]),i=L(g),p=W(e[h]),p.scaled||(k=b.devicePixelRatio||1,l=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,m=k/l,m!==1&&(n=g.width,o=g.height,g.width=n*m,g.height=o*m,g.style.width=n+"px",g.style.height=o+"px",i.scale(m,m)),p.pixelRatio=m,p.scaled=j,d&&d.call(g,m));return e},H.clearCache=function(){var b;for(b in C)C.hasOwnProperty(b)&&(C[b]={})},a.support.canvas=a("<canvas />")[0].getContext!==m,o(H,{defaults:n,setGlobalProps:R,transformShape:V,detectEvents:ub,closePath:U,setCanvasFont:Lb,measureText:Mb}),a.jCanvas=H,a.jCanvasObject=G}),function(a){typeof define=="function"&&define.amd!=undefined?define("jquery.eraser",["jquery","tomLib"],a):a(jQuery,!0)}(function(b,c){function g(a,b){var c=0;for(var d=0;d<a.width;d+=1)for(var e=0;e<a.height;e+=b.density)a.data[d*a.width*4+e*4+3]>0&&c++;return c}if(c===!0)var d=window.tomLib;var e=function(a,c){for(var d in c)this[d]=c[d];this.element=a,this.customCanvas?this.canvas=this.customCanvas:b(a).is("canvas")?this.canvas=a:this.canvas=b(a).find("canvas.eraser")[0],this.canvas==undefined&&(this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.canvas.style.zIndex=e._zIndex++,this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.id="fingerEraser"+e.ID++,this.canvas.className="eraser"),this.customCanvas||(this.canvas.width=this.container.clientWidth,this.canvas.height=this.container.clientHeight),this.container?(this.viewHeight=this.container.clientHeight,this.viewWidth=this.container.clientWidth):(this.viewHeight=this.canvas.width,this.viewWidth=this.canvas.height);if(this.canvas.tagName!="CANVAS"&&!typeof this.canvas.getContext=="function"){console.log("浏览器不支持canvas或者传入了错误的canvas对象");return}this.ctx=this.canvas.getContext("2d")};e._zIndex=8888,e.ID=0,e.DEFAULTS={container:document.body,bindContainer:!1,customCanvas:!1,bgImage:null,bgColor:null,interval:100,noneedCalc:null,checkPng:!1,deviceRatio:window.devicePixelRatio||1,namespace:".eraser",alphaNoZeroNum:0,beforeInit:function(){console.log("初始化开始")},radius:30,density:1,percent:.5,success:function(){console.log("请添加回调函数")},clipMethod:"tapClip"},e.prototype.init=function(){var a=this,c;this.ctx.globalCompositeOperation="source-over",this.isStop=!1,this.bgColor&&(this.ctx.save(),this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore());if(this.imgList){c=new d.DeferredList(this.imgList.length);var e=[],f;for(var h=0,i=this.imgList.length;h<i;h++)(function(b){f=new Image,f.onload=function(){c.dealItem(b)},f.src=a.imgList[b].imgSrc,e.push(f),c.getItem(b).addCallbacks(function(){a.addImage(e[b],a.imgList[b].bgPos,a.imgList[b].bgScale,a.imgList[b].isCover)})})(h)}this.beforeInit(),this.checkPng&&(this.alphaNoZeroNum=g(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this)),b(document).off(this.namespace);if(this.ctxStyle)for(var j in this.ctxStyle)this.ctx[j]=this.ctxStyle[j];setTimeout(function(){a[a.clipMethod]()},100)},e.prototype.addImage=function(a,b,c,d){var e=1,f=0,g=c||1;a!=null&&(b!=undefined?(b={top:b.top||0,left:b.left||0},b.left=="center"&&(b.left=(this.viewWidth-a.width*g/this.deviceRatio)/2),b.top=="center"&&(b.top=(this.viewHeight-a.height*g/this.deviceRatio)/2),this.ctx.drawImage(a,0,0,a.width,a.height,b.left,b.top,a.width/this.deviceRatio*g,a.height/this.deviceRatio*g)):d==1?this.ctx.drawImage(a,0,0,this.viewWidth,this.viewHeight):a.width/a.height>this.canvas.width/this.canvas.height?(e=a.height/this.viewHeight,f=Math.abs((a.width-this.viewWidth*e)/2),this.ctx.drawImage(a,f,0,a.width-2*f,a.height,0,0,this.viewWidth,this.viewHeight)):a.width/a.height<this.canvas.width/this.canvas.height?(e=a.width/this.viewWidth,f=Math.abs((a.height-this.viewHeight*e)/2),this.ctx.drawImage(a,0,f,a.width,a.height-2*f,0,0,this.viewWidth,this.viewHeight)):this.ctx.drawImage(a,0,0,this.viewWidth,this.viewHeight))},e.prototype.stop=function(){this.isStop=!0},e.prototype.start=function(){this.isStop=!1},e.prototype.tapClip=function(){function s(b){if(!o||f.isStop)return;clearTimeout(j),b.preventDefault(),b=b.originalEvent;var c=a?b.targetTouches[0].clientX-p.left:b.clientX-p.left,d=a?b.targetTouches[0].clientY-p.top:b.clientY-p.top;n.beginPath(),n.moveTo(h,i),n.lineTo(c,d),n.stroke(),n.closePath(),h=c,i=d}var a="ontouchstart"in window?!0:!1,c="touchstart mousedown",d="touchmove mousemove",e="touchend mouseup",f=this,h,i,j,k=f.canvas,l=f.namespace,m=!1,n=f.ctx,o=!1,p,q=b(k).prop("id"),r=this.bindContainer?b(this.container):"#"+q;n.lineCap="round",n.lineJoin="round",n.lineWidth=f.radius*2,b(document).delegate(r,c,function(b){clearTimeout(j),n.save();if(f.isStop)return;b=b.originalEvent,o=!0;if(f.every||!m&&f.type!="draw")n.globalCompositeOperation="destination-out",m=!0;p=k.getBoundingClientRect(),h=a?b.targetTouches[0].clientX-p.left:b.clientX-p.left,i=a?b.targetTouches[0].clientY-p.top:b.clientY-p.top}),b(document).delegate(r,d,s),b(document).delegate(r,e,function(){if(!o||f.isStop)return;o=!1,f.noneedCalc||(j=setTimeout(function(){var a=n.getImageData(0,0,k.width,k.height),b=g(a,f),c=a.width*a.height;f.checkPng&&(c=f.alphaNoZeroNum);var d=b/(c/(f.density*f.density));d<1-f.percent?f.success.call(f,k,n):console.log("剩余非空白区域"+d)},f.interval)),f.touchEndCb&&f.touchEndCb.call(f),n.restore()})},e.prototype.otherClip=function(){function m(b){b.preventDefault(),x2=c?b.targetTouches[0].pageX:b.clientX-k.offsetLeft,y2=c?b.targetTouches[0].pageY:b.clientY-k.offsetTop;var d=a*Math.sin(Math.atan((y2-i)/(x2-h))),e=a*Math.cos(Math.atan((y2-i)/(x2-h))),f=h+d,j=i-e,m=h-d,n=i+e,o=x2+d,p=y2-e,q=x2-d,r=y2+e;l.save(),l.beginPath(),l.arc(x2,y2,g.radius,0,2*Math.PI),l.clip(),l.clearRect(0,0,k.width,k.height),l.restore(),l.save(),l.beginPath(),l.moveTo(f,j),l.lineTo(o,p),l.lineTo(q,r),l.lineTo(m,n),l.closePath(),l.clip(),l.clearRect(0,0,k.width,k.height),l.restore(),h=x2,i=y2}var c="ontouchstart"in window,d=c?"touchstart":"mousedown",e=c?"touchmove":"mousemove",f=c?"touchend":"mouseup",g=this,h,i,j,k=g.canvas,l=g.ctx;b(k).on(d,function(a){clearTimeout(j),a.preventDefault(),a=a.originalEvent,h=c?a.targetTouches[0].pageX:a.clientX-k.offsetLeft,i=c?a.targetTouches[0].pageY:a.clientY-k.offsetTop,l.save(),l.beginPath(),l.arc(h,i,g.radius,0,2*Math.PI),l.clip(),l.clearRect(0,0,k.width,k.height),l.restore()}),b(k).on(e,m),b(k).on(f,function(){g.noneedCalc&&setTimeout(function(){l.fillStyle="white",l.fillRect(0,0,1,1),l.fillStyle="black",l.fillRect(1,1,2,2);var a=l.getImageData(0,0,k.width,k.height),b;b/(a.width*a.height/(g.density*g.density))<g.percent&&g.success.call(g,k,l)},g.interval)})},b.fn.eraser=function(a,c){return this.each(function(){var d=b(this),f=b(this).data("style.eraser"),g=b.extend({},e.DEFAULTS,typeof a=="object"&&a);f||d.data("style.eraser",f=new e(this,g));var h=typeof a=="string"?a:"init";h&&f[h](c)})},b.fn.eraser.Constructor=e;var f=b.fn.eraser;return b.fn.eraser.noConflict=function(){return b.fn.eraser=f,this},b}),!function(a){"function"==typeof define&&define.amd?define("slider",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(){var a=document.createElement("input");return a.setAttribute("type","range"),"text"!==a.type}function c(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function d(a,b){return b=b||100,function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c),a.debouncing=!0}return clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},b),a.lastReturnVal}}function e(a){return a&&(0===a.offsetWidth||0===a.offsetHeight||a.open===!1)}function f(a){for(var b=[],c=a.parentNode;e(c);)b.push(c),c=c.parentNode;return b}function g(a,b){function c(a){"undefined"!=typeof a.open&&(a.open=a.open?!1:!0)}var d=f(a),e=d.length,g=[],h=a[b];if(e){for(var i=0;e>i;i++)g[i]=d[i].style.cssText,d[i].style.display="block",d[i].style.height="0",d[i].style.overflow="hidden",d[i].style.visibility="hidden",c(d[i]);h=a[b];for(var j=0;e>j;j++)d[j].style.cssText=g[j],c(d[j])}return h}function h(a,b){var c=parseFloat(a);return Number.isNaN(c)?b:c}function i(b,e){if(this.$window=a(window),this.$document=a(document),this.$element=a(b),this.options=a.extend({},m,e),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&l)return!1;this.identifier="js-"+j+"-"+k++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var f=this;this.$window.on("resize."+this.identifier,d(function(){c(function(){f.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(a,b){if(!b||b.origin!==f.identifier){var c=a.target.value,d=f.getPositionFromValue(c);f.setPosition(d)}})}Number.isNaN=Number.isNaN||function(a){return"number"==typeof a&&a!==a};var j="rangeslider",k=0,l=b(),m={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};i.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},i.prototype.update=function(a){a=a||!1,a&&(this.min=h(this.$element[0].getAttribute("min"),0),this.max=h(this.$element[0].getAttribute("max"),100),this.value=h(this.$element[0].value,this.min+(this.max-this.min)/2),this.step=h(this.$element[0].getAttribute("step"),1)),this.handleWidth=g(this.$handle[0],"offsetWidth"),this.rangeWidth=g(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,!1)},i.prototype.handleDown=function(a){if(a.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var b=this.getRelativePosition(a),c=this.$range[0].getBoundingClientRect().left,d=this.getPositionFromNode(this.$handle[0])-c;this.setPosition(b-this.grabX),b>=d&&b<d+this.handleWidth&&(this.grabX=b-d)}},i.prototype.handleMove=function(a){a.preventDefault();var b=this.getRelativePosition(a);this.setPosition(b-this.grabX)},i.prototype.handleEnd=function(a){a.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},i.prototype.cap=function(a,b,c){return b>a?b:a>c?c:a},i.prototype.setPosition=function(a,b){var c,d;c=this.getValueFromPosition(this.cap(a,0,this.maxHandleX)),d=this.getPositionFromValue(c),this.$fill[0].style.width=d+this.grabX+"px",this.$handle[0].style.left=d+"px",this.setValue(c),this.position=d,this.value=c,this.onSlide&&"function"==typeof this.onSlide&&"undefined"==typeof b&&this.onSlide(d,c)},i.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b},i.prototype.getRelativePosition=function(a){var b=this.$range[0].getBoundingClientRect().left,c=0;return"undefined"!=typeof a.pageX?c=a.pageX:"undefined"!=typeof a.originalEvent.clientX?c=a.originalEvent.clientX:a.originalEvent.touches&&a.originalEvent.touches[0]&&"undefined"!=typeof a.originalEvent.touches[0].clientX?c=a.originalEvent.touches[0].clientX:a.currentPoint&&"undefined"!=typeof a.currentPoint.x&&(c=a.currentPoint.x),c-b},i.prototype.getPositionFromValue=function(a){var b,c;return b=(a-this.min)/(this.max-this.min),c=b*this.maxHandleX},i.prototype.getValueFromPosition=function(a){var b,c;return b=a/(this.maxHandleX||1),c=this.step*Math.round(b*(this.max-this.min)/this.step)+this.min,Number(c.toFixed(this.toFixed))},i.prototype.setValue=function(a){a!==this.value&&this.$element.val(a).trigger("input",{origin:this.identifier})},i.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+j),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},a.fn[j]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data("plugin_"+j);e||d.data("plugin_"+j,e=new i(this,b)),"string"==typeof b&&e[b].apply(e,c)})}});var APP=APP||{},jquery;require(["jquery","tomLib","iscroll-lite","hammer","hammer.fake","hammer.showtouch","tomPlugin","Caman","jcanvas","jquery.eraser","slider"],function(a,b,c){function e(){var a=window.innerWidth,b=window.innerHeight,c;a/b>=320/504?c=b/1008:c=a/640,document.getElementById("eqMobileViewport").setAttribute("content","width=320,initial-scale="+c+",maximum-scale="+c+",user-scalable=no")}jquery=a;var d=window.innerHeight,f=APP;a.extend(f,{filterPhoto:null,pWidth:a("#photoFrame").width(),pHeight:a("#photoFrame").width(),initX:0,initY:0,transform:b.prefixStyle("transform"),emoji:{background:null,photo:null,photoWithErase:null},btns:{$nextStepBtn:a("a.next-step"),$backStepBtn:a("a.back-step"),$resetEraser:a("#resetEraser")},stepLock:!0,steps:a("[data-step]"),currentStep:"choose-emoji",currentStepDom:a("[data-step=choose-emoji]"),photoParam:{scale:1,x:0,y:0},photoArr:{uploadSrc:"",dragSrc:"",filterSrc:""},$emojiTextArea:a("#emojiTextArea"),$emojiTextList:a("#emoji-text-list"),$emojiList:a("#emoji-tpl-list"),$eraserCanvas:a("#eraserCanvas"),$resultCanvas:a("#resultCanvas"),$photoFrame:a("#photoFrame"),$photoCanvas:a("#photoCanvas"),$filterCanvas:a("#filterCanvas"),$emojiCover:a("#emojiCover"),$emojiBg:a("#emojiBg"),$photoInput:a("#photoInput"),$uploadMask:a(".photo-input-box"),photoCrop:null,currentLayer:"photo",Eraser:null,$contrast:a("#contrast"),$exposure:a("#exposure"),LOCK_PAGE:!1,$backFilterBtn:a("#backFilterBtn"),$beginEraser:a("#beginEraser"),$backUserMoveBtn:a("#backUserMoveBtn"),eraserRadius:30,stopUserMove:function(){f.$photoFrame.hammer("stop"),f.stopMove=!0},startUserMove:function(){f.$photoFrame.hammer("start"),f.$photoCanvas.removeLayer("filter").removeLayer("mask").drawLayers(),f.stopMove=!1},startErase:function(a){f.stopUserMove(),f.emoji.photo=f.$photoCanvas[0].toDataURL("image/png"),f.eraseCtx.lineWidth=f.eraserRadius,f.eraseCtx.globalCompositeOperation="source-over";var b=new Image;f.eraseCtx.clearRect(0,0,f.pWidth,f.pHeight),b.onload=function(){f.$photoCanvas.hide(),f.$eraserCanvas.show(),f.eraseCtx.drawImage(b,0,0),f.$eraserCanvas.eraser("start"),a&&a()},b.src=f.emoji.photo},resetErase:function(){drawPhoto(0,0,1,null,function(){f.$photoCanvas.show(),f.$eraserCanvas.hide()})},resetPhotoConfig:function(){f.photoParam.x=0,f.photoParam.y=0,f.photoParam.scale=1,f.photoParam.rotate=0},scroll:{emojiListScroll:null,emojiTextScroll:null}}),a(window).on("load",function(){var b=new Image;f.$emojiList.find("img").each(function(){var b=new Image,c=new Image,d=this.src.replace("thumb","mask"),e=this.src.replace("thumb","bg");b.src=d,a(this).parent("li").data("bg")&&(b.src=e)}),b=null}),a(function(){function g(){f.btns.$resetEraser.on("click",function(){f.startErase()}),f.btns.$nextStepBtn.on("click",function(){if(f.isBusyWork)return;var b;if(a(this).is("[disabled]"))return;if(p()){q();return}switch(f.currentStep){case"choose-emoji":b=new h("加载滤镜效果",o.bind(null,"filter-emoji")),m(f.$photoCanvas[0].toDataURL("image/png"),b);break;case"filter-emoji":f.startErase(o.bind(null,"erase-emoji"));break;case"erase-emoji":f.emoji.photoWithErase=f.$eraserCanvas[0].toDataURL("image/png"),o("text-emoji"),f.stepLock=!0,f.$eraserCanvas.eraser("stop");break;case"text-emoji":o("confirm-emoji"),b=new h("生成最终效果",o.bind(null,"confirm-emoji")),i(function(){b.resolve(),a(document.body).addClass("result"),f.$resultCanvas.show(),f.$photoCanvas.hide()});break;case"confirm-emoji":sendFile({imageData:f.$resultCanvas[0].toDataURL("image/png"),filetype:"png"})}}),f.btns.$backStepBtn.on("click",function(){if(f.isBusyWork)return;if(a(this).is("[disabled]"))return;f.stepLock=!1;switch(f.currentStep){case"choose-emoji":a(this).attr("disabled",!0),f.$photoCanvas.removeLayers().drawLayers(),f.emoji.photo="";break;case"filter-emoji":o("choose-emoji"),j(f.initX,f.initY,f.scale,null,function(){f.$photoCanvas.animateLayer(f.currentLayer,f.photoParam,0),f.startUserMove()});break;case"erase-emoji":o("filter-emoji"),f.$eraserCanvas.eraser("stop"),f.$photoCanvas.show(),f.$eraserCanvas.hide();break;case"text-emoji":o("erase-emoji"),f.startErase();break;case"confirm-emoji":a(document.body).removeClass("result"),f.emoji.text="",f.$emojiTextArea.val(""),f.stepLock=!0,f.$eraserCanvas.show(),f.$resultCanvas.hide(),o("text-emoji")}}),f.scroll.emojiListScroll=new c("#emoji-tpl-list",{preventDefault:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)/},scrollbars:!0,mouseWheel:!0,scrollX:!0,scrollY:!1,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0}),f.scroll.emojiTextScroll=new c("#emoji-text-list",{preventDefault:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)/},scrollbars:!0,mouseWheel:!0,scrollX:!0,scrollY:!1,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0}),f.$photoInput.on("click",function(a){f.emoji.mask||a.preventDefault()}),f.$uploadMask.on("click",function(){f.emoji.mask||q(f.$emojiList.find(".step-tip"))}),f.$emojiList.delegate("img","click",function(){f.$photoInput.removeAttr("disabled"),f.$emojiList.find(".step-tip").addClass("ok"),f.emoji.mask=this.src.replace("thumb","mask"),f.$emojiCover.css("background","url("+f.emoji.mask+")"),a(this).parent("li").data("bg")?(f.emoji.background=this.src.replace("thumb","bg"),f.$emojiBg.css("background","url("+f.emoji.background+")")):(f.$emojiBg.css("background",""),f.emoji.background=null)}),f.$emojiList.find("li:eq(0) img").trigger("click"),f.$emojiTextList.delegate(".item","click",function(){var b=a.trim(a(this).find(".v-table-cell").html().replace("<br>","\n"));f.$emojiTextArea.val(b);var c=r(f.$emojiTextArea,2),d=a(this).data("oldVal");c.limit?a(this).val(d):c.lineNum==2?f.$emojiTextArea.data("oldVal",b).css("line-height","60px"):f.$emojiTextArea.css("line-height","")}),f.$photoFrame.hammer({gestureCb:function(b){if(f.stopMove)return;b.x!=null&&(b.x+=f.initX,b.y+=f.initY),a.extend(f.photoParam,b),f.$photoCanvas.animateLayer(f.currentLayer,f.photoParam,0)}}),a(document).one("moveInput",function(){f.$photoInput.appendTo(f.currentStepDom.find(".back-step"))}),f.photoCrop=b.cropImage({bindFile:a("#photoInput"),cropWidth:f.pWidth/window.devicePixelRatio,cropHeight:f.pHeight/window.devicePixelRatio,oninit:function(){},onLoad:function(b){o("drag-emoji"),f.$uploadMask.hide().addClass("wait"),a(document).trigger("moveInput"),f.btns.$backStepBtn.removeAttr("disabled"),f.resetPhotoConfig(),f.emoji.photo=b.originSrc;var c=new h("初始化照片");f.photoParam.width=b.dWidth,f.photoParam.height=b.dHeight,j(b.x,b.y,null,null,function(){c.resolve()})}}),a(".adjust-input").on("change",n),a("#filterBtn").on("click",function(){m(f.$photoCanvas[0].toDataURL("image/png"))}),f.$eraserCanvas.eraser({radius:15,container:f.$photoFrame,bindContainer:!0,customCanvas:f.$eraserCanvas[0],noneedCalc:!0,every:!0,touchEndCb:function(){}}).eraser("stop"),f.$backFilterBtn.on("click",function(){j(0,0,1)}),f.$beginEraser.on("click",function(){f.startErase()}),f.$backUserMoveBtn.on("click",function(){f.startUserMove()}),a(document).on("change","input[type=range]",function(){a(this).siblings(".info-line").find(".output").html(a(this).val()),a(this).is("#eraserRange")&&(f.$eraserCanvas[0].getContext("2d").lineWidth=a(this).val())}),a(document).on("input","#emojiTextArea",function(){var b=r(this,2),c=a(this).data("oldVal");b.limit?a(this).val(c):b.lineNum==2?a(this).data("oldVal",a(this).val()).css("line-height","60px"):a(this).css("line-height","")})}function h(b,c,d){f.isBusyWork=!0;var e=a.Deferred(),b=b||"";return e.done(function(a){f.isBusyWork=!1,typeof c=="function"&&c(a)}),e.fail(function(a){typeof d=="function"?d(a):alert("出错咯，再试一次吧!"),f.isBusyWork=!1}),e}function i(a){f.$resultCanvas.removeLayers(),f.emoji.background&&f.$resultCanvas.drawImage({source:f.emoji.background,layer:!0,name:"photoBg",x:0,y:0,width:f.pWidth,height:f.pHeight,fromCenter:!1}),f.$resultCanvas.drawImage({source:f.emoji.photoWithErase,layer:!0,name:"photo",x:0,y:0,width:f.pWidth,height:f.pHeight,fromCenter:!1,load:function(){a&&a()}}).drawImage({source:f.emoji.mask,layer:!0,name:"photoMask",x:0,y:0,width:f.pWidth,height:f.pHeight,fromCenter:!1}).drawText({text:f.emoji.text,layer:!0,name:"text",fillStyle:"#000",fontStyle:"bold",fromCenter:!0,fontSize:(f.emoji.textLineNum==2?.8:1)*parseInt(f.$emojiTextArea.css("font-size"))+"px",fontFamily:f.$emojiTextArea.css("font-family"),x:f.pWidth/2,y:f.pHeight-55,width:f.pWidth,height:120,maxWidth:f.pWidth,lineHeight:"1.2"}).drawLayers()}function j(a,b,c,d,e){console.log(arguments),f.initX=a||0,f.initY=b||0,f.scale=c||1;var g=!0;f.$photoCanvas.drawImage({source:f.emoji.photo,groups:["emojiGroup"],layer:!d,name:"photo",x:a,y:b,fromCenter:!1,width:f.photoParam.width,height:f.photoParam.height,load:function(){g&&(g=!1,e&&e())}}).restoreCanvas(),f.$photoFrame.hammer("reset")}function k(a){f.$photoCanvas.removeLayer("photo").removeLayer("filter").drawImage({source:f.filterSrc,groups:["emojiGroup"],layer:!0,name:"filter",x:0,y:0,fromCenter:!1,width:f.pWidth,height:f.pHeight,load:function(){typeof a=="function"&&a()}}).drawLayers().restoreCanvas()}function l(){f.$photoCanvas.drawRect({fillStyle:"#fff",x:0,y:0,layer:!0,name:"mask",groups:["emojiGroup"],width:f.pWidth*2,height:f.pHeight*2}).restoreCanvas()}function m(b,c){var d=a.Deferred();f.$filterCanvas.removeAttr("data-caman-id"),f.filterPhoto=Caman("#"+f.$filterCanvas.prop("id"),b,function(){console.time("t"),d.resolve()}),d.done(function(){console.timeEnd("t"),n(c)})}function n(a){f.filterPhoto&&(f.stopUserMove(),f.filterPhoto.revert(),f.filterPhoto.brightness(5).saturation(-100).contrast(parseFloat(f.$contrast.val())).exposure(parseFloat(f.$exposure.val())).transparent(180).render(function(){f.filterSrc=f.$filterCanvas[0].toDataURL("image/png");var b=new Image;b.src=f.$filterCanvas[0].toDataURL("image/png"),document.body.appendChild(b),k(function(){f.$photoCanvas.animateLayer("filter",{},0),a&&typeof a.resolve=="function"&&a.resolve()})}))}function o(a){var b;if(a!="drag-emoji"){f.currentStepDom.hide(),f.currentStepDom=f.steps.filter("[data-step="+a+"]:not(.wait)").show(),f.currentStep=a;for(var c in f.scroll)f.scroll[c].refresh()}switch(a){case"choose-emoji":b="选择表情";break;case"drag-emoji":b="调整位置";break;case"filter-emoji":b="加滤镜";break;case"erase-emoji":b="擦一擦";break;case"text-emoji":b="添加文字";break;case"confirm-emoji":b="确认提交"}document.title=b}function p(){switch(f.currentStep){case"choose-emoji":f.emoji.photo&&f.emoji.mask&&(f.stepLock=!1);break;case"text-emoji":f.emoji.text&&(f.stepLock=!1)}return f.stepLock}function q(c){c=c||[],c.length==0&&f.currentStepDom.each(function(){c=a.makeArray(c,a(this).find(".step-tip:not(.ok)"))});var d=0;c.each(function(c,e){b.animateGroup({group:a(e),waitTime:d,frameClass:["tip-now"],duration:1e3,loopTimes:1}),d+=700})}function r(b,c){var d=a(b).val(),e=a(b).css("line-height"),g=a(b).width(),h=a(b).css("font-size"),i=a(b).css("font-family"),j=a("<div style='position: absolute;height:0;width: 0;'><div></div></div>"),k=1,l="",m;j.find("div").css({position:"relative",opacity:0,"font-size":h,"font-family":i,"word-break":"break-all","line-height":e,width:g}),j.appendTo(a("body")),m=j.find("div");for(var n=0,o=d.length;n<o;n++)l+=d[n],m.html(l),Math.ceil(m.height()/parseInt(e))>k&&(k+=1,l=l.replace(/(.$)/,"\n$1"));return j.remove(),f.emoji.text=l,f.emoji.textLineNum=k,{limit:k>c,lineNum:k}}e(),Caman.Filter.register("transparent",function(a){return this.process("transparent",function(b){return b.r>a&&b.g>a&&b.b>a&&(b.a=0),b})}),f.$photoFrame.find("canvas").prop({width:f.pWidth,height:f.pWidth}),d>=504&&f.$photoFrame.find(".frame-inner").css(f.transform,"scale("+Math.min(600,a("#photoInnerBox").width())/400+")").addClass("visible"),f.eraseCtx=f.$eraserCanvas[0].getContext("2d"),f.photoCtx=f.$photoCanvas[0].getContext("2d"),g(),a("[data-rangeslider]").rangeslider({polyfill:!1,onInit:function(){},onSlide:function(a,b){},onSlideEnd:function(a,b){}})})}),define("app",function(){})