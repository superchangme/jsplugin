/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */

/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */

/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */

/**
     * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
     *
     * @codingstandard ftlabs-jsv2
     * @copyright The Financial Times Limited [All Rights Reserved]
     * @license MIT License (see LICENSE.txt)
     */

/*! Hammer.JS - v1.0.3 - 2013-03-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

/*
  CompoundBlur - Blurring with varying radii for Canvas
  
  Version:   0.1
  Author:  Mario Klingemann
  Contact:   mario@quasimondo.com
  Website:  http://www.quasimondo.com/StackBlurForCanvas
  Twitter:  @quasimondo
  Modified By: Ryan LeFevre (@meltingice)
  
  In case you find this class useful - especially in commercial projects -
  I am not totally unhappy for a small donation to my PayPal account
  mario@quasimondo.de
  
  Copyright (c) 2011 Mario Klingemann
  
  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation
  files (the "Software"), to deal in the Software without
  restriction, including without limitation the rights to use,
  copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following
  conditions:
  
  The above copyright notice and this permission notice shall be
  included in all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  OTHER DEALINGS IN THE SOFTWARE.
  */

/*
  StackBlur - a fast almost Gaussian Blur For Canvas v0.31 modified for CamanJS
  
  Version:   0.31
  Author:    Mario Klingemann
  Contact:   mario@quasimondo.com
  Website:  http://www.quasimondo.com/StackBlurForCanvas
  Twitter:  @quasimondo
  Modified By: Ryan LeFevre (@meltingice)
  
  In case you find this class useful - especially in commercial projects -
  I am not totally unhappy for a small donation to my PayPal account
  mario@quasimondo.de
  
  Or support me on flattr: 
  https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript
  
  Copyright (c) 2010 Mario Klingemann
  
  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation
  files (the "Software"), to deal in the Software without
  restriction, including without limitation the rights to use,
  copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following
  conditions:
  
  The above copyright notice and this permission notice shall be
  included in all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  OTHER DEALINGS IN THE SOFTWARE.
  */

/**
 * @license jCanvas v15.08.17
 * Copyright 2015 Caleb Evans
 * Released under the MIT license
 */

/*! rangeslider.js - v1.3.3 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */

function setcookie(a,b){var c=30,d=new Date;d.setTime(d.getTime()+c*24*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+d.toGMTString()}function getcookie(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return b!=null?b[2]:""}function delcookie(a){var b=new Date;b.setTime(b.getTime()-1);var c=getCookie(a);c!=null&&(document.cookie=a+"="+c+";expires="+b.toGMTString())}(function(a,b){console.log("jquery init"),typeof module=="object"&&typeof module.exports=="object"?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)})(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(a){var b="length"in a&&a.length,c=jQuery.type(a);return c==="function"||jQuery.isWindow(a)?!1:a.nodeType===1&&b?!0:c==="array"||b===0||typeof b=="number"&&b>0&&b-1 in a}function winnow(a,b,c){if(jQuery.isFunction(b))return jQuery.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return jQuery.grep(a,function(a){return a===b!==c});if(typeof b=="string"){if(risSimple.test(b))return jQuery.filter(b,a,c);b=jQuery.filter(b,a)}return jQuery.grep(a,function(a){return indexOf.call(b,a)>=0!==c})}function sibling(a,b){while((a=a[b])&&a.nodeType!==1);return a}function createOptions(a){var b=optionsCache[a]={};return jQuery.each(a.match(rnotwhite)||[],function(a,c){b[c]=!0}),b}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Data.uid++}function dataAttr(a,b,c){var d;if(c===undefined&&a.nodeType===1){d="data-"+b.replace(rmultiDash,"-$1").toLowerCase(),c=a.getAttribute(d);if(typeof c=="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:+c+""===c?+c:rbrace.test(c)?jQuery.parseJSON(c):c}catch(e){}data_user.set(a,b,c)}else c=undefined}return c}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(a){}}function manipulationTarget(a,b){return jQuery.nodeName(a,"table")&&jQuery.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function disableScript(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function restoreScript(a){var b=rscriptTypeMasked.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function setGlobalEval(a,b){var c=0,d=a.length;for(;c<d;c++)data_priv.set(a[c],"globalEval",!b||data_priv.get(b[c],"globalEval"))}function cloneCopyEvent(a,b){var c,d,e,f,g,h,i,j;if(b.nodeType!==1)return;if(data_priv.hasData(a)){f=data_priv.access(a),g=data_priv.set(b,f),j=f.events;if(j){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)jQuery.event.add(b,e,j[e][c])}}data_user.hasData(a)&&(h=data_user.access(a),i=jQuery.extend({},h),data_user.set(b,i))}function getAll(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return b===undefined||b&&jQuery.nodeName(a,b)?jQuery.merge([a],c):c}function fixInput(a,b){var c=b.nodeName.toLowerCase();if(c==="input"&&rcheckableType.test(a.type))b.checked=a.checked;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}function actualDisplay(a,b){var c,d=jQuery(b.createElement(a)).appendTo(b.body),e=window.getDefaultComputedStyle&&(c=window.getDefaultComputedStyle(d[0]))?c.display:jQuery.css(d[0],"display");return d.detach(),e}function defaultDisplay(a){var b=document,c=elemdisplay[a];if(!c){c=actualDisplay(a,b);if(c==="none"||!c)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=iframe[0].contentDocument,b.write(),b.close(),c=actualDisplay(a,b),iframe.detach();elemdisplay[a]=c}return c}function curCSS(a,b,c){var d,e,f,g,h=a.style;return c=c||getStyles(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(g===""&&!jQuery.contains(a.ownerDocument,a)&&(g=jQuery.style(a,b)),rnumnonpx.test(g)&&rmargin.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),g!==undefined?g+"":g}function addGetHookIf(a,b){return{get:function(){if(a()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}function vendorPropName(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=cssPrefixes.length;while(e--){b=cssPrefixes[e]+c;if(b in a)return b}return d}function setPositiveNumber(a,b,c){var d=rnumsplit.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function augmentWidthOrHeight(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2)c==="margin"&&(g+=jQuery.css(a,c+cssExpand[f],!0,e)),d?(c==="content"&&(g-=jQuery.css(a,"padding"+cssExpand[f],!0,e)),c!=="margin"&&(g-=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e))):(g+=jQuery.css(a,"padding"+cssExpand[f],!0,e),c!=="padding"&&(g+=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e)));return g}function getWidthOrHeight(a,b,c){var d=!0,e=b==="width"?a.offsetWidth:a.offsetHeight,f=getStyles(a),g=jQuery.css(a,"boxSizing",!1,f)==="border-box";if(e<=0||e==null){e=curCSS(a,b,f);if(e<0||e==null)e=a.style[b];if(rnumnonpx.test(e))return e;d=g&&(support.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+augmentWidthOrHeight(a,b,c||(g?"border":"content"),d,f)+"px"}function showHide(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=data_priv.get(d,"olddisplay"),c=d.style.display,b?(!f[g]&&c==="none"&&(d.style.display=""),d.style.display===""&&isHidden(d)&&(f[g]=data_priv.access(d,"olddisplay",defaultDisplay(d.nodeName)))):(e=isHidden(d),(c!=="none"||!e)&&data_priv.set(d,"olddisplay",e?c:jQuery.css(d,"display")))}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none"}return a}function Tween(a,b,c,d,e){return new Tween.prototype.init(a,b,c,d,e)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(a,b){var c,d=0,e={height:a};b=b?1:0;for(;d<4;d+=2-b)c=cssExpand[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function createTween(a,b,c){var d,e=(tweeners[b]||[]).concat(tweeners["*"]),f=0,g=e.length;for(;f<g;f++)if(d=e[f].call(c,b,a))return d}function defaultPrefilter(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&isHidden(a),p=data_priv.get(a,"fxshow");c.queue||(h=jQuery._queueHooks(a,"fx"),h.unqueued==null&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,jQuery.queue(a,"fx").length||h.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=jQuery.css(a,"display"),k=j==="none"?data_priv.get(a,"olddisplay")||defaultDisplay(a.nodeName):j,k==="inline"&&jQuery.css(a,"float")==="none"&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b){e=b[d];if(rfxtypes.exec(e)){delete b[d],f=f||e==="toggle";if(e===(o?"hide":"show")){if(e!=="show"||!p||p[d]===undefined)continue;o=!0}m[d]=p&&p[d]||jQuery.style(a,d)}else j=undefined}if(!jQuery.isEmptyObject(m)){p?"hidden"in p&&(o=p.hidden):p=data_priv.access(a,"fxshow",{}),f&&(p.hidden=!o),o?jQuery(a).show():l.done(function(){jQuery(a).hide()}),l.done(function(){var b;data_priv.remove(a,"fxshow");for(b in m)jQuery.style(a,b,m[b])});for(d in m)g=createTween(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start=d==="width"||d==="height"?1:0))}else(j==="none"?defaultDisplay(a.nodeName):j)==="inline"&&(n.display=j)}function propFilter(a,b){var c,d,e,f,g;for(c in a){d=jQuery.camelCase(c),e=b[d],f=a[c],jQuery.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=jQuery.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function Animation(a,b,c){var d,e,f=0,g=animationPrefilters.length,h=jQuery.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;var b=fxNow||createFxNow(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:jQuery.extend({},b),opts:jQuery.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:fxNow||createFxNow(),duration:c.duration,tweens:[],createTween:function(b,c){var d=jQuery.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=!0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;propFilter(k,j.opts.specialEasing);for(;f<g;f++){d=animationPrefilters[f].call(j,a,k,j.opts);if(d)return d}return jQuery.map(k,createTween,j),jQuery.isFunction(j.opts.start)&&j.opts.start.call(a,j),jQuery.fx.timer(jQuery.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function addToPrefiltersOrTransports(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(c))while(d=f[e++])d[0]==="+"?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function inspectPrefiltersOrTransports(a,b,c,d){function e(h){var i;return f[h]=!0,jQuery.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j=="string"&&!g&&!f[j])return b.dataTypes.unshift(j),e(j),!1;if(g)return!(i=j)}),i}var f={},g=a===transports;return e(b.dataTypes[0])||!f["*"]&&e("*")}function ajaxExtend(a,b){var c,d,e=jQuery.ajaxSettings.flatOptions||{};for(c in b)b[c]!==undefined&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&jQuery.extend(!0,a,d),a}function ajaxHandleResponses(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*")i.shift(),d===undefined&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function ajaxConvert(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}return{state:"success",data:b}}function buildParams(a,b,c,d){var e;if(jQuery.isArray(b))jQuery.each(b,function(b,e){c||rbracket.test(a)?d(a,e):buildParams(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&jQuery.type(b)==="object")for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}function getWindow(a){return jQuery.isWindow(a)?a:a.nodeType===9&&a.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,version="2.1.4",jQuery=function(a,b){return new jQuery.fn.init(a,b)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(a,b){return b.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(a){return a!=null?a<0?this[a+this.length]:this[a]:slice.call(this)},pushStack:function(a){var b=jQuery.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return jQuery.each(this,a,b)},map:function(a){return this.pushStack(jQuery.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;typeof g=="boolean"&&(j=g,g=arguments[h]||{},h++),typeof g!="object"&&!jQuery.isFunction(g)&&(g={}),h===i&&(g=this,h--);for(;h<i;h++)if((a=arguments[h])!=null)for(b in a){c=g[b],d=a[b];if(g===d)continue;j&&d&&(jQuery.isPlainObject(d)||(e=jQuery.isArray(d)))?(e?(e=!1,f=c&&jQuery.isArray(c)?c:[]):f=c&&jQuery.isPlainObject(c)?c:{},g[b]=jQuery.extend(j,f,d)):d!==undefined&&(g[b]=d)}return g},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return jQuery.type(a)==="function"},isArray:Array.isArray,isWindow:function(a){return a!=null&&a===a.window},isNumeric:function(a){return!jQuery.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a)?!1:a.constructor&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?class2type[toString.call(a)]||"object":typeof a},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(a){return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a);if(c)if(g)for(;e<f;e++){d=b.apply(a[e],c);if(d===!1)break}else for(e in a){d=b.apply(a[e],c);if(d===!1)break}else if(g)for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===!1)break}else for(e in a){d=b.call(a[e],e,a[e]);if(d===!1)break}return a},trim:function(a){return a==null?"":(a+"").replace(rtrim,"")},makeArray:function(a,b){var c=b||[];return a!=null&&(isArraylike(Object(a))?jQuery.merge(c,typeof a=="string"?[a]:a):push.call(c,a)),c},inArray:function(a,b,c){return b==null?-1:indexOf.call(b,a,c)},merge:function(a,b){var c=+b.length,d=0,e=a.length;for(;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length,h=!c;for(;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a),h=[];if(g)for(;e<f;e++)d=b(a[e],e,c),d!=null&&h.push(d);else for(e in a)d=b(a[e],e,c),d!=null&&h.push(d);return concat.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return typeof b=="string"&&(c=a[b],b=a,a=c),jQuery.isFunction(a)?(d=slice.call(arguments,2),e=function(){return a.apply(b||this,d.concat(slice.call(arguments)))},e.guid=a.guid=a.guid||jQuery.guid++,e):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){class2type["[object "+b+"]"]=b.toLowerCase()});var Sizzle=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;(b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType;if(typeof a!="string"||!a||h!==1&&h!==9&&h!==11)return c;if(!d&&I){if(h!==11&&(e=sb.exec(a)))if(g=e[1]){if(h===9){f=b.getElementById(g);if(!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){n=l=N,o=b,p=h!==1&&a;if(h===1&&b.nodeName.toLowerCase()!=="object"){j=z(a),(l=b.getAttribute("id"))?n=l.replace(ub,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;while(i--)j[i]=n+m(j[i]);o=tb.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){var c=a.split("|"),d=a.length;while(d--)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!="undefined"&&a}function l(){}function m(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=Q++;return b.first?function(b,c,f){while(b=b[d])if(b.nodeType===1||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){while(b=b[d])if(b.nodeType===1||e)if(a(b,c,g))return!0}else while(b=b[d])if(b.nodeType===1||e){i=b[N]||(b[N]={});if((h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];i[d]=j;if(j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){var e=0,f=c.length;for(;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=a&&(d||!b)?q(r,m,a,h,i):r,t=c?f||(d?a:o||e)?[]:g:s;c&&c(s,t,h,i);if(e){j=q(t,n),e(j,[],h,i),k=j.length;while(k--)if(l=j[k])t[n[k]]=!(s[n[k]]=l)}if(d){if(f||a){if(f){j=[],k=t.length;while(k--)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}k=t.length;while(k--)(l=t[k])&&(j=f?ab(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return ab(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];for(;h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{c=w.filter[a[h].type].apply(null,a[h].matches);if(c[N]){d=++h;for(;d<e;d++)if(w.relative[a[d].type])break;return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:a[h-2].type===" "?"*":""})).replace(ib,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=s==null?1:Math.random()||.1,v=t.length;j&&(C=g!==G&&g);for(;o!==v&&(k=t[o])!=null;o++){if(f&&k){l=0;while(m=a[l++])if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}n+=o;if(e&&o!==n){l=0;while(m=c[l++])m(p,r,g,h);if(d){if(n>0)while(o--)!p[o]&&!r[o]&&(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,ab=function(a,b){var c=0,d=a.length;for(;c<d;c++)if(a[c]===b)return c;return-1},bb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",cb="[\\x20\\t\\r\\n\\f]",db="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",eb=db.replace("w","w#"),fb="\\["+cb+"*("+db+")(?:"+cb+"*([*^$|!~]?=)"+cb+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+eb+"))|)"+cb+"*\\]",gb=":("+db+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+fb+")*)|"+".*"+")\\)|)",hb=new RegExp(cb+"+","g"),ib=new RegExp("^"+cb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cb+"+$","g"),jb=new RegExp("^"+cb+"*,"+cb+"*"),kb=new RegExp("^"+cb+"*([>+~]|"+cb+")"+cb+"*"),lb=new RegExp("="+cb+"*([^\\]'\"]*?)"+cb+"*\\]","g"),mb=new RegExp(gb),nb=new RegExp("^"+eb+"$"),ob={ID:new RegExp("^#("+db+")"),CLASS:new RegExp("^\\.("+db+")"),TAG:new RegExp("^("+db.replace("w","w*")+")"),ATTR:new RegExp("^"+fb),PSEUDO:new RegExp("^"+gb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cb+"*(even|odd|(([+-]|)(\\d*)n|)"+cb+"*(?:([+-]|)"+cb+"*(\\d+)|))"+cb+"*\\)|)","i"),bool:new RegExp("^(?:"+bb+")$","i"),needsContext:new RegExp("^"+cb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cb+"*((?:-\\d)?\\d*)"+cb+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+cb+"?|("+cb+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,d&1023|56320)},xb=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(yb){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;if(d===G||d.nodeType!==9||!d.documentElement)return G;G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xb,!1):c.attachEvent&&c.attachEvent("onunload",xb)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=rb.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(typeof b.getElementById!="undefined"&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a);if(v.qsa)return b.querySelectorAll(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++])c.nodeType===1&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(I)return b.getElementsByClassName(a)},K=[],J=[];if(v.qsa=rb.test(d.querySelectorAll))e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a>"+"<select id='"+N+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+cb+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+cb+"*(?:value|"+bb+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+cb+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")});return(v.matchesSelector=rb.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",gb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&d.nodeType===1&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,c&1||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?ab(D,a)-ab(D,b):0:c&4?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?ab(D,a)-ab(D,b):0;if(f===h)return g(a,b);c=a;while(c=c.parentNode)i.unshift(c);c=b;while(c=c.parentNode)j.unshift(c);while(i[e]===j[e])e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){(a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']");if(v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&a.document.nodeType!==11)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):undefined;return d!==undefined?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U);if(E){while(b=a[e++])b===a[e]&&(d=c.push(e));while(d--)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(!e)while(b=a[d++])c+=x(b);else if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(e===3||e===4)return a.nodeValue;return c},w=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[3]||a[4]||a[5]||"").replace(vb,wb),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1].slice(0,3)==="nth"?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd")),a[5]=+(a[7]+a[8]||a[3]==="odd")):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&mb.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return a==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+cb+")"+a+"("+cb+"|$)"))&&R(a,function(a){return b.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!="undefined"&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return f==null?c==="!=":c?(f+="",c==="="?f===d:c==="!="?f!==d:c==="^="?d&&f.indexOf(d)===0:c==="*="?d&&f.indexOf(d)>-1:c==="$="?d&&f.slice(-d.length)===d:c==="~="?(" "+f.replace(hb," ")+" ").indexOf(d)>-1:c==="|="?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return!1;o=p=a==="only"&&!o&&"nextSibling"}return!0}o=[g?q.firstChild:q.lastChild];if(g&&s){k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(l.nodeType===1&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){s&&((l[N]||(l[N]={}))[a]=[P,m]);if(l===b)break}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){var d,e=f(a,c),g=e.length;while(g--)d=ab(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){var f,g=e(a,null,d,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(vb,wb),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||c.indexOf(a+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text")},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);h=a,i=[],j=w.preFilter;while(h){if(!d||(e=jb.exec(h)))e&&(h=h.slice(e[0].length)||h),i.push(f=[]);d=!1;if(e=kb.exec(h))d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length);for(g in w.filter)(e=ob[g].exec(h))&&(!j[g]||(e=j[g](e)))&&(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){b||(b=z(a)),c=b.length;while(c--)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j=typeof a=="function"&&a,l=!d&&z(a=j.selector||a);c=c||[];if(l.length===1){f=l[0]=l[0].slice(0);if(f.length>2&&(g=f[0]).type==="ID"&&v.getById&&b.nodeType===9&&I&&w.relative[f[1].type]){b=(w.find.ID(g.matches[0].replace(vb,wb),b)||[])[0];if(!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}e=ob.needsContext.test(a)?0:f.length;while(e--){g=f[e];if(w.relative[h=g.type])break;if(i=w.find[h])if(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b)){f.splice(e,1),a=d.length&&m(f);if(!a)return $.apply(c,d),c;break}}}return(j||A(a,l))(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return a.compareDocumentPosition(G.createElement("div"))&1}),e(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild.getAttribute("href")==="#"})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,b.toLowerCase()==="type"?1:2)}),(!v.attributes||!e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),a.firstChild.getAttribute("value")===""}))&&f("value",function(a,b,c){if(!c&&a.nodeName.toLowerCase()==="input")return a.defaultValue}),e(function(a){return a.getAttribute("disabled")==null})||f(bb,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),b.length===1&&d.nodeType===1?jQuery.find.matchesSelector(d,a)?[d]:[]:jQuery.find.matches(a,jQuery.grep(b,function(a){return a.nodeType===1}))},jQuery.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if(typeof a!="string")return this.pushStack(jQuery(a).filter(function(){for(b=0;b<c;b++)if(jQuery.contains(e[b],this))return!0}));for(b=0;b<c;b++)jQuery.find(a,e[b],d);return d=this.pushStack(c>1?jQuery.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(winnow(this,a||[],!1))},not:function(a){return this.pushStack(winnow(this,a||[],!0))},is:function(a){return!!winnow(this,typeof a=="string"&&rneedsContext.test(a)?jQuery(a):a||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(a,b){var c,d;if(!a)return this;if(typeof a=="string"){a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?c=[null,a,null]:c=rquickExpr.exec(a);if(c&&(c[1]||!b)){if(c[1]){b=b instanceof jQuery?b[0]:b,jQuery.merge(this,jQuery.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:document,!0));if(rsingleTag.test(c[1])&&jQuery.isPlainObject(b))for(c in b)jQuery.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=document.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=document,this.selector=a,this}return!b||b.jquery?(b||rootjQuery).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):jQuery.isFunction(a)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(a):a(jQuery):(a.selector!==undefined&&(this.selector=a.selector,this.context=a.context),jQuery.makeArray(a,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(a,b,c){var d=[],e=c!==undefined;while((a=a[b])&&a.nodeType!==9)if(a.nodeType===1){if(e&&jQuery(a).is(c))break;d.push(a)}return d},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}}),jQuery.fn.extend({has:function(a){var b=jQuery(a,this),c=b.length;return this.filter(function(){var a=0;for(;a<c;a++)if(jQuery.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g=rneedsContext.test(a)||typeof a!="string"?jQuery(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&jQuery.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?jQuery.unique(f):f)},index:function(a){return a?typeof a=="string"?indexOf.call(jQuery(a),this[0]):indexOf.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(a,b))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),jQuery.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return jQuery.dir(a,"parentNode")},parentsUntil:function(a,b,c){return jQuery.dir(a,"parentNode",c)},next:function(a){return sibling(a,"nextSibling")},prev:function(a){return sibling(a,"previousSibling")},nextAll:function(a){return jQuery.dir(a,"nextSibling")},prevAll:function(a){return jQuery.dir(a,"previousSibling")},nextUntil:function(a,b,c){return jQuery.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return jQuery.dir(a,"previousSibling",c)},siblings:function(a){return jQuery.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return jQuery.sibling(a.firstChild)},contents:function(a){return a.contentDocument||jQuery.merge([],a.childNodes)}},function(a,b){jQuery.fn[a]=function(c,d){var e=jQuery.map(this,b,c);return a.slice(-5)!=="Until"&&(d=c),d&&typeof d=="string"&&(e=jQuery.filter(d,e)),this.length>1&&(guaranteedUnique[a]||jQuery.unique(e),rparentsprev.test(a)&&e.reverse()),this.pushStack(e)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(a){a=typeof a=="string"?optionsCache[a]||createOptions(a):jQuery.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;for(;h&&g<f;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;(function g(b){jQuery.each(b,function(b,c){var d=jQuery.type(c);d==="function"?(!a.unique||!k.has(c))&&h.push(c):c&&c.length&&d!=="string"&&g(c)})})(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&jQuery.each(arguments,function(a,b){var c;while((c=jQuery.inArray(b,h,c))>-1)h.splice(c,1),d&&(c<=f&&f--,c<=g&&g--)}),this},has:function(a){return a?jQuery.inArray(a,h)>-1:!!h&&!!h.length},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=undefined,this},disabled:function(){return!h},lock:function(){return i=undefined,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return h&&(!c||i)&&(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},jQuery.extend({Deferred:function(a){var b=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return jQuery.Deferred(function(c){jQuery.each(b,function(b,f){var g=jQuery.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&jQuery.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return a!=null?jQuery.extend(a,d):d}},e={};return d.pipe=d.then,jQuery.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=slice.call(arguments),d=c.length,e=d!==1||a&&jQuery.isFunction(a.promise)?d:0,f=e===1?a:jQuery.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?slice.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&jQuery.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}});var readyList;jQuery.fn.ready=function(a){return jQuery.ready.promise().done(a),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(a){a?jQuery.readyWait++:jQuery.ready(!0)},ready:function(a){if(a===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(a!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))}}),jQuery.ready.promise=function(a){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(a)},jQuery.ready.promise();var access=jQuery.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(jQuery.type(c)==="object"){e=!0;for(h in c)jQuery.access(a,b,h,c[h],!0,f,g)}else if(d!==undefined){e=!0,jQuery.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(jQuery(a),c)}));if(b)for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}return e?a:j?b.call(a):i?b(a[0],c):f};jQuery.acceptData=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(a){if(!Data.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=Data.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,jQuery.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(typeof b=="string")f[b]=c;else if(jQuery.isEmptyObject(f))jQuery.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return b===undefined?c:c[b]},access:function(a,b,c){var d;return b===undefined||b&&typeof b=="string"&&c===undefined?(d=this.get(a,b),d!==undefined?d:this.get(a,jQuery.camelCase(b))):(this.set(a,b,c),c!==undefined?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(b===undefined)this.cache[f]={};else{jQuery.isArray(b)?d=b.concat(b.map(jQuery.camelCase)):(e=jQuery.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(rnotwhite)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!jQuery.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(a){return data_user.hasData(a)||data_priv.hasData(a)},data:function(a,b,c){return data_user.access(a,b,c)},removeData:function(a,b){data_user.remove(a,b)},_data:function(a,b,c){return data_priv.access(a,b,c)},_removeData:function(a,b){data_priv.remove(a,b)}}),jQuery.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(a===undefined){if(this.length){e=data_user.get(f);if(f.nodeType===1&&!data_priv.get(f,"hasDataAttrs")){c=g.length;while(c--)g[c]&&(d=g[c].name,d.indexOf("data-")===0&&(d=jQuery.camelCase(d.slice(5)),dataAttr(f,d,e[d])));data_priv.set(f,"hasDataAttrs",!0)}}return e}return typeof a=="object"?this.each(function(){data_user.set(this,a)}):access(this,function(b){var c,d=jQuery.camelCase(a);if(f&&b===undefined){c=data_user.get(f,a);if(c!==undefined)return c;c=data_user.get(f,d);if(c!==undefined)return c;c=dataAttr(f,d,undefined);if(c!==undefined)return c;return}this.each(function(){var c=data_user.get(this,d);data_user.set(this,d,b),a.indexOf("-")!==-1&&c!==undefined&&data_user.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){data_user.remove(this,a)})}}),jQuery.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=data_priv.get(a,b),c&&(!d||jQuery.isArray(c)?d=data_priv.access(a,b,jQuery.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=jQuery.queue(a,b),d=c.length,e=c.shift(),f=jQuery._queueHooks(a,b),g=function(){jQuery.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return data_priv.get(a,c)||data_priv.access(a,c,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(a,[b+"queue",c])})})}}),jQuery.fn.extend({queue:function(a,b){var c=2;return typeof a!="string"&&(b=a,a="fx",c--),arguments.length<c?jQuery.queue(this[0],a):b===undefined?this:this.each(function(){var c=jQuery.queue(this,a,b);jQuery._queueHooks(this,a),a==="fx"&&c[0]!=="inprogress"&&jQuery.dequeue(this,a)})},dequeue:function(a){return this.each(function(){jQuery.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=jQuery.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};typeof a!="string"&&(b=a,a=undefined),a=a||"fx";while(g--)c=data_priv.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(a,b){return a=b||a,jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var a=document.createDocumentFragment(),b=a.appendChild(document.createElement("div")),c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),support.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.get(a);if(!q)return;c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=jQuery.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof jQuery!==strundefined&&jQuery.event.triggered!==b.type?jQuery.event.dispatch.apply(a,arguments):undefined}),b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n)continue;l=jQuery.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=jQuery.event.special[n]||{},k=jQuery.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&jQuery.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,(!l.setup||l.setup.call(a,d,o,g)===!1)&&a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),jQuery.event.global[n]=!0}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.hasData(a)&&data_priv.get(a);if(!q||!(i=q.events))return;b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n){for(n in i)jQuery.event.remove(a,n+b[j],c,d,!0);continue}l=jQuery.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],(e||p===k.origType)&&(!c||c.guid===k.guid)&&(!h||h.test(k.namespace))&&(!d||d===k.selector||d==="**"&&k.selector)&&(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&((!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&jQuery.removeEvent(a,n,q.handle),delete i[n])}jQuery.isEmptyObject(i)&&(delete q.handle,data_priv.remove(a,"events"))},trigger:function(a,b,c,d){var e,f,g,h,i,j,k,l=[c||document],m=hasOwn.call(a,"type")?a.type:a,n=hasOwn.call(a,"namespace")?a.namespace.split("."):[];f=g=c=c||document;if(c.nodeType===3||c.nodeType===8)return;if(rfocusMorph.test(m+jQuery.event.triggered))return;m.indexOf(".")>=0&&(n=m.split("."),m=n.shift(),n.sort()),i=m.indexOf(":")<0&&"on"+m,a=a[jQuery.expando]?a:new jQuery.Event(m,typeof a=="object"&&a),a.isTrigger=d?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=undefined,a.target||(a.target=c),b=b==null?[a]:jQuery.makeArray(b,[a]),k=jQuery.event.special[m]||{};if(!d&&k.trigger&&k.trigger.apply(c,b)===!1)return;if(!d&&!k.noBubble&&!jQuery.isWindow(c)){h=k.delegateType||m,rfocusMorph.test(h+m)||(f=f.parentNode);for(;f;f=f.parentNode)l.push(f),g=f;g===(c.ownerDocument||document)&&l.push(g.defaultView||g.parentWindow||window)}e=0;while((f=l[e++])&&!a.isPropagationStopped())a.type=e>1?h:k.bindType||m,j=(data_priv.get(f,"events")||{})[a.type]&&data_priv.get(f,"handle"),j&&j.apply(f,b),j=i&&f[i],j&&j.apply&&jQuery.acceptData(f)&&(a.result=j.apply(f,b),a.result===!1&&a.preventDefault());return a.type=m,!d&&!a.isDefaultPrevented()&&(!k._default||k._default.apply(l.pop(),b)===!1)&&jQuery.acceptData(c)&&i&&jQuery.isFunction(c[m])&&!jQuery.isWindow(c)&&(g=c[i],g&&(c[i]=null),jQuery.event.triggered=m,c[m](),jQuery.event.triggered=undefined,g&&(c[i]=g)),a.result},dispatch:function(a){a=jQuery.event.fix(a);var b,c,d,e,f,g=[],h=slice.call(arguments),i=(data_priv.get(this,"events")||{})[a.type]||[],j=jQuery.event.special[a.type]||{};h[0]=a,a.delegateTarget=this;if(j.preDispatch&&j.preDispatch.call(this,a)===!1)return;g=jQuery.event.handlers.call(this,a,i),b=0;while((e=g[b++])&&!a.isPropagationStopped()){a.currentTarget=e.elem,c=0;while((f=e.handlers[c++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,d=((jQuery.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),d!==undefined&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation())}return j.postDispatch&&j.postDispatch.call(this,a),a.result},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click"))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||a.type!=="click"){d=[];for(c=0;c<h;c++)f=b[c],e=f.selector+" ",d[e]===undefined&&(d[e]=f.needsContext?jQuery(e,this).index(i)>=0:jQuery.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return a.pageX==null&&b.clientX!=null&&(c=a.target.ownerDocument||document,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.which&&f!==undefined&&(a.which=f&1?1:f&2?3:f&4?2:0),a}},fix:function(a){if(a[jQuery.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=rmouseEvent.test(e)?this.mouseHooks:rkeyEvent.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new jQuery.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=document),a.target.nodeType===3&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(a){return jQuery.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==undefined&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=jQuery.extend(new jQuery.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?jQuery.event.trigger(e,null,b):jQuery.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},jQuery.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},jQuery.Event=function(a,b){if(!(this instanceof jQuery.Event))return new jQuery.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===undefined&&a.returnValue===!1?returnTrue:returnFalse):this.type=a,b&&jQuery.extend(this,b),this.timeStamp=a&&a.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=returnTrue,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=returnTrue,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){jQuery.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!jQuery.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){jQuery.event.simulate(b,a.target,jQuery.event.fix(a),!0)};jQuery.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b);e||d.addEventListener(a,c,!0),data_priv.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b)-1;e?data_priv.access(d,b,e):(d.removeEventListener(a,c,!0),data_priv.remove(d,b))}}}),jQuery.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a=="object"){typeof b!="string"&&(c=c||b,b=undefined);for(g in a)this.on(g,b,c,a[g],e);return this}c==null&&d==null?(d=b,c=b=undefined):d==null&&(typeof b=="string"?(d=c,c=undefined):(d=c,c=b,b=undefined));if(d===!1)d=returnFalse;else if(!d)return this;return e===1&&(f=d,d=function(a){return jQuery().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,jQuery(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof a=="object"){for(e in a)this.off(e,b,a[e]);return this}if(b===!1||typeof b=="function")c=b,b=undefined;return c===!1&&(c=returnFalse),this.each(function(){jQuery.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){jQuery.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return jQuery.event.trigger(a,b,c,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=jQuery.contains(a.ownerDocument,a);if(!support.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){g=getAll(h),f=getAll(a);for(d=0,e=f.length;d<e;d++)fixInput(f[d],g[d])}if(b)if(c){f=f||getAll(a),g=g||getAll(h);for(d=0,e=f.length;d<e;d++)cloneCopyEvent(f[d],g[d])}else cloneCopyEvent(a,h);return g=getAll(h,"script"),g.length>0&&setGlobalEval(g,!i&&getAll(a,"script")),h},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;for(;m<n;m++){e=a[m];if(e||e===0)if(jQuery.type(e)==="object")jQuery.merge(l,e.nodeType?[e]:e);else if(!rhtml.test(e))l.push(b.createTextNode(e));else{f=f||k.appendChild(b.createElement("div")),g=(rtagName.exec(e)||["",""])[1].toLowerCase(),h=wrapMap[g]||wrapMap._default,f.innerHTML=h[1]+e.replace(rxhtmlTag,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;jQuery.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}}k.textContent="",m=0;while(e=l[m++]){if(d&&jQuery.inArray(e,d)!==-1)continue;i=jQuery.contains(e.ownerDocument,e),f=getAll(k.appendChild(e),"script"),i&&setGlobalEval(f);if(c){j=0;while(e=f[j++])rscriptType.test(e.type||"")&&c.push(e)}}return k},cleanData:function(a){var b,c,d,e,f=jQuery.event.special,g=0;for(;(c=a[g])!==undefined;g++){if(jQuery.acceptData(c)){e=c[data_priv.expando];if(e&&(b=data_priv.cache[e])){if(b.events)for(d in b.events)f[d]?jQuery.event.remove(c,d):jQuery.removeEvent(c,d,b.handle);data_priv.cache[e]&&delete data_priv.cache[e]}}delete data_user.cache[c[data_user.expando]]}}}),jQuery.fn.extend({text:function(a){return access(this,function(a){return a===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){var c,d=a?jQuery.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++)!b&&c.nodeType===1&&jQuery.cleanData(getAll(c)),c.parentNode&&(b&&jQuery.contains(c.ownerDocument,c)&&setGlobalEval(getAll(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++)a.nodeType===1&&(jQuery.cleanData(getAll(a,!1)),a.textContent="");return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return jQuery.clone(this,a,b)})},html:function(a){return access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined&&b.nodeType===1)return b.innerHTML;if(typeof a=="string"&&!rnoInnerhtml.test(a)&&!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rxhtmlTag,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},b.nodeType===1&&(jQuery.cleanData(getAll(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,jQuery.cleanData(getAll(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=concat.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=jQuery.isFunction(m);if(n||j>1&&typeof m=="string"&&!support.checkClone&&rchecked.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j){c=jQuery.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,c.childNodes.length===1&&(c=d);if(d){e=jQuery.map(getAll(c,"script"),disableScript),f=e.length;for(;i<j;i++)g=c,i!==l&&(g=jQuery.clone(g,!0,!0),f&&jQuery.merge(e,getAll(g,"script"))),b.call(this[i],g,i);if(f){h=e[e.length-1].ownerDocument,jQuery.map(e,restoreScript);for(i=0;i<f;i++)g=e[i],rscriptType.test(g.type||"")&&!data_priv.access(g,"globalEval")&&jQuery.contains(h,g)&&(g.src?jQuery._evalUrl&&jQuery._evalUrl(g.src):jQuery.globalEval(g.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(a){var c,d=[],e=jQuery(a),f=e.length-1,g=0;for(;g<=f;g++)c=g===f?this:this.clone(!0),jQuery(e[g])[b](c),push.apply(d,c.get());return this.pushStack(d)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(a){return a.ownerDocument.defaultView.opener?a.ownerDocument.defaultView.getComputedStyle(a,null):window.getComputedStyle(a,null)};(function(){function a(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var a=window.getComputedStyle(f,null);b=a.top!=="1%",c=a.width==="4px",d.removeChild(e)}var b,c,d=document.documentElement,e=document.createElement("div"),f=document.createElement("div");if(!f.style)return;f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=f.style.backgroundClip==="content-box",e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return a(),b},boxSizingReliable:function(){return c==null&&a(),c},reliableMarginRight:function(){var a,b=f.appendChild(document.createElement("div"));return b.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",b.style.marginRight=b.style.width="0",f.style.width="1px",d.appendChild(e),a=!parseFloat(window.getComputedStyle(b,null).marginRight),d.removeChild(e),f.removeChild(b),a}})})(),jQuery.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=curCSS(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var e,f,g,h=jQuery.camelCase(b),i=a.style;b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(i,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h];if(c===undefined)return g&&"get"in g&&(e=g.get(a,!1,d))!==undefined?e:i[b];f=typeof c,f==="string"&&(e=rrelNum.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(jQuery.css(a,b)),f="number");if(c==null||c!==c)return;f==="number"&&!jQuery.cssNumber[h]&&(c+="px"),!support.clearCloneStyle&&c===""&&b.indexOf("background")===0&&(i[b]="inherit");if(!g||!("set"in g)||(c=g.set(a,c,d))!==undefined)i[b]=c},css:function(a,b,c,d){var e,f,g,h=jQuery.camelCase(b);return b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(a.style,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),e===undefined&&(e=curCSS(a,b,d)),e==="normal"&&b in cssNormalTransform&&(e=cssNormalTransform[b]),c===""||c?(f=parseFloat(e),c===!0||jQuery.isNumeric(f)?f||0:e):e}}),jQuery.each(["height","width"],function(a,b){jQuery.cssHooks[b]={get:function(a,c,d){if(c)return rdisplayswap.test(jQuery.css(a,"display"))&&a.offsetWidth===0?jQuery.swap(a,cssShow,function(){return getWidthOrHeight(a,b,d)}):getWidthOrHeight(a,b,d)},set:function(a,c,d){var e=d&&getStyles(a);return setPositiveNumber(a,c,d?augmentWidthOrHeight(a,b,d,jQuery.css(a,"boxSizing",!1,e)==="border-box",e):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(a,b){if(b)return jQuery.swap(a,{display:"inline-block"},curCSS,[a,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(a,b){jQuery.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c=="string"?c.split(" "):[c];for(;d<4;d++)e[a+cssExpand[d]+b]=f[d]||f[d-2]||f[0];return e}},rmargin.test(a)||(jQuery.cssHooks[a+b].set=setPositiveNumber)}),jQuery.fn.extend({css:function(a,b){return access(this,function(a,b,c){var d,e,f={},g=0;if(jQuery.isArray(b)){d=getStyles(a),e=b.length;for(;g<e;g++)f[b[g]]=jQuery.css(a,b[g],!1,d);return f}return c!==undefined?jQuery.style(a,b,c):jQuery.css(a,b)},a,b,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(jQuery.cssNumber[c]?"":"px")},cur:function(){var a=Tween.propHooks[this.prop];return a&&a.get?a.get(this):Tween.propHooks._default.get(this)},run:function(a){var b,c=Tween.propHooks[this.prop];return this.options.duration?this.pos=b=jQuery.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=jQuery.css(a.elem,a.prop,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){jQuery.fx.step[a.prop]?jQuery.fx.step[a.prop](a):a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])?jQuery.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},jQuery.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=rfxnum.exec(b),f=e&&e[3]||(jQuery.cssNumber[a]?"":"px"),g=(jQuery.cssNumber[a]||f!=="px"&&+d)&&rfxnum.exec(jQuery.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,jQuery.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&h!==1&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(a,b){jQuery.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],tweeners[c]=tweeners[c]||[],tweeners[c].unshift(b)},prefilter:function(a,b){b?animationPrefilters.unshift(a):animationPrefilters.push(a)}}),jQuery.speed=function(a,b,c){var d=a&&typeof a=="object"?jQuery.extend({},a):{complete:c||!c&&b||jQuery.isFunction(a)&&a,duration:a,easing:c&&b||b&&!jQuery.isFunction(b)&&b};d.duration=jQuery.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){jQuery.isFunction(d.old)&&d.old.call(this),d.queue&&jQuery.dequeue(this,d.queue)},d},jQuery.fn.extend({fadeTo:function(a,b,c,d){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=jQuery.isEmptyObject(a),f=jQuery.speed(b,c,d),g=function(){var b=Animation(this,jQuery.extend({},a),f);(e||data_priv.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return typeof a!="string"&&(c=b,b=a,a=undefined),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=a!=null&&a+"queueHooks",f=jQuery.timers,g=data_priv.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rrun.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem===this&&(a==null||f[e].queue===a)&&(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&jQuery.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=data_priv.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=jQuery.timers,g=d?d.length:0;c.finish=!0,jQuery.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),jQuery.each(["toggle","show","hide"],function(a,b){var c=jQuery.fn[b];jQuery.fn[b]=function(a,d,e){return a==null||typeof a=="boolean"?c.apply(this,arguments):this.animate(genFx(b,!0),a,d,e)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){jQuery.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),jQuery.timers=[],jQuery.fx.tick=function(){var a,b=0,c=jQuery.timers;fxNow=jQuery.now();for(;b<c.length;b++)a=c[b],!a()&&c[b]===a&&c.splice(b--,1);c.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(a){jQuery.timers.push(a),a()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(a,b){return a=jQuery.fx?jQuery.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=document.createElement("input"),b=document.createElement("select"),c=b.appendChild(document.createElement("option"));a.type="checkbox",support.checkOn=a.value!=="",support.optSelected=c.selected,b.disabled=!0,support.optDisabled=!c.disabled,a=document.createElement("input"),a.value="t",a.type="radio",support.radioValue=a.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(a,b){return access(this,jQuery.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){jQuery.removeAttr(this,a)})}}),jQuery.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2)return;if(typeof a.getAttribute===strundefined)return jQuery.prop(a,b,c);if(f!==1||!jQuery.isXMLDoc(a))b=b.toLowerCase(),d=jQuery.attrHooks[b]||(jQuery.expr.match.bool.test(b)?boolHook:nodeHook);if(c===undefined)return d&&"get"in d&&(e=d.get(a,b))!==null?e:(e=jQuery.find.attr(a,b),e==null?undefined:e);if(c!==null)return d&&"set"in d&&(e=d.set(a,c,b))!==undefined?e:(a.setAttribute(b,c+""),c);jQuery.removeAttr(a,b)},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(rnotwhite);if(f&&a.nodeType===1)while(c=f[e++])d=jQuery.propFix[c]||c,jQuery.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!support.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),boolHook={set:function(a,b,c){return b===!1?jQuery.removeAttr(a,c):a.setAttribute(c,c),c}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(a,b){var c=attrHandle[b]||jQuery.find.attr;attrHandle[b]=function(a,b,d){var e,f;return d||(f=attrHandle[b],attrHandle[b]=e,e=c(a,b,d)!=null?b.toLowerCase():null,attrHandle[b]=f),e}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(a,b){return access(this,jQuery.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[jQuery.propFix[a]||a]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;return f=g!==1||!jQuery.isXMLDoc(a),f&&(b=jQuery.propFix[b]||b,e=jQuery.propHooks[b]),c!==undefined?e&&"set"in e&&(d=e.set(a,c,b))!==undefined?d:a[b]=c:e&&"get"in e&&(d=e.get(a,b))!==null?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||rfocusable.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).addClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):" ");if(d){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=jQuery.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=arguments.length===0||typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).removeClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):"");if(d){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?jQuery.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return typeof b=="boolean"&&c==="string"?b?this.addClass(a):this.removeClass(a):jQuery.isFunction(a)?this.each(function(c){jQuery(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var b,d=0,e=jQuery(this),f=a.match(rnotwhite)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else if(c===strundefined||c==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||a===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(rclass," ").indexOf(b)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e)return b=jQuery.valHooks[e.type]||jQuery.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&(c=b.get(e,"value"))!==undefined?c:(c=e.value,typeof c=="string"?c.replace(rreturn,""):c==null?"":c);return}return d=jQuery.isFunction(a),this.each(function(c){var e;if(this.nodeType!==1)return;d?e=a.call(this,c,jQuery(this).val()):e=a,e==null?e="":typeof e=="number"?e+="":jQuery.isArray(e)&&(e=jQuery.map(e,function(a){return a==null?"":a+""})),b=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,e,"value")===undefined)this.value=e})}}),jQuery.extend({valHooks:{option:{get:function(a){var b=jQuery.find.attr(a,"value");return b!=null?b:jQuery.trim(jQuery.text(a))}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!jQuery.nodeName(c.parentNode,"optgroup"))){b=jQuery(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=jQuery.makeArray(b),g=e.length;while(g--){d=e[g];if(d.selected=jQuery.inArray(d.value,f)>=0)c=!0}return c||(a.selectedIndex=-1),f}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(a,b){if(jQuery.isArray(b))return a.checked=jQuery.inArray(jQuery(a).val(),b)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){jQuery.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),jQuery.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(a){return JSON.parse(a+"")},jQuery.parseXML=function(a){var b,c;if(!a||typeof a!="string")return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=undefined}return(!b||b.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+a),b};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):ajaxExtend(jQuery.ajaxSettings,a)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;if(t===2)return;t=2,h&&clearTimeout(h),d=undefined,f=g||"",v.readyState=a>0?4:0,i=a>=200&&a<300||a===304,c&&(s=ajaxHandleResponses(l,v,c)),s=ajaxConvert(l,s,v,i);if(i)l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(jQuery.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(jQuery.etag[e]=u)),a===204||l.type==="HEAD"?w="nocontent":a===304?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r);else{r=w;if(a||!w)w="error",a<0&&(a=0)}v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=undefined,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof a=="object"&&(b=a,a=undefined),b=b||{};var d,e,f,g,h,i,j,k,l=jQuery.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?jQuery(m):jQuery.event,o=jQuery.Deferred(),p=jQuery.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(t===2){if(!g){g={};while(b=rheaders.exec(f))g[b[1].toLowerCase()]=b[2]}b=g[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return t===2?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=jQuery.trim(l.dataType||"*").toLowerCase().match(rnotwhite)||[""],l.crossDomain==null&&(i=rurl.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===ajaxLocParts[1]&&i[2]===ajaxLocParts[2]&&(i[3]||(i[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=jQuery.param(l.data,l.traditional)),inspectPrefiltersOrTransports(prefilters,l,b,v);if(t===2)return v;j=jQuery.event&&l.global,j&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!rnoContent.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(rquery.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=rts.test(e)?e.replace(rts,"$1_="+nonce++):e+(rquery.test(e)?"&":"?")+"_="+nonce++)),l.ifModified&&(jQuery.lastModified[e]&&v.setRequestHeader("If-Modified-Since",jQuery.lastModified[e]),jQuery.etag[e]&&v.setRequestHeader("If-None-Match",jQuery.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,v,l)!==!1&&t!==2){u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);d=inspectPrefiltersOrTransports(transports,l,b,v);if(!d)c(-1,"No Transport");else{v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(t<2))throw w;c(-1,w)}}return v}return v.abort()},getJSON:function(a,b,c){return jQuery.get(a,b,c,"json")},getScript:function(a,b){return jQuery.get(a,undefined,b,"script")}}),jQuery.each(["get","post"],function(a,b){jQuery[b]=function(a,c,d,e){return jQuery.isFunction(c)&&(e=e||d,d=c,c=undefined),jQuery.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),jQuery._evalUrl=function(a){return jQuery.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(a){var b;return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapAll(a.call(this,b))}):(this[0]&&(b=jQuery(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapInner(a.call(this,b))}):this.each(function(){var b=jQuery(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=jQuery.isFunction(a);return this.each(function(c){jQuery(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},jQuery.expr.filters.visible=function(a){return!jQuery.expr.filters.hidden(a)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,b){var c,d=[],e=function(a,b){b=jQuery.isFunction(b)?b():b==null?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===undefined&&(b=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){e(this.name,this.value)});else for(c in a)buildParams(c,a[c],b,e);return d.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=jQuery.prop(this,"elements");return a?jQuery.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&(this.checked||!rcheckableType.test(a))}).map(function(a,b){var c=jQuery(this).val();return c==null?null:jQuery.isArray(c)?jQuery.map(c,function(a){return{name:b.name,value:a.replace(rCRLF,"\r\n")}}):{name:b.name,value:c.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var a in xhrCallbacks)xhrCallbacks[a]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(a){var b;if(support.cors||xhrSupported&&!a.crossDomain)return{send:function(c,d){var e,f=a.xhr(),g=++xhrId;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete xhrCallbacks[g],b=f.onload=f.onerror=null,a==="abort"?f.abort():a==="error"?d(f.status,f.statusText):d(xhrSuccessStatus[f.status]||f.status,f.statusText,typeof f.responseText=="string"?{text:f.responseText}:undefined,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=xhrCallbacks[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return jQuery.globalEval(a),a}}}),jQuery.ajaxPrefilter("script",function(a){a.cache===undefined&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),jQuery.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=jQuery("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e(a.type==="error"?404:200,a.type)}),document.head.appendChild(b[0])},abort:function(){c&&c()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[a]=!0,a}}),jQuery.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=a.jsonp!==!1&&(rjsonp.test(a.url)?"url":typeof a.data=="string"&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(a.data)&&"data");if(g||a.dataTypes[0]==="jsonp")return d=a.jsonpCallback=jQuery.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(rjsonp,"$1"+d):a.jsonp!==!1&&(a.url+=(rquery.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return f||jQuery.error(d+" was not called"),f[0]},a.dataTypes[0]="json",e=window[d],window[d]=function(){f=arguments},c.always(function(){window[d]=e,a[d]&&(a.jsonpCallback=b.jsonpCallback,oldCallbacks.push(d)),f&&jQuery.isFunction(e)&&e(f[0]),f=e=undefined}),"script"}),jQuery.parseHTML=function(a,b,c){if(!a||typeof a!="string")return null;typeof b=="boolean"&&(c=b,b=!1),b=b||document;var d=rsingleTag.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=jQuery.buildFragment([a],b,e),e&&e.length&&jQuery(e).remove(),jQuery.merge([],d.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(a,b,c){if(typeof a!="string"&&_load)return _load.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=jQuery.trim(a.slice(h)),a=a.slice(0,h)),jQuery.isFunction(b)?(c=b,b=undefined):b&&typeof b=="object"&&(e="POST"),g.length>0&&jQuery.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?jQuery("<div>").append(jQuery.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){jQuery.fn[b]=function(a){return this.on(b,a)}}),jQuery.expr.filters.animated=function(a){return jQuery.grep(jQuery.timers,function(b){return a===b.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=jQuery.css(a,"position"),l=jQuery(a),m={};k==="static"&&(a.style.position="relative"),h=l.offset(),f=jQuery.css(a,"top"),i=jQuery.css(a,"left"),j=(k==="absolute"||k==="fixed")&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),jQuery.isFunction(b)&&(b=b.call(a,c,h)),b.top!=null&&(m.top=b.top-h.top+g),b.left!=null&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},jQuery.fn.extend({offset:function(a){if(arguments.length)return a===undefined?this:this.each(function(b){jQuery.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(!f)return;return b=f.documentElement,jQuery.contains(b,d)?(typeof d.getBoundingClientRect!==strundefined&&(e=d.getBoundingClientRect()),c=getWindow(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(!this[0])return;var a,b,c=this[0],d={top:0,left:0};return jQuery.css(c,"position")==="fixed"?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),jQuery.nodeName(a[0],"html")||(d=a.offset()),d.top+=jQuery.css(a[0],"borderTopWidth",!0),d.left+=jQuery.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-jQuery.css(c,"marginTop",!0),left:b.left-d.left-jQuery.css(c,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||docElem;while(a&&!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")a=a.offsetParent;return a||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;jQuery.fn[a]=function(d){return access(this,function(a,d,e){var f=getWindow(a);if(e===undefined)return f?f[b]:a[d];f?f.scrollTo(c?window.pageXOffset:e,c?e:window.pageYOffset):a[d]=e},a,d,arguments.length,null)}}),jQuery.each(["top","left"],function(a,b){jQuery.cssHooks[b]=addGetHookIf(support.pixelPosition,function(a,c){if(c)return c=curCSS(a,b),rnumnonpx.test(c)?jQuery(a).position()[b]+"px":c})}),jQuery.each({Height:"height",Width:"width"},function(a,b){jQuery.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){jQuery.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!="boolean"),g=c||(d===!0||e===!0?"margin":"border");return access(this,function(b,c,d){var e;return jQuery.isWindow(b)?b.document.documentElement["client"+a]:b.nodeType===9?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):d===undefined?jQuery.css(b,c,g):jQuery.style(b,c,d,g)},b,f?d:undefined,f,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(a){return window.$===jQuery&&(window.$=_$),a&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),define("jquery-private",["jquery"],function(a){return console.log(a),a.noConflict(!0)}),function(){function a(a){var b=a.naturalWidth,c=a.naturalHeight;if(b*c>1048576){var d=document.createElement("canvas");d.width=d.height=1;var e=d.getContext("2d");return e.drawImage(a,-b+1,0),e.getImageData(0,0,1,1).data[3]===0}return!1}function b(a,b,c){var d=document.createElement("canvas");d.width=1,d.height=c;var e=d.getContext("2d");e.drawImage(a,0,0);var f=e.getImageData(0,0,1,c).data,g=0,h=c,i=c;while(i>g){var j=f[(i-1)*4+3];j===0?h=i:g=i,i=h+g>>1}var k=i/c;return k===0?1:k}function c(a,b,c){var e=document.createElement("canvas");return d(a,e,b,c),e.toDataURL("image/jpeg",b.quality||.8)}function d(c,d,f,g){var h=c.naturalWidth,i=c.naturalHeight;if(!(h+i))return;var j=f.width,k=f.height,l=d.getContext("2d");l.save(),j||(j=Math.min(h,1024),k=i*j/h),e(d,l,j,k,f.orientation);var m=a(c);m&&(h/=2,i/=2);var n=1024,o=document.createElement("canvas");o.width=o.height=n;var p=o.getContext("2d"),q=g?b(c,h,i):1,r=Math.ceil(n*j/h),s=Math.ceil(n*k/i/q),t=0,u=0;while(t<i){var v=0,w=0;while(v<h)p.clearRect(0,0,n,n),p.drawImage(c,-v,-t),l.drawImage(o,0,0,n,n,w,u,r,s),v+=n,w+=r;t+=n,u+=s}l.restore(),o=p=null}function e(a,b,c,d,e){switch(e){case 5:case 6:case 7:case 8:a.width=d,a.height=c;break;default:a.width=c,a.height=d}switch(e){case 2:b.translate(c,0),b.scale(-1,1);break;case 3:b.translate(c,d),b.rotate(Math.PI);break;case 4:b.translate(0,d),b.scale(1,-1);break;case 5:b.rotate(.5*Math.PI),b.scale(1,-1);break;case 6:b.rotate(.5*Math.PI),b.translate(0,-d);break;case 7:b.rotate(.5*Math.PI),b.translate(c,-d),b.scale(-1,1);break;case 8:b.rotate(-0.5*Math.PI),b.translate(-c,0);break;default:}}function f(a){if(window.Blob&&a instanceof Blob){if(!g)throw Error("No createObjectURL function found to create blob url");var b=new Image;b.src=g.createObjectURL(a),this.blob=a,a=b}if(!a.naturalWidth&&!a.naturalHeight){var c=this;a.onload=a.onerror=function(){var a=c.imageLoadListeners;if(a){c.imageLoadListeners=null;for(var b=0,d=a.length;b<d;b++)a[b]()}},this.imageLoadListeners=[]}this.srcImage=a}var g=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;f.prototype.render=function(a,b,e){if(this.imageLoadListeners){var f=this;this.imageLoadListeners.push(function(){f.render(a,b,e)});return}b=b||{};var h=this.srcImage.naturalWidth,i=this.srcImage.naturalHeight,j=b.width,k=b.height,l=b.maxWidth,m=b.maxHeight,n=!this.blob||this.blob.type==="image/jpeg";j&&!k?k=i*j/h<<0:k&&!j?j=h*k/i<<0:(j=h,k=i),l&&j>l&&(j=l,k=i*j/h<<0),m&&k>m&&(k=m,j=h*k/i<<0);var o={width:j,height:k};for(var p in b)o[p]=b[p];var q=a.tagName.toLowerCase();q==="img"?a.src=c(this.srcImage,o,n):q==="canvas"&&d(this.srcImage,a,o,n),typeof this.onrender=="function"&&this.onrender(a),e&&e(),this.blob&&(this.blob=null,g.revokeObjectURL(this.srcImage.src))},typeof define=="function"&&define.amd?define("megapix-image",[],function(){return f}):typeof exports=="object"?module.exports=f:this.MegaPixImage=f}(),function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function b(a){return!!a.exifdata}function c(a,b){b=b||a.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",a=a.replace(/^data\:([^\;]+)\;base64,/gmi,"");var c=atob(a),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e);for(var g=0;g<d;g++)f[g]=c.charCodeAt(g);return e}function d(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(a){(this.status==200||this.status===0)&&b(this.response)},c.send()}function e(a,b){function e(c){var d=f(c),e=g(c);a.exifdata=d||{},a.iptcdata=e||{},b&&b.call(a)}if(a.src)if(/^data\:/i.test(a.src)){var h=c(a.src);e(h)}else if(/^blob\:/i.test(a.src)){var i=new FileReader;i.onload=function(a){e(a.target.result)},d(a.src,function(a){i.readAsArrayBuffer(a)})}else{var j=new XMLHttpRequest;j.onload=function(){if(this.status!=200&&this.status!==0)throw"Could not load image";e(j.response),j=null},j.open("GET",a.src,!0),j.responseType="arraybuffer",j.send(null)}else if(window.FileReader&&(a instanceof window.Blob||a instanceof window.File)){var i=new FileReader;i.onload=function(a){m&&console.log("Got file of length "+a.target.result.byteLength),e(a.target.result)},i.readAsArrayBuffer(a)}}function f(a){var b=new DataView(a);m&&console.log("Got file of length "+a.byteLength);if(b.getUint8(0)!=255||b.getUint8(1)!=216)return m&&console.log("Not a valid JPEG"),!1;var c=2,d=a.byteLength,e;while(c<d){if(b.getUint8(c)!=255)return m&&console.log("Not a valid marker at offset "+c+", found: "+b.getUint8(c)),!1;e=b.getUint8(c+1),m&&console.log(e);if(e==225)return m&&console.log("Found 0xFFE1 marker"),l(b,c+4,b.getUint16(c+2)-2);c+=2+b.getUint16(c+2)}}function g(a){var b=new DataView(a);m&&console.log("Got file of length "+a.byteLength);if(b.getUint8(0)!=255||b.getUint8(1)!=216)return m&&console.log("Not a valid JPEG"),!1;var c=2,d=a.byteLength,e=function(a,b){return a.getUint8(b)===56&&a.getUint8(b+1)===66&&a.getUint8(b+2)===73&&a.getUint8(b+3)===77&&a.getUint8(b+4)===4&&a.getUint8(b+5)===4};while(c<d){if(e(b,c)){var f=b.getUint8(c+7);f%2!==0&&(f+=1),f===0&&(f=4);var g=c+8+f,i=b.getUint16(c+6+f);return h(a,g,i)}c++}}function h(a,b,c){var d=new DataView(a),e={},f,g,h,i,j,l=b;while(l<b+c)d.getUint8(l)===28&&d.getUint8(l+1)===2&&(i=d.getUint8(l+2),i in u&&(h=d.getInt16(l+3),j=h+5,g=u[i],f=k(d,l+5,h),e.hasOwnProperty(g)?e[g]instanceof Array?e[g].push(f):e[g]=[e[g],f]:e[g]=f)),l++;return e}function i(a,b,c,d,e){var f=a.getUint16(c,!e),g={},h,i,k;for(k=0;k<f;k++)h=c+k*12+2,i=d[a.getUint16(h,!e)],!i&&m&&console.log("Unknown tag: "+a.getUint16(h,!e)),g[i]=j(a,h,b,c,e);return g}function j(a,b,c,d,e){var f=a.getUint16(b+2,!e),g=a.getUint32(b+4,!e),h=a.getUint32(b+8,!e)+c,i,j,l,m,n,o;switch(f){case 1:case 7:if(g==1)return a.getUint8(b+8,!e);i=g>4?h:b+8,j=[];for(m=0;m<g;m++)j[m]=a.getUint8(i+m);return j;case 2:return i=g>4?h:b+8,k(a,i,g-1);case 3:if(g==1)return a.getUint16(b+8,!e);i=g>2?h:b+8,j=[];for(m=0;m<g;m++)j[m]=a.getUint16(i+2*m,!e);return j;case 4:if(g==1)return a.getUint32(b+8,!e);j=[];for(m=0;m<g;m++)j[m]=a.getUint32(h+4*m,!e);return j;case 5:if(g==1)return n=a.getUint32(h,!e),o=a.getUint32(h+4,!e),l=new Number(n/o),l.numerator=n,l.denominator=o,l;j=[];for(m=0;m<g;m++)n=a.getUint32(h+8*m,!e),o=a.getUint32(h+4+8*m,!e),j[m]=new Number(n/o),j[m].numerator=n,j[m].denominator=o;return j;case 9:if(g==1)return a.getInt32(b+8,!e);j=[];for(m=0;m<g;m++)j[m]=a.getInt32(h+4*m,!e);return j;case 10:if(g==1)return a.getInt32(h,!e)/a.getInt32(h+4,!e);j=[];for(m=0;m<g;m++)j[m]=a.getInt32(h+8*m,!e)/a.getInt32(h+4+8*m,!e);return j}}function k(a,b,c){var d="";for(n=b;n<b+c;n++)d+=String.fromCharCode(a.getUint8(n));return d}function l(a,b){if(k(a,b,4)!="Exif")return m&&console.log("Not valid EXIF data! "+k(a,b,4)),!1;var c,d,e,f,g,h=b+6;if(a.getUint16(h)==18761)c=!1;else{if(a.getUint16(h)!=19789)return m&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;c=!0}if(a.getUint16(h+2,!c)!=42)return m&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var j=a.getUint32(h+4,!c);if(j<8)return m&&console.log("Not valid TIFF data! (First offset less than 8)",a.getUint32(h+4,!c)),!1;d=i(a,h,h+j,r,c);if(d.ExifIFDPointer){f=i(a,h,h+d.ExifIFDPointer,q,c);for(e in f){switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":f[e]=t[e][f[e]];break;case"ExifVersion":case"FlashpixVersion":f[e]=String.fromCharCode(f[e][0],f[e][1],f[e][2],f[e][3]);break;case"ComponentsConfiguration":f[e]=t.Components[f[e][0]]+t.Components[f[e][1]]+t.Components[f[e][2]]+t.Components[f[e][3]]}d[e]=f[e]}}if(d.GPSInfoIFDPointer){g=i(a,h,h+d.GPSInfoIFDPointer,s,c);for(e in g){switch(e){case"GPSVersionID":g[e]=g[e][0]+"."+g[e][1]+"."+g[e][2]+"."+g[e][3]}d[e]=g[e]}}return d}var m=!1,o=this,p=function(a){if(a instanceof p)return a;if(!(this instanceof p))return new p(a);this.EXIFwrapped=a};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=p),exports.EXIF=p):o.EXIF=p;var q=p.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},r=p.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},s=p.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},t=p.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},u={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};p.getData=function(a,c){return(a instanceof Image||a instanceof HTMLImageElement)&&!a.complete?!1:(b(a)?c&&c.call(a):e(a,c),!0)},p.getTag=function(a,c){if(!b(a))return;return a.exifdata[c]},p.getAllTags=function(a){if(!b(a))return{};var c,d=a.exifdata,e={};for(c in d)d.hasOwnProperty(c)&&(e[c]=d[c]);return e},p.pretty=function(a){if(!b(a))return"";var c,d=a.exifdata,e="";for(c in d)d.hasOwnProperty(c)&&(typeof d[c]=="object"?d[c]instanceof Number?e+=c+" : "+d[c]+" ["+d[c].numerator+"/"+d[c].denominator+"]\r\n":e+=c+" : ["+d[c].length+" values]\r\n":e+=c+" : "+d[c]+"\r\n");return e},p.readFromBinaryFile=function(a){return f(a)},typeof define=="function"&&define.amd&&define("exif-js",[],function(){return p})}.call(this),function(a){typeof define=="function"&&define.amd!=undefined?define("tomLib",["jquery","megapix-image","exif-js"],a):a(jQuery,MegaPixImage,EXIF,!0)}(function(a,b,c,d){function e(a,b,c,d,e){}function f(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(a.style[c]!==undefined)return{end:b[c]};return!1}var g={};if(d===!0)var b=window.MegaPixImage;g.support={},g.prefixStyle=function(a){var b=document.createElement("div"),c="webkitT,t,,MozT,msT,OT".split(","),d;a=a.slice(1);for(d in c)if(b.style[c[d]+a]!=undefined)return c[d]+a},g.animateFrame=function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var a=!0;this.list=q,this.isInit=!0,this.reset=n,this.interval=null,this.timeout=null,this.isPlay=!0,this.stop=function(){a=!1},this.start=function(){a=!0},this.getPlayState=function(){return a}}function n(){clearInterval(o.interval),q.filter(function(a,b){return b>0}).removeClass("show"),o.start(),clearTimeout(o.timeout)}var o=a.data("plugin"),p,q,r=o?!0:!1,s=o?o.getPlayState():!1;if(s)return;if(!r){for(var t=0;t<=c;t++)p="png-frame p"+(t+1)+(t==0?" show":""),a.append("<div class='"+p+"'></div>");q=a.find(".png-frame"),a.data("plugin",o=new m)}else o.reset(),q=o.list;return function(){function a(){o.interval=setInterval(function(){if(!o.getPlayState())return;if(k&&k==m){if(!p){p=+(new Date);return}if(+(new Date)-p<l)return;k=null}r=m,e||m++,m==c&&(g&&g--,clearInterval(o.interval),f&&(g!=0||g==null)&&(o.timeout=setTimeout(function(){e&&(m=0),a()},h)),f&&g==0?(o.stop(),typeof i=="function"&&i()):f||o.stop(),typeof i=="function"&&f==0&&i()),e&&m++,m==c+1&&(m=0),q.eq(m).addClass("show"),q.eq(r).removeClass("show"),typeof j=="function"&&j(m)},d)}var m=b,n,p,r;a()}(),o},e.gender=function(a){},function(){function b(b,d){this.dfdList=[],this.$dfdList=[],this.callback=d;var e=a.Deferred(),f;for(var g=0,h=b;g<h;g++)f=new c,e.then(f),g==0&&e.resolve(),e=f.defer,this.dfdList.push(f),this.$dfdList.push(f.defer);typeof d=="function"&&a.when(this.$dfdList).then(d)}function c(){this.defer=a.Deferred(),this.cstate="unfilled"}b.prototype.getItem=function(a){return this.dfdList[a]},b.prototype.dealItem=function(a){var b=!0;for(var c=a-1;c>-1;c--)this.getItem(c).defer.state()!=="resolved"&&(b=!1);return b?(this.getItem(a).changeState("filled"),this.dealWaitList(a)):this.getItem(a).changeState("wait"),this.getItem(a).cstate},b.prototype.dealWaitList=function(a){var b=this.dfdList;for(var c=a+1,d=b.length;c<d;c++){if(this.getItem(c).cstate!=="wait")return!1;this.getItem(c).changeState("filled")}},c.prototype.addCallbacks=function(a,b){this.defer.done(a).fail(b)},c.prototype.changeState=function(a){this.cstate=a,a==="filled"&&this.defer.resolve()},g.DeferredList=b}(),g.getParams=function(a){if(!a)return;typeof a=="string"&&(a=[a]);if(typeof a.slice!="function")return;var b=window.location.search.slice(1),c=b.split("&"),d=0,e=[],f;for(var g=0,h=c.length;g<h;g++)f=c[g].split("="),c[g]={},f.length==2&&(c[g].param=f[0],c[g].value=f[1]);for(var i=0,h=a.length;i<h;i++){while(d<c.length)c[d]["param"]==a[i]?e.push(decodeURI(c[d].value)):d==c.length-1&&!e[i]&&e.push(null),d++;d=0}return e};var h=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;return g.cropImage=function(d){function e(){var a=n.preview.naturalWidth,b=n.preview.naturalHeight,c,e,f=0,g=0,h,i=d.cropWidth*d.devicePixelRatio,j=d.cropHeight*d.devicePixelRatio;return q.clearRect(0,0,p.width,p.height),i/j<a/b?(console.log("填高"),h=j/b,e=j,c=a*h,f=-(a*h-i)/2):(console.log("填宽"),h=i/a,c=i,e=b*h,g=-(b*h-j)/2),{x:f,y:g,dWidth:c,dHeight:e,scale:h,iWidth:a,iHeight:b}}function f(a){var b=e(),c=-b.dWidth/2*n.scale+n.x,f=-b.dHeight/2*n.scale+n.y,g;return a=a||{},a.lowDpi&&d.enableRatio&&(b.dHeight/=d.devicePixelRatio,b.dWidth/=d.devicePixelRatio,p.width/=d.devicePixelRatio,p.height/=d.devicePixelRatio),q.save(),a.background&&(q.fillStyle=a.background,q.fillRect(0,0,p.width,p.height)),q.translate(p.width/2,p.height/2),q.rotate(Math.PI*n.rotate/180),n.rotate==90?(c=-b.dWidth/2*n.scale+n.y,f=-b.dHeight/2*n.scale-n.x):n.rotate==180?(c=-b.dWidth/2*n.scale-n.x,f=-b.dHeight/2*n.scale-n.y):n.rotate==270&&(c=-b.dWidth/2*n.scale-n.y,f=-b.dHeight/2*n.scale+n.x),q.drawImage(n.preview,c,f,b.dWidth*n.scale,b.dHeight*n.scale),q.restore(),g=p.toDataURL("image/"+a.type?a.type:"png"),a.lowDpi&&d.enableRatio&&(p.width*=d.devicePixelRatio,p.height*=d.devicePixelRatio),g}function h(){}function i(b){a.extend(n,b)}var j="ontouchstart"in window?!0:!1,k="touchstart mousedown",l="touchmove mousemove",m="touchend mouseup";d=a.extend({enableRatio:!0,cropWidth:260,cropHeight:260,container:document.body,canvas:document.createElement("canvas"),success:function(a){},onChange:function(a){},onLoad:function(a){}},d),d.devicePixelRatio=d.enableRatio?window.devicePixelRatio:1;var n={preview:null,moveX:0,moveY:0,scale:1,rotate:0,ratio:d.devicePixelRatio},o=g.prefixStyle("transform"),p=d.canvas,q=p.getContext("2d"),r,s,t,u=a(p).offset(),v=d.bindPreview||a(),w;a(p).prop({width:d.cropWidth*d.devicePixelRatio,height:d.cropHeight*d.devicePixelRatio}).css({width:d.cropWidth,height:d.cropHeight});if(d.bindFile)if(typeof d.bindFile=="string"){var x;x=new Image,x.onload=f.bind(null,x),x.src=d.bindFile,n.preview=x}else a(d.bindFile).is("input[type=file]")?(d.bindFile.attr("cropId",++g.cropImage.id),i({x:0,y:0,scale:1}),a(document).delegate("[cropId="+g.cropImage.id+"]","change",function(){v.prop("src",""),q.clearRect(0,0,p.width,p.height);if(this.files&&this.files.length){var a,f,g=this.files[0],h=new Image;c.getData(g,function(){f=new b(g),f.render(h,{maxWidth:800,maxHeight:800,quality:1,orientation:c.getTag(this,"Orientation")||1},function(){var a=new Image;a.onload=function(){n.preview=h;var a=e();v.prop("style",""),d.onLoad({originSrc:h.src,width:a.dWidth,height:a.dHeight,ratio:n.ratio,x:a.x,y:a.y,dWidth:a.dWidth,dHeight:a.dHeight,scale:a.scale})},a.src=h.src})})}d.bindFile.after(d.bindFile.clone()).remove()})):(n.preview=d.bindFile,f());return d.useHammer||(a(document).on(m,function(a){w=!1}),a(p).on(k,function(b){w=!0,b=b.originalEvent,u=a(p).offset();var c=j?b.targetTouches[0].clientX-u.left:b.clientX-u.left,d=j?b.targetTouches[0].clientY-u.top:b.clientY-u.top;r=c,s=d}),a(p).on(l,function(a){if(!w)return;a=a.originalEvent;var b=j?a.targetTouches[0].clientX-u.left:a.clientX-u.left,c=j?a.targetTouches[0].clientY-u.top:a.clientY-u.top;n.moveX+=b-r,n.moveY+=c-s,v.css(o,"translate3d("+n.moveX+"px,"+n.moveY+"px,0)"),r=b,s=c})),{getCropFile:f,getCropInfo:e,setCropStyle:i}},g.cropImage.id=0,g.animateGroup=function(a){function b(){g.addClass(a.frameClass[h]||a.frameClass[0])}function c(){b(),e=setInterval(function(){a.classSwitch!==!1&&g.removeClass(a.frameClass[h]||a.frameClass[0]),h++,h>d.length-1&&(a.loopTimes--,h=0),g=d.eq(h),(a.loopTimes==null||a.loopTimes!=0)&&b(),a.loopTimes==0&&(clearInterval(e),typeof a.callback=="function"&&a.callback())},f+70)}var d=a.group,e,f=a.duration+(a.gap||0),g=d.eq(0),h=a.startIndex||0;return a.waitTime?setTimeout(function(){c()},a.waitTime):c(),e},d===!0&&(window.tomLib=g),g}),function(a){typeof define=="function"&&define.amd!=undefined?define("iscroll-lite",[],a):a(window,document,Math)}(function(a,b,c){function d(a,c){this.wrapper=typeof a=="string"?b.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in c)this.options[d]=c[d];this.translateZ=this.options.HWCompositing&&f.hasPerspective?" translateZ(0)":"",this.options.useTransition=f.hasTransition&&this.options.useTransition,this.options.useTransform=f.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY,this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=typeof this.options.bounceEasing=="string"?f.ease[this.options.bounceEasing]||f.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}a=a?a:this,b=b?b:a.document,c=c?c:a.Math;var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},f=function(){function d(a){return g===!1?!1:g===""?a:g+a.charAt(0).toUpperCase()+a.substr(1)}var e={},f=b.createElement("div").style,g=function(){var a=["t","webkitT","MozT","msT","OT"],b,c=0,d=a.length;for(;c<d;c++){b=a[c]+"ransform";if(b in f)return a[c].substr(0,a[c].length-1)}return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(a,b){for(var c in b)a[c]=b[c]},e.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},e.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},e.prefixPointerEvent=function(b){return a.MSPointerEvent?"MSPointer"+b.charAt(9).toUpperCase()+b.substr(10):b},e.momentum=function(a,b,d,e,f,g){var h=a-b,i=c.abs(h)/d,j,k;return g=g===undefined?6e-4:g,j=a+i*i/(2*g)*(h<0?-1:1),k=i/g,j<e?(j=f?e-f/2.5*(i/8):e,h=c.abs(j-a),k=h/i):j>0&&(j=f?f/2.5*(i/8):0,h=c.abs(a)+j,k=h/i),{destination:c.round(j),duration:k}};var h=d("transform");return e.extend(e,{hasTransform:h!==!1,hasPerspective:d("perspective")in f,hasTouch:"ontouchstart"in a,hasPointer:a.PointerEvent||a.MSPointerEvent,hasTransition:d("transition")in f}),e.isBadAndroid=/Android /.test(a.navigator.appVersion)&&!/Chrome\/\d/.test(a.navigator.appVersion),e.extend(e.style={},{transform:h,transitionTimingFunction:d("transitionTimingFunction"),transitionDuration:d("transitionDuration"),transitionDelay:d("transitionDelay"),transformOrigin:d("transformOrigin")}),e.hasClass=function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return c.test(a.className)},e.addClass=function(a,b){if(e.hasClass(a,b))return;var c=a.className.split(" ");c.push(b),a.className=c.join(" ")},e.removeClass=function(a,b){if(!e.hasClass(a,b))return;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")},e.offset=function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},e.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,d=.4;return a===0?0:a==1?1:d*c.pow(2,-10*a)*c.sin((a-b/4)*2*c.PI/b)+1}}}),e.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},e.click=function(a){var c=a.target,d;/(SELECT|INPUT|TEXTAREA)/i.test(c.tagName)||(d=b.createEvent("MouseEvents"),d.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),d._constructed=!0,c.dispatchEvent(d))},e}();return d.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){if(a.target!=this.scroller||!this.isInTransition)return;this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd"))},_start:function(a){if(f.eventType[a.type]!=1&&a.button!==0)return;if(!this.enabled||this.initiated&&f.eventType[a.type]!==this.initiated)return;this.options.preventDefault&&!f.isBadAndroid&&!f.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b=a.touches?a.touches[0]:a,d;this.initiated=f.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=f.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,d=this.getComputedPosition(),this._translate(c.round(d.x),c.round(d.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=b.pageX,this.pointY=b.pageY,this._execEvent("beforeScrollStart")},_move:function(a){if(!this.enabled||f.eventType[a.type]!==this.initiated)return;this.options.preventDefault&&a.preventDefault();var b=a.touches?a.touches[0]:a,d=b.pageX-this.pointX,e=b.pageY-this.pointY,g=f.getTime(),h,i,j,k;this.pointX=b.pageX,this.pointY=b.pageY,this.distX+=d,this.distY+=e,j=c.abs(this.distX),k=c.abs(this.distY);if(g-this.endTime>300&&j<10&&k<10)return;!this.directionLocked&&!this.options.freeScroll&&(j>k+this.options.directionLockThreshold?this.directionLocked="h":k>=j+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n");if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")a.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}e=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")a.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}d=0}d=this.hasHorizontalScroll?d:0,e=this.hasVerticalScroll?e:0,h=this.x+d,i=this.y+e;if(h>0||h<this.maxScrollX)h=this.options.bounce?this.x+d/3:h>0?0:this.maxScrollX;if(i>0||i<this.maxScrollY)i=this.options.bounce?this.y+e/3:i>0?0:this.maxScrollY;this.directionX=d>0?-1:d<0?1:0,this.directionY=e>0?-1:e<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(h,i),g-this.startTime>300&&(this.startTime=g,this.startX=this.x,this.startY=this.y)},_end:function(a){if(!this.enabled||f.eventType[a.type]!==this.initiated)return;this.options.preventDefault&&!f.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b=a.changedTouches?a.changedTouches[0]:a,d,e,g=f.getTime()-this.startTime,h=c.round(this.x),i=c.round(this.y),j=c.abs(h-this.startX),k=c.abs(i-this.startY),l=0,m="";this.isInTransition=0,this.initiated=0,this.endTime=f.getTime();if(this.resetPosition(this.options.bounceTime))return;this.scrollTo(h,i);if(!this.moved){this.options.tap&&f.tap(a,this.options.tap),this.options.click&&f.click(a),this._execEvent("scrollCancel");return}if(this._events.flick&&g<200&&j<100&&k<100){this._execEvent("flick");return}this.options.momentum&&g<300&&(d=this.hasHorizontalScroll?f.momentum(this.x,this.startX,g,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:h,duration:0},e=this.hasVerticalScroll?f.momentum(this.y,this.startY,g,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:i,duration:0},h=d.destination,i=e.destination,l=c.max(d.duration,e.duration),this.isInTransition=1);if(h!=this.x||i!=this.y){if(h>0||h<this.maxScrollX||i>0||i<this.maxScrollY)m=f.ease.quadratic;this.scrollTo(h,i,l,m);return}this._execEvent("scrollEnd")},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var a=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=f.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(!this._events[a])return;var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)},_execEvent:function(a){if(!this._events[a])return;var b=0,c=this._events[a].length;if(!c)return;for(;b<c;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||f.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,e,g){a=a.nodeType?a:this.scroller.querySelector(a);if(!a)return;var h=f.offset(a);h.left-=this.wrapperOffset.left,h.top-=this.wrapperOffset.top,d===!0&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),e===!0&&(e=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),h.left-=d||0,h.top-=e||0,h.left=h.left>0?0:h.left<this.maxScrollX?this.maxScrollX:h.left,h.top=h.top>0?0:h.top<this.maxScrollY?this.maxScrollY:h.top,b=b===undefined||b===null||b==="auto"?c.max(c.abs(this.x-h.left),c.abs(this.y-h.top)):b,this.scrollTo(h.left,h.top,b,g)},_transitionTime:function(a){a=a||0,this.scrollerStyle[f.style.transitionDuration]=a+"ms",!a&&f.isBadAndroid&&(this.scrollerStyle[f.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(a){this.scrollerStyle[f.style.transitionTimingFunction]=a},_translate:function(a,b){this.options.useTransform?this.scrollerStyle[f.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b},_initEvents:function(b){var c=b?f.removeEvent:f.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),f.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,f.prefixPointerEvent("pointerdown"),this),c(d,f.prefixPointerEvent("pointermove"),this),c(d,f.prefixPointerEvent("pointercancel"),this),c(d,f.prefixPointerEvent("pointerup"),this)),f.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b=a.getComputedStyle(this.scroller,null),c,d;return this.options.useTransform?(b=b[f.style.transform].split(")")[0].split(", "),c=+(b[12]||b[4]),d=+(b[13]||b[5])):(c=+b.left.replace(/[^-\d.]/g,""),d=+b.top.replace(/[^-\d.]/g,"")),{x:c,y:d}},_animate:function(a,b,c,d){function g(){var m=f.getTime(),n,o,p;if(m>=l){h.isAnimating=!1,h._translate(a,b),h.resetPosition(h.options.bounceTime)||h._execEvent("scrollEnd");return}m=(m-k)/c,p=d(m),n=(a-i)*p+i,o=(b-j)*p+j,h._translate(n,o),h.isAnimating&&e(g)}var h=this,i=this.x,j=this.y,k=f.getTime(),l=k+c;this.isAnimating=!0,g()},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}}},d.utils=f,typeof module!="undefined"&&module.exports?module.exports=d:a.IScroll=d,d}),function(){function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700;if(a.notNeeded(b))return;var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this;for(var i=0,j=g.length;i<j;i++)h[g[i]]=e(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;a==="click"?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;a==="click"?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),typeof b.onclick=="function"&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&a.type==="file"||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&a.tagName.toLowerCase()==="select"?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&a.type.indexOf("date")!==0&&a.type!=="time"&&a.type!=="month"?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0];if(d){f=window.getSelection();if(f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0},a.prototype.findControl=function(a){return a.control!==undefined?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase();if(h==="label"){b=this.findControl(k);if(b){this.focus(k);if(c)return!1;k=b}}else if(this.needsFocus(k)){if(a.timeStamp-g>100||d&&window.top!==window&&h==="input")return this.targetElement=null,!1;this.focus(k),this.sendClick(k,a);if(!d||h!=="select")this.targetElement=null,a.preventDefault();return!1}if(d&&!e){i=k.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):a.target.type==="submit"&&a.detail===0?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if(typeof window.ontouchstart=="undefined")return!0;d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(d){if(!c)return!0;b=document.querySelector("meta[name=viewport]");if(b){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g){e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(e[1]>=10&&e[2]>=3){b=document.querySelector("meta[name=viewport]");if(b){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}}}if(a.style.msTouchAction==="none"||a.style.touchAction==="manipulation")return!0;f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(f>=27){b=document.querySelector("meta[name=viewport]");if(b&&(b.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))return!0}return a.style.touchAction==="none"||a.style.touchAction==="manipulation"?!0:!1},a.attach=function(b,c){return new a(b,c)},typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("fastclick",[],function(){return a}):typeof module!="undefined"&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),function(a){function b(){if(!c.READY){c.event.determineEventTypes();for(var a in c.gestures)c.gestures.hasOwnProperty(a)&&c.detection.register(c.gestures[a]);c.event.onTouch(document,c.EVENT_MOVE,c.detection.detect),c.event.onTouch(document,c.EVENT_END,c.detection.endDetect),c.READY=!0}}var c=function(a,b){return new c.Instance(a,b||{})};c.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},c.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,c.HAS_TOUCHEVENTS="ontouchstart"in a,c.EVENT_TYPES={},c.DIRECTION_DOWN="down",c.DIRECTION_LEFT="left",c.DIRECTION_UP="up",c.DIRECTION_RIGHT="right",c.POINTER_MOUSE="mouse",c.POINTER_TOUCH="touch",c.POINTER_PEN="pen",c.EVENT_START="start",c.EVENT_MOVE="move",c.EVENT_END="end",c.plugins={},c.READY=!1,c.Instance=function(a,d){var e=this;return b(),this.element=a,this.enabled=!0,this.options=c.utils.extend(c.utils.extend({},c.defaults),d||{}),this.options.stop_browser_behavior&&c.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),c.event.onTouch(a,c.EVENT_START,function(a){e.enabled&&c.detection.startDetect(e,a)}),this},c.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=document.createEvent("Event");return c.initEvent(a,!0,!0),c.gesture=b,this.element.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var d=null,e=!1,f=!1;c.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;d.length>e;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,g){var h=this;this.bindDom(a,c.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();return j.match(/mouseup/)&&f?(f=!1,void 0):((j.match(/touch/)||j.match(/mouse/)&&1===i.which||c.HAS_POINTEREVENTS&&j.match(/down/))&&(e=!0),j.match(/touch|pointer/)&&(f=!0),!e||f&&j.match(/mouse/)||(c.HAS_POINTEREVENTS&&b!=c.EVENT_END&&c.PointerEvent.updatePointer(b,i),b===c.EVENT_END&&null!==d?i=d:d=i,g.call(c.detection,h.collectEventData(a,b,i)),c.HAS_POINTEREVENTS&&b==c.EVENT_END&&c.PointerEvent.updatePointer(b,i)),j.match(/up|cancel|end/)&&(e=!1,d=null,c.PointerEvent.reset()),void 0)})},determineEventTypes:function(){var a;a=c.HAS_POINTEREVENTS?c.PointerEvent.getEvents():["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],c.EVENT_TYPES[c.EVENT_START]=a[0],c.EVENT_TYPES[c.EVENT_MOVE]=a[1],c.EVENT_TYPES[c.EVENT_END]=a[2]},getTouchList:function(a){return c.HAS_POINTEREVENTS?c.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,d){var e=this.getTouchList(d,b),f=c.POINTER_TOUCH;return(d.type.match(/mouse/)||c.PointerEvent.matchType(c.POINTER_MOUSE,d))&&(f=c.POINTER_MOUSE),{center:c.utils.getCenter(e),timestamp:d.timestamp||(new Date).getTime(),target:d.target,touches:e,eventType:b,pointerType:f,srcEvent:d,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return c.detection.stopDetect()}}}},c.PointerEvent={pointers:{},getTouchList:function(){var a=this.pointers,b=[];return Object.keys(a).sort().forEach(function(c){b.push(a[c])}),b},updatePointer:function(a,b){a==c.EVENT_END?delete this.pointers[b.pointerId]:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b)},matchType:function(a,b){if(!b.pointerType)return!1;var d={};return d[c.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==c.POINTER_MOUSE,d[c.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==c.POINTER_TOUCH,d[c.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==c.POINTER_PEN,d[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},c.utils={extend:function(a,b){for(var c in b)a[c]=b[c];return a},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var d=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return d>=e?a.pageX-b.pageX>0?c.DIRECTION_LEFT:c.DIRECTION_RIGHT:a.pageY-b.pageY>0?c.DIRECTION_UP:c.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==c.DIRECTION_UP||a==c.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;d.length>e;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},c.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:c.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,d=this.gestures.length;d>c;c++){var e=this.gestures[c];if(!this.stopped&&b[e.name]!==!1&&e.handler.call(e,a,this.current.inst)===!1){this.stopDetect();break}}this.current&&(this.current.lastEvent=a)}},endDetect:function(a){this.detect(a),this.stopDetect()},stopDetect:function(){this.previous=c.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var d=0,e=a.touches.length;e>d;d++)b.touches.push(c.utils.extend({},a.touches[d]))}var f=a.timestamp-b.timestamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=c.utils.getVelocity(f,g,h);return c.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:c.utils.getDistance(b.center,a.center),angle:c.utils.getAngle(b.center,a.center),direction:c.utils.getDirection(b.center,a.center),scale:c.utils.getScale(b.touches,a.touches),rotation:c.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var b=a.defaults||{};return b[a.name]===void 0&&(b[a.name]=!0),c.utils.extend(c.defaults,b),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},c.gestures=c.gestures||{},c.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case c.EVENT_START:clearTimeout(this.timer),c.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==c.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case c.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case c.EVENT_END:clearTimeout(this.timer)}}},c.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==c.EVENT_END){var d=c.detection.previous;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c.detection.current.name=d&&"tap"==d.name&&a.timestamp-d.lastEvent.timestamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance?"doubletap":"tap",b.trigger(c.detection.current.name,a)}}},c.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==c.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},c.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1},triggered:!1,handler:function(a,b){if(c.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case c.EVENT_START:this.triggered=!1;break;case c.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&c.detection.current.name!=this.name)return;c.detection.current.name=this.name;var d=c.detection.current.lastEvent.direction;b.options.drag_lock_to_axis&&d!==a.direction&&(a.direction=c.utils.isVertical(d)?0>a.deltaY?c.DIRECTION_UP:c.DIRECTION_DOWN:0>a.deltaX?c.DIRECTION_LEFT:c.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&c.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!c.utils.isVertical(a.direction))&&a.preventDefault();break;case c.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},c.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(c.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(2>a.touches.length))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case c.EVENT_START:this.triggered=!1;break;case c.EVENT_MOVE:var d=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(b.options.transform_min_scale>d&&b.options.transform_min_rotation>e)return;c.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),d>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case c.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},c.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1},handler:function(a,b){b.options.prevent_default&&a.preventDefault(),a.eventType==c.EVENT_START&&b.trigger(this.name,a)}},c.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==c.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=c:(a.Hammer=c,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return c}))}(this),define("hammer",function(){}),function(a){typeof define=="function"&&define.amd!=undefined?define("hammer.fake",["hammer","jquery"],a):a(Hammer,jQuery)}(function(a,b){a.plugins.fakeMultitouch=function(){var b=!1;a.HAS_POINTEREVENTS=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>=1,a.event.getTouchList=function(c,d){if(a.HAS_POINTEREVENTS)return a.PointerEvent.getTouchList();if(c.touches)return c.touches;d==a.EVENT_START&&(b=!1);if(c.shiftKey){b||(b={pageX:c.pageX,pageY:c.pageY});var e=b.pageX-c.pageX,f=b.pageY-c.pageY;return[{identifier:1,pageX:b.pageX-e-50,pageY:b.pageY-f- -50,target:c.target},{identifier:2,pageX:b.pageX+e- -50,pageY:b.pageY+f-50,target:c.target}]}return b=!1,[{identifier:1,pageX:c.pageX,pageY:c.pageY,target:c.target}]}}}),function(a){typeof define=="function"&&define.amd!=undefined?define("hammer.showtouch",["hammer","jquery"],a):a(Hammer,jQuery)}(function(a,b){a.plugins.showTouches=function(c){function d(){for(var a in f)f.hasOwnProperty(a)&&!g[a]&&(f[a].remove(),delete f[a])}var e='<div style="position:absolute;z-index:9999;left:0;top:0;height:14px;width:14px;border:solid 2px #777;background:rgba(255,255,255,.7);border-radius:20px;pointer-events:none;margin-top:-9px;margin-left:-9px;"></div>',f={},g={};a.detection.register({name:"show_touches",priority:0,handler:function(h,i){g={};if(h.pointerType!=a.POINTER_MOUSE&&!c){d();return}for(var j=0,k=h.touches.length;j<k;j++){var l=h.touches[j],m=l.identifier;g[m]=l,f[m]||(f[m]=b(e).appendTo(document.body)),f[m].css({left:l.pageX,top:l.pageY})}d()}})}}),function(a){typeof define=="function"&&define.amd!=undefined?define("tomPlugin",["jquery","hammer","hammer.fake","hammer.showtouch","megapix-image"],a):a()}(function(a){(function(){function b(b){return this.each(function(){var d=a(this),e=d.data("tom.hammer"),f=a.extend({},c.DEFAULTS,d.data(),typeof b=="object"&&b);e||d.data("tom.hammer",e=new c(this,f)),typeof f=="string"&&e[f]()})}function c(a,b){function c(a){switch(a.type){case"touch":k=j,m=l;break;case"drag":d=a.gesture.deltaX+f,e=a.gesture.deltaY+g,b.gestureCb.call(o,{x:d,y:e});break;case"transform":l=m+a.gesture.rotation,j=Math.max(0,Math.min(k*a.gesture.scale,10)),b.gestureCb.call(o,{scale:j,rotate:l});break;case"dragend":f=d,g=e}}console.log(b.gestureCb.toString());var d=0,e=0,f=0,g=0,h=0,i=0,j=1,k=1,l=1,m,n=0,o=this,p=Hammer(a,b);p.on("touch drag dragend transform",function(a){o.isStop||c(a)}),this.reset=function(){d=0,e=0,f=0,g=0,h=0,i=0,j=1,k=1,l=1}}!Hammer.HAS_TOUCHEVENTS&&!Hammer.HAS_POINTEREVENTS&&Hammer.plugins.showTouches(),!Hammer.HAS_TOUCHEVENTS&&!Hammer.HAS_POINTEREVENTS&&Hammer.plugins.fakeMultitouch(),a.fn.hammer=b,a.fn.hammer.Constructor=c,a.fn.hammer.noConflict=function(){return a.fn.hammer=d,this};var d=a.fn.hammer;c.DEFAULTS={transform_always_block:!0,transform_min_scale:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_min_distance:0,gestureCb:function(){console.log("���������ƻص�")}},c.prototype.stop=function(){this.isStop=!0},c.prototype.start=function(){this.isStop=!1}})()}),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z={}.hasOwnProperty,A=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},B=[].slice,C=this;x=Array.prototype.slice,a=function(a,b){return b==null&&(b=document),typeof a=="object"||typeof exports!="undefined"&&exports!==null?a:b.querySelector(a)},v=function(){function a(){}return a.uniqid=function(){var a;return a=0,{get:function(){return a++}}}(),a.extend=function(a){var b,c,d,e,f,g;c=a,e=x.call(arguments,1);for(f=0,g=e.length;f<g;f++){b=e[f];for(d in b){if(!z.call(b,d))continue;c[d]=b[d]}}return c},a.clampRGB=function(a){return a<0?0:a>255?255:a},a.copyAttributes=function(a,b,c){var d,e,f,g,h,i;c==null&&(c={}),g=a.attributes,i=[];for(e=0,f=g.length;e<f;e++){d=g[e];if(c.except!=null&&(h=d.nodeName,A.call(c.except,h)>=0))continue;i.push(b.setAttribute(d.nodeName,d.nodeValue))}return i},a.dataArray=function(a){return a==null&&(a=0),e.NodeJS||window.Uint8Array!=null?new Uint8Array(a):new Array(a)},a}(),typeof exports!="undefined"&&exports!==null?(t=exports,g=require("canvas"),m=g.Image,j=require("fibers"),w=require("fs")):t=window,t.Caman=e=function(){function c(){var a,d,e,f=this;if(arguments.length===0)throw"Invalid arguments";if(this instanceof c){this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),a=arguments[0];if(!c.NodeJS){e=parseInt(c.getAttrId(a[0]),10),d=typeof a[1]=="function"?a[1]:typeof a[2]=="function"?a[2]:function(){};if(!isNaN(e)&&u.has(e))return u.execute(e,d)}return this.id=v.uniqid.get(),this.initializedPixelData=this.originalPixelData=null,this.cropCoordinates={x:0,y:0},this.cropped=!1,this.resized=!1,this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new b(this),this.renderer=new s(this),this.domIsLoaded(function(){return f.parseArguments(a),f.setup()}),this}return new c(arguments)}return c.version={release:"4.1.1",date:"4/8/2013"},c.DEBUG=!1,c.NodeJS=typeof exports!="undefined"&&exports!==null,c.autoload=!c.NodeJS,c.allowRevert=!0,c.crossOrigin="anonymous",c.toString=function(){return"Version "+c.version.release+", Released "+c.version.date},c.remoteProxy="",c.proxyParam="camanProxyUrl",c.getAttrId=function(b){return c.NodeJS?!0:(typeof b=="string"&&(b=a(b)),b==null||b.getAttribute==null?null:b.getAttribute("data-caman-id"))},c.prototype.domIsLoaded=function(a){var b,d=this;return c.NodeJS?setTimeout(function(){return a.call(d)},0):document.readyState==="complete"?(o.debug("DOM initialized"),setTimeout(function(){return a.call(d)},0)):(b=function(){if(document.readyState==="complete")return o.debug("DOM initialized"),a.call(d)},document.addEventListener("readystatechange",b,!1))},c.prototype.parseArguments=function(a){var b,c,d,e;if(a.length===0)throw"Invalid arguments given";this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(a[0]);if(a.length===1)return;switch(typeof a[1]){case"string":this.imageUrl=a[1];break;case"function":this.callback=a[1]}if(a.length===2)return;this.callback=a[2];if(a.length===4){d=a[4],e=[];for(b in d){if(!z.call(d,b))continue;c=d[b],e.push(this.options[b]=c)}return e}},c.prototype.setInitObject=function(b){if(c.NodeJS){this.initObj=b,this.initType="node";return}typeof b=="object"?this.initObj=b:this.initObj=a(b);if(this.initObj==null)throw"Could not find image or canvas for initialization.";return this.initType=this.initObj.nodeName.toLowerCase()},c.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},c.prototype.initNode=function(){var a=this;return o.debug("Initializing for NodeJS"),this.image=new m,this.image.onload=function(){return o.debug("Image loaded. Width = "+a.imageWidth()+", Height = "+a.imageHeight()),a.canvas=new g(a.imageWidth(),a.imageHeight()),a.finishInit()},this.image.onerror=function(a){throw a},this.image.src=this.initObj},c.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),v.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},c.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),this.imageUrl!=null?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},c.prototype.imageAdjustments=function(){this.needsHiDPISwap()&&(o.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement());if(l.isRemote(this.image))return this.image.src=l.proxyUrl(this.image.src),o.debug("Remote image detected, using URL = "+this.image.src)},c.prototype.waitForImageLoaded=function(){return this.isImageLoaded()?this.imageLoaded():this.image.onload=this.imageLoaded},c.prototype.isImageLoaded=function(){return this.image.complete?this.image.naturalWidth!=null&&this.image.naturalWidth===0?!1:!0:!1},c.prototype.imageWidth=function(){return this.image.width||this.image.naturalWidth},c.prototype.imageHeight=function(){return this.image.height||this.image.naturalHeight},c.prototype.imageLoaded=function(){return o.debug("Image loaded. Width = "+this.imageWidth()+", Height = "+this.imageHeight()),this.swapped?(this.canvas.width=this.imageWidth()/this.hiDPIRatio(),this.canvas.height=this.imageHeight()/this.hiDPIRatio()):(this.canvas.width=this.imageWidth(),this.canvas.height=this.imageHeight()),this.finishInit()},c.prototype.finishInit=function(){var a,b,d,e,f;this.context==null&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.preScaledWidth=this.width=this.canvas.width,this.originalHeight=this.preScaledHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.hasId()||this.assignId(),this.image!=null&&this.context.drawImage(this.image,0,0,this.imageWidth(),this.imageHeight(),0,0,this.preScaledWidth,this.preScaledHeight),this.reloadCanvasData();if(c.allowRevert){this.initializedPixelData=v.dataArray(this.pixelData.length),this.originalPixelData=v.dataArray(this.pixelData.length),f=this.pixelData;for(a=d=0,e=f.length;d<e;a=++d)b=f[a],this.initializedPixelData[a]=b,this.originalPixelData[a]=b}return this.dimensions={width:this.canvas.width,height:this.canvas.height},u.put(this.id,this),this.callback.call(this,this),this.callback=function(){}},c.prototype.reloadCanvasData=function(){return this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data},c.prototype.resetOriginalPixelData=function(){var a,b,d,e,f;if(!c.allowRevert)throw"Revert disabled";this.originalPixelData=v.dataArray(this.pixelData.length),e=this.pixelData,f=[];for(b=0,d=e.length;b<d;b++)a=e[b],f.push(this.originalPixelData.push(a));return f},c.prototype.hasId=function(){return c.getAttrId(this.canvas)!=null},c.prototype.assignId=function(){if(c.NodeJS||this.canvas.getAttribute("data-caman-id"))return;return this.canvas.setAttribute("data-caman-id",this.id)},c.prototype.hiDPIDisabled=function(){return this.canvas.getAttribute("data-caman-hidpi-disabled")!==null},c.prototype.hiDPIAdjustments=function(){var a;if(c.NodeJS||this.hiDPIDisabled())return;a=this.hiDPIRatio();if(a!==1)return o.debug("HiDPI ratio = "+a),this.scaled=!0,this.preScaledWidth=this.canvas.width,this.preScaledHeight=this.canvas.height,this.canvas.width=this.preScaledWidth*a,this.canvas.height=this.preScaledHeight*a,this.canvas.style.width=""+this.preScaledWidth+"px",this.canvas.style.height=""+this.preScaledHeight+"px",this.context.scale(a,a),this.width=this.originalWidth=this.canvas.width,this.height=this.originalHeight=this.canvas.height},c.prototype.hiDPIRatio=function(){var a,b;return b=window.devicePixelRatio||1,a=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,b/a},c.prototype.hiDPICapable=function(){return window.devicePixelRatio!=null&&window.devicePixelRatio!==1},c.prototype.needsHiDPISwap=function(){return this.hiDPIDisabled()||!this.hiDPICapable()?!1:this.hiDPIReplacement()!==null},c.prototype.hiDPIReplacement=function(){return this.image==null?null:this.image.getAttribute("data-caman-hidpi")},c.prototype.replaceCanvas=function(a){var b;return b=this.canvas,this.canvas=a,this.context=this.canvas.getContext("2d"),b.parentNode.replaceChild(this.canvas,b),this.width=this.canvas.width,this.height=this.canvas.height,this.reloadCanvasData(),this.dimensions={width:this.canvas.width,height:this.canvas.height}},c.prototype.render=function(a){var b=this;return a==null&&(a=function(){}),i.trigger(this,"renderStart"),this.renderer.execute(function(){return b.context.putImageData(b.imageData,0,0),a.call(b)})},c.prototype.revert=function(){var a,b,d,e,f;if(!c.allowRevert)throw"Revert disabled";f=this.originalVisiblePixels();for(a=d=0,e=f.length;d<e;a=++d)b=f[a],this.pixelData[a]=b;return this.context.putImageData(this.imageData,0,0)},c.prototype.reset=function(){var a,b,c,d,e,f,g,h,i;a=document.createElement("canvas"),v.copyAttributes(this.canvas,a),a.width=this.originalWidth,a.height=this.originalHeight,b=a.getContext("2d"),d=b.getImageData(0,0,a.width,a.height),f=d.data,i=this.initializedPixelData;for(c=g=0,h=i.length;g<h;c=++g)e=i[c],f[c]=e;return b.putImageData(d,0,0),this.cropCoordinates={x:0,y:0},this.resized=!1,this.replaceCanvas(a)},c.prototype.originalVisiblePixels=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w;if(!c.allowRevert)throw"Revert disabled";k=[],m=this.cropCoordinates.x,e=m+this.width,n=this.cropCoordinates.y,f=n+this.height;if(this.resized){a=document.createElement("canvas"),a.width=this.originalWidth,a.height=this.originalHeight,d=a.getContext("2d"),h=d.getImageData(0,0,a.width,a.height),j=h.data,t=this.originalPixelData;for(g=p=0,s=t.length;p<s;g=++p)i=t[g],j[g]=i;d.putImageData(h,0,0),l=document.createElement("canvas"),l.width=this.width,l.height=this.height,d=l.getContext("2d"),d.drawImage(a,0,0,this.originalWidth,this.originalHeight,0,0,this.width,this.height),j=d.getImageData(0,0,this.width,this.height).data,o=this.width}else j=this.originalPixelData,o=this.originalWidth;for(g=r=0,u=j.length;r<u;g=r+=4)b=q.locationToCoordinates(g,o),m<=(v=b.x)&&v<e&&n<=(w=b.y)&&w<f&&k.push(j[g],j[g+1],j[g+2],j[g+3]);return k},c.prototype.process=function(a,b){return this.renderer.add({type:k.Type.Single,name:a,processFn:b}),this},c.prototype.processKernel=function(a,b,c,d){var e,f,g;if(!c){c=0;for(e=f=0,g=b.length;0<=g?f<g:f>g;e=0<=g?++f:--f)c+=b[e]}return this.renderer.add({type:k.Type.Kernel,name:a,adjust:b,divisor:c,bias:d||0}),this},c.prototype.processPlugin=function(a,b){return this.renderer.add({type:k.Type.Plugin,plugin:a,args:b}),this},c.prototype.newLayer=function(a){var b;return b=new n(this),this.canvasQueue.push(b),this.renderer.add({type:k.Type.LayerDequeue}),a.call(b),this.renderer.add({type:k.Type.LayerFinished}),this},c.prototype.executeLayer=function(a){return this.pushContext(a)},c.prototype.pushContext=function(a){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=a,this.pixelData=a.pixelData},c.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},c.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},c}(),b=function(){function a(a){this.c=a}return a.prototype.calculateLevels=function(){var a,b,c,d,e,f,g;b={r:{},g:{},b:{}};for(a=d=0;d<=255;a=++d)b.r[a]=0,b.g[a]=0,b.b[a]=0;for(a=e=0,g=this.c.pixelData.length;e<g;a=e+=4)b.r[this.c.pixelData[a]]++,b.g[this.c.pixelData[a+1]]++,b.b[this.c.pixelData[a+2]]++;c=this.c.pixelData.length/4;for(a=f=0;f<=255;a=++f)b.r[a]/=c,b.g[a]/=c,b.b[a]/=c;return b},a}(),e.DOMUpdated=function(){var a,b,c,d,e,g;b=document.querySelectorAll("img[data-caman]");if(b.length>0){g=[];for(d=0,e=b.length;d<e;d++)a=b[d],g.push(c=new f(a,function(){return this.parse(),this.execute()}));return g}return},e.autoload&&function(){return document.readyState==="complete"?e.DOMUpdated():document.addEventListener("DOMContentLoaded",e.DOMUpdated,!1)}(),f=function(){function a(a,b){this.dataStr=a.getAttribute("data-caman"),this.caman=e(a,b.bind(this))}var b;return b="(\\w+)\\((.*?)\\)",a.prototype.parse=function(){var a,c,d,e,f,g,h,i,j,k,l,m;this.ele=this.caman.canvas,h=new RegExp(b,"g"),i=this.dataStr.match(h);if(i.length>0){h=new RegExp(b),m=[];for(j=0,k=i.length;j<k;j++){e=i[j],l=e.match(h),g=l[0],c=l[1],a=l[2],f=new Function("return function() {        this."+c+"("+a+");      };");try{d=f(),m.push(d.call(this.caman))}catch(n){m.push(o.debug(n))}}return m}return},a.prototype.execute=function(){var a;return a=this.ele,this.caman.render(function(){return a.parentNode.replaceChild(this.toImage(),a)})},a}(),e.Blender=c=function(){function a(){}return a.blenders={},a.register=function(a,b){return this.blenders[a]=b},a.execute=function(a,b,c){return this.blenders[a](b,c)},a}(),e.Calculate=d=function(){function a(){}return a.distance=function(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},a.randomRange=function(a,b,c){var d;return c==null&&(c=!1),d=a+Math.random()*(b-a),c?d.toFixed(c):Math.round(d)},a.luminance=function(a){return.299*a.r+.587*a.g+.114*a.b},a.bezier=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;u=a[0],y=a[1],v=b[0],z=b[1],w=c[0],A=c[1],x=d[0],B=d[1],m={},k=parseInt(3*(v-u),10),i=3*(w-v)-k,g=x-u-k-i,l=3*(z-y),j=3*(A-z)-l,h=B-y-l-j;for(p=C=0;C<1e3;p=++C)t=p/1e3,n=Math.round(g*Math.pow(t,3)+i*Math.pow(t,2)+k*t+u),o=Math.round(h*Math.pow(t,3)+j*Math.pow(t,2)+l*t+y),e&&o<e?o=e:f&&o>f&&(o=f),m[n]=o;if(m.length<d[0]+1)for(p=D=0,F=d[0];0<=F?D<=F:D>=F;p=0<=F?++D:--D)if(m[p]==null){r=[p-1,m[p-1]];for(q=E=p,G=d[0];p<=G?E<=G:E>=G;q=p<=G?++E:--E)if(m[q]!=null){s=[q,m[q]];break}m[p]=r[1]+(s[1]-r[1])/(s[0]-r[0])*(p-r[0])}return m[d[0]]==null&&(m[d[0]]=m[d[0]-1]),m},a}(),h=function(){function a(){}return a.hexToRGB=function(a){var b,c,d;return a.charAt(0)==="#"&&(a=a.substr(1)),d=parseInt(a.substr(0,2),16),c=parseInt(a.substr(2,2),16),b=parseInt(a.substr(4,2),16),{r:d,g:c,b:b}},a.rgbToHSL=function(a,b,c){var d,e,f,g,h,i;return typeof a=="object"&&(b=a.g,c=a.b,a=a.r),a/=255,b/=255,c/=255,g=Math.max(a,b,c),h=Math.min(a,b,c),f=(g+h)/2,g===h?e=i=0:(d=g-h,i=f>.5?d/(2-g-h):d/(g+h),e=function(){switch(g){case a:return(b-c)/d+(b<c?6:0);case b:return(c-a)/d+2;case c:return(a-b)/d+4}}(),e/=6),{h:e,s:i,l:f}},a.hslToRGB=function(a,b,c){var d,e,f,g,h;return typeof a=="object"&&(b=a.s,c=a.l,a=a.h),b===0?h=e=d=c:(g=c<.5?c*(1+b):c+b-c*b,f=2*c-g,h=this.hueToRGB(f,g,a+1/3),e=this.hueToRGB(f,g,a),d=this.hueToRGB(f,g,a-1/3)),{r:h*255,g:e*255,b:d*255}},a.hueToRGB=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},a.rgbToHSV=function(a,b,c){var d,e,f,g,h,i;return a/=255,b/=255,c/=255,f=Math.max(a,b,c),g=Math.min(a,b,c),i=f,d=f-g,h=f===0?0:d/f,f===g?e=0:(e=function(){switch(f){case a:return(b-c)/d+(b<c?6:0);case b:return(c-a)/d+2;case c:return(a-b)/d+4}}(),e/=6),{h:e,s:h,v:i}},a.hsvToRGB=function(a,b,c){var d,e,f,g,h,i,j,k;g=Math.floor(a*6),e=a*6-g,h=c*(1-b),i=c*(1-e*b),k=c*(1-(1-e)*b);switch(g%6){case 0:j=c,f=k,d=h;break;case 1:j=i,f=c,d=h;break;case 2:j=h,f=c,d=k;break;case 3:j=h,f=i,d=c;break;case 4:j=k,f=h,d=c;break;case 5:j=c,f=h,d=i}return{r:j*255,g:f*255,b:d*255}},a.rgbToXYZ=function(a,b,c){var d,e,f;return a/=255,b/=255,c/=255,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,b>.04045?b=Math.pow((b+.055)/1.055,2.4):b/=12.92,c>.04045?c=Math.pow((c+.055)/1.055,2.4):c/=12.92,d=a*.4124+b*.3576+c*.1805,e=a*.2126+b*.7152+c*.0722,f=a*.0193+b*.1192+c*.9505,{x:d*100,y:e*100,z:f*100}},a.xyzToRGB=function(a,b,c){var d,e,f;return a/=100,b/=100,c/=100,f=3.2406*a+ -1.5372*b+ -0.4986*c,e=-0.9689*a+1.8758*b+.0415*c,d=.0557*a+ -0.204*b+1.057*c,f>.0031308?f=1.055*Math.pow(f,.4166666667)-.055:f*=12.92,e>.0031308?e=1.055*Math.pow(e,.4166666667)-.055:e*=12.92,d>.0031308?d=1.055*Math.pow(d,.4166666667)-.055:d*=12.92,{r:f*255,g:e*255,b:d*255}},a.xyzToLab=function(a,b,c){var d,e,f,g,h,i;return typeof a=="object"&&(b=a.y,c=a.z,a=a.x),g=95.047,h=100,i=108.883,a/=g,b/=h,c/=i,a>.008856451679?a=Math.pow(a,.3333333333):a=7.787037037*a+.1379310345,b>.008856451679?b=Math.pow(b,.3333333333):b=7.787037037*b+.1379310345,c>.008856451679?c=Math.pow(c,.3333333333):c=7.787037037*c+.1379310345,f=116*b-16,d=500*(a-b),e=200*(b-c),{l:f,a:d,b:e}},a.labToXYZ=function(a,b,c){var d,e,f;return typeof a=="object"&&(b=a.a,c=a.b,a=a.l),e=(a+16)/116,d=e+b/500,f=e-c/200,d>.2068965517?d=d*d*d:d=.1284185493*(d-.1379310345),e>.2068965517?e=e*e*e:e=.1284185493*(e-.1379310345),f>.2068965517?f=f*f*f:f=.1284185493*(f-.1379310345),{x:d*95.047,y:e*100,z:f*108.883}},a.rgbToLab=function(a,b,c){var d;return typeof a=="object"&&(b=a.g,c=a.b,a=a.r),d=this.rgbToXYZ(a,b,c),this.xyzToLab(d)},a.labToRGB=function(a,b,c){},a}(),i=function(){function a(){}return a.events={},a.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],a.trigger=function(a,b,c){var d,e,f,g,h;if(this.events[b]&&this.events[b].length){g=this.events[b],h=[];for(e=0,f=g.length;e<f;e++)d=g[e],d.target===null||a.id===d.target.id?h.push(d.fn.call(a,c)):h.push(void 0);return h}},a.listen=function(a,b,c){var d,e;return typeof a=="string"&&(e=a,d=b,a=null,b=e,c=d),A.call(this.types,b)<0?!1:(this.events[b]||(this.events[b]=[]),this.events[b].push({target:a,fn:c}),!0)},a}(),e.Event=i,e.Filter=k=function(){function a(){}return a.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},a.register=function(a,b){return e.prototype[a]=b},a}(),e.IO=l=function(){function a(){}return a.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,a.isRemote=function(a){return a==null?!1:this.corsEnabled(a)?!1:this.isURLRemote(a.src)},a.corsEnabled=function(a){var b;return a.crossOrigin!=null&&((b=a.crossOrigin.toLowerCase())==="anonymous"||b==="use-credentials")},a.isURLRemote=function(a){var b;return b=a.match(this.domainRegex),b?b[1]!==document.domain:!1},a.remoteCheck=function(a){if(this.isURLRemote(a)){if(!!e.remoteProxy.length){if(e.isURLRemote(e.remoteProxy)){o.info("Cannot use a remote proxy for loading images.");return}return""+e.remoteProxy+"?camanProxyUrl="+encodeURIComponent(a)}o.info("Attempting to load a remote image without a configured proxy. URL: "+a)}},a.proxyUrl=function(a){return""+e.remoteProxy+"?"+e.proxyParam+"="+encodeURIComponent(a)},a.useProxy=function(a){var b;return b={ruby:"rb",python:"py",perl:"pl",javascript:"js"},a=a.toLowerCase(),b[a]!=null&&(a=b[a]),"proxies/caman_proxy."+a},a}(),e.prototype.save=function(){return typeof exports!="undefined"&&exports!==null?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},e.prototype.browserSave=function(a){var b;return a==null&&(a="png"),a=a.toLowerCase(),b=this.toBase64(a).replace("image/"+a,"image/octet-stream"),document.location.href=b},e.prototype.nodeSave=function(a,b){var c;b==null&&(b=!0);try{c=w.statSync(a);if(c.isFile()&&!b)return!1}catch(d){o.debug("Creating output file "+a)}return w.writeFile(a,this.canvas.toBuffer(),function(){return o.debug("Finished writing to "+a)})},e.prototype.toImage=function(a){var b;return b=document.createElement("img"),b.src=this.toBase64(a),b.width=this.dimensions.width,b.height=this.dimensions.height,window.devicePixelRatio&&(b.width/=window.devicePixelRatio,b.height/=window.devicePixelRatio),b},e.prototype.toBase64=function(a){return a==null&&(a="png"),a=a.toLowerCase(),this.canvas.toDataURL("image/"+a)},n=function(){function b(a){this.c=a,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=v.uniqid.get(),this.canvas=typeof exports!="undefined"&&exports!==null?new g:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return b.prototype.newLayer=function(a){return this.c.newLayer.call(this.c,a)},b.prototype.setBlendingMode=function(a){return this.options.blendingMode=a,this},b.prototype.opacity=function(a){return this.options.opacity=a/100,this},b.prototype.copyParent=function(){var a,b,c,d;b=this.c.pixelData;for(a=c=0,d=this.c.pixelData.length;c<d;a=c+=4)this.pixelData[a]=b[a],this.pixelData[a+1]=b[a+1],this.pixelData[a+2]=b[a+2],this.pixelData[a+3]=b[a+3];return this},b.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},b.prototype.overlayImage=function(b){return typeof b=="object"?b=b.src:typeof b=="string"&&b[0]==="#"&&(b=a(b).src),b?(this.c.renderer.renderQueue.push({type:k.Type.LoadOverlay,src:b,layer:this}),this):this},b.prototype.applyToParent=function(){var a,b,d,e,f,g,h,i,j;d=this.c.pixelStack[this.c.pixelStack.length-1],b=this.c.pixelData,j=[];for(a=h=0,i=b.length;h<i;a=h+=4)g={r:d[a],g:d[a+1],b:d[a+2],a:d[a+3]},f={r:b[a],g:b[a+1],b:b[a+2],a:b[a+3]},e=c.execute(this.options.blendingMode,f,g),e.r=v.clampRGB(e.r),e.g=v.clampRGB(e.g),e.b=v.clampRGB(e.b),e.a==null&&(e.a=f.a),d[a]=g.r-(g.r-e.r)*this.options.opacity*(e.a/255),d[a+1]=g.g-(g.g-e.g)*this.options.opacity*(e.a/255),j.push(d[a+2]=g.b-(g.b-e.b)*this.options.opacity*(e.a/255));return j},b}(),p=function(){function a(){var a,b,c,d;d=["log","info","warn","error"];for(b=0,c=d.length;b<c;b++)a=d[b],this[a]=function(a){return function(){var b;b=1<=arguments.length?B.call(arguments,0):[];if(!e.DEBUG)return;try{return console[a].apply(console,b)}catch(c){return console[a](b)}}}(a);this.debug=this.log}return a}(),o=new p,q=function(){function a(a){this.c=a,this.loc=0}return a.coordinatesToLocation=function(a,b,c){return(b*c+a)*4},a.locationToCoordinates=function(a,b){var c,d;return d=Math.floor(a/(b*4)),c=a%(b*4)/4,{x:c,y:d}},a.prototype.locationXY=function(){var a,b;return b=this.c.dimensions.height-Math.floor(this.loc/(this.c.dimensions.width*4)),a=this.loc%(this.c.dimensions.width*4)/4,{x:a,y:b}},a.prototype.getPixelRelative=function(a,b){var c;return c=this.loc+this.c.dimensions.width*4*b*-1+4*a,c>this.c.pixelData.length||c<0?{r:0,g:0,b:0,a:0}:{r:this.c.pixelData[c],g:this.c.pixelData[c+1],b:this.c.pixelData[c+2],a:this.c.pixelData[c+3]}},a.prototype.putPixelRelative=function(a,b,c){var d;d=this.loc+this.c.dimensions.width*4*b*-1+4*a;if(newLoc>this.c.pixelData.length||newLoc<0)return;return this.c.pixelData[newLoc]=c.r,this.c.pixelData[newLoc+1]=c.g,this.c.pixelData[newLoc+2]=c.b,this.c.pixelData[newLoc+3]=c.a,!0},a.prototype.getPixel=function(a,b){var c;return c=this.coordinatesToLocation(a,b,this.width),{r:this.c.pixelData[c],g:this.c.pixelData[c+1],b:this.c.pixelData[c+2],a:this.c.pixelData[c+3]}},a.prototype.putPixel=function(a,b,c){var d;return d=this.coordinatesToLocation(a,b,this.width),this.c.pixelData[d]=c.r,this.c.pixelData[d+1]=c.g,this.c.pixelData[d+2]=c.b,this.c.pixelData[d+3]=c.a},a}(),r=function(){function a(){}return a.plugins={},a.register=function(a,b){return this.plugins[a]=b},a.execute=function(a,b,c){return this.plugins[b].apply(a,c)},a}(),e.Plugin=r,e.Renderer=s=function(){function a(b){var c=this;this.c=b,this.processNext=function(){return a.prototype.processNext.apply(c,arguments)},this.renderQueue=[],this.modPixelData=null}return a.Blocks=e.NodeJS?require("os").cpus().length:4,a.prototype.add=function(a){if(a==null)return;return this.renderQueue.push(a)},a.prototype.processNext=function(){var a;if(this.renderQueue.length===0)return i.trigger(this,"renderFinished"),this.finishedFn!=null&&this.finishedFn.call(this.c),this;this.currentJob=this.renderQueue.shift();switch(this.currentJob.type){case k.Type.LayerDequeue:return a=this.c.canvasQueue.shift(),this.c.executeLayer(a),this.processNext();case k.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case k.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case k.Type.Plugin:return this.executePlugin();default:return this.executeFilter()}},a.prototype.execute=function(a){return this.finishedFn=a,this.modPixelData=v.dataArray(this.c.pixelData.length),this.processNext()},a.prototype.eachBlock=function(b){var c,d,f,g,h,i,k,l,m,n,o,p,q=this;this.blocksDone=0,l=this.c.pixelData.length,d=Math.floor(l/4/a.Blocks),c=d*4,k=c+l/4%a.Blocks*4,p=[];for(i=n=0,o=a.Blocks;0<=o?n<o:n>o;i=0<=o?++n:--n)m=i*c,g=m+(i===a.Blocks-1?k:c),e.NodeJS?(h=j(function(){return b.call(q,i,m,g)}),f=h.run(),p.push(this.blockFinished(f))):p.push(setTimeout(function(a,c,d){return function(){return b.call(q,a,c,d)}}(i,m,g),0));return p},a.prototype.executeFilter=function(){return i.trigger(this.c,"processStart",this.currentJob),this.currentJob.type===k.Type.Single?this.eachBlock(this.renderBlock):this.eachBlock(this.renderKernel)},a.prototype.executePlugin=function(){return o.debug("Executing plugin "+this.currentJob.plugin),r.execute(this.c,this.currentJob.plugin,this.currentJob.args),o.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},a.prototype.renderBlock=function(b,c,d){var f,g,h,k,l;o.debug("Block #"+b+" - Filter: "+this.currentJob.name+", Start: "+c+", End: "+d),i.trigger(this.c,"blockStarted",{blockNum:b,totalBlocks:a.Blocks,startPixel:c,endPixel:d}),f={r:0,g:0,b:0,a:0},h=new q(this.c);for(g=l=c;l<d;g=l+=4)h.loc=g,f.r=this.c.pixelData[g],f.g=this.c.pixelData[g+1],f.b=this.c.pixelData[g+2],f.a=this.c.pixelData[g+3],k=this.currentJob.processFn.call(h,f),k.a==null&&(k.a=f.a),this.c.pixelData[g]=v.clampRGB(k.r),this.c.pixelData[g+1]=v.clampRGB(k.g),this.c.pixelData[g+2]=v.clampRGB(k.b),this.c.pixelData[g+3]=v.clampRGB(k.a);return e.NodeJS?j.yield(b):this.blockFinished(b)},a.prototype.renderKernel=function(a,b,c){var d,f,g,h,i,k,l,m,n,p,r,s,t,u,w,x,y,z;s=this.currentJob.name,g=this.currentJob.bias,k=this.currentJob.divisor,r=this.c.pixelData.length,d=this.currentJob.adjust,f=Math.sqrt(d.length),p=[],o.debug("Rendering kernel - Filter: "+this.currentJob.name),b=Math.max(b,this.c.dimensions.width*4*((f-1)/2)),c=Math.min(c,r-this.c.dimensions.width*4*((f-1)/2)),h=(f-1)/2,u=new q(this.c);for(l=x=b;x<c;l=x+=4){u.loc=l,i=0;for(m=y=-h;-h<=h?y<=h:y>=h;m=-h<=h?++y:--y)for(n=z=h;h<=-h?z<=-h:z>=-h;n=h<=-h?++z:--z)t=u.getPixelRelative(m,n),p[i*3]=t.r,p[i*3+1]=t.g,p[i*3+2]=t.b,i++;w=this.processKernel(d,p,k,g),this.modPixelData[l]=v.clampRGB(w.r),this.modPixelData[l+1]=v.clampRGB(w.g),this.modPixelData[l+2]=v.clampRGB(w.b),this.modPixelData[l+3]=this.c.pixelData[l+3]}return e.NodeJS?j.yield(a):this.blockFinished(a)},a.prototype.blockFinished=function(b){var c,d,e;b>=0&&o.debug("Block #"+b+" finished! Filter: "+this.currentJob.name),this.blocksDone++,i.trigger(this.c,"blockFinished",{blockNum:b,blocksFinished:this.blocksDone,totalBlocks:a.Blocks});if(this.blocksDone===a.Blocks){if(this.currentJob.type===k.Type.Kernel)for(c=d=0,e=this.c.pixelData.length;0<=e?d<e:d>e;c=0<=e?++d:--d)this.c.pixelData[c]=this.modPixelData[c];return b>=0&&o.debug("Filter "+this.currentJob.name+" finished!"),i.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},a.prototype.processKernel=function(a,b,c,d){var e,f,g,h;f={r:0,g:0,b:0};for(e=g=0,h=a.length;0<=h?g<h:g>h;e=0<=h?++g:--g)f.r+=a[e]*b[e*3],f.g+=a[e]*b[e*3+1],f.b+=a[e]*b[e*3+2];return f.r=f.r/c+d,f.g=f.g/c+d,f.b=f.b/c+d,f},a.prototype.loadOverlay=function(a,b){var c,d,e=this;return c=document.createElement("img"),c.onload=function(){return a.context.drawImage(c,0,0,e.c.dimensions.width,e.c.dimensions.height),a.imageData=a.context.getImageData(0,0,e.c.dimensions.width,e.c.dimensions.height),a.pixelData=a.imageData.data,e.c.pixelData=a.pixelData,e.processNext()},d=l.remoteCheck(b),c.src=d!=null?d:b},a}(),e.Store=u=function(){function a(){}return a.items={},a.has=function(a){return this.items[a]!=null},a.get=function(a){return this.items[a]},a.put=function(a,b){return this.items[a]=b},a.execute=function(a,b){var c=this;return setTimeout(function(){return b.call(c.get(a),c.get(a))},0),this.get(a)},a.flush=function(a){return a==null&&(a=!1),a?delete this.items[a]:this.items={}},a}(),c.register("normal",function(a,b){return{r:a.r,g:a.g,b:a.b}}),c.register("multiply",function(a,b){return{r:a.r*b.r/255,g:a.g*b.g/255,b:a.b*b.b/255}}),c.register("screen",function(a,b){return{r:255-(255-a.r)*(255-b.r)/255,g:255-(255-a.g)*(255-b.g)/255,b:255-(255-a.b)*(255-b.b)/255}}),c.register("overlay",function(a,b){var c;return c={},c.r=b.r>128?255-2*(255-a.r)*(255-b.r)/255:b.r*a.r*2/255,c.g=b.g>128?255-2*(255-a.g)*(255-b.g)/255:b.g*a.g*2/255,c.b=b.b>128?255-2*(255-a.b)*(255-b.b)/255:b.b*a.b*2/255,c}),c.register("difference",function(a,b){return{r:a.r-b.r,g:a.g-b.g,b:a.b-b.b}}),c.register("addition",function(a,b){return{r:b.r+a.r,g:b.g+a.g,b:b.b+a.b}}),c.register("exclusion",function(a,b){return{r:128-2*(b.r-128)*(a.r-128)/255,g:128-2*(b.g-128)*(a.g-128)/255,b:128-2*(b.b-128)*(a.b-128)/255}}),c.register("softLight",function(a,b){var c;return c={},c.r=b.r>128?255-(255-b.r)*(255-(a.r-128))/255:b.r*(a.r+128)/255,c.g=b.g>128?255-(255-b.g)*(255-(a.g-128))/255:b.g*(a.g+128)/255,c.b=b.b>128?255-(255-b.b)*(255-(a.b-128))/255:b.b*(a.b+128)/255,c}),c.register("lighten",function(a,b){return{r:b.r>a.r?b.r:a.r,g:b.g>a.g?b.g:a.g,b:b.b>a.b?b.b:a.b}}),c.register("darken",function(a,b){return{r:b.r>a.r?a.r:b.r,g:b.g>a.g?a.g:b.g,b:b.b>a.b?a.b:b.b}}),k.register("fillColor",function(){var a;return arguments.length===1?a=h.hexToRGB(arguments[0]):a={r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(b){return b.r=a.r,b.g=a.g,b.b=a.b,b.a=255,b})}),k.register("brightness",function(a){return a=Math.floor(255*(a/100)),this.process("brightness",function(b){return b.r+=a,b.g+=a,b.b+=a,b})}),k.register("saturation",function(a){return a*=-0.01,this.process("saturation",function(b){var c;return c=Math.max(b.r,b.g,b.b),b.r!==c&&(b.r+=(c-b.r)*a),b.g!==c&&(b.g+=(c-b.g)*a),b.b!==c&&(b.b+=(c-b.b)*a),b})}),k.register("vibrance",function(a){return a*=-1,this.process("vibrance",function(b){var c,d,e;return e=Math.max(b.r,b.g,b.b),d=(b.r+b.g+b.b)/3,c=Math.abs(e-d)*2/255*a/100,b.r!==e&&(b.r+=(e-b.r)*c),b.g!==e&&(b.g+=(e-b.g)*c),b.b!==e&&(b.b+=(e-b.b)*c),b})}),k.register("greyscale",function(a){return this.process("greyscale",function(a){var b;return b=d.luminance(a),a.r=b,a.g=b,a.b=b,a})}),k.register("contrast",function(a){return a=Math.pow((a+100)/100,2),this.process("contrast",function(b){return b.r/=255,b.r-=.5,b.r*=a,b.r+=.5,b.r*=255,b.g/=255,b.g-=.5,b.g*=a,b.g+=.5,b.g*=255,b.b/=255,b.b-=.5,b.b*=a,b.b+=.5,b.b*=255,b})}),k.register("hue",function(a){return this.process("hue",function(b){var c,d,e;return d=h.rgbToHSV(b.r,b.g,b.b),c=d.h*100,c+=Math.abs(a),c%=100,c/=100,d.h=c,e=h.hsvToRGB(d.h,d.s,d.v),e.a=b.a,e})}),k.register("colorize",function(){var a,b;return arguments.length===2?(b=h.hexToRGB(arguments[0]),a=arguments[1]):arguments.length===4&&(b={r:arguments[0],g:arguments[1],b:arguments[2]},a=arguments[3]),this.process("colorize",function(c){return c.r-=(c.r-b.r)*(a/100),c.g-=(c.g-b.g)*(a/100),c.b-=(c.b-b.b)*(a/100),c})}),k.register("invert",function(){return this.process("invert",function(a){return a.r=255-a.r,a.g=255-a.g,a.b=255-a.b,a})}),k.register("sepia",function(a){return a==null&&(a=100),a/=100,this.process("sepia",function(b){return b.r=Math.min(255,b.r*(1-.607*a)+b.g*.769*a+b.b*.189*a),b.g=Math.min(255,b.r*.349*a+b.g*(1-.314*a)+b.b*.168*a),b.b=Math.min(255,b.r*.272*a+b.g*.534*a+b.b*(1-.869*a)),b})}),k.register("gamma",function(a){return this.process("gamma",function(b){return b.r=Math.pow(b.r/255,a)*255,b.g=Math.pow(b.g/255,a)*255,b.b=Math.pow(b.b/255,a)*255,b})}),k.register("noise",function(a){return a=Math.abs(a)*2.55,this.process("noise",function(b){var c;return c=d.randomRange(a*-1,a),b.r+=c,b.g+=c,b.b+=c,b})}),k.register("clip",function(a){return a=Math.abs(a)*2.55,this.process("clip",function(b){return b.r>255-a?b.r=255:b.r<a&&(b.r=0),b.g>255-a?b.g=255:b.g<a&&(b.g=0),b.b>255-a?b.b=255:b.b<a&&(b.b=0),b})}),k.register("channels",function(a){var b,c;if(typeof a!="object")return this;for(b in a){if(!z.call(a,b))continue;c=a[b];if(c===0){delete a[b];continue}a[b]/=100}return a.length===0?this:this.process("channels",function(b){return a.red!=null&&(a.red>0?b.r+=(255-b.r)*a.red:b.r-=b.r*Math.abs(a.red)),a.green!=null&&(a.green>0?b.g+=(255-b.g)*a.green:b.g-=b.g*Math.abs(a.green)),a.blue!=null&&(a.blue>0?b.b+=(255-b.b)*a.blue:b.b-=b.b*Math.abs(a.blue)),b})}),k.register("curves",function(){var a,b,c,e,f,g,h,i,j,k,l,m;b=arguments[0],c=2<=arguments.length?B.call(arguments,1):[],typeof b=="string"&&(b=b.split("")),b[0]==="v"&&(b=["r","g","b"]);if(c.length<3||c.length>4)throw"Invalid number of arguments to curves filter";i=c[0],e=c[1],f=c.length===4?c[2]:c[1],g=c[c.length-1],a=d.bezier(i,e,f,g,0,255);if(i[0]>0)for(h=j=0,l=i[0];0<=l?j<l:j>l;h=0<=l?++j:--j)a[h]=i[1];if(g[0]<255)for(h=k=m=g[0];m<=255?k<=255:k>=255;h=m<=255?++k:--k)a[h]=g[1];return this.process("curves",function(c){var d,e;for(h=d=0,e=b.length;0<=e?d<e:d>e;h=0<=e?++d:--d)c[b[h]]=a[c[b[h]]];return c})}),k.register("exposure",function(a){var b,c,d;return d=Math.abs(a)/100,b=[0,255*d],c=[255-255*d,255],a<0&&(b=b.reverse(),c=c.reverse()),this.curves("rgb",[0,0],b,c,[255,255])}),e.Plugin.register("crop",function(a,b,c,d){var e,f;return c==null&&(c=0),d==null&&(d=0),typeof exports!="undefined"&&exports!==null?e=new g(a,b):(e=document.createElement("canvas"),v.copyAttributes(this.canvas,e),e.width=a,e.height=b),f=e.getContext("2d"),f.drawImage(this.canvas,c,d,a,b,0,0,a,b),this.cropCoordinates={x:c,y:d},this.cropped=!0,this.replaceCanvas(e)}),e.Plugin.register("resize",function(a){var b,c;a==null&&(a=null);if(a===null||a.width==null&&a.height==null){o.error("Invalid or missing dimensions given for resize");return}return a.width==null?a.width=this.canvas.width*a.height/this.canvas.height:a.height==null&&(a.height=this.canvas.height*a.width/this.canvas.width),typeof exports!="undefined"&&exports!==null?b=new g(a.width,a.height):(b=document.createElement("canvas"),v.copyAttributes(this.canvas,b),b.width=a.width,b.height=a.height),c=b.getContext("2d"),c.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,a.width,a.height),this.resized=!0,this.replaceCanvas(b)}),e.Filter.register("crop",function(){return this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),e.Filter.register("resize",function(){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),e.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),e.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),e.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),e.Filter.register("motionBlur",function(a){var b;return a===0||a===180?b=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:a>0&&a<90||a>180&&a<270?b=[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:a===90||a===270?b=[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:b=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",b)}),e.Filter.register("sharpen",function(a){return a==null&&(a=100),a/=100,this.processKernel("Sharpen",[0,-a,0,-a,4*a+1,-a,0,-a,0])}),y={brightness:function(a,b,c){return a.r=a.r-a.r*b*c.strength,a.g=a.g-a.g*b*c.strength,a.b=a.b-a.b*b*c.strength,a},gamma:function(a,b,c){return a.r=Math.pow(a.r/255,Math.max(10*b*c.strength,1))*255,a.g=Math.pow(a.g/255,Math.max(10*b*c.strength,1))*255,a.b=Math.pow(a.b/255,Math.max(10*b*c.strength,1))*255,a},colorize:function(a,b,c){return a.r-=(a.r-c.color.r)*b,a.g-=(a.g-c.color.g)*b,a.b-=(a.b-c.color.b)*b,a}},k.register("vignette",function(a,b){var c,e,f,g;return b==null&&(b=60),typeof a=="string"&&a.substr(-1)==="%"&&(this.dimensions.height>this.dimensions.width?a=this.dimensions.width*(parseInt(a.substr(0,a.length-1),10)/100):a=this.dimensions.height*(parseInt(a.substr(0,a.length-1),10)/100)),b/=100,e=[this.dimensions.width/2,this.dimensions.height/2],g=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),f=g-a,c=d.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(g){var h,i,j;return j=this.locationXY(),h=d.distance(j.x,j.y,e[0],e[1]),h>f&&(i=Math.max(1,c[Math.round((h-f)/a*100)]/10*b),g.r=Math.pow(g.r/255,i)*255,g.g=Math.pow(g.g/255,i)*255,g.b=Math.pow(g.b/255,i)*255),g})}),k.register("rectangularVignette",function(a){var b,c,f,g,i,j,k;b={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},a=v.extend(b,a);if(!a.size)return this;if(typeof a.size=="string")f=parseInt(a.size,10)/100,a.size={width:this.dimensions.width*f,height:this.dimensions.height*f};else if(typeof a.size=="object"){k=["width","height"];for(i=0,j=k.length;i<j;i++)c=k[i],typeof a.size[c]=="string"&&(a.size[c]=this.dimensions[c]*(parseInt(a.size[c],10)/100))}else a.size==="number"&&(g=a.size,a.size={width:g,height:g});return typeof a.cornerRadius=="string"&&(a.cornerRadius=a.size.width/2*(parseInt(a.cornerRadius,10)/100)),a.strength/=100,a.size.width=Math.floor(a.size.width),a.size.height=Math.floor(a.size.height),a.image={width:this.dimensions.width,height:this.dimensions.height},a.method==="colorize"&&typeof a.color=="string"&&(a.color=h.hexToRGB(a.color)),a.coords={left:(this.dimensions.width-a.size.width)/2,right:this.dimensions.width-a.coords.left,bottom:(this.dimensions.height-a.size.height)/2,top:this.dimensions.height-a.coords.bottom},a.corners=[{x:a.coords.left+a.cornerRadius,y:a.coords.top-a.cornerRadius},{x:a.coords.right-a.cornerRadius,y:a.coords.top-a.cornerRadius},{x:a.coords.right-a.cornerRadius,y:a.coords.bottom+a.cornerRadius},{x:a.coords.left+a.cornerRadius,y:a.coords.bottom+a.cornerRadius}],a.maxDist=d.distance(0,0,a.corners[3].x,a.corners[3].y)-a.cornerRadius,this.process("rectangularVignette",function(b){var c,d,f;return d=this.locationXY(),d.x>a.corners[0].x&&d.x<a.corners[1].x&&d.y>a.coords.bottom&&d.y<a.coords.top?b:d.x>a.coords.left&&d.x<a.coords.right&&d.y>a.corners[3].y&&d.y<a.corners[2].y?b:(d.x>a.corners[0].x&&d.x<a.corners[1].x&&d.y>a.coords.top?c=(d.y-a.coords.top)/a.maxDist:d.y>a.corners[2].y&&d.y<a.corners[1].y&&d.x>a.coords.right?c=(d.x-a.coords.right)/a.maxDist:d.x>a.corners[0].x&&d.x<a.corners[1].x&&d.y<a.coords.bottom?c=(a.coords.bottom-d.y)/a.maxDist:d.y>a.corners[2].y&&d.y<a.corners[1].y&&d.x<a.coords.left?c=(a.coords.left-d.x)/a.maxDist:d.x<=a.corners[0].x&&d.y>=a.corners[0].y?(f=e.distance(d.x,d.y,a.corners[0].x,a.corners[0].y),c=(f-a.cornerRadius)/a.maxDist):d.x>=a.corners[1].x&&d.y>=a.corners[1].y?(f=e.distance(d.x,d.y,a.corners[1].x,a.corners[1].y),c=(f-a.cornerRadius)/a.maxDist):d.x>=a.corners[2].x&&d.y<=a.corners[2].y?(f=e.distance(d.x,d.y,a.corners[2].x,a.corners[2].y),c=(f-a.cornerRadius)/a.maxDist):d.x<=a.corners[3].x&&d.y<=a.corners[3].y&&(f=e.distance(d.x,d.y,a.corners[3].x,a.corners[3].y),c=(f-a.cornerRadius)/a.maxDist),c<0?b:y[a.method](b,c,a))})}),function(){var a,b,c,d,f;return d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],f=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],b=function(a,b,c,d,e,f,h){var i,j,k,l,m,n,o;return i=typeof exports!="undefined"&&exports!==null?new g:document.createElement("canvas"),i.width=a,i.height=b,l=c+Math.cos(e)*f*.5,n=d+Math.sin(e)*f*.5,m=c-Math.cos(e)*f*.5,o=d-Math.sin(e)*f*.5,j=i.getContext("2d"),k=j.createLinearGradient(l,n,m,o),h?(k.addColorStop(0,"white"),k.addColorStop(.5,"black"),k.addColorStop(1,"white")):(k.addColorStop(0,"white"),k.addColorStop(1,"black")),j.fillStyle=k,j.fillRect(0,0,a,b),j.getImageData(0,0,a,b)},c=function(a,b,c,d,e,f){var h,i,j;return h=typeof exports!="undefined"&&exports!==null?new g:document.createElement("canvas"),h.width=a,h.height=b,i=h.getContext("2d"),j=i.createRadialGradient(c,d,e,c,d,f),j.addColorStop(1,"white"),j.addColorStop(0,"black"),i.fillStyle=j,i.fillRect(0,0,a,b),i.getImageData(0,0,a,b)},a=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},e.Plugin.register("compoundBlur",function(b,c,e,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb;W=this.dimensions.width,q=this.dimensions.height,v=this.pixelData,I=b.data,U=W*q,V=U<<2,D=[];for(s=bb=0;0<=V?bb<V:bb>V;s=0<=V?++bb:--bb)D[s]=v[s];l=0,R=g,g-=1;while(R-->=0){x=c+.5|0;if(x===0)continue;x>256&&(x=256),m=x+x+1,T=W<<2,X=W-1,r=q-1,J=x+1,S=J*(J+1)/2,Q=new a,N=void 0,M=Q;for(s=cb=1;1<=m?cb<m:cb>m;s=1<=m?++cb:--cb)M=M.next=new a,s===J&&(N=M);M.next=Q,O=null,P=null,ab=$=0,z=d[x],L=f[x];for(Z=db=0;0<=q?db<q:db>q;Z=0<=q?++db:--db){F=n=h=H=p=j=0,G=J*(E=D[$]),o=J*(C=D[$+1]),i=J*(B=D[$+2]),H+=S*E,p+=S*C,j+=S*B,M=Q;for(s=eb=0;0<=J?eb<J:eb>J;s=0<=J?++eb:--eb)M.r=E,M.g=C,M.b=B,M=M.next;for(s=fb=1;1<=J?fb<J:fb>J;s=1<=J?++fb:--fb)A=$+((X<s?X:s)<<2),H+=(M.r=E=D[A])*(K=J-s),p+=(M.g=C=D[A+1])*K,j+=(M.b=B=D[A+2])*K,F+=E,n+=C,h+=B,M=M.next;O=Q,P=N;for(Y=gb=0;0<=W?gb<W:gb>W;Y=0<=W?++gb:--gb)D[$]=H*z>>L,D[$+1]=p*z>>L,D[$+2]=j*z>>L,H-=G,p-=o,j-=i,G-=O.r,o-=O.g,i-=O.b,A=ab+((A=Y+J)<X?A:X)<<2,F+=O.r=D[A],n+=O.g=D[A+1],h+=O.b=D[A+2],H+=F,p+=n,j+=h,O=O.next,G+=E=P.r,o+=C=P.g,i+=B=P.b,F-=E,n-=C,h-=B,P=P.next,$+=4;ab+=W}for(Y=hb=0;0<=W?hb<W:hb>W;Y=0<=W?++hb:--hb){n=h=F=p=j=H=0,$=Y<<2,G=J*(E=D[$]),o=J*(C=D[$+1]),i=J*(B=D[$+2]),H+=S*E,p+=S*C,j+=S*B,M=Q;for(s=ib=0;0<=J?ib<J:ib>J;s=0<=J?++ib:--ib)M.r=E,M.g=C,M.b=B,M=M.next;_=W;for(s=jb=1;1<=J?jb<J:jb>J;s=1<=J?++jb:--jb)$=_+Y<<2,H+=(M.r=E=D[$])*(K=J-s),p+=(M.g=C=D[$+1])*K,j+=(M.b=B=D[$+2])*K,F+=E,n+=C,h+=B,M=M.next,s<r&&(_+=W);$=Y,O=Q,P=N;for(Z=kb=0;0<=q?kb<q:kb>q;Z=0<=q?++kb:--kb)A=$<<2,D[A]=H*z>>L,D[A+1]=p*z>>L,D[A+2]=j*z>>L,H-=G,p-=o,j-=i,G-=O.r,o-=O.g,i-=O.b,A=Y+((A=Z+J)<r?A:r)*W<<2,H+=F+=O.r=D[A],p+=n+=O.g=D[A+1],j+=h+=O.b=D[A+2],O=O.next,G+=E=P.r,o+=C=P.g,i+=B=P.b,F-=E,n-=C,h-=B,P=P.next,$+=W}c*=e,s=U;while(--s>-1)u=s<<2,y=(I[u+2]&255)/255*g,w=y|0,w===l?(k=256*(y-(y|0)),t=256-k,v[u]=v[u]*t+D[u]*k>>8,v[u+1]=v[u+1]*t+D[u+1]*k>>8,v[u+2]=v[u+2]*t+D[u+2]*k>>8):w===l+1&&(v[u]=D[u],v[u+1]=D[u+1],v[u+2]=D[u+2]);l++}return this}),e.Filter.register("tiltShift",function(a){var c,d;return c={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},a=v.extend(c,a),a.angle*=Math.PI/180,d=b(this.dimensions.width,this.dimensions.height,a.center.x,a.center.y,a.angle,a.focusWidth,!0),this.processPlugin("compoundBlur",[d,a.startRadius,a.radiusFactor,a.steps])}),e.Filter.register("radialBlur",function(a){var b,d,e,f;return b={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},a=v.extend(b,a),a.radius||(a.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),e=a.radius/2-a.size,f=a.radius/2,d=c(this.dimensions.width,this.dimensions.height,a.center.x,a.center.y,e,f),this.processPlugin("compoundBlur",[d,a.startRadius,a.radiusFactor,a.steps])})}(),e.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),e.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),e.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),e.Filter.register("posterize",function(a){var b,c;return b=256/a,c=255/(a-1),this.process("posterize",function(a){return a.r=Math.floor(Math.floor(a.r/b)*c),a.g=Math.floor(Math.floor(a.g/b)*c),a.b=Math.floor(Math.floor(a.b/b)*c),a})}),e.Filter.register("vintage",function(a){a==null&&(a=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87);if(a)return this.vignette("40%",30)}),e.Filter.register("lomo",function(a){return a==null&&(a=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),a&&this.vignette("50%",60),this.brightness(5)}),e.Filter.register("clarity",function(a){return a==null&&(a=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),a&&(this.greyscale(),this.contrast(4)),this}),e.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),e.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),e.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),e.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),e.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),e.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),e.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),e.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),e.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),e.Filter.register("glowingSun",function(a){a==null&&(a=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8);if(a)return this.vignette("45%",20)}),e.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),e.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),e.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),e.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),e.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),function(){var a,b,c;return b=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],a=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},e.Plugin.register("stackBlur",function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;if(isNaN(d)||d<1)return;d|=0,s=this.pixelData,H=this.dimensions.width,l=this.dimensions.height,h=d+d+1,G=H<<2,I=H-1,m=l-1,x=d+1,F=x*(x+1)/2,E=new a,A=E;for(n=O=1;1<=h?O<h:O>h;n=1<=h?++O:--O)A=A.next=new a,n===x&&(B=A);A.next=E,C=null,D=null,N=L=0,o=b[d],z=c[d];for(K=P=0;0<=l?P<l:P>l;K=0<=l?++P:--P){u=i=e=w=k=g=0,v=x*(t=s[L]),j=x*(r=s[L+1]),f=x*(q=s[L+2]),w+=F*t,k+=F*r,g+=F*q,A=E;for(n=Q=0;0<=x?Q<x:Q>x;n=0<=x?++Q:--Q)A.r=t,A.g=r,A.b=q,A=A.next;for(n=R=1;1<=x?R<x:R>x;n=1<=x?++R:--R)p=L+((I<n?I:n)<<2),w+=(A.r=t=s[p])*(y=x-n),k+=(A.g=r=s[p+1])*y,g+=(A.b=q=s[p+2])*y,u+=t,i+=r,e+=q,A=A.next;C=E,D=B;for(J=S=0;0<=H?S<H:S>H;J=0<=H?++S:--S)s[L]=w*o>>z,s[L+1]=k*o>>z,s[L+2]=g*o>>z,w-=v,k-=j,g-=f,v-=C.r,j-=C.g,f-=C.b,p=N+((p=J+d+1)<I?p:I)<<2,u+=C.r=s[p],i+=C.g=s[p+1],e+=C.b=s[p+2],w+=u,k+=i,g+=e,C=C.next,v+=t=D.r,j+=r=D.g,f+=q=D.b,u-=t,i-=r,e-=q,D=D.next,L+=4;N+=H}for(J=T=0;0<=H?T<H:T>H;J=0<=H?++T:--T){i=e=u=k=g=w=0,L=J<<2,v=x*(t=s[L]),j=x*(r=s[L+1]),f=x*(q=s[L+2]),w+=F*t,k+=F*r,g+=F*q,A=E;for(n=U=0;0<=x?U<x:U>x;n=0<=x?++U:--U)A.r=t,A.g=r,A.b=q,A=A.next;M=H;for(n=V=1;1<=d?V<=d:V>=d;n=1<=d?++V:--V)L=M+J<<2,w+=(A.r=t=s[L])*(y=x-n),k+=(A.g=r=s[L+1])*y,g+=(A.b=q=s[L+2])*y,u+=t,i+=r,e+=q,A=A.next,n<m&&(M+=H);L=J,C=E,D=B;for(K=W=0;0<=l?W<l:W>l;K=0<=l?++W:--W)p=L<<2,s[p]=w*o>>z,s[p+1]=k*o>>z,s[p+2]=g*o>>z,w-=v,k-=j,g-=f,v-=C.r,j-=C.g,f-=C.b,p=J+((p=K+x)<m?p:m)*H<<2,w+=u+=C.r=s[p],k+=i+=C.g=s[p+1],g+=e+=C.b=s[p+2],C=C.next,v+=t=D.r,j+=r=D.g,f+=q=D.b,u-=t,i-=r,e-=q,D=D.next,L+=H}return this}),e.Filter.register("stackBlur",function(a){return this.processPlugin("stackBlur",[a])})}(),e.Filter.register("threshold",function(a){return this.process("threshold",function(b){var c;return c=.2126*b.r+.7152*b.g+.0722*b.b,c<a?(b.r=0,b.g=0,b.b=0):(b.r=255,b.g=255,b.b=255),b})})}.call(this),define("Caman",function(){}),function(a,b,c){typeof module=="object"&&typeof module.exports=="object"?module.exports=b.document&&typeof a!="undefined"?c(b,!0):function(a,b){return c(a,b)}:typeof define=="function"&&define.amd!=undefined?define("jcanvas",["jquery"],c):c(a,b)}(typeof window!="undefined"?window.$:{},typeof window!="undefined"?window:this,function(a,b){function c(a){var b=this,c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function d(){vb(this,d.baseDefaults)}function e(a){return xb(a)==="string"}function f(a){return!isNaN(ob(a))&&!isNaN(pb(a))}function g(a){return a&&a.getContext?a.getContext("2d"):sb}function h(a){var b,c,d;for(b in a)a.hasOwnProperty(b)&&(d=a[b],c=xb(d),c==="string"&&f(d)&&b!=="text"&&(a[b]=pb(d)));a.text!==undefined&&(a.text=String(a.text))}function i(a){return a=vb({},a),a.masks=a.masks.slice(0),a}function j(a,b){var c;a.save(),c=i(b.transforms),b.savedTransforms.push(c)}function k(a,b){b.savedTransforms.length===0?b.transforms=i(Kb):(a.restore(),b.transforms=b.savedTransforms.pop())}function l(a,b,c,d){c[d]&&(yb(c[d])?b[d]=c[d].call(a,c):b[d]=c[d])}function m(a,b,c){l(a,b,c,"fillStyle"),l(a,b,c,"strokeStyle"),b.lineWidth=c.strokeWidth,c.rounded?b.lineCap=b.lineJoin="round":(b.lineCap=c.strokeCap,b.lineJoin=c.strokeJoin,b.miterLimit=c.miterLimit),c.strokeDash||(c.strokeDash=[]),b.setLineDash&&b.setLineDash(c.strokeDash),b.webkitLineDash=b.mozDash=c.strokeDash,b.lineDashOffset=b.webkitLineDashOffset=b.mozDashOffset=c.strokeDashOffset,b.shadowOffsetX=c.shadowX,b.shadowOffsetY=c.shadowY,b.shadowBlur=c.shadowBlur,b.shadowColor=c.shadowColor,b.globalAlpha=c.opacity,b.globalCompositeOperation=c.compositing,c.imageSmoothing&&(b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=c.imageSmoothingEnabled)}function n(a,b,c){c.mask&&(c.autosave&&j(a,b),a.clip(),b.transforms.masks.push(c._args))}function o(a,b){b._transformed&&a.restore()}function p(a,b,c){var d;c.closed&&b.closePath(),c.shadowStroke&&c.strokeWidth!==0?(b.stroke(),b.fill(),b.shadowColor="transparent",b.shadowBlur=0,b.stroke()):(b.fill(),c.fillStyle!=="transparent"&&(b.shadowColor="transparent"),c.strokeWidth!==0&&b.stroke()),c.closed||b.closePath(),o(b,c),c.mask&&(d=r(a),n(b,d,c))}function q(a,b,c,d,e){c._toRad=c.inDegrees?Ab/180:1,c._transformed=qb,b.save(),!c.fromCenter&&!c._centered&&d!==tb&&(e===tb&&(e=d),c.x+=d/2,c.y+=e/2,c._centered=qb),c.rotate&&S(b,c,sb),(c.scale!==1||c.scaleX!==1||c.scaleY!==1)&&T(b,c,sb),(c.translate||c.translateX||c.translateY)&&U(b,c,sb)}function r(b){var c=Jb.dataCache,d;return c._canvas===b&&c._data?d=c._data:(d=a.data(b,"jCanvas"),d||(d={canvas:b,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:sb,cursor:a(b).css("cursor"),drag:{layer:sb,dragging:rb},event:{type:sb,x:sb,y:sb},events:{},transforms:i(Kb),savedTransforms:[],animating:rb,animated:sb,pixelRatio:1,scaled:rb},a.data(b,"jCanvas",d)),c._canvas=b,c._data=d),d}function s(a,b,c){var d;for(d in Nb.events)Nb.events.hasOwnProperty(d)&&(c[d]||c.cursors&&c.cursors[d])&&t(a,b,c,d);b.events.mouseout||(a.bind("mouseout.jCanvas",function(){var c=b.drag.layer,d;c&&(b.drag={},E(a,b,c,"dragcancel"));for(d=0;d<b.layers.length;d+=1)c=b.layers[d],c._hovered&&a.triggerLayerEvent(b.layers[d],"mouseout");a.drawLayers()}),b.events.mouseout=qb)}function t(a,b,c,d){Nb.events[d](a,b),c._event=qb}function u(a,b,c){var d,e,f;if(c.draggable||c.cursors){d=["mousedown","mousemove","mouseup"];for(f=0;f<d.length;f+=1)e=d[f],t(a,b,c,e);c._event=qb}}function v(a,b,c,d){var f=b.layer.names;d?d.name!==tb&&e(c.name)&&c.name!==d.name&&delete f[c.name]:d=c,e(d.name)&&(f[d.name]=c)}function w(a,b,c,d){var e=b.layer.groups,f,g,h,i,j;if(!d)d=c;else if(d.groups!==tb&&c.groups!==sb)for(h=0;h<c.groups.length;h+=1){g=c.groups[h],f=e[g];if(f){for(j=0;j<f.length;j+=1)if(f[j]===c){i=j,f.splice(j,1);break}f.length===0&&delete e[g]}}if(d.groups!==tb&&d.groups!==sb)for(h=0;h<d.groups.length;h+=1)g=d.groups[h],f=e[g],f||(f=e[g]=[],f.name=g),i===tb&&(i=f.length),f.splice(i,0,c)}function x(a){var b,c,d,e;b=sb;for(c=a.intersecting.length-1;c>=0;c-=1){b=a.intersecting[c];if(b._masks){for(e=b._masks.length-1;e>=0;e-=1){d=b._masks[e];if(!d.intersects){b.intersects=rb;break}}if(b.intersects&&!b.intangible)break}}return b&&b.intangible&&(b=sb),b}function y(a,b,c,d){c&&c.visible&&c._method&&(d?c._next=d:c._next=sb,c._method.call(a,c))}function z(a,b,c){var d,e,f,g,h,i,j,k,l,m;g=b.drag,e=g.layer,h=e&&e.dragGroups||[],d=b.layers;if(c==="mousemove"||c==="touchmove"){g.dragging||(g.dragging=qb,e.dragging=qb,e.bringToFront&&(d.splice(e.index,1),e.index=d.push(e)),e._startX=e.x,e._startY=e.y,e._endX=e._eventX,e._endY=e._eventY,E(a,b,e,"dragstart"));if(g.dragging){l=e._eventX-(e._endX-e._startX),m=e._eventY-(e._endY-e._startY),e.dx=l-e.x,e.dy=m-e.y,e.restrictDragToAxis!=="y"&&(e.x=l),e.restrictDragToAxis!=="x"&&(e.y=m),E(a,b,e,"drag");for(k=0;k<h.length;k+=1){j=h[k],i=b.layer.groups[j];if(e.groups&&i)for(f=0;f<i.length;f+=1)i[f]!==e&&(e.restrictDragToAxis!=="y"&&i[f].restrictDragToAxis!=="y"&&(i[f].x+=e.dx),e.restrictDragToAxis!=="x"&&i[f].restrictDragToAxis!=="x"&&(i[f].y+=e.dy))}}}else if(c==="mouseup"||c==="touchend")g.dragging&&(e.dragging=rb,g.dragging=rb,E(a,b,e,"dragstop")),b.drag={}}function A(b,c,d){var e;c.cursors&&(e=c.cursors[d]),a.inArray(e,Lb.cursors)!==-1&&(e=Lb.prefix+e),e&&b.css({cursor:e})}function B(a,b){a.css({cursor:b.cursor})}function C(a,b,c,d,e){d[c]&&b._running&&!b._running[c]&&(b._running[c]=qb,d[c].call(a[0],b,e),b._running[c]=rb)}function D(b,c){return!b.disableEvents&&(!b.intangible||a.inArray(c,Mb)===-1)}function E(a,b,c,d,e){D(c,d)&&(d!=="mouseout"&&A(a,c,d),C(a,c,d,c,e),C(a,c,d,b.eventHooks,e),C(a,c,d,Nb.eventHooks,e))}function F(b,d,f,g){var i,j,k,l=d._layer?f:d;d._args=f;if(d.draggable||d.dragGroups)d.layer=qb,d.draggable=qb;d._method||(g?d._method=g:d.method?d._method=a.fn[d.method]:d.type?d._method=a.fn[Ib.drawings[d.type]]:d._method=function(){});if(d.layer&&!d._layer){i=a(b),j=r(b),k=j.layers;if(l.name===sb||e(l.name)&&j.layer.names[l.name]===tb)h(d),l=new c(d),l.canvas=b,l.layer=qb,l._layer=qb,l._running={},l.data!==sb?l.data=vb({},l.data):l.data={},l.groups!==sb?l.groups=l.groups.slice(0):l.groups=[],v(i,j,l),w(i,j,l),s(i,j,l),u(i,j,l),d._event=l._event,l._method===a.fn.drawText&&i.measureText(l),l.index===sb&&(l.index=k.length),k.splice(l.index,0,l),d._args=l,E(i,j,l,"add")}else d.layer||h(d);return l}function G(a){var b,c;for(c=0;c<Lb.props.length;c+=1)b=Lb.props[c],a[b]=a["_"+b]}function H(a,b){var c,d;for(d=0;d<Lb.props.length;d+=1)c=Lb.props[d],a[c]!==tb&&(a["_"+c]=a[c],Lb.propsObj[c]=qb,b&&delete a[c])}function I(a,b,c){var d,e,f,g;for(d in c)if(c.hasOwnProperty(d)){e=c[d],yb(e)&&(c[d]=e.call(a,b,d));if(xb(e)==="object"&&zb(e)){for(f in e)e.hasOwnProperty(f)&&(g=e[f],b[d]!==tb&&(b[d+"."+f]=b[d][f],c[d+"."+f]=g));delete c[d]}}return c}function J(a){var b;for(b in a)a.hasOwnProperty(b)&&b.indexOf(".")!==-1&&delete a[b]}function K(b){var c,d,e=[],f=1;return b.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&(b==="transparent"&&(b="rgba(0, 0, 0, 0)"),d=jb.head,c=d.style.color,d.style.color=b,b=a.css(d,"color"),d.style.color=c),b.match(/^rgb/gi)&&(e=b.match(/(\d+(\.\d+)?)/gi),b.match(/%/gi)&&(f=2.55),e[0]*=f,e[1]*=f,e[2]*=f,e[3]!==tb?e[3]=pb(e[3]):e[3]=1),e}function L(a){var b=3,c;xb(a.start)!=="array"&&(a.start=K(a.start),a.end=K(a.end)),a.now=[];if(a.start[3]!==1||a.end[3]!==1)b=4;for(c=0;c<b;c+=1)a.now[c]=a.start[c]+(a.end[c]-a.start[c])*a.pos,c<3&&(a.now[c]=Bb(a.now[c]));a.start[3]!==1||a.end[3]!==1?a.now="rgba( "+a.now.join(",")+" )":(a.now.slice(0,3),a.now="rgb( "+a.now.join(",")+" )"),a.elem.nodeName?a.elem.style[a.prop]=a.now:a.elem[a.prop]=a.now}function M(b){var c;for(c=0;c<b.length;c+=1)a.fx.step[b[c]]=L}function N(a){return Ib.touchEvents[a]&&(a=Ib.touchEvents[a]),a}function O(a){return Ib.mouseEvents[a]&&(a=Ib.mouseEvents[a]),a}function P(a){Nb.events[a]=function(b,c){function d(a){g.x=a.offsetX,g.y=a.offsetY,g.type=e,g.event=a,b.drawLayers({resetFire:qb}),a.preventDefault()}var e,f,g;g=c.event,e=a==="mouseover"||a==="mouseout"?"mousemove":a,f=N(e),c.events[e]||(f!==e?b.bind(e+".jCanvas "+f+".jCanvas",d):b.bind(e+".jCanvas",d),c.events[e]=qb)}}function Q(a){var b;for(b=0;b<a.length;b+=1)P(a[b])}function R(a,b,c){var d,e,f,g,h,i,j,k;d=c._args,d&&(e=r(a),f=e.event,f.x!==sb&&f.y!==sb&&(i=f.x*e.pixelRatio,j=f.y*e.pixelRatio,g=b.isPointInPath(i,j)||b.isPointInStroke&&b.isPointInStroke(i,j)),h=e.transforms,d.eventX=f.x,d.eventY=f.y,d.event=f.event,k=e.transforms.rotate,i=d.eventX,j=d.eventY,k!==0?(d._eventX=i*Eb(-k)-j*Db(-k),d._eventY=j*Eb(-k)+i*Db(-k)):(d._eventX=i,d._eventY=j),d._eventX/=h.scaleX,d._eventY/=h.scaleY,g&&e.intersecting.push(d),d.intersects=!!g)}function S(a,b,c){b._toRad=b.inDegrees?Ab/180:1,a.translate(b.x,b.y),a.rotate(b.rotate*b._toRad),a.translate(-b.x,-b.y),c&&(c.rotate+=b.rotate*b._toRad)}function T(a,b,c){b.scale!==1&&(b.scaleX=b.scaleY=b.scale),a.translate(b.x,b.y),a.scale(b.scaleX,b.scaleY),a.translate(-b.x,-b.y),c&&(c.scaleX*=b.scaleX,c.scaleY*=b.scaleY)}function U(a,b,c){b.translate&&(b.translateX=b.translateY=b.translate),a.translate(b.translateX,b.translateY),c&&(c.translateX+=b.translateX,c.translateY+=b.translateY)}function V(a){while(a<0)a+=2*Ab;return a}function W(a,b){return a.x+a.radius*Eb(b)}function X(a,b){return a.y+a.radius*Db(b)}function Y(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o;c===d?(m=0,n=0):(m=c.x,n=c.y),!d.inDegrees&&d.end===360&&(d.end=Ab*2),d.start*=c._toRad,d.end*=c._toRad,d.start-=Ab/2,d.end-=Ab/2,o=Ab/180,d.ccw&&(o*=-1),e=W(d,d.start+o),f=X(d,d.start+o),g=W(d,d.start),h=X(d,d.start),$(a,b,c,d,e,f,g,h),b.arc(d.x+m,d.y+n,d.radius,d.start,d.end,d.ccw),i=W(d,d.end+o),j=X(d,d.end+o),k=W(d,d.end),l=X(d,d.end),_(a,b,c,d,k,l,i,j)}function Z(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o;d.arrowRadius&&!c.closed&&(o=Fb(h-f,g-e),o-=Ab,m=c.strokeWidth*Eb(o),n=c.strokeWidth*Db(o),i=g+d.arrowRadius*Eb(o+d.arrowAngle/2),j=h+d.arrowRadius*Db(o+d.arrowAngle/2),k=g+d.arrowRadius*Eb(o-d.arrowAngle/2),l=h+d.arrowRadius*Db(o-d.arrowAngle/2),b.moveTo(i-m,j-n),b.lineTo(g-m,h-n),b.lineTo(k-m,l-n),b.moveTo(g-m,h-n),b.lineTo(g+m,h+n),b.moveTo(g,h))}function $(a,b,c,d,e,f,g,h){d._arrowAngleConverted||(d.arrowAngle*=c._toRad,d._arrowAngleConverted=qb),d.startArrow&&Z(a,b,c,d,e,f,g,h)}function _(a,b,c,d,e,f,g,h){d._arrowAngleConverted||(d.arrowAngle*=c._toRad,d._arrowAngleConverted=qb),d.endArrow&&Z(a,b,c,d,e,f,g,h)}function ab(a,b,c,d){var e,f,g;e=2,$(a,b,c,d,d.x2+c.x,d.y2+c.y,d.x1+c.x,d.y1+c.y),d.x1!==tb&&d.y1!==tb&&b.moveTo(d.x1+c.x,d.y1+c.y);while(qb){f=d["x"+e],g=d["y"+e];if(f===tb||g===tb)break;b.lineTo(f+c.x,g+c.y),e+=1}e-=1,_(a,b,c,d,d["x"+(e-1)]+c.x,d["y"+(e-1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function bb(a,b,c,d){var e,f,g,h,i;e=2,$(a,b,c,d,d.cx1+c.x,d.cy1+c.y,d.x1+c.x,d.y1+c.y),d.x1!==tb&&d.y1!==tb&&b.moveTo(d.x1+c.x,d.y1+c.y);while(qb){f=d["x"+e],g=d["y"+e],h=d["cx"+(e-1)],i=d["cy"+(e-1)];if(f===tb||g===tb||h===tb||i===tb)break;b.quadraticCurveTo(h+c.x,i+c.y,f+c.x,g+c.y),e+=1}e-=1,_(a,b,c,d,d["cx"+(e-1)]+c.x,d["cy"+(e-1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function cb(a,b,c,d){var e,f,g,h,i,j,k,l;e=2,f=1,$(a,b,c,d,d.cx1+c.x,d.cy1+c.y,d.x1+c.x,d.y1+c.y),d.x1!==tb&&d.y1!==tb&&b.moveTo(d.x1+c.x,d.y1+c.y);while(qb){g=d["x"+e],h=d["y"+e],i=d["cx"+f],j=d["cy"+f],k=d["cx"+(f+1)],l=d["cy"+(f+1)];if(g===tb||h===tb||i===tb||j===tb||k===tb||l===tb)break;b.bezierCurveTo(i+c.x,j+c.y,k+c.x,l+c.y,g+c.x,h+c.y),e+=1,f+=2}e-=1,f-=2,_(a,b,c,d,d["cx"+(f+1)]+c.x,d["cy"+(f+1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function db(a,b,c){return b*=a._toRad,b-=Ab/2,c*Eb(b)}function eb(a,b,c){return b*=a._toRad,b-=Ab/2,c*Db(b)}function fb(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q;c===d?(h=0,i=0):(h=c.x,i=c.y),e=1,j=l=n=p=d.x+h,k=m=o=q=d.y+i,$(a,b,c,d,j+db(c,d.a1,d.l1),k+eb(c,d.a1,d.l1),j,k),d.x!==tb&&d.y!==tb&&b.moveTo(j,k);while(qb){f=d["a"+e],g=d["l"+e];if(f===tb||g===tb)break;n=p,o=q,p+=db(c,f,g),q+=eb(c,f,g),e===1&&(l=p,m=q),b.lineTo(p,q),e+=1}_(a,b,c,d,n,o,p,q)}function gb(a,b,c){isNaN(ob(c.fontSize))||(c.fontSize+="px"),b.font=c.fontStyle+" "+c.fontSize+" "+c.fontFamily}function hb(b,c,d,e){var f,g,h,i=Jb.propCache;if(i.text===d.text&&i.fontStyle===d.fontStyle&&i.fontSize===d.fontSize&&i.fontFamily===d.fontFamily&&i.maxWidth===d.maxWidth&&i.lineHeight===d.lineHeight)d.width=i.width,d.height=i.height;else{d.width=c.measureText(e[0]).width;for(h=1;h<e.length;h+=1)g=c.measureText(e[h]).width,g>d.width&&(d.width=g);f=b.style.fontSize,b.style.fontSize=d.fontSize,d.height=pb(a.css(b,"fontSize"))*e.length*d.lineHeight,b.style.fontSize=f}}function ib(a,b){var c=b.text,d=b.maxWidth,e=c.split("\n"),f=[],g,h,i,j,k,l;for(i=0;i<e.length;i+=1){j=e[i],k=j.split(" "),g=[],h="";if(k.length===1||a.measureText(j).width<d)g=[j];else{for(l=0;l<k.length;l+=1)a.measureText(h+k[l]).width>d&&(h!==""&&g.push(h),h=""),h+=k[l],l!==k.length-1&&(h+=" ");g.push(h)}f=f.concat(g.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return f}b=b?b:this;var jb=b.document,kb=b.Image,lb=b.Array,mb=b.getComputedStyle,nb=b.Math,ob=b.Number,pb=b.parseFloat,qb=!0,rb=!1,sb=null,tb=undefined,ub,vb=a.extend,wb=a.inArray,xb=function(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},yb=a.isFunction,zb=a.isPlainObject,Ab=nb.PI,Bb=nb.round,Cb=nb.abs,Db=nb.sin,Eb=nb.cos,Fb=nb.atan2,Gb=lb.prototype.slice,Hb=a.event.fix,Ib={},Jb={dataCache:{},propCache:{},imageCache:{}},Kb={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},Lb={},Mb=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"],Nb={events:{},eventHooks:{},future:{}};d.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:qb,baseline:"middle",bringToFront:rb,ccw:rb,closed:rb,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:qb,crossOrigin:sb,cursors:sb,disableEvents:rb,draggable:rb,dragGroups:sb,groups:sb,data:sb,dx:sb,dy:sb,end:360,eventX:sb,eventY:sb,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:qb,height:sb,imageSmoothing:qb,inDegrees:qb,intangible:rb,index:sb,letterSpacing:sb,lineHeight:1,layer:rb,mask:rb,maxWidth:sb,miterLimit:10,name:sb,opacity:1,r1:sb,r2:sb,radius:0,repeat:"repeat",respectAlign:rb,restrictDragToAxis:null,rotate:0,rounded:rb,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:rb,shadowX:0,shadowY:0,sHeight:sb,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:sb,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:sb,sx:sb,sy:sb,text:"",translate:0,translateX:0,translateY:0,type:sb,visible:qb,width:sb,x:0,y:0},ub=new d,c.prototype=ub,Nb.extend=function(b){return b.name&&(b.props&&vb(ub,b.props),a.fn[b.name]=function d(a){var e=this,f,h,i,j,k;for(h=0;h<e.length;h+=1)f=e[h],i=g(f),i&&(j=new c(a),k=F(f,j,a,d),m(f,i,j),b.fn.call(f,i,j));return e},b.type&&(Ib.drawings[b.type]=b.name)),a.fn[b.name]},a.fn.getEventHooks=function(){var a=this,b,c,d={};return a.length!==0&&(b=a[0],c=r(b),d=c.eventHooks),d},a.fn.setEventHooks=function(b){var c=this,d,e,f;for(e=0;e<c.length;e+=1)d=a(c[e]),f=r(c[e]),vb(f.eventHooks,b);return c},a.fn.getLayers=function(a){var b=this,c,d,e,f,g,h=[];if(b.length!==0){c=b[0],d=r(c),e=d.layers;if(yb(a))for(g=0;g<e.length;g+=1)f=e[g],a.call(c,f)&&h.push(f);else h=e}return h},a.fn.getLayer=function(a){var b=this,c,d,f,g,h,i;if(b.length!==0){c=b[0],d=r(c),f=d.layers,i=xb(a);if(a&&a.layer)g=a;else if(i==="number")a<0&&(a=f.length+a),g=f[a];else if(i==="regexp"){for(h=0;h<f.length;h+=1)if(e(f[h].name)&&f[h].name.match(a)){g=f[h];break}}else g=d.layer.names[a]}return g},a.fn.getLayerGroup=function(a){var b=this,c,d,e,f,g,h=xb(a);if(b.length!==0){c=b[0];if(h==="array")g=a;else if(h==="regexp"){d=r(c),e=d.layer.groups;for(f in e)if(f.match(a)){g=e[f];break}}else d=r(c),g=d.layer.groups[a]}return g},a.fn.getLayerIndex=function(a){var b=this,c=b.getLayers(),d=b.getLayer(a);return wb(d,c)},a.fn.setLayer=function(b,c){var d=this,e,g,i,j,k,l,m;for(g=0;g<d.length;g+=1){e=a(d[g]),i=r(d[g]),j=a(d[g]).getLayer(b);if(j){v(e,i,j,c),w(e,i,j,c),h(c);for(k in c)c.hasOwnProperty(k)&&(l=c[k],m=xb(l),m==="object"&&zb(l)?(j[k]=vb({},l),h(j[k])):m==="array"?j[k]=l.slice(0):m==="string"?l.indexOf("+=")===0?j[k]+=pb(l.substr(2)):l.indexOf("-=")===0?j[k]-=pb(l.substr(2)):!isNaN(l)&&f(l)?j[k]=pb(l):j[k]=l:j[k]=l);s(e,i,j),u(e,i,j),a.isEmptyObject(c)===rb&&E(e,i,j,"change",c)}}return d},a.fn.setLayers=function(b,c){var d=this,e,f,g,h;for(f=0;f<d.length;f+=1){e=a(d[f]),g=e.getLayers(c);for(h=0;h<g.length;h+=1)e.setLayer(g[h],b)}return d},a.fn.setLayerGroup=function(b,c){var d=this,e,f,g,h;for(f=0;f<d.length;f+=1){e=a(d[f]),g=e.getLayerGroup(b);if(g)for(h=0;h<g.length;h+=1)e.setLayer(g[h],c)}return d},a.fn.moveLayer=function(b,c){var d=this,e,f,g,h,i;for(f=0;f<d.length;f+=1)e=a(d[f]),g=r(d[f]),h=g.layers,i=e.getLayer(b),i&&(i.index=wb(i,h),h.splice(i.index,1),h.splice(c,0,i),c<0&&(c=h.length+c),i.index=c,E(e,g,i,"move"));return d},a.fn.removeLayer=function(b){var c=this,d,e,f,g,h;for(e=0;e<c.length;e+=1)d=a(c[e]),f=r(c[e]),g=d.getLayers(),h=d.getLayer(b),h&&(h.index=wb(h,g),g.splice(h.index,1),delete h._layer,v(d,f,h,{name:sb}),w(d,f,h,{groups:sb}),E(d,f,h,"remove"));return c},a.fn.removeLayers=function(b){var c=this,d,e,f,g,h,i;for(e=0;e<c.length;e+=1){d=a(c[e]),f=r(c[e]),g=d.getLayers(b);for(i=0;i<g.length;i+=1)h=g[i],d.removeLayer(h),i-=1;f.layer.names={},f.layer.groups={}}return c},a.fn.removeLayerGroup=function(b){var c=this,d,e,f,g,h,i;if(b!==tb)for(e=0;e<c.length;e+=1){d=a(c[e]),f=r(c[e]),g=d.getLayers(),h=d.getLayerGroup(b);if(h){h=h.slice(0);for(i=0;i<h.length;i+=1)d.removeLayer(h[i])}}return c},a.fn.addLayerToGroup=function(b,c){var d=this,e,f,g,h=[c];for(f=0;f<d.length;f+=1)e=a(d[f]),g=e.getLayer(b),g.groups&&(h=g.groups.slice(0),wb(c,g.groups)===-1&&h.push(c)),e.setLayer(g,{groups:h});return d},a.fn.removeLayerFromGroup=function(b,c){var d=this,e,f,g,h=[],i;for(f=0;f<d.length;f+=1)e=a(d[f]),g=e.getLayer(b),g.groups&&(i=wb(c,g.groups),i!==-1&&(h=g.groups.slice(0),h.splice(i,1),e.setLayer(g,{groups:h})));return d},Lb.cursors=["grab","grabbing","zoom-in","zoom-out"],Lb.prefix=function(){var a=mb(jb.documentElement,""),b=(Gb.call(a).join("").match(/-(moz|webkit|ms)-/)||a.OLink===""&&["","o"])[1];return"-"+b+"-"}(),a.fn.triggerLayerEvent=function(b,c){var d=this,e,f,g;for(f=0;f<d.length;f+=1)e=a(d[f]),g=r(d[f]),b=e.getLayer(b),b&&E(e,g,b,c);return d},a.fn.drawLayer=function(b){var c=this,d,e,f,h;for(d=0;d<c.length;d+=1)f=a(c[d]),e=g(c[d]),e&&(h=f.getLayer(b),y(f,e,h));return c},a.fn.drawLayers=function(b){var c=this,d,e,f,h=b||{},j,k,l,m,n,o,p,q,s,t;n=h.index,n||(n=0);for(e=0;e<c.length;e+=1){d=a(c[e]),f=g(c[e]);if(f){p=r(c[e]),h.clear!==rb&&d.clearCanvas(),j=p.layers;for(m=n;m<j.length;m+=1){k=j[m],k.index=m,h.resetFire&&(k._fired=rb),y(d,f,k,m+1),k._masks=p.transforms.masks.slice(0);if(k._method===a.fn.drawImage&&k.visible){t=!0;break}}if(t)break;o=m,k=x(p),q=p.event,s=q.type,p.drag.layer&&z(d,p,s),l=p.lastIntersected,l!==sb&&k!==l&&l._hovered&&!l._fired&&!p.drag.dragging&&(p.lastIntersected=sb,l._fired=qb,l._hovered=rb,E(d,p,l,"mouseout"),B(d,p)),k&&(k[s]||(s=O(s)),k._event&&k.intersects&&(p.lastIntersected=k,(k.mouseover||k.mouseout||k.cursors)&&!p.drag.dragging&&!k._hovered&&!k._fired&&(k._fired=qb,k._hovered=qb,E(d,p,k,"mouseover")),k._fired||(k._fired=qb,q.type=sb,E(d,p,k,s)),k.draggable&&!k.disableEvents&&(s==="mousedown"||s==="touchstart")&&(p.drag.layer=k))),k===sb&&!p.drag.dragging&&B(d,p),o===j.length&&(p.intersecting.length=0,p.transforms=i(Kb),p.savedTransforms.length=0)}}return c},a.fn.addLayer=function(a){var b=this,d,e,f;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),f.layer=qb,F(b[d],f,a));return b},Lb.props=["width","height","opacity","lineHeight"],Lb.propsObj={},a.fn.animateLayer=function(){function b(a,b,c){return function(){G(c),J(c),(!b.animating||b.animated===c)&&a.drawLayers(),c._animating=rb,b.animating=rb,b.animated=sb,i[4]&&i[4].call(a[0],c),E(a,b,c,"animateend")}}function c(a,b,c){return function(d,e){var f,g,h,j=!1;e.prop[0]==="_"&&(j=!0,e.prop=e.prop.replace("_",""),c[e.prop]=c["_"+e.prop]),e.prop.indexOf(".")!==-1&&(f=e.prop.split("."),g=f[0],h=f[1],c[g]&&(c[g][h]=e.now)),c._pos!==e.pos&&(c._pos=e.pos,!c._animating&&!b.animating&&(c._animating=qb,b.animating=qb,b.animated=c),(!b.animating||b.animated===c)&&a.drawLayers()),i[5]&&i[5].call(a[0],d,e,c),E(a,b,c,"animate",e),j&&(e.prop="_"+e.prop)}}var d=this,e,f,h,i=Gb.call(arguments,0),j,k,l;xb(i[2])==="object"?(i.splice(2,0,i[2].duration||sb),i.splice(3,0,i[3].easing||sb),i.splice(4,0,i[4].complete||sb),i.splice(5,0,i[5].step||sb)):(i[2]===tb?(i.splice(2,0,sb),i.splice(3,0,sb),i.splice(4,0,sb)):yb(i[2])&&(i.splice(2,0,sb),i.splice(3,0,sb)),i[3]===tb?(i[3]=sb,i.splice(4,0,sb)):yb(i[3])&&i.splice(3,0,sb));for(f=0;f<d.length;f+=1)e=a(d[f]),h=g(d[f]),h&&(j=r(d[f]),k=e.getLayer(i[0]),k&&k._method!==a.fn.draw&&(l=vb({},i[1]),l=I(d[f],k,l),H(l,qb),H(k),k.style=Lb.propsObj,a(k).animate(l,{duration:i[2],easing:a.easing[i[3]]?i[3]:sb,complete:b(e,j,k),step:c(e,j,k)}),E(e,j,k,"animatestart")));return d},a.fn.animateLayerGroup=function(b){var c=this,d,e,f=Gb.call(arguments,0),g,h;for(e=0;e<c.length;e+=1){d=a(c[e]),g=d.getLayerGroup(b);if(g)for(h=0;h<g.length;h+=1)f[0]=g[h],d.animateLayer.apply(d,f)}return c},a.fn.delayLayer=function(b,c){var d=this,e,f,g,h;c=c||0;for(f=0;f<d.length;f+=1)e=a(d[f]),g=r(d[f]),h=e.getLayer(b),h&&(a(h).delay(c),E(e,g,h,"delay"));return d},a.fn.delayLayerGroup=function(b,c){var d=this,e,f,g,h,i;c=c||0;for(f=0;f<d.length;f+=1){e=a(d[f]),g=e.getLayerGroup(b);if(g)for(i=0;i<g.length;i+=1)h=g[i],e.delayLayer(h,c)}return d},a.fn.stopLayer=function(b,c){var d=this,e,f,g,h;for(f=0;f<d.length;f+=1)e=a(d[f]),g=r(d[f]),h=e.getLayer(b),h&&(a(h).stop(c),E(e,g,h,"stop"));return d},a.fn.stopLayerGroup=function(b,c){var d=this,e,f,g,h,i;for(f=0;f<d.length;f+=1){e=a(d[f]),g=e.getLayerGroup(b);if(g)for(i=0;i<g.length;i+=1)h=g[i],e.stopLayer(h,c)}return d},M(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]),Ib.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},Ib.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},Q(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","contextmenu"]),a.event.fix=function(b){var c,d,e;return b=Hb.call(a.event,b),d=b.originalEvent,d&&(e=d.changedTouches,b.pageX!==tb&&b.offsetX===tb?(c=a(b.currentTarget).offset(),c&&(b.offsetX=b.pageX-c.left,b.offsetY=b.pageY-c.top)):e&&(c=a(b.currentTarget).offset(),c&&(b.offsetX=e[0].pageX-c.left,b.offsetY=e[0].pageY-c.top))),b},Ib.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},a.fn.draw=function Ob(b){var d=this,e,f,h,i=new c(b),j;if(Ib.drawings[i.type]&&i.type!=="function")d[Ib.drawings[i.type]](b);else for(f=0;f<d.length;f+=1)e=a(d[f]),h=g(d[f]),h&&(i=new c(b),j=F(d[f],i,b,Ob),i.visible&&i.fn&&i.fn.call(d[f],h,i));return d},a.fn.clearCanvas=function Pb(a){var b=this,d,e,f=new c(a),h;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f.width===sb||f.height===sb?(e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,b[d].width,b[d].height),e.restore()):(h=F(b[d],f,a,Pb),q(b[d],e,f,f.width,f.height),e.clearRect(f.x-f.width/2,f.y-f.height/2,f.width,f.height),o(e,f)));return b},a.fn.saveCanvas=function Qb(a){var b=this,d,e,f,h,i,k;for(d=0;d<b.length;d+=1){e=g(b[d]);if(e){i=r(b[d]),f=new c(a),h=F(b[d],f,a,Qb);for(k=0;k<f.count;k+=1)j(e,i)}}return b},a.fn.restoreCanvas=function Rb(a){var b=this,d,e,f,h,i,j;for(d=0;d<b.length;d+=1){e=g(b[d]);if(e){i=r(b[d]),f=new c(a),h=F(b[d],f,a,Rb);for(j=0;j<f.count;j+=1)k(e,i)}}return b},a.fn.rotateCanvas=function Sb(a){var b=this,d,e,f,h,i;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(i=r(b[d]),f=new c(a),h=F(b[d],f,a,Sb),f.autosave&&j(e,i),S(e,f,i.transforms));return b},a.fn.scaleCanvas=function Tb(a){var b=this,d,e,f,h,i;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(i=r(b[d]),f=new c(a),h=F(b[d],f,a,Tb),f.autosave&&j(e,i),T(e,f,i.transforms));return b},a.fn.translateCanvas=function Ub(a){var b=this,d,e,f,h,i;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(i=r(b[d]),f=new c(a),h=F(b[d],f,a,Ub),f.autosave&&j(e,i),U(e,f,i.transforms));return b},a.fn.drawRect=function Vb(a){var b=this,d,e,f,h,i,j,k,l,n,o;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,Vb),f.visible&&(q(b[d],e,f,f.width,f.height),m(b[d],e,f),e.beginPath(),f.width&&f.height&&(i=f.x-f.width/2,j=f.y-f.height/2,n=Cb(f.cornerRadius),n?(k=f.x+f.width/2,l=f.y+f.height/2,f.width<0&&(o=i,i=k,k=o),f.height<0&&(o=j,j=l,l=o),k-i-2*n<0&&(n=(k-i)/2),l-j-2*n<0&&(n=(l-j)/2),e.moveTo(i+n,j),e.lineTo(k-n,j),e.arc(k-n,j+n,n,3*Ab/2,Ab*2,rb),e.lineTo(k,l-n),e.arc(k-n,l-n,n,0,Ab/2,rb),e.lineTo(i+n,l),e.arc(i+n,l-n,n,Ab/2,Ab,rb),e.lineTo(i,j+n),e.arc(i+n,j+n,n,Ab,3*Ab/2,rb),f.closed=qb):e.rect(i,j,f.width,f.height)),R(b[d],e,f),p(b[d],e,f)));return b},a.fn.drawArc=function Wb(a){var b=this,d,e,f,h;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,Wb),f.visible&&(q(b[d],e,f,f.radius*2),m(b[d],e,f),e.beginPath(),Y(b[d],e,f,f),R(b[d],e,f),p(b[d],e,f)));return b},a.fn.drawEllipse=function Xb(a){var b=this,d,e,f,h,i,j;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,Xb),f.visible&&(q(b[d],e,f,f.width,f.height),m(b[d],e,f),i=f.width*(4/3),j=f.height,e.beginPath(),e.moveTo(f.x,f.y-j/2),e.bezierCurveTo(f.x-i/2,f.y-j/2,f.x-i/2,f.y+j/2,f.x,f.y+j/2),e.bezierCurveTo(f.x+i/2,f.y+j/2,f.x+i/2,f.y-j/2,f.x,f.y-j/2),R(b[d],e,f),f.closed=qb,p(b[d],e,f)));return b},a.fn.drawPolygon=function Yb(a){var b=this,d,e,f,h,i,j,k,l,n,o,r;for(d=0;d<b.length;d+=1){e=g(b[d]);if(e){f=new c(a),h=F(b[d],f,a,Yb);if(f.visible){q(b[d],e,f,f.radius*2),m(b[d],e,f),j=2*Ab/f.sides,k=j/2,i=k+Ab/2,l=f.radius*Eb(k),e.beginPath();for(r=0;r<f.sides;r+=1)n=f.x+f.radius*Eb(i),o=f.y+f.radius*Db(i),e.lineTo(n,o),f.concavity&&(n=f.x+(l+ -l*f.concavity)*Eb(i+k),o=f.y+(l+ -l*f.concavity)*Db(i+k),e.lineTo(n,o)),i+=j;R(b[d],e,f),f.closed=qb,p(b[d],e,f)}}}return b},a.fn.drawSlice=function Zb(b){var d=this,e,f,h,i,j,k,l,n;for(f=0;f<d.length;f+=1)e=a(d[f]),h=g(d[f]),h&&(i=new c(b),j=F(d[f],i,b,Zb),i.visible&&(q(d[f],h,i,i.radius*2),m(d[f],h,i),i.start*=i._toRad,i.end*=i._toRad,i.start-=Ab/2,i.end-=Ab/2,i.start=V(i.start),i.end=V(i.end),i.end<i.start&&(i.end+=2*Ab),k=(i.start+i.end)/2,l=i.radius*i.spread*Eb(k),n=i.radius*i.spread*Db(k),i.x+=l,i.y+=n,h.beginPath(),h.arc(i.x,i.y,i.radius,i.start,i.end,i.ccw),h.lineTo(i.x,i.y),R(d[f],h,i),i.closed=qb,p(d[f],h,i)));return d},a.fn.drawLine=function $b(a){var b=this,d,e,f,h;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,$b),f.visible&&(q(b[d],e,f),m(b[d],e,f),e.beginPath(),ab(b[d],e,f,f),R(b[d],e,f),p(b[d],e,f)));return b},a.fn.drawQuadratic=function _b(a){var b=this,d,e,f,h;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,_b),f.visible&&(q(b[d],e,f),m(b[d],e,f),e.beginPath(),bb(b[d],e,f,f),R(b[d],e,f),p(b[d],e,f)));return b},a.fn.drawBezier=function ac(a){var b=this,d,e,f,h;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,ac),f.visible&&(q(b[d],e,f),m(b[d],e,f),e.beginPath(),cb(b[d],e,f,f),R(b[d],e,f),p(b[d],e,f)));return b},a.fn.drawVector=function bc(a){var b=this,d,e,f,h;for(d=0;d<b.length;d+=1)e=g(b[d]),e&&(f=new c(a),h=F(b[d],f,a,bc),f.visible&&(q(b[d],e,f),m(b[d],e,f),e.beginPath(),fb(b[d],e,f,f),R(b[d],e,f),p(b[d],e,f)));return b},a.fn.drawPath=function cc(a){var b=this,d,e,f,h,i,j;for(d=0;d<b.length;d+=1){e=g(b[d]);if(e){f=new c(a),h=F(b[d],f,a,cc);if(f.visible){q(b[d],e,f),m(b[d],e,f),e.beginPath(),i=1;while(qb){j=f["p"+i];if(j===tb)break;j=new c(j),j.type==="line"?ab(b[d],e,f,j):j.type==="quadratic"?bb(b[d],e,f,j):j.type==="bezier"?cb(b[d],e,f,j):j.type==="vector"?fb(b[d],e,f,j):j.type==="arc"&&Y(b[d],e,f,j),i+=1}R(b[d],e,f),p(b[d],e,f)}}}return b},a.fn.drawText=function dc(b){var d=this,e,f,h,i,j,k,l,n,p,r=500,s,t,u,v,w;for(f=0;f<d.length;f+=1){e=a(d[f]),h=g(d[f]);if(h){i=new c(b),j=F(d[f],i,b,dc);if(i.visible){h.textBaseline=i.baseline,h.textAlign=i.align,gb(d[f],h,i),i.maxWidth!==sb?k=ib(h,i):k=i.text.toString().split("\n"),hb(d[f],h,i,k),j&&(j.width=i.width,j.height=i.height),q(d[f],h,i,i.width,i.height),m(d[f],h,i),v=i.x,i.align==="left"?i.respectAlign?i.x+=i.width/2:v-=i.width/2:i.align==="right"&&(i.respectAlign?i.x-=i.width/2:v+=i.width/2);if(i.radius){p=pb(i.fontSize),i.letterSpacing===sb&&(i.letterSpacing=p/r);for(n=0;n<k.length;n+=1){h.save(),h.translate(i.x,i.y),l=k[n],s=l.length,h.rotate(-(Ab*i.letterSpacing*(s-1))/2);for(u=0;u<s;u+=1)t=l[u],u!==0&&h.rotate(Ab*i.letterSpacing),h.save(),h.translate(0,-i.radius),h.fillText(t,0,0),h.restore();i.radius-=p,i.letterSpacing+=p/(r*2*Ab),h.restore()}}else for(n=0;n<k.length;n+=1)l=k[n],w=i.y+n*i.height/k.length-(k.length-1)*i.height/k.length/2,h.shadowColor=i.shadowColor,h.fillText(l,v,w),i.fillStyle!=="transparent"&&(h.shadowColor="transparent"),i.strokeWidth!==0&&h.strokeText(l,v,w);w=0,i.baseline==="top"?w+=i.height/2:i.baseline==="bottom"&&(w-=i.height/2),i._event&&(h.beginPath(),h.rect(i.x-i.width/2,i.y-i.height/2+w,i.width,i.height),R(d[f],h,i),h.closePath()),o(h,i)}}}return Jb.propCache=i,d},a.fn.measureText=function(a){var b=this,d,e,f;e=b.getLayer(a);if(!e||e&&!e._layer)e=new c(a);return d=g(b[0]),d&&(gb(b[0],d,e),f=ib(d,e),hb(b[0],d,e,f)),e},a.fn.drawImage=function ec(b){function d(a,b,c,d,e){d.width===sb&&d.sWidth===sb&&(d.width=d.sWidth=s.width),d.height===sb&&d.sHeight===sb&&(d.height=d.sHeight=s.height),e&&(e.width=d.width,e.height=d.height),d.sWidth!==sb&&d.sHeight!==sb&&d.sx!==sb&&d.sy!==sb?(d.width===sb&&(d.width=d.sWidth),d.height===sb&&(d.height=d.sHeight),d.cropFromCenter&&(d.sx+=d.sWidth/2,d.sy+=d.sHeight/2),d.sy-d.sHeight/2<0&&(d.sy=d.sHeight/2),d.sy+d.sHeight/2>s.height&&(d.sy=s.height-d.sHeight/2),d.sx-d.sWidth/2<0&&(d.sx=d.sWidth/2),d.sx+d.sWidth/2>s.width&&(d.sx=s.width-d.sWidth/2),q(a,b,d,d.width,d.height),m(a,b,d),b.drawImage(s,d.sx-d.sWidth/2,d.sy-d.sHeight/2,d.sWidth,d.sHeight,d.x-d.width/2,d.y-d.height/2,d.width,d.height)):(q(a,b,d,d.width,d.height),b.drawImage(s,d.x-d.width/2,d.y-d.height/2,d.width,d.height)),b.beginPath(),b.rect(d.x-d.width/2,d.y-d.height/2,d.width,d.height),R(a,b,d),b.closePath(),o(b,d),n(b,c,d)}function e(b,c,e,f,g){return function(){var h=a(b);d(b,c,e,f,g),f.layer?E(h,e,g,"load"):f.load&&f.load.call(h[0],g),f.layer&&(g._masks=e.transforms.masks.slice(0),f._next&&h.drawLayers({clear:rb,resetFire:qb,index:f._next}))}}var f=this,h,i,j,k,l,p,s,t,u,v=Jb.imageCache;for(i=0;i<f.length;i+=1)h=f[i],j=g(f[i]),j&&(k=r(f[i]),l=new c(b),p=F(f[i],l,b,ec),l.visible&&(u=l.source,t=u.getContext,u.src||t?s=u:u&&(v[u]&&v[u].complete?s=v[u]:(s=new kb,u.match(/^data:/i)||(s.crossOrigin=l.crossOrigin),s.src=u,v[u]=s)),s&&(s.complete||t?e(h,j,k,l,p)():(s.onload=e(h,j,k,l,p),s.src=s.src))));return f},a.fn.createPattern=function(b){function d(){k=f.createPattern(i,h.repeat),h.load&&h.load.call(e[0],k)}var e=this,f,h,i,j,k,l;return f=g(e[0]),f?(h=new c(b),l=h.source,yb(l)?(i=a("<canvas />")[0],i.width=h.width,i.height=h.height,j=g(i),l.call(i,j),d()):(j=l.getContext,l.src||j?i=l:(i=new kb,l.match(/^data:/i)||(i.crossOrigin=h.crossOrigin),i.src=l),i.complete||j?d():(i.onload=d(),i.src=i.src))):k=sb,k},a.fn.createGradient=function(a){var b=this,d,e,f,h=[],i,j,k,l,m,n,o;e=new c(a),d=g(b[0]);if(d){e.x1=e.x1||0,e.y1=e.y1||0,e.x2=e.x2||0,e.y2=e.y2||0,e.r1!==sb&&e.r2!==sb?f=d.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2):f=d.createLinearGradient(e.x1,e.y1,e.x2,e.y2);for(l=1;e["c"+l]!==tb;l+=1)e["s"+l]!==tb?h.push(e["s"+l]):h.push(sb);i=h.length,h[0]===sb&&(h[0]=0),h[i-1]===sb&&(h[i-1]=1);for(l=0;l<i;l+=1){if(h[l]!==sb){n=1,o=0,j=h[l];for(m=l+1;m<i;m+=1){if(h[m]!==sb){k=h[m];break}n+=1}j>k&&(h[m]=h[l])}else h[l]===sb&&(o+=1,h[l]=j+o*((k-j)/n));f.addColorStop(h[l],e["c"+(l+1)])}}else f=sb;return f},a.fn.setPixels=function fc(a){var b=this,d,e,f,h,i,j,k,l,m,n;for(e=0;e<b.length;e+=1){d=b[e],f=g(d);if(f){h=new c(a),i=F(d,h,a,fc),q(b[e],f,h,h.width,h.height);if(h.width===sb||h.height===sb)h.width=d.width,h.height=d.height,h.x=h.width/2,h.y=h.height/2;if(h.width!==0&&h.height!==0){k=f.getImageData(h.x-h.width/2,h.y-h.height/2,h.width,h.height),l=k.data,n=l.length;if(h.each)for(m=0;m<n;m+=4)j={r:l[m],g:l[m+1],b:l[m+2],a:l[m+3]},h.each.call(d,j,h),l[m]=j.r,l[m+1]=j.g,l[m+2]=j.b,l[m+3]=j.a;f.putImageData(k,h.x-h.width/2,h.y-h.height/2),f.restore()}}}return b},a.fn.getCanvasImage=function(a,b){var c=this,d,e=sb;return c.length!==0&&(d=c[0],d.toDataURL&&(b===tb&&(b=1),e=d.toDataURL("image/"+a,b))),e},a.fn.detectPixelRatio=function(c){var d=this,e,f,h,i,j,k,l,m,n,o;for(h=0;h<d.length;h+=1)f=d[h],e=a(d[h]),i=g(f),o=r(d[h]),o.scaled||(j=b.devicePixelRatio||1,k=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,l=j/k,l!==1&&(m=f.width,n=f.height,f.width=m*l,f.height=n*l,f.style.width=m+"px",f.style.height=n+"px",i.scale(l,l)),o.pixelRatio=l,o.scaled=qb,c&&c.call(f,l));return d},Nb.clearCache=function(){var a;for(a in Jb)Jb.hasOwnProperty(a)&&(Jb[a]={})},a.support.canvas=a("<canvas />")[0].getContext!==tb,vb(Nb,{defaults:ub,setGlobalProps:m,transformShape:q,detectEvents:R,closePath:p,setCanvasFont:gb,measureText:hb}),a.jCanvas=Nb,a.jCanvasObject=c}),function(a){typeof define=="function"&&define.amd!=undefined?define("jquery.eraser",["jquery","tomLib"],a):a(jQuery,!0)}(function(b,c){function d(a,b){var c=0;for(var d=0;d<a.width;d+=1)for(var e=0;e<a.height;e+=b.density)a.data[d*a.width*4+e*4+3]>0&&c++;return c}if(c===!0)var e=window.tomLib;var f=function(a,c){for(var d in c)this[d]=c[d];this.element=a,this.customCanvas?this.canvas=this.customCanvas:b(a).is("canvas")?this.canvas=a:this.canvas=b(a).find("canvas.eraser")[0],this.canvas==undefined&&(this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.canvas.style.zIndex=f._zIndex++,this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.id="fingerEraser"+f.ID++,this.canvas.className="eraser"),this.customCanvas||(this.canvas.width=this.container.clientWidth,this.canvas.height=this.container.clientHeight),this.container?(this.viewHeight=this.container.clientHeight,this.viewWidth=this.container.clientWidth):(this.viewHeight=this.canvas.width,this.viewWidth=this.canvas.height);if(this.canvas.tagName!="CANVAS"&&!typeof this.canvas.getContext=="function"){console.log("浏览器不支持canvas或者传入了错误的canvas对象");return}this.ctx=this.canvas.getContext("2d")};f._zIndex=8888,f.ID=0,f.DEFAULTS={container:document.body,bindContainer:!1,customCanvas:!1,bgImage:null,bgColor:null,interval:100,scaleCanvas:1,noneedCalc:null,checkPng:!1,deviceRatio:window.devicePixelRatio||1,namespace:".eraser",alphaNoZeroNum:0,beforeInit:function(){console.log("初始化开始")},radius:30,density:1,percent:.5,success:function(){console.log("请添加回调函数")},clipMethod:"tapClip"},f.prototype.init=function(){var a=this,c;this.ctx.globalCompositeOperation="source-over",this.isStop=!1,this.bgColor&&(this.ctx.save(),this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore());if(this.imgList){c=new e.DeferredList(this.imgList.length);var f=[],g;for(var h=0,i=this.imgList.length;h<i;h++)(function(b){g=new Image,g.onload=function(){c.dealItem(b)},g.src=a.imgList[b].imgSrc,f.push(g),c.getItem(b).addCallbacks(function(){a.addImage(f[b],a.imgList[b].bgPos,a.imgList[b].bgScale,a.imgList[b].isCover)})})(h)}this.beforeInit(),this.checkPng&&(this.alphaNoZeroNum=d(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this)),b(document).off(this.namespace);if(this.ctxStyle)for(var j in this.ctxStyle)this.ctx[j]=this.ctxStyle[j];setTimeout(function(){a[a.clipMethod]()},100)},f.prototype.addImage=function(a,b,c,d){var e=1,f=0,g=c||1;a!=null&&(b!=undefined?(b={top:b.top||0,left:b.left||0},b.left=="center"&&(b.left=(this.viewWidth-a.width*g/this.deviceRatio)/2),b.top=="center"&&(b.top=(this.viewHeight-a.height*g/this.deviceRatio)/2),this.ctx.drawImage(a,0,0,a.width,a.height,b.left,b.top,a.width/this.deviceRatio*g,a.height/this.deviceRatio*g)):d==1?this.ctx.drawImage(a,0,0,this.viewWidth,this.viewHeight):a.width/a.height>this.canvas.width/this.canvas.height?(e=a.height/this.viewHeight,f=Math.abs((a.width-this.viewWidth*e)/2),this.ctx.drawImage(a,f,0,a.width-2*f,a.height,0,0,this.viewWidth,this.viewHeight)):a.width/a.height<this.canvas.width/this.canvas.height?(e=a.width/this.viewWidth,f=Math.abs((a.height-this.viewHeight*e)/2),this.ctx.drawImage(a,0,f,a.width,a.height-2*f,0,0,this.viewWidth,this.viewHeight)):this.ctx.drawImage(a,0,0,this.viewWidth,this.viewHeight))},f.prototype.stop=function(){this.isStop=!0},f.prototype.start=function(){this.isStop=!1},f.prototype.tapClip=function(){function a(a){if(!p||h.isStop)return;clearTimeout(k),a.preventDefault(),a=a.originalEvent;var b=c?a.targetTouches[0].clientX-q.left:a.clientX-(q.left-l.width/2*(h.scaleCanvas-1)),d=c?a.targetTouches[0].clientY-q.top:a.clientY-(q.top-l.height/2*(h.scaleCanvas-1));b/=h.scaleCanvas,d/=h.scaleCanvas,o.beginPath(),o.moveTo(i,j),o.lineTo(b,d),o.stroke(),o.closePath(),i=b,j=d}var c="ontouchstart"in window?!0:!1,e="touchstart mousedown",f="touchmove mousemove",g="touchend mouseup",h=this,i,j,k,l=h.canvas,m=h.namespace,n=!1,o=h.ctx,p=!1,q,r=b(l).prop("id"),s=this.bindContainer?b(this.container):"#"+r;o.lineCap="round",o.lineJoin="round",o.lineWidth=h.radius*2,b(document).delegate(s,e,function(a){clearTimeout(k),o.save();if(h.isStop)return;a=a.originalEvent,p=!0;if(h.every||!n&&h.type!="draw")o.globalCompositeOperation="destination-out",n=!0;q=l.getBoundingClientRect(),i=c?a.targetTouches[0].clientX-q.left:a.clientX-(q.left-l.width/2*(h.scaleCanvas-1)),j=c?a.targetTouches[0].clientY-q.top:a.clientY-(q.top-l.height/2*(h.scaleCanvas-1)),i/=h.scaleCanvas,j/=h.scaleCanvas}),b(document).delegate(s,f,a),b(document).delegate(s,g,function(){if(!p||h.isStop)return;p=!1,h.noneedCalc||(k=setTimeout(function(){var a=o.getImageData(0,0,l.width,l.height),b=d(a,h),c=a.width*a.height;h.checkPng&&(c=h.alphaNoZeroNum);var e=b/(c/(h.density*h.density));e<1-h.percent?h.success.call(h,l,o):console.log("剩余非空白区域"+e)},h.interval)),h.touchEndCb&&h.touchEndCb.call(h),o.restore()})},f.prototype.otherClip=function(){function c(b){b.preventDefault(),x2=d?b.targetTouches[0].pageX:b.clientX-l.offsetLeft,y2=d?b.targetTouches[0].pageY:b.clientY-l.offsetTop;var c=a*Math.sin(Math.atan((y2-j)/(x2-i))),e=a*Math.cos(Math.atan((y2-j)/(x2-i))),f=i+c,g=j-e,k=i-c,n=j+e,o=x2+c,p=y2-e,q=x2-c,r=y2+e;m.save(),m.beginPath(),m.arc(x2,y2,h.radius,0,2*Math.PI),m.clip(),m.clearRect(0,0,l.width,l.height),m.restore(),m.save(),m.beginPath(),m.moveTo(f,g),m.lineTo(o,p),m.lineTo(q,r),m.lineTo(k,n),m.closePath(),m.clip(),m.clearRect(0,0,l.width,l.height),m.restore(),i=x2,j=y2}var d="ontouchstart"in window,e=d?"touchstart":"mousedown",f=d?"touchmove":"mousemove",g=d?"touchend":"mouseup",h=this,i,j,k,l=h.canvas,m=h.ctx;b(l).on(e,function(a){clearTimeout(k),a.preventDefault(),a=a.originalEvent,i=d?a.targetTouches[0].pageX:a.clientX-l.offsetLeft,j=d?a.targetTouches[0].pageY:a.clientY-l.offsetTop,m.save(),m.beginPath(),m.arc(i,j,h.radius,0,2*Math.PI),m.clip(),m.clearRect(0,0,l.width,l.height),m.restore()}),b(l).on(f,c),b(l).on(g,function(){h.noneedCalc&&setTimeout(function(){m.fillStyle="white",m.fillRect(0,0,1,1),m.fillStyle="black",m.fillRect(1,1,2,2);var a=m.getImageData(0,0,l.width,l.height),b;b/(a.width*a.height/(h.density*h.density))<h.percent&&h.success.call(h,l,m)},h.interval)})},b.fn.eraser=function(a,c){return this.each(function(){var d=b(this),e=b(this).data("style.eraser"),g=b.extend({},f.DEFAULTS,typeof a=="object"&&a);e||d.data("style.eraser",e=new f(this,g));var h=typeof a=="string"?a:"init";h&&e[h](c)})},b.fn.eraser.Constructor=f;var g=b.fn.eraser;return b.fn.eraser.noConflict=function(){return b.fn.eraser=g,this},b}),!function(a){"function"==typeof define&&define.amd?define("slider",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(){var a=document.createElement("input");return a.setAttribute("type","range"),"text"!==a.type}function c(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function d(a,b){return b=b||100,function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c),a.debouncing=!0}return clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},b),a.lastReturnVal}}function e(a){return a&&(0===a.offsetWidth||0===a.offsetHeight||a.open===!1)}function f(a){for(var b=[],c=a.parentNode;e(c);)b.push(c),c=c.parentNode;return b}function g(a,b){function c(a){"undefined"!=typeof a.open&&(a.open=a.open?!1:!0)}var d=f(a),e=d.length,g=[],h=a[b];if(e){for(var i=0;e>i;i++)g[i]=d[i].style.cssText,d[i].style.display="block",d[i].style.height="0",d[i].style.overflow="hidden",d[i].style.visibility="hidden",c(d[i]);h=a[b];for(var j=0;e>j;j++)d[j].style.cssText=g[j],c(d[j])}return h}function h(a,b){var c=parseFloat(a);return Number.isNaN(c)?b:c}function i(b,e){if(this.$window=a(window),this.$document=a(document),this.$element=a(b),this.options=a.extend({},m,e),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&l)return!1;this.identifier="js-"+j+"-"+k++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var f=this;this.$window.on("resize."+this.identifier,d(function(){c(function(){f.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(a,b){if(!b||b.origin!==f.identifier){var c=a.target.value,d=f.getPositionFromValue(c);f.setPosition(d)}})}Number.isNaN=Number.isNaN||function(a){return"number"==typeof a&&a!==a};var j="rangeslider",k=0,l=b(),m={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};i.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},i.prototype.update=function(a){a=a||!1,a&&(this.min=h(this.$element[0].getAttribute("min"),0),this.max=h(this.$element[0].getAttribute("max"),100),this.value=h(this.$element[0].value,this.min+(this.max-this.min)/2),this.step=h(this.$element[0].getAttribute("step"),1)),this.handleWidth=g(this.$handle[0],"offsetWidth"),this.rangeWidth=g(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,!1)},i.prototype.handleDown=function(a){if(a.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var b=this.getRelativePosition(a),c=this.$range[0].getBoundingClientRect().left,d=this.getPositionFromNode(this.$handle[0])-c;this.setPosition(b-this.grabX),b>=d&&b<d+this.handleWidth&&(this.grabX=b-d)}},i.prototype.handleMove=function(a){a.preventDefault();var b=this.getRelativePosition(a);this.setPosition(b-this.grabX)},i.prototype.handleEnd=function(a){a.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},i.prototype.cap=function(a,b,c){return b>a?b:a>c?c:a},i.prototype.setPosition=function(a,b){var c,d;c=this.getValueFromPosition(this.cap(a,0,this.maxHandleX)),d=this.getPositionFromValue(c),this.$fill[0].style.width=d+this.grabX+"px",this.$handle[0].style.left=d+"px",this.setValue(c),this.position=d,this.value=c,this.onSlide&&"function"==typeof this.onSlide&&"undefined"==typeof b&&this.onSlide(d,c)},i.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b},i.prototype.getRelativePosition=function(a){var b=this.$range[0].getBoundingClientRect().left,c=0;return"undefined"!=typeof a.pageX?c=a.pageX:"undefined"!=typeof a.originalEvent.clientX?c=a.originalEvent.clientX:a.originalEvent.touches&&a.originalEvent.touches[0]&&"undefined"!=typeof a.originalEvent.touches[0].clientX?c=a.originalEvent.touches[0].clientX:a.currentPoint&&"undefined"!=typeof a.currentPoint.x&&(c=a.currentPoint.x),c-b},i.prototype.getPositionFromValue=function(a){var b,c;return b=(a-this.min)/(this.max-this.min),c=b*this.maxHandleX},i.prototype.getValueFromPosition=function(a){var b,c;return b=a/(this.maxHandleX||1),c=this.step*Math.round(b*(this.max-this.min)/this.step)+this.min,Number(c.toFixed(this.toFixed))},i.prototype.setValue=function(a){a!==this.value&&this.$element.val(a).trigger("input",{origin:this.identifier})},i.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+j),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},a.fn[j]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data("plugin_"+j);e||d.data("plugin_"+j,e=new i(this,b)),"string"==typeof b&&e[b].apply(e,c)})}});var APP=APP||{},jquery;require(["jquery","tomLib","iscroll-lite","fastclick","hammer","hammer.fake","hammer.showtouch","tomPlugin","Caman","jcanvas","jquery.eraser","slider"],function(a,b,c,d){function g(){var a=window.innerWidth,b=window.innerHeight,c;a/b>=320/504?c=b/1008:c=a/640,console.log(c),document.getElementById("eqMobileViewport").setAttribute("content","width=640,initial-scale="+c+",maximum-scale="+c+",user-scalable=no")}d.attach(document.body),jquery=a;var e=window.innerHeight,f=a(".loading"),h=APP;a.extend(h,{photoBg:a("#photoBg")[0],defaultPhotoSrc:"img/emoji_photo_0.png",filterPhoto:null,pWidth:a("#photoFrame").width(),pHeight:a("#photoFrame").width(),initX:0,initY:0,transform:b.prefixStyle("transform"),emoji:{background:null,photo:null,photoWithErase:null},btns:{$nextStepBtn:a("a.next-step"),$backStepBtn:a("a.back-step"),$resetEraser:a("#resetEraser")},stepLock:!0,steps:a("[data-step]"),currentStep:"choose-emoji",currentStepDom:a("[data-step=choose-emoji]"),photoParam:{scale:1,x:0,y:0},textParam:{scale:1,x:null,y:0,rotate:0},photoArr:{uploadSrc:"",dragSrc:"",filterSrc:""},textStep:"",$textDefaultStep:a("[data-text-step=default]"),$hiddenOnInputDom:a(".op-box,.op-bar"),$emojiTextArea:a("#emojiTextArea"),$emojiTextList:a("#emoji-text-list"),$emojiList:a("#emoji-tpl-list"),$eraserCanvas:a("#eraserCanvas"),$resultCanvas:a("#resultCanvas"),$resultImg:a("#resultImg"),$photoFrame:a("#photoFrame"),$photoCanvas:a("#photoCanvas"),$filterCanvas:a("#filterCanvas"),$emojiCover:a("#emojiCover"),$emojiBg:a("#emojiBg"),$photoInput:a("#photoInput"),$uploadMask:a(".photo-input-box"),photoCrop:null,currentLayer:"photo",Eraser:null,$contrast:a("#contrast"),$exposure:a("#exposure"),LOCK_PAGE:!1,$backFilterBtn:a("#backFilterBtn"),$beginEraser:a("#beginEraser"),$backUserMoveBtn:a("#backUserMoveBtn"),eraserRadius:30,stopUserMove:function(){h.$photoFrame.hammer("stop"),h.stopMove=!0},startUserMove:function(){h.$photoFrame.hammer("start"),h.$photoCanvas.removeLayer("filter").removeLayer("mask").drawLayers(),h.stopMove=!1},startErase:function(a){h.stopUserMove(),h.emoji.photo=h.$photoCanvas[0].toDataURL("image/png"),h.eraseCtx.lineWidth=h.eraserRadius,h.eraseCtx.globalCompositeOperation="source-over";var b=new Image;h.eraseCtx.clearRect(0,0,h.pWidth,h.pHeight),b.onload=function(){h.$photoCanvas.hide(),h.$eraserCanvas.show(),h.eraseCtx.drawImage(b,0,0),h.$eraserCanvas.eraser("start"),a&&a()},b.src=h.emoji.photo},resetErase:function(){drawPhoto(0,0,1,null,function(){h.$photoCanvas.show(),h.$eraserCanvas.hide()})},resetPhotoConfig:function(){h.photoParam.x=0,h.photoParam.y=0,h.photoParam.scale=1,h.photoParam.rotate=0},scroll:{emojiListScroll:null,emojiTextScroll:null}}),a(function(){function d(){h.btns.$resetEraser.on("click",function(){h.startErase()}),h.btns.$nextStepBtn.on("click",function(){if(h.isBusyWork)return;var b;if(a(this).is("[disabled]"))return;if(r()){s();return}switch(h.currentStep){case"choose-emoji":b=new i("加载滤镜效果",q.bind(null,"filter-emoji")),o(h.$photoCanvas[0].toDataURL("image/png"),b);break;case"filter-emoji":b=new i("添加橡皮�?"),h.startErase(function(){q("erase-emoji"),b.resolve()});break;case"erase-emoji":h.emoji.photoWithErase=h.$eraserCanvas[0].toDataURL("image/png"),q("text-emoji"),h.stepLock=!0,h.$eraserCanvas.eraser("stop");break;case"text-emoji":q("confirm-emoji"),setcookie("emojiModalTip","yes"),h.textStep=="move-text"?(a(document.body).addClass("result"),h.$resultImg.show(),h.$resultImg.attr("src",h.$resultCanvas[0].toDataURL("image/png")),q("confirm-emoji")):(b=new i("生成�?终效�?",q.bind(null,"confirm-emoji")),j(function(){b.resolve(),a(document.body).addClass("result"),h.$resultImg.show(),h.$resultImg.attr("src",h.$resultCanvas[0].toDataURL("image/png")),h.$resultImg.show()}));break;case"confirm-emoji":sendFile({imageData:h.$resultCanvas[0].toDataURL("image/png"),filetype:"png"})}}),h.btns.$backStepBtn.on("click",function(){if(h.isBusyWork)return;if(a(this).is("[disabled]"))return;h.stepLock=!1;switch(h.currentStep){case"choose-emoji":a(this).attr("disabled",!0),h.$photoCanvas.removeLayers().drawLayers(),h.emoji.photo="";break;case"filter-emoji":q("choose-emoji"),l(h.initX,h.initY,h.scale,null,function(){h.$photoCanvas.animateLayer(h.currentLayer,h.photoParam,0),h.startUserMove()});break;case"erase-emoji":q("filter-emoji"),h.$eraserCanvas.eraser("stop"),h.$photoCanvas.show(),h.$eraserCanvas.hide();break;case"text-emoji":h.$textDefaultStep.show().siblings("[data-text-step]").hide(),h.$resultCanvas.hide(),h.$photoCanvas.show(),h.textStep="default",h.textParam={scale:1,x:null,y:0,rotate:0},h.$resultCanvas.hammer("reset"),q("erase-emoji"),h.startErase();break;case"confirm-emoji":a(document.body).removeClass("result"),h.$resultImg.hide(),q("text-emoji")}}),h.scroll.emojiListScroll=new c("#emoji-tpl-list",{preventDefault:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)/},scrollbars:!0,mouseWheel:!0,scrollX:!0,scrollY:!1,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0}),h.scroll.emojiTextScroll=new c("#emoji-text-list",{preventDefault:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)/},scrollbars:!0,mouseWheel:!0,scrollX:!0,scrollY:!1,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0}),h.$photoInput.on("click",function(a){h.emoji.mask||a.preventDefault()}),h.$uploadMask.on("click",function(){h.emoji.mask||s(h.$emojiList.find(".step-tip"))}),h.$emojiList.delegate("img","click",function(){h.$photoInput.removeAttr("disabled"),h.$emojiList.find(".step-tip").addClass("ok"),h.emoji.mask=this.src.replace("thumb","mask"),h.$emojiCover.css("background","url("+h.emoji.mask+")"),a(this).parent("li").data("bg")?(h.emoji.background=this.src.replace("thumb","bg"),h.$emojiBg.css("background","url("+h.emoji.background+")")):(h.$emojiBg.css("background",""),h.emoji.background=null),a(this).parent("li").data("photo")?h.photoBg.src=this.src.replace("thumb","photo"):h.photoBg.src=h.defaultPhotoSrc}),h.$emojiList.find("li:eq(0) img").trigger("click"),h.$emojiTextList.delegate(".item","click",function(){var b=a.trim(a(this).find(".v-table-cell").html().replace("<br>","\n"));h.$emojiTextArea.val(b);var c=t(h.$emojiTextArea,2),d=a(this).data("oldVal");c.limit?a(this).val(d):c.lineNum==2?h.$emojiTextArea.data("oldVal",b).css("line-height","60px"):h.$emojiTextArea.css("line-height",""),h.$emojiTextArea.trigger("change")}),h.$photoFrame.hammer({gestureCb:function(b){if(h.stopMove)return;b.x!=null&&(b.x+=h.initX,b.y+=h.initY),a.extend(h.photoParam,b),h.$photoCanvas.animateLayer(h.currentLayer,h.photoParam,0)}}),h.$resultCanvas.hammer({gestureCb:function(b){b.x!=null&&(b.x+=h.textX,b.y+=h.textY),a.extend(h.textParam,b),h.$resultCanvas.animateLayer("text",h.textParam,0)}}),a(document).one("moveInput",function(){h.$photoInput.appendTo(h.currentStepDom.find(".back-step"))}),h.photoCrop=b.cropImage({bindFile:a("#photoInput"),cropWidth:h.pWidth/window.devicePixelRatio,cropHeight:h.pHeight/window.devicePixelRatio,oninit:function(){},onLoad:function(b){q("drag-emoji"),h.$uploadMask.hide().addClass("wait"),a(document).trigger("moveInput"),h.btns.$backStepBtn.removeAttr("disabled"),h.resetPhotoConfig(),h.emoji.photo=b.originSrc;var c=new i("初始化照�?");h.photoParam.width=b.dWidth,h.photoParam.height=b.dHeight,l(b.x,b.y,null,null,function(){c.resolve()})}}),a(".radio-box").on("click",function(){var b=new i("调整滤镜效果");a(this).addClass("in").siblings().removeClass("in"),h.$contrast.val(a(this).data("val")),p(b)}),a(".adjust-input").on("change",p),a("#filterBtn").on("click",function(){o(h.$photoCanvas[0].toDataURL("image/png"))}),a("[data-switch]").on("click",function(){var b=a(this).data("switch"),c=a("[data-text-step="+b+"]");if(b==h.textStep)return;c.show(),c.siblings("[data-text-step]").hide(),b=="default"?(h.$resultCanvas.hide(),h.$eraserCanvas.show(),h.textStep="default",h.textParam={scale:1,x:null,y:0,rotate:0},h.$resultCanvas.hammer("reset")):(work=new i("拖拽文字"),h.textStep="move-text",j(function(){work.resolve(),h.$resultCanvas.show(),h.$eraserCanvas.hide()}))}),h.$eraserCanvas.eraser({scaleCanvas:h.photoScale,radius:15,container:h.$photoFrame,bindContainer:!0,customCanvas:h.$eraserCanvas[0],noneedCalc:!0,every:!0,touchEndCb:function(){}}).eraser("stop"),h.$backFilterBtn.on("click",function(){l(0,0,1)}),h.$beginEraser.on("click",function(){h.startErase()}),h.$backUserMoveBtn.on("click",function(){h.startUserMove()}),a(document).on("change","input[type=range]",function(){a(this).siblings(".info-line").find(".output").html(a(this).val()),a(this).is("#eraserRange")&&(h.$eraserCanvas[0].getContext("2d").lineWidth=a(this).val())}),a(document).on("input","#emojiTextArea",function(){var b=t(this,2),c=a(this).data("oldVal");b.limit?a(this).val(c):b.lineNum==2?a(this).data("oldVal",a(this).val()).css("line-height","60px"):a(this).css("line-height","")}),h.$emojiTextArea.on("focus",function(){h.$hiddenOnInputDom.hide()}).on("blur",function(){h.$hiddenOnInputDom.show()}).on("change",function(){a(this).val()==""?a("[data-switch=move-text]").hide():a("[data-switch=move-text]").show()}),function(){a(".app-wrap").addClass("in"),a(".loading").addClass("hidden").removeClass("first");var b=new Image;h.$emojiList.find("img").each(function(){var c=this.src.replace("thumb","mask"),d=this.src.replace("thumb","bg"),e=this.src.replace("thumb","photo");b.src=c,a(this).parent("li").data("bg")&&(b.src=d),a(this).parent("li").data("photo")&&(b.src=e)}),b.src=h.defaultPhotoSrc,b=null;for(var c in h.scroll)h.scroll[c].refresh()}()}function i(b,c,d){h.isBusyWork=!0;var e=a.Deferred(),b=b||"";return f.removeClass("hidden"),e.done(function(a){h.isBusyWork=!1,typeof c=="function"&&c(a),f.addClass("hidden")}),e.fail(function(a){typeof d=="function"?d(a):alert("出错咯，再试�?次吧!"),h.isBusyWork=!1}),e}function j(a,b){h.$resultCanvas.removeLayers()[0].getContext("2d").clearRect(0,0,h.pWidth,h.pHeight),h.emoji.background?h.$resultCanvas.drawImage({source:h.emoji.background,layer:!0,name:"photoBg",x:0,y:0,width:h.pWidth,height:h.pHeight,fromCenter:!1,load:function(){k(a)}}):k(a)}function k(a){var b=!1,c=!1;h.$resultCanvas.drawImage({source:h.emoji.photoWithErase,layer:!0,name:"photo",x:0,y:0,width:h.pWidth,height:h.pHeight,fromCenter:!1,load:function(){b==0&&(b=!0,h.$resultCanvas.drawImage({source:h.emoji.mask,layer:!0,name:"photoMask",x:0,y:0,width:h.pWidth,height:h.pHeight,fromCenter:!1,load:function(){c==0&&(c=!0,h.textParam.x==null&&(h.textX=h.pWidth/2,h.textY=h.pHeight-55,h.textParam.x=h.textX,h.textParam.y=h.textY),h.$resultCanvas.drawText({text:h.emoji.text,layer:!0,name:"text",scale:h.textParam.scale,fillStyle:"#000",fontStyle:"bold",rotate:h.textParam.rotate,fromCenter:!0,fontSize:(h.emoji.textLineNum==2?.8:1)*parseInt(h.$emojiTextArea.css("font-size"))+"px",fontFamily:h.$emojiTextArea.css("font-family"),x:h.textParam.x,y:h.textParam.y,width:h.pWidth,height:120,maxWidth:h.pWidth,lineHeight:"1.2"}),a&&a())}}))}})}function l(a,b,c,d,e){h.initX=a||0,h.initY=b||0,h.scale=c||1;var f=!0;h.$photoCanvas.drawImage({source:h.emoji.photo,groups:["emojiGroup"],layer:!d,name:"photo",x:a,y:b,fromCenter:!1,width:h.photoParam.width,height:h.photoParam.height,load:function(){f&&(f=!1,e&&e())}}).restoreCanvas(),h.$photoFrame.hammer("reset")}function m(a){h.$photoCanvas.removeLayer("photo").removeLayer("filter").drawImage({source:h.filterSrc,groups:["emojiGroup"],layer:!0,name:"filter",x:0,y:0,fromCenter:!1,width:h.pWidth,height:h.pHeight,load:function(){typeof a=="function"&&a()}}).drawLayers().restoreCanvas()}function n(){h.$photoCanvas.drawRect({fillStyle:"#fff",x:0,y:0,layer:!0,name:"mask",groups:["emojiGroup"],width:h.pWidth*2,height:h.pHeight*2}).restoreCanvas()}function o(b,c){var d=a.Deferred();h.$filterCanvas.removeAttr("data-caman-id"),h.filterPhoto=Caman("#"+h.$filterCanvas.prop("id"),b,function(){console.time("t"),d.resolve()}),d.done(function(){console.timeEnd("t"),p(c)})}function p(a){h.filterPhoto&&(h.stopUserMove(),h.filterPhoto.revert(),h.filterPhoto.brightness(5).saturation(-100).contrast(parseFloat(h.$contrast.val())).exposure(parseFloat(h.$exposure.val())).transparent(180).render(function(){h.filterSrc=h.$filterCanvas[0].toDataURL("image/png"),m(function(){h.$photoCanvas.animateLayer("filter",{},0),a&&typeof a.resolve=="function"&&a.resolve()})}))}function q(b){var c;if(b!="drag-emoji"){h.currentStepDom.hide(),h.currentStepDom.removeClass("in"),h.currentStepDom=h.steps.filter("[data-step="+b+"]:not(.wait)").show(),h.currentStep=b,b!="choose-emoji"&&h.currentStepDom.addClass("in");for(var d in h.scroll)h.scroll[d].refresh()}else h.currentStepDom.addClass("in");needTipStep=h.currentStepDom.filter(".in[data-modal]:not(.tiped)"),needTipStep.length&&!getcookie("emojiModalTip")&&(a(needTipStep.data("modal")).addClass("in"),needTipStep.addClass("tiped"));switch(b){case"choose-emoji":c="选择表情";break;case"drag-emoji":c="调整位置";break;case"filter-emoji":c=" 滤镜调节";break;case"erase-emoji":c="把多余的擦掉";break;case"text-emoji":c="添加文字";break;case"confirm-emoji":c="确认提交"}document.title=c}function r(){switch(h.currentStep){case"choose-emoji":h.emoji.photo&&h.emoji.mask&&(h.stepLock=!1);break;case"text-emoji":h.emoji.text&&(h.stepLock=!1)}return h.stepLock}function s(c){c=c||[],c.length==0&&h.currentStepDom.each(function(){c=a.makeArray(c,a(this).find(".step-tip:not(.ok)"))});var d=0;c.each(function(c,e){b.animateGroup({group:a(e),waitTime:d,frameClass:["tip-now"],duration:1e3,loopTimes:1}),d+=700})}function t(b,c){var d=a(b).val(),e=a(b).css("line-height"),f=a(b).width(),g=a(b).css("font-size"),i=a(b).css("font-family"),j=a("<div style='position: absolute;height:0;width: 0;'><div></div></div>"),k=1,l="",m;j.find("div").css({position:"relative",opacity:0,"font-size":g,"font-family":i,"word-break":"break-all","line-height":e,width:f}),j.appendTo(a("body")),m=j.find("div");for(var n=0,o=d.length;n<o;n++)l+=d[n],m.html(l),Math.ceil(m.height()/parseInt(e))>k&&(k+=1,l=l.replace(/(.$)/,"\n$1"));return j.remove(),h.emoji.text=l,h.emoji.textLineNum=k,{limit:k>c,lineNum:k}}g(),a(".btn-tip").on("click",function(){var b=a(this).data("modal-dom");b?b.addClass("in"):(b=a(a(this).data("modal")),b.addClass("in"),a(this).data("modal-dom",b))}),a(".modal .close").on("click",function(){a(this).parent().removeClass("in")}),Caman.Filter.register("transparent",function(a){return this.process("transparent",function(b){return b.r>a&&b.g>a&&b.b>a&&(b.a=0),b})}),h.$photoFrame.find("canvas").prop({width:h.pWidth,height:h.pWidth}),e>=504&&(h.photoScale=Math.min(600,a("#photoInnerBox").width())/400,h.$photoFrame.find(".frame-inner").css(h.transform,"scale("+h.photoScale+")").addClass("visible"),h.$uploadMask.find(".photo-input-mask").css(h.transform,"scale("+h.photoScale+")")),h.eraseCtx=h.$eraserCanvas[0].getContext("2d"),h.photoCtx=h.$photoCanvas[0].getContext("2d"),d(),a("[data-rangeslider]").rangeslider({polyfill:!1,onInit:function(){},onSlide:function(a,b){},onSlideEnd:function(a,b){}})})}),define("app",function(){})