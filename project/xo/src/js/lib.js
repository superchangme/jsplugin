function xhrRequest(){var t=null;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}}return t}function init_wx_jsapi(t,e){var i=xhrRequest();i.open("GET",jssdkURL,!1),i.onreadystatechange=function(){if(200==i.status&&4==i.readyState){var t=i.responseText,n={};n.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"];try{for(p in r=JSON.parse(t))n[p]=r[p]}catch(o){}"function"==typeof e&&e(n)}},i.send(null)}function LEvent(t){this.eventType=t,this._ll_preventDefault=!1}function LStageAlign(){throw"LStageAlign cannot be instantiated"}function LStageScaleMode(){throw"LStageScaleMode cannot be instantiated"}function trace(){if(LGlobal.traceDebug){var t,e=document.getElementById("traceObject");for(trace.arguments.length>0&&null==e&&(e=document.createElement("TEXTAREA"),e.id="traceObject",e.style.position="absolute",e.style.top=LGlobal.height+20+"px",e.style.width=LGlobal.width+"px",e.style.height="200px",document.body.appendChild(e)),t=0;t<trace.arguments.length;t++)e.value=e.value+trace.arguments[t]+"\r\n",e.scrollTop=e.scrollHeight}}function addChild(t){LGlobal.stage.addChild(t)}function removeChild(t){LGlobal.stage.removeChild(t)}function init(t,e,i,n,o,a){LGlobal.speed=t;var r=function(){LGlobal.canTouch&&LGlobal.aspectRatio==LANDSCAPE&&window.innerWidth<window.innerHeight?LGlobal.horizontalError():LGlobal.canTouch&&LGlobal.aspectRatio==PORTRAIT&&window.innerWidth>window.innerHeight?LGlobal.verticalError():setTimeout(o,100),LGlobal.startTimer=(new Date).getTime()};null!=a&&a==LEvent.INIT?(LGlobal.frameRate=setInterval(function(){LGlobal.onShow()},t),LGlobal.setCanvas(e,i,n),r()):LEvent.addEventListener(window,"load",function(){LGlobal.frameRate=setInterval(function(){LGlobal.onShow()},t),LGlobal.setCanvas(e,i,n),r()})}function base(t,e,i){var n=null,o=t.constructor.prototype,a={};"Object"==t.constructor.name&&console.warn("When you use the extends. You must make a method like 'XX.prototype.xxx=function(){}'. but not 'XX.prototype={xxx:function(){}}'."),typeof t.__ll__parent__==UNDEFINED&&(t.__ll__parent__=[],t.__ll__parent__=[]),t.__ll__parent__.push(e.prototype);for(n in o)a[n]=1;for(n in e.prototype)a[n]||(o[n]=e.prototype[n]);o.toString==Object.prototype.toString&&(o.toString=LObject.prototype.toString),e.apply(t,i)}function getTimer(){return(new Date).getTime()-LGlobal.startTimer}function getExtension(t){var e,i=/([^#?]+\.)([^.#?]+)/;return e=t.match(i),e.length>=3?e[2].toLowerCase():null}function LBlendMode(){throw"LBlendMode cannot be instantiated"}function LoadingSample2(t,e,i){base(this,LSprite,[]);var n,o=this,a=LGlobal.canvas,r="Loading...";o.backgroundColor=null==e?"#000000":e,o.graphics.drawRect(1,o.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,o.backgroundColor),null==i&&(i=LGlobal._create_loading_color()),o.color=i,o.progress=0,o.size=null==t?.2*LGlobal.height:t,n=new LTextField,n.text=r,n.size=o.size,n.color="#ffffff",n.x=(LGlobal.width-n.getWidth())/2,n.y=(LGlobal.height-o.size)/2,o.addChild(n),o.backLabel=n,n=new LTextField,n.text="***%",n.size=.3*o.size,n.color=i,n.x=(LGlobal.width-n.getWidth())/2,n.y=(LGlobal.height-o.size)/2-.4*o.size,o.addChild(n),o.progressLabel=n,n=new LTextField,n.text=r,n.size=o.size,n.color=o.color,n.x=(LGlobal.width-n.getWidth())/2,n.y=(LGlobal.height-o.size)/2,n.mask=new LGraphics,o.screenX=n.x,o.screenY=n.y,o.screenWidth=n.getWidth(),o.addChild(n),o.showLabel=n,a.shadowOffsetX=2,a.shadowOffsetY=2,a.shadowColor="blue",o.setProgress(o.progress)}function LoadingSample3(t,e,i){base(this,LSprite,[]);{var n=this;LGlobal.canvas}n.backgroundColor=null==e?"#000000":e,n.graphics.drawRect(1,n.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,n.backgroundColor),null==i&&(i=LGlobal._create_loading_color()),n.color=i,n.progress=0,n.screenWidth=.75*LGlobal.width,n.screenHeight=null==t?.1*LGlobal.height:t,n.screenHeight>5&&(n.screenHeight=5),n.screenX=(LGlobal.width-n.screenWidth)/2,n.screenY=(LGlobal.height-n.screenHeight)/2,n.back=new LSprite,n.addChild(n.back),n.label=new LTextField,n.label.color="#ffffff",n.label.weight="bolder",n.label.size=2*n.screenHeight,n.label.x=n.screenX+.5*(n.screenWidth-n.label.getWidth()),n.label.y=n.screenY-4*n.screenHeight,n.addChild(n.label),n.star=new Array,n.addEventListener(LEvent.ENTER_FRAME,n.onframe),n.setProgress(n.progress)}function LoadingSample4(t,e,i){base(this,LSprite,[]);{var n=this;LGlobal.canvas}n.backgroundColor=null==e?"#000000":e,n.graphics.drawRect(1,n.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,n.backgroundColor),null==i&&(i="#FFFFFF"),n.arc=new LSprite,n.arc.x=.5*LGlobal.width,n.arc.y=.5*LGlobal.height,n.addChild(n.arc);for(var o=0;360>o;o++)n.arc.graphics.drawArc(1+o/36,i,[0,0,50,2*Math.PI/360*o,2*Math.PI/360*(o+2)]);n.progress=0,n.label=new LTextField,n.label.color=i,n.label.weight="bolder",n.label.size=18,n.label.x=.5*LGlobal.width,n.label.y=.5*LGlobal.height-.5*n.label.getHeight(),n.addChild(n.label);var a=new LDropShadowFilter(0,0,"#FFFFFF",30);n.arc.filters=[a],n.addEventListener(LEvent.ENTER_FRAME,n.onframe),n.setProgress(n.progress)}function LoadingSample5(t,e,i){base(this,LSprite,[]);{var n=this;LGlobal.canvas}n.backgroundColor=null==e?"#000000":e,n.graphics.drawRect(1,n.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,n.backgroundColor),null==i&&(i="#FFFFFF"),n.arc=new LSprite,n.arc.x=.5*LGlobal.width,n.arc.y=.5*LGlobal.height,n.addChild(n.arc);for(var o=50,a=0;360>a;a+=30){var r=new LSprite;r.graphics.drawArc(0,i,[o,0,7,0,2*Math.PI],!0,i),r.rotate=a,r.alpha=.1+a/360,n.arc.addChild(r)}n.index=0,n.max=3,n.progress=0,n.label=new LTextField,n.label.color="#FFFFFF",n.label.weight="bolder",n.label.size=18,n.label.x=.5*LGlobal.width,n.label.y=.5*LGlobal.height-.5*n.label.getHeight(),n.addChild(n.label);var s=new LDropShadowFilter(0,0,"#FFFFFF",30);n.arc.filters=[s],n.addEventListener(LEvent.ENTER_FRAME,n.onframe),n.setProgress(n.progress)}function LoadingSample6(t,e,i){var n=this;base(n,LSprite,[]),n.progress=0,n.step=0,n.holeR=t||10,n.holeAmount=5,n.holesx=20,n.loadingBarWidth=2*n.holeR*n.holeAmount+n.holesx*(n.holeAmount-1),n.loadingBarHeight=2*n.holeR,n.progressColor=e||"#2187e7",n.filterColor=i||"#00c6ff",n.backLayer=new LSprite,n.backLayer.graphics.drawRect(0,"",[0,0,LGlobal.width,LGlobal.height],!0,"#161616"),n.addChild(n.backLayer),n.holeLayer=new LSprite,n.holeLayer.x=.5*(LGlobal.width-n.loadingBarWidth),n.holeLayer.y=.5*(LGlobal.height-n.loadingBarHeight),n.addChild(n.holeLayer),n.progressLayer=new LSprite,n.progressLayer.x=.5*(LGlobal.width-n.loadingBarWidth),n.progressLayer.y=.5*(LGlobal.height-n.loadingBarHeight),n.addChild(n.progressLayer),n._addHole()}function LoadingSample7(t,e,i){var n=this;base(n,LSprite,[]),n.progress=0,n.step=0,n.holeW=t||10,n.holeH=e||30,n.holeAmount=10,n.holesx=8,n.loadingBarWidth=n.holeW*n.holeAmount+n.holesx*(n.holeAmount-1),n.loadingBarHeight=n.holeH,n.progressColor=i||"#2187e7",n.backLayer=new LSprite,n.backLayer.graphics.drawRect(0,"",[0,0,LGlobal.width,LGlobal.height],!0,"#161616"),n.addChild(n.backLayer),n.holeLayer=new LSprite,n.holeLayer.x=.5*(LGlobal.width-n.loadingBarWidth),n.holeLayer.y=.5*(LGlobal.height-n.loadingBarHeight),n.addChild(n.holeLayer),n.progressLayer=new LSprite,n.progressLayer.x=.5*(LGlobal.width-n.loadingBarWidth),n.progressLayer.y=.5*(LGlobal.height-n.loadingBarHeight),n.addChild(n.progressLayer),n._addHole()}!function(t){function e(e,n){var l=e[s],h=l&&o[l];if(void 0===n)return h||i(e);if(h){if(n in h)return h[n];var c=r(n);if(c in h)return h[c]}return a.call(t(e),n)}function i(e,i,a){var l=e[s]||(e[s]=++t.uuid),h=o[l]||(o[l]=n(e));return void 0!==i&&(h[r(i)]=a),h}function n(e){var i={};return t.each(e.attributes||l,function(e,n){0==n.name.indexOf("data-")&&(i[r(n.name.replace("data-",""))]=t.zepto.deserializeValue(n.value))}),i}var o={},a=t.fn.data,r=t.camelCase,s=t.expando="Zepto"+ +new Date,l=[];t.fn.data=function(n,o){return void 0===o?t.isPlainObject(n)?this.each(function(e,o){t.each(n,function(t,e){i(o,t,e)})}):0 in this?e(this[0],n):void 0:this.each(function(){i(this,n,o)})},t.fn.removeData=function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.each(function(){var i=this[s],n=i&&o[i];n&&t.each(e||n,function(t){delete n[e?r(this):t]})})},["remove","empty"].forEach(function(e){var i=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),i.call(this)}})}(Zepto),function(t){t.Callbacks=function(e){e=t.extend({},e);var i,n,o,a,r,s,l=[],h=!e.once&&[],c=function(t){for(i=e.memory&&t,n=!0,s=a||0,a=0,r=l.length,o=!0;l&&r>s;++s)if(l[s].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}o=!1,l&&(h?h.length&&c(h.shift()):i?l.length=0:d.disable())},d={add:function(){if(l){var n=l.length,s=function(i){t.each(i,function(t,i){"function"==typeof i?e.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!=typeof i&&s(i)})};s(arguments),o?r=l.length:i&&(a=n,c(i))}return this},remove:function(){return l&&t.each(arguments,function(e,i){for(var n;(n=t.inArray(i,l,n))>-1;)l.splice(n,1),o&&(r>=n&&--r,s>=n&&--s)}),this},has:function(e){return!(!l||!(e?t.inArray(e,l)>-1:l.length))},empty:function(){return r=l.length=0,this},disable:function(){return l=h=i=void 0,this},disabled:function(){return!l},lock:function(){return h=void 0,i||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!l||n&&!h||(e=e||[],e=[t,e.slice?e.slice():e],o?h.push(e):c(e)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!n}};return d}}(Zepto),function(t){function e(i){var n=[["resolve","done",t.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",t.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",t.Callbacks({memory:1})]],o="pending",a={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var i=arguments;return e(function(e){t.each(n,function(n,o){var s=t.isFunction(i[n])&&i[n];r[o[1]](function(){var i=s&&s.apply(this,arguments);if(i&&t.isFunction(i.promise))i.promise().done(e.resolve).fail(e.reject).progress(e.notify);else{var n=this===a?e.promise():this,r=s?[i]:arguments;e[o[0]+"With"](n,r)}})}),i=null}).promise()},promise:function(e){return null!=e?t.extend(e,a):a}},r={};return t.each(n,function(t,e){var i=e[2],s=e[3];a[e[1]]=i.add,s&&i.add(function(){o=s},n[1^t][2].disable,n[2][2].lock),r[e[0]]=function(){return r[e[0]+"With"](this===r?a:this,arguments),this},r[e[0]+"With"]=i.fireWith}),a.promise(r),i&&i.call(r,r),r}var i=Array.prototype.slice;t.when=function(n){var o,a,r,s=i.call(arguments),l=s.length,h=0,c=1!==l||n&&t.isFunction(n.promise)?l:0,d=1===c?n:e(),u=function(t,e,n){return function(a){e[t]=this,n[t]=arguments.length>1?i.call(arguments):a,n===o?d.notifyWith(e,n):--c||d.resolveWith(e,n)}};if(l>1)for(o=new Array(l),a=new Array(l),r=new Array(l);l>h;++h)s[h]&&t.isFunction(s[h].promise)?s[h].promise().done(u(h,r,s)).fail(d.reject).progress(u(h,a,o)):--c;return c||d.resolveWith(r,s),d.promise()},t.Deferred=e}(Zepto),function(t,e){function i(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function n(t){return o?o+t:t.toLowerCase()}var o,a,r,s,l,h,c,d,u,p,f="",g={Webkit:"webkit",Moz:"",O:"o"},v=document.createElement("div"),m=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(g,function(t,i){return v.style[t+"TransitionProperty"]!==e?(f="-"+t.toLowerCase()+"-",o=i,!1):void 0}),a=f+"transform",y[r=f+"transition-property"]=y[s=f+"transition-duration"]=y[h=f+"transition-delay"]=y[l=f+"transition-timing-function"]=y[c=f+"animation-name"]=y[d=f+"animation-duration"]=y[p=f+"animation-delay"]=y[u=f+"animation-timing-function"]="",t.fx={off:o===e&&v.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:f,transitionEnd:n("TransitionEnd"),animationEnd:n("AnimationEnd")},t.fn.animate=function(i,n,o,a,r){return t.isFunction(n)&&(a=n,o=e,n=e),t.isFunction(o)&&(a=o,o=e),t.isPlainObject(n)&&(o=n.easing,a=n.complete,r=n.delay,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(i,n,o,a,r)},t.fn.anim=function(n,o,f,g,v){var L,b,E,x={},w="",_=this,T=t.fx.transitionEnd,S=!1;if(o===e&&(o=t.fx.speeds._default/1e3),v===e&&(v=0),t.fx.off&&(o=0),"string"==typeof n)x[c]=n,x[d]=o+"s",x[p]=v+"s",x[u]=f||"linear",T=t.fx.animationEnd;else{b=[];for(L in n)m.test(L)?w+=L+"("+n[L]+") ":(x[L]=n[L],b.push(i(L)));w&&(x[a]=w,b.push(a)),o>0&&"object"==typeof n&&(x[r]=b.join(", "),x[s]=o+"s",x[h]=v+"s",x[l]=f||"linear")}return E=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(T,E)}else t(this).unbind(T,E);S=!0,t(this).css(y),g&&g.call(this)},o>0&&(this.bind(T,E),setTimeout(function(){S||E.call(_)},1e3*(o+v)+25)),this.size()&&this.get(0).clientLeft,this.css(x),0>=o&&setTimeout(function(){_.each(function(){E.call(this)})},0),this},v=null}(Zepto),function(){"use strict";function t(e,n){function o(t,e){return function(){return t.apply(e,arguments)}}var a;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!t.notNeeded(e)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,l=0,h=r.length;h>l;l++)s[r[l]]=o(s[r[l]],s);i&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,i.hijacked||i,n):o.call(e,t,i,n)},e.addEventListener=function(t,i,n){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(e,t,i,n)}),"function"==typeof e.onclick&&(a=e.onclick,e.addEventListener("click",function(t){a(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!e,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=n&&/OS [6-7]_\d/.test(navigator.userAgent),r=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(n&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},t.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;n&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,i,a;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],n){if(a=window.getSelection(),a.rangeCount&&!a.isCollapsed)return!0;if(!o){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,r,s,l,h,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(h=t.changedTouches[0],c=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(e=this.findControl(c)){if(this.focus(c),i)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-r>100||n&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),n&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return n&&!o&&(l=c.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,n,o,a;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(r&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(a=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],a>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,i){return new t(e,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),function(t){function e(e){if(!t.isStop){var i=e.accelerationIncludingGravity;this.x=i.x,this.y=i.y,this.z=i.z,(Math.abs(this.x-this.last_x)+Math.abs(this.y-this.last_y)+Math.abs(this.z-this.last_z))/n>.5&&(this.counts++,this.callback()),this.last_x=i.x,this.last_y=i.y,this.last_z=i.z}}if(void 0===t)var t=function(){};else var t=t;var i=!1,n=50,o=!1,a=function(i){o||e.call(t,i)};t.init=function(){this.x=this.y=this.z=this.last_x=this.last_y=this.last_z=0,this.isStop=!1,this.counts=0,this.callback=function(){}},t.checkSupport=function(t){function e(n){var o=n.accelerationIncludingGravity;null!=o.x&&(i=!0,t(i)),window.removeEventListener("devicemotion",e)}setTimeout(function(){t(i)},200),window.addEventListener("devicemotion",e,!1)},t.start=function(e){t.destroy(),"function"==typeof e&&(t.callback=e),window.DeviceMotionEvent&&window.addEventListener("devicemotion",a,!1)},t.destroy=function(){this.init(),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",a,!1)},t.stop=function(){this.isStop=!0,this.counts=0},t.restart=function(){this.isStop=!1},void 0===window.YAO&&(window.YAO=t)}(window.YAO);var OS_PC="pc",OS_IPHONE="iPhone",OS_IPOD="iPod",OS_IPAD="iPad",OS_ANDROID="Android",OS_WINDOWS_PHONE="Windows Phone",OS_BLACK_BERRY="BlackBerry",NONE="none",UNDEFINED="undefined",LANDSCAPE="landscape",PORTRAIT="portrait",mouseX,mouseY;LEvent.prototype.preventDefault=function(){this._ll_preventDefault=!0},LEvent.INIT="init",LEvent.COMPLETE="complete",LEvent.ENTER_FRAME="enter_frame",LEvent.WINDOW_RESIZE="resize",LEvent.SOUND_COMPLETE="sound_complete",LEvent.END_CONTACT="endContact",LEvent.PRE_SOLVE="preSolve",LEvent.POST_SOLVE="postSolve",LEvent.BEGIN_CONTACT="beginContact",LEvent.addEventListener=function(t,e,i,n){null==n&&(n=!1),t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i]()},t.attachEvent("on"+e,t[e+i]))},LEvent.removeEventListener=function(t,e,i,n){null==n&&(n=!1),t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i]()},t.detachEvent("on"+e,t[e+i]))};var LMouseEvent=function(){throw"LMouseEvent cannot be instantiated"};LMouseEvent.MOUSE_DOWN="mousedown",LMouseEvent.MOUSE_UP="mouseup",LMouseEvent.TOUCH_START="touchstart",LMouseEvent.TOUCH_MOVE="touchmove",LMouseEvent.TOUCH_END="touchend",LMouseEvent.MOUSE_MOVE="mousemove",LMouseEvent.MOUSE_OVER="mouseover",LMouseEvent.MOUSE_OUT="mouseout",LMouseEvent.DOUBLE_CLICK="dblclick";var LMultitouchInputMode=function(){throw"LMultitouchInputMode cannot be instantiated"};LMultitouchInputMode.NONE="none",LMultitouchInputMode.GESTURE="gesture",LMultitouchInputMode.TOUCH_POINT="touchPoint";var LMultitouch=function(){throw"LMultitouch cannot be instantiated"};LMultitouch.inputMode="none",LMultitouch.touchs=[];var LTextEvent=function(){throw"LTextEvent cannot be instantiated"};LTextEvent.TEXT_INPUT="textInput",LTextEvent.WIND_COMPLETE="windComplete";var LFocusEvent=function(){throw"LFocusEvent cannot be instantiated"};LFocusEvent.FOCUS_IN="focusIn",LFocusEvent.FOCUS_OUT="focusOut";var LMouseEventContainer=function(){function t(){var t=this;t.container={},t.dispatchAllEvent=!1,t.mouseDownContainer=[],t.mouseUpContainer=[],t.mouseMoveContainer=[],t.mouseOverContainer=[],t.mouseOutContainer=[],t.mouseDblContainer=[],t.textFieldInputContainer=[],t.buttonContainer=[]}return t.prototype={pushInputBox:function(t){var e,i,n=this,o=n.textFieldInputContainer;for(e=0,i=o.length;i>e;e++)if(t.objectIndex==o[e].objectIndex)return;n.textFieldInputContainer.push(t)},removeInputBox:function(t){var e,i,n=this,o=n.textFieldInputContainer;for(e=0,i=o.length;i>e;e++)if(t.objectIndex==o[e].objectIndex){n.textFieldInputContainer.splice(e,1);break}},pushButton:function(t){var e,i,n=this,o=n.buttonContainer;for(e=0,i=o.length;i>e;e++)if(t.objectIndex==o[e].objectIndex)return;n.buttonContainer.push(t)},removeButton:function(t){var e,i,n=this,o=n.buttonContainer;for(e=0,i=o.length;i>e;e++)if(t.objectIndex==o[e].objectIndex){n.buttonContainer.splice(e,1);break}},dispatchEventButton:function(t){var e,i,n=this,o=n.buttonContainer;for(e=0,i=o.length;i>e;e++)"function"==typeof n.buttonContainer[e].ll_button_mode&&n.buttonContainer[e].ll_button_mode(t)},addEvent:function(t,e,i){e.push({container:t,listener:i})},removeEvent:function(t,e,i){var n,o;for(n=0,o=e.length;o>n;n++)if(e[n].container.objectIndex===t.objectIndex&&(!i||e[n].listener==i)){e.splice(n,1);break}},addMouseDownEvent:function(t,e){var i=this;i.addEvent(t,i.mouseDownContainer,e)},addMouseUpEvent:function(t,e){var i=this;i.addEvent(t,i.mouseUpContainer,e)},addMouseMoveEvent:function(t,e){var i=this;i.addEvent(t,i.mouseMoveContainer,e)},addMouseOverEvent:function(t,e){var i=this;i.addEvent(t,i.mouseOverContainer,e)},addMouseOutEvent:function(t,e){var i=this;i.addEvent(t,i.mouseOutContainer,e)},addMouseDblEvent:function(t,e){var i=this;i.addEvent(t,i.mouseDblContainer,e)},addMouseEvent:function(t,e,i){var n=this;e==LMouseEvent.MOUSE_DOWN?n.addMouseDownEvent(t,i):e==LMouseEvent.MOUSE_UP?n.addMouseUpEvent(t,i):e==LMouseEvent.MOUSE_OVER?n.addMouseOverEvent(t,i):e==LMouseEvent.MOUSE_OUT?n.addMouseOutEvent(t,i):e==LMouseEvent.MOUSE_MOVE?n.addMouseMoveEvent(t,i):n.addMouseDblEvent(t,i)},hasEvent:function(t,e){for(var i=0,n=e.length;n>i;i++)if(e[i].container.objectIndex===t.objectIndex)return!0;return!1},removeMouseDownEvent:function(t,e){var i=this;i.removeEvent(t,i.mouseDownContainer,e)},removeMouseUpEvent:function(t,e){var i=this;i.removeEvent(t,i.mouseUpContainer,e)},removeMouseMoveEvent:function(t,e){var i=this;i.removeEvent(t,i.mouseMoveContainer,e)},removeMouseOverEvent:function(t,e){var i=this;i.removeEvent(t,i.mouseOverContainer,e)},removeMouseOutEvent:function(t,e){var i=this;i.removeEvent(t,i.mouseOutContainer,e)},removeMouseDblEvent:function(t,e){var i=this;i.removeEvent(t,i.mouseDblContainer,e)},removeMouseEvent:function(t,e,i){var n=this;e==LMouseEvent.MOUSE_DOWN?n.removeMouseDownEvent(t,i):e==LMouseEvent.MOUSE_UP?n.removeMouseUpEvent(t,i):e==LMouseEvent.MOUSE_OVER?n.removeMouseOverEvent(t,i):e==LMouseEvent.MOUSE_OUT?n.removeMouseOutEvent(t,i):e==LMouseEvent.MOUSE_MOVE?n.removeMouseMoveEvent(t,i):n.removeMouseDblEvent(t,i)},dispatchMouseEvent:function(t,e){var i=this;e==LMouseEvent.MOUSE_DOWN?(i.dispatchEvent(t,i.mouseDownContainer,LMouseEvent.MOUSE_DOWN),i.dispatchEvent(t,i.textFieldInputContainer)):e==LMouseEvent.MOUSE_UP?i.dispatchEvent(t,i.mouseUpContainer,LMouseEvent.MOUSE_UP):e==LMouseEvent.DOUBLE_CLICK?i.dispatchEvent(t,i.mouseDblContainer,LMouseEvent.DOUBLE_CLICK):(i.dispatchEventButton(t),i.dispatchEvent(t,i.mouseOutContainer,LMouseEvent.MOUSE_OUT),i.dispatchEvent(t,i.mouseOverContainer,LMouseEvent.MOUSE_OVER),i.dispatchEvent(t,i.mouseMoveContainer,LMouseEvent.MOUSE_MOVE))},getRootParams:function(t){for(var e=t.parent,i={x:0,y:0,scaleX:1,scaleY:1};e&&"root"!=e;)i.x*=e.scaleX,i.y*=e.scaleY,i.x+=e.x,i.y+=e.y,i.scaleX*=e.scaleX,i.scaleY*=e.scaleY,e=e.parent;return i},_mouseEnabled:function(t){if(!t||!t.parent)return!1;if(!t.visible||typeof t.mouseEnabled!=UNDEFINED&&!t.mouseEnabled)return!1;for(var e=t.parent;e&&"root"!=e;){if(!e.mouseEnabled||!e.mouseChildren||!e.visible)return!1;if(e=e.parent,!e)return!1}return!0},_dispatchEvent:function(t,e,i,n,a,r){var s,l=i.length;for(s=a;r>=s&&l>s;s++)o=i[s],o.sp.objectIndex==n&&(t.currentTarget=t.clickTarget=o.sp,t.target||(t.target=o.sp),t.event_type=e,t.selfX=(t.offsetX-o.co.x-o.sp.x)/(o.co.scaleX*o.sp.scaleX),t.selfY=(t.offsetY-o.co.y-o.sp.y)/(o.co.scaleY*o.sp.scaleY),o.listener(t,o.sp))},dispatchEvent:function(t,e,i){var n,o,a,r,s,l=this,h=[];for(r=0,s=e.length;s>r;r++)if(n=e[r].container||e[r],l._mouseEnabled(n))if(o=l.getRootParams(n),i||!n.mouseEvent)if(n.ismouseon(t,o)){if(i==LMouseEvent.MOUSE_OUT)continue;if(i==LMouseEvent.MOUSE_OVER&&n.ll_mousein)continue;i!=LMouseEvent.MOUSE_UP&&(n.ll_mousein=!0),h.push({sp:n,co:o,listener:e[r].listener})}else{if(i!=LMouseEvent.MOUSE_OUT&&i!=LMouseEvent.MOUSE_OVER)continue;if(!n.ll_mousein)continue;n.ll_mousein=!1,h.push({sp:n,co:o,listener:e[r].listener})}else n.mouseEvent(t,LMouseEvent.MOUSE_DOWN,o);if(0!=h.length)for(h.length>1&&(h=h.sort(l._sort.bind(l))),s=h.length,r=0;s>r;r++)if(a=h[r],l._dispatchEvent(t,i,h,a.sp.objectIndex,r,l.dispatchAllEvent?s-1:r),r<h.length-1&&a.sp.objectIndex==h[r+1].sp.objectIndex)h.splice(r,1),r--;else{for(var c;;){if(c||(c=a.sp.parent,t.target=a.sp),!c||"root"==c)break;if(l._dispatchEvent(t,i,h,c.objectIndex,r+1,s),t.target=c,c=c.parent,!c||"root"==c)break}if(!l.dispatchAllEvent)break}},set:function(t,e){this.container[t]=e},_sort:function(t,e){var i,n,o,a,r,s=this,l=s._getSort(t.sp),h=s._getSort(e.sp);for(o=0,a=l.length,r=h.length;a>o&&r>o;o++)if(i=l[o],n=h[o],i.objectIndex!=n.objectIndex)return n.parent.getChildIndex(n)-i.parent.getChildIndex(i);return h.length-l.length},_getSort:function(t){for(var e=t.parent,i=[t];e&&"root"!=e;)i.unshift(e),e=e.parent;return i}},new t}(),LKeyboardEvent=function(){throw"LKeyboardEvent cannot be instantiated"};LKeyboardEvent.KEY_DOWN="keydown",LKeyboardEvent.KEY_UP="keyup",LKeyboardEvent.KEY_PRESS="keypress";var LAccelerometerEvent=function(){throw"LAccelerometerEvent cannot be instantiated"};LAccelerometerEvent.DEVICEMOTION="devicemotion",LStageAlign.TOP="T",LStageAlign.BOTTOM="B",LStageAlign.LEFT="L",LStageAlign.RIGHT="Re",LStageAlign.TOP_LEFT="TL",LStageAlign.TOP_RIGHT="TR",LStageAlign.TOP_MIDDLE="TM",LStageAlign.BOTTOM_LEFT="BL",LStageAlign.BOTTOM_RIGHT="BR",LStageAlign.BOTTOM_MIDDLE="BM",LStageAlign.MIDDLE="M",LStageScaleMode.EXACT_FIT="exactFit",LStageScaleMode.SHOW_ALL="showAll",LStageScaleMode.NO_BORDER="noBorder",LStageScaleMode.NO_SCALE="noScale";var LGlobal=function(){function t(){throw"LGlobal cannot be instantiated"}return t.FULL_SCREEN="full_screen",t.traceDebug=!1,t.displayState=NONE,t.aspectRatio=NONE,t.canvasObj=null,t.canvas=null,t.webAudio=!0,t.objectIndex=1,t.stage=null,t.width=0,t.height=0,t.box2d=null,t.speed=50,t.IS_MOUSE_DOWN=!1,t.stopPropagation=!1,t.preventDefault=!0,t.childList=new Array,t.dragList=new Array,t.excludingContainer=new Array,t.fpsStatus=null,t.stageScale="noScale",t.align="M",t.mobile=!1,t.canTouch=!1,t.os=OS_PC,t.ios=!1,t.android=!1,t.android_new=!1,t.backgroundColor=null,t.destroy=!0,t.forceRefresh=!1,t.devicePixelRatio=window.devicePixelRatio||1,t.startTimer=0,t.keepClear=!0,t.top=0,t.left=0,t.window=window,function(e){if(t.isFirefox=e.toLowerCase().indexOf("firefox")>=0,e.indexOf(OS_IPHONE)>0)t.os=OS_IPHONE,t.canTouch=!0,t.ios=!0;else if(e.indexOf(OS_IPOD)>0)t.os=OS_IPOD,t.canTouch=!0,t.ios=!0;else if(e.indexOf(OS_IPAD)>0)t.os=OS_IPAD,t.ios=!0,t.canTouch=!0;else if(e.indexOf(OS_ANDROID)>0){t.os=OS_ANDROID,t.canTouch=!0,t.android=!0;var i=e.indexOf(OS_ANDROID);parseInt(e.substr(i+8,1))>3&&(t.android_new=!0);

}else e.indexOf(OS_WINDOWS_PHONE)>0?(t.os=OS_WINDOWS_PHONE,t.canTouch=!0):e.indexOf(OS_BLACK_BERRY)>0&&(t.os=OS_BLACK_BERRY,t.canTouch=!0);t.mobile=t.canTouch}(navigator.userAgent),t.setDebug=function(e){t.traceDebug=e},t.setCanvas=function(e,i,n){t.ll_createCanvas(e,i,n),t.ll_createStage(),t.displayState==LStage.FULL_SCREEN?t.resize():"number"==typeof t.displayState&&t.resize(t.width*t.displayState,t.height*t.displayState),t.canTouch?(t.ll_clicks=0,t.ll_prev_clickTime=0,LEvent.addEventListener(t.canvasObj,LMouseEvent.TOUCH_START,t.ll_touchStart),LEvent.addEventListener(document,LMouseEvent.TOUCH_END,t.ll_touchEnd),LEvent.addEventListener(t.canvasObj,LMouseEvent.TOUCH_MOVE,t.ll_touchMove)):(LEvent.addEventListener(t.canvasObj,LMouseEvent.DOUBLE_CLICK,t.ll_mouseDbclick),LEvent.addEventListener(t.canvasObj,LMouseEvent.MOUSE_DOWN,t.ll_mouseDown),LEvent.addEventListener(t.canvasObj,LMouseEvent.MOUSE_MOVE,t.ll_mouseMove),LEvent.addEventListener(t.canvasObj,LMouseEvent.MOUSE_UP,t.ll_mouseUp),LEvent.addEventListener(t.canvasObj,LMouseEvent.MOUSE_OUT,t.ll_mouseOut))},t.ll_createCanvas=function(e,i,n){t.id=e,t.object=document.getElementById(e),t.object.innerHTML='<div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform:translateZ(0);z-index:0;"><canvas id="'+t.id+'_canvas" style="margin:0;padding:0;width:'+i+"px;height:"+n+'px;"><div id="noCanvas"><p>Hey there,it looks like you\'re using Microsoft\'s Internet Explorer. Microsoft hates the Web and doesn\'t support HTML5:(</p></div></canvas></div><div id="'+t.id+'_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;"><textarea rows="1" id="'+t.id+'_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea><input type="text" id="'+t.id+'_InputTextBox"  style="background:transparent;border:0px;"/><input type="password" id="'+t.id+'_passwordBox"  style="background:transparent;border:0px;"/></div>',t.canvasObj=document.getElementById(t.id+"_canvas"),t._canvas=document.createElement("canvas"),t._context=t._canvas.getContext("2d"),t._context&&(t.canvasObj.innerHTML=""),t.inputBox=document.getElementById(t.id+"_InputText"),t.inputTextareaBoxObj=document.getElementById(t.id+"_InputTextareaBox"),t.inputTextBoxObj=document.getElementById(t.id+"_InputTextBox"),t.passwordBoxObj=document.getElementById(t.id+"_passwordBox"),t.inputTextField=null,i&&(t.canvasObj.width=i),n&&(t.canvasObj.height=n),t.width=t.canvasObj.width,t.height=t.canvasObj.height,t.canvasStyleWidth=t.width,t.canvasStyleHeight=t.height,t.canvas=t.canvasObj.getContext("2d"),t.offsetX=mouseX=0,t.offsetY=mouseY=0},t.ll_createStage=function(){t.stage=new LSprite,t.stage.parent="root",t.childList.push(t.stage),t.stage.baseAddEvent=t.stage.addEventListener,t.stage.baseRemoveEvent=t.stage.removeEventListener,t.stage.addEventListener=function(e,i){e==LEvent.WINDOW_RESIZE?(t.stage.onresizeListener=i,t.stage.onresize=function(e){t.stage.onresizeEvent=e},LEvent.addEventListener(t.window,e,t.stage.onresize)):e==LKeyboardEvent.KEY_DOWN||e==LKeyboardEvent.KEY_UP||e==LKeyboardEvent.KEY_PRESS?LEvent.addEventListener(t.window,e,i):t.stage.baseAddEvent(e,i)},t.stage.removeEventListener=function(e,i){e==LEvent.WINDOW_RESIZE?(LEvent.removeEventListener(t.window,LEvent.WINDOW_RESIZE,t.stage.onresize),delete t.stage.onresize,delete t.stage.onresizeListener):e==LKeyboardEvent.KEY_DOWN||e==LKeyboardEvent.KEY_UP||e==LKeyboardEvent.KEY_PRESS?LEvent.removeEventListener(t.window,e,i):t.stage.baseRemoveEvent(e,i)}},t.ll_touchStart=function(e){t.inputBox.style.display!=NONE&&t.inputTextField._ll_getValue();var i,n,o,a;if(i=parseInt(0+t.object.style.left)+parseInt(t.canvasObj.style.marginLeft),n=parseInt(0+t.object.style.top)+parseInt(t.canvasObj.style.marginTop),LMultitouch.inputMode==LMultitouchInputMode.NONE)o=t.ll_touchStartEvent(e,0,i,n);else if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(var a=0,r=e.touches.length;r>a;a++)LMultitouch.touchs["touch"+e.touches[a].identifier]||(o=t.ll_touchStartEvent(e,a,i,n));var s=new Date,l=s.getTime();t.ll_clicks=l<=t.ll_prev_clickTime+500?t.ll_clicks+1:1,t.ll_prev_clickTime=l,2===t.ll_clicks&&(t.mouseEvent(o,LMouseEvent.DOUBLE_CLICK),t.ll_clicks=0),t.IS_MOUSE_DOWN=!0,t.mouseJoint_start&&t.mouseJoint_start(o),t.touchHandler(e)},t.ll_touchStartEvent=function(e,i,n,o){var a={offsetX:e.touches[i].pageX-n,offsetY:e.touches[i].pageY-o,touchPointID:e.touches[i].identifier};return a.offsetX=t.ll_scaleX(a.offsetX),a.offsetY=t.ll_scaleY(a.offsetY),mouseX=t.offsetX=a.offsetX,mouseY=t.offsetY=a.offsetY,LMultitouch.touchs["touch"+a.touchPointID]=a,t.mouseEvent(a,LMouseEvent.MOUSE_DOWN),t.buttonStatusEvent=a,a},t.ll_touchEnd=function(e){var i,n,o,a,r,s;if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(o in LMultitouch.touchs){for(i=LMultitouch.touchs[o],s=!1,a=0,r=e.touches.length;r>a;a++)if(e.touches[a].identifier==i.touchPointID){s=!0;break}s||(n=i,delete LMultitouch.touchs[o],t.mouseEvent(n,LMouseEvent.MOUSE_UP))}n||(n={offsetX:t.offsetX,offsetY:t.offsetY}),t.mouseEvent(n,LMouseEvent.MOUSE_UP),t.touchHandler(e),t.IS_MOUSE_DOWN=!1,t.buttonStatusEvent=null,t.mouseJoint_end&&t.mouseJoint_end()},t.ll_touchMove=function(e){var n,o,a,r,s=e.touches.length;for(n=parseInt(0+t.object.style.left)+parseInt(t.canvasObj.style.marginLeft),o=parseInt(0+t.object.style.top)+parseInt(t.canvasObj.style.marginTop),LMultitouch.inputMode==LMultitouchInputMode.NONE&&(s=1),i=0,r=e.touches.length;i<r&&i<s;i++)a={offsetX:e.touches[i].pageX-n,offsetY:e.touches[i].pageY-o,touchPointID:e.touches[i].identifier},a.offsetX=t.ll_scaleX(a.offsetX),a.offsetY=t.ll_scaleY(a.offsetY),mouseX=t.offsetX=a.offsetX,mouseY=t.offsetY=a.offsetY,LMultitouch.touchs["touch"+a.touchPointID]&&LMultitouch.touchs["touch"+a.touchPointID].offsetX==a.offsetX&&LMultitouch.touchs["touch"+a.touchPointID].offsetY==a.offsetY||(t.buttonStatusEvent=a,LMultitouch.touchs["touch"+a.touchPointID]=a,t.mouseEvent(a,LMouseEvent.MOUSE_MOVE));t.touchHandler(e),t.mouseJoint_move&&t.mouseJoint_move(a)},t.ll_mouseDbclick=function(e){null==e.offsetX&&null!=e.layerX&&(e.offsetX=e.layerX,e.offsetY=e.layerY);var i={button:e.button};i.offsetX=t.ll_scaleX(e.offsetX),i.offsetY=t.ll_scaleY(e.offsetY),t.mouseEvent(i,LMouseEvent.DOUBLE_CLICK)},t.ll_mouseDown=function(e){null==e.offsetX&&null!=e.layerX&&(e.offsetX=e.layerX,e.offsetY=e.layerY),t.inputBox.style.display!=NONE&&t.inputTextField._ll_getValue();var i={button:e.button};i.offsetX=t.ll_scaleX(e.offsetX),i.offsetY=t.ll_scaleY(e.offsetY),t.mouseEvent(i,LMouseEvent.MOUSE_DOWN),t.IS_MOUSE_DOWN=!0,t.mouseJoint_start&&t.mouseJoint_start(i)},t.ll_mouseMove=function(e){null==e.offsetX&&null!=e.layerX&&(e.offsetX=e.layerX,e.offsetY=e.layerY);var i={};i.offsetX=t.ll_scaleX(e.offsetX),i.offsetY=t.ll_scaleY(e.offsetY),t.buttonStatusEvent=i,mouseX=t.offsetX=i.offsetX,mouseY=t.offsetY=i.offsetY,t.cursor="default",t.mouseEvent(i,LMouseEvent.MOUSE_MOVE),document.body.style.cursor=t.cursor,t.mouseJoint_move&&t.mouseJoint_move(i)},t.ll_mouseUp=function(e){null==e.offsetX&&null!=e.layerX&&(e.offsetX=e.layerX,e.offsetY=e.layerY);var i={button:e.button};i.offsetX=t.ll_scaleX(e.offsetX),i.offsetY=t.ll_scaleY(e.offsetY),t.mouseEvent(i,LMouseEvent.MOUSE_UP),t.IS_MOUSE_DOWN=!1,t.mouseJoint_end&&t.mouseJoint_end()},t.ll_mouseOut=function(e){null==e.offsetX&&null!=e.layerX&&(e.offsetX=e.layerX,e.offsetY=e.layerY);var i={};i.offsetX=t.ll_scaleX(e.offsetX),i.offsetY=t.ll_scaleY(e.offsetY),t.mouseEvent(i,LMouseEvent.MOUSE_OUT),t.IS_MOUSE_DOWN=!1},t.touchHandler=function(e){return t.stopPropagation&&e.stopPropagation(),t.preventDefault&&e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e},t.mouseEvent=function(e,i){if(i==LMouseEvent.MOUSE_MOVE&&t.dragHandler(e),LMouseEventContainer.container[i])return void LMouseEventContainer.dispatchMouseEvent(e,i);for(var n=t.childList.length-1;n>=0&&(!t.childList[n].mouseEvent||!t.childList[n].mouseEvent(e,i));n--);},t.dragHandler=function(e){var i,n,o,a=t.dragList;for(i=a.length-1;i>=0;i--)if(n=a[i],!t.canTouch||n.ll_touchPointID==e.touchPointID){o=n.getAbsoluteScale(),n.x=n.ll_dragStartX+(e.offsetX-n.ll_dragMX)*n.scaleX/o.scaleX,n.y=n.ll_dragStartY+(e.offsetY-n.ll_dragMY)*n.scaleY/o.scaleY,n.dragRange&&(n.x<n.dragRange.left?n.x=n.dragRange.left:n.x>n.dragRange.right&&(n.x=n.dragRange.right),n.y<n.dragRange.top?n.y=n.dragRange.top:n.y>n.dragRange.bottom&&(n.y=n.dragRange.bottom));break}},t._ll_mobile=function(){var e,i,n,o,a,r,s,i=.3*t.width,n=1.5*i,l=.05*t.width,h=.05*i,c=.15*i,d=.3*i,u=.2*n,p="#cccccc",f="#000000",g="#ffffff",v="#ff0000";e=new LSprite,addChild(e),i=.3*t.width,n=1.5*i,e.graphics.drawRoundRect(1,f,[l,l,i,n,l],!0,p),e.graphics.drawRoundRect(1,f,[l+h,l+h,i-2*h,n-2*h,l],!0,f),e.graphics.drawRect(1,g,[l+c,l+u,i-2*c,n-2*u],!0,g),e.graphics.drawArc(1,g,[l+.5*i,l+n-3.5*h,1.5*h,0,2*Math.PI]),e.graphics.drawRoundRect(1,g,[l+d,l+c,i-2*d,h,.5*h]),o=new LSprite,o.x=.5*-(i-2*c),o.y=.5*-h,o.graphics.drawRect(1,v,[0,0,i-2*c,h],!0,v),a=new LSprite,a.y=.5*-(i-2*c),a.x=.5*-h,a.graphics.drawRect(1,v,[0,0,h,i-2*c],!0,v),r=new LSprite,r.x=l+d+.5*(i-2*d),r.y=l+u+.5*(n-2*u),r.rotate=45,r.addChild(o),r.addChild(a),e.addChild(r),s=new LSprite,s.graphics.drawVertices(2,f,[[0,0],[c,c],[0,2*c]],!0,p),s.x=1.5*l+n,s.y=1.5*l+.5*n,addChild(s),e.arrow=s;var m=function(){setTimeout(function(){location.href=location.href},100)};return window.onorientationchange=m,e},t.verticalError=function(){var e=.3*t.width,i=.05*t.width,n=t._ll_mobile(),o=n.clone();o.getChildAt(0).visible=!1,o.x=.5*t.width+i,addChild(o),n.rotate=90,n.x=.5*t.width+i,n.y=.5*e},t.horizontalError=function(){var e=.3*t.width,i=.05*t.width,n=t._ll_mobile(),o=n.clone();o.getChildAt(0).visible=!1,o.rotate=90,o.x=t.width-i,o.y=.5*e,addChild(o),n.arrow.x=1.5*i+e},t.onShow=function(){null!=t.canvas&&(t.fpsStatus&&t.fpsStatus.reset(),t.stage.onresizeEvent&&(t.stage.onresizeListener(t.stage.onresizeEvent),delete t.stage.onresizeEvent),t.forceRefresh&&(t.canvasObj.width=t.canvasObj.width,t.forceRefresh=!1),t.canvas.beginPath(),null!=t.box2d?(t.box2d.ll_show(),!t.traceDebug&&t.keepClear&&t.canvas.clearRect(0,0,t.width+1,t.height+1)):(t.keepClear&&t.canvas.clearRect(0,0,t.width+1,t.height+1),null!==t.backgroundColor&&(t.canvas.fillStyle=t.backgroundColor,t.canvas.fillRect(0,0,t.width,t.height))),t.show(t.childList))},t.show=function(t){for(var e,i=0,n=t.length;n>i;i++)e=t[i],e&&e.ll_show&&(e.ll_show(),e._ll_removeFromSelf&&(i--,n--))},t.divideCoordinate=function(t,e,i,n){var o,a,r,s=t/n,l=e/i,h=[];for(o=0;i>o;o++){for(r=[],a=0;n>a;a++)r.push({x:s*a,y:l*o,width:s,height:l});h.push(r)}return h},t._create_loading_color=function(){var e=t.canvas.createRadialGradient(t.width/2,t.height,0,t.width/2,0,t.height);return e.addColorStop(0,"red"),e.addColorStop(.3,"orange"),e.addColorStop(.4,"yellow"),e.addColorStop(.5,"green"),e.addColorStop(.8,"blue"),e.addColorStop(1,"violet"),e},t.hitPolygon=function(t,e,i){var n,o,a,r,s,l=0,h=t[0],c=e<=h[0],d=i<=h[1];for(n=1,o=t.length;o+1>n;n++)a=t[n%o],r=e<=a[0],s=i<=a[1],d!=s&&(c==r?c&&(l+=d?-1:1):e<=h[0]+(a[0]-h[0])*(i-h[1])/(a[1]-h[1])&&(l+=d?-1:1)),h=a,c=r,d=s;return 0!=l},t.hitTestPolygon=function(t,e){var i,n,o,a,r,s=[[t,[],[]],[e,[],[]]];for(n=0;n<s.length;n++){for(a=s[n][0],r=s[n][1],i=0,o=a.length;o>i;i++)s[n][2].push(new LVec2(a[i][0],a[i][1])),o-1>i&&r.push(new LVec2(a[i+1][0]-a[i][0],a[i+1][1]-a[i][1]).normL());r.push(new LVec2(a[0][0]-a[o-1][0],a[0][1]-a[o-1][1]).normL())}for(n=0;n<s.length;n++)for(r=s[n][1],i=0,o=r.length;o>i;i++){var l=LVec2.getMinMax(s[0][2],r[i]),h=LVec2.getMinMax(s[1][2],r[i]);if(l.max_o<h.min_o||l.min_o>h.max_o)return!1}return!0},t.hitTestPolygonArc=function(e,i){if(t.hitPolygon(e,i[0],i[1]))return!0;var n,o,a,r,s,l,h,c,d,u;for(n=0,a=e.length;a>n;n++)if(o=a-1>n?n+1:0,r=e[n],s=e[o],l=new LVec2(i[0]-r[0],i[1]-r[1]),h=new LVec2(s[0]-r[0],s[1]-r[1]),u=h.normalize(),d=LVec2.dot(l,u),0>=d){if(l.x*l.x+l.y*l.y<i[3])return!0}else if(d*d<h.x*h.x+h.y*h.y&&(c=LVec2.cross(l,u),c*c<i[3]))return!0;return!1},t.hitTestArc=function(t,e,i,n){var o=.5*t.getWidth(),a=.5*e.getWidth(),r=t._startX?t._startX():t.startX(),s=e._startX?e._startX():e.startX(),l=t._startY?t._startY():t.startY(),h=e._startY?e._startY():e.startY();typeof i!=UNDEFINED&&(r+=o-i,l+=o-i,o=i),typeof n!=UNDEFINED&&(s+=a-n,h+=a-n,a=n);var c=r+o-s-a,d=l+o-h-a;return(o+a)*(o+a)>c*c+d*d},t.hitTestRect=function(t,e,i,n){var o=t.getWidth(),a=e.getWidth(),r=t.getHeight(),s=e.getHeight(),l=t._startX?t._startX():t.startX(),h=e._startX?e._startX():e.startX(),c=t._startY?t._startY():t.startY(),d=e._startY?e._startY():e.startY();typeof i!=UNDEFINED&&(l+=.5*(o-i[0]),c+=.5*(r-i[1]),o=i[0],r=i[1]),typeof n!=UNDEFINED&&(h+=.5*(a-n[0]),d+=.5*(s-n[1]),a=n[0],s=n[1]);var u=l>h?l:h,p=c>d?c:d,f=l+o>h+a?h+a:l+o,g=c+r>d+s?d+s:c+r;return f>=u&&g>=p},t.hitTest=t.hitTestRect,t.setFrameRate=function(e){t.frameRate&&clearInterval(t.frameRate),t.speed=e,t.frameRate=setInterval(function(){t.onShow()},e)},t.ll_scaleX=function(e){return(e-t.left)*t.width/t.canvasStyleWidth},t.ll_scaleY=function(e){return(e-t.top)*t.height/t.canvasStyleHeight},t.ll_setStageSize=function(e,i){e=Math.ceil(e),i=Math.ceil(i),t.canvasObj.style.width=e+"px",t.canvasObj.style.height=i+"px",t.canvasStyleWidth=e,t.canvasStyleHeight=i},t.resize=function(e,i){var n,o,a=0,r=0,s=window.innerWidth,l=window.innerHeight;switch(e&&(n=e),i&&(o=i),"noScale"==t.stageScale&&(n=e||t.width,o=i||t.height),t.stageScale){case"exactFit":n=e||s,o=i||l;break;case"noBorder":switch(n=e||s,o=i||t.height*s/t.width,t.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:case LStageAlign.BOTTOM_RIGHT:case LStageAlign.BOTTOM_MIDDLE:a=l-o}break;case"showAll":s/l>t.width/t.height?(o=i||l,n=e||t.width*l/t.height):(n=e||s,o=i||t.height*s/t.width);case"noScale":default:switch(t.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:a=l-o;break;case LStageAlign.RIGHT:case LStageAlign.TOP_RIGHT:r=s-n;break;case LStageAlign.TOP_MIDDLE:r=.5*(s-n);break;case LStageAlign.BOTTOM_RIGHT:a=l-o,r=s-n;break;case LStageAlign.BOTTOM_MIDDLE:a=l-o,r=.5*(s-n);break;case LStageAlign.MIDDLE:a=.5*(l-o),r=.5*(s-n);break;case LStageAlign.TOP:case LStageAlign.LEFT:case LStageAlign.TOP_LEFT:}}t.canvasObj.style.marginTop=a+"px",t.canvasObj.style.marginLeft=r+"px",t.isFirefox&&(t.left=parseInt(t.canvasObj.style.marginLeft),t.top=parseInt(t.canvasObj.style.marginTop)),t.ll_setStageSize(n,o)},t.sleep=function(t){for(var e=new Date;(new Date).getTime()-e.getTime()<t;);},t.screen=function(e){t.displayState=e,t.stage&&("number"==typeof t.displayState?t.resize(t.width*t.displayState,t.height*t.displayState):t.resize())},t}(),LSystem=LGlobal,LStage=LGlobal;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=e);e>i;i++)if(i in this&&this[i]===t)return i;return-1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.apply(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind-what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],a=0;n>a;a++)if(e=i[a],t.call(o,e,a,i))return e;return void 0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],a=0;n>a;a++)if(e=i[a],t.call(o,e,a,i))return a;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=0;a>n;){var r;n in o&&(r=o[n],t.call(i,r,n,o)),n++}}),Array.prototype.every||(Array.prototype.every=function(t,e){"use strict";var i,n;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(i=e),n=0;a>n;){var r;if(n in o){r=o[n];var s=t.call(i,r,n,o);if(!s)return!1}n++}return!0}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;for(var e=Object(this),i=e.length>>>0,n=arguments.length>=2?arguments[1]:void 0,o=0;i>o;o++)if(o in e&&t.call(n,e[o],o,e))return!0;return!1}),window.console||(window.console={log:trace,warn:trace});var LInit=init,LExtends=base,LObject=function(){function t(){this.type="LObject",this.objectIndex=++LGlobal.objectIndex,this.objectindex=this.objectIndex}return t.prototype={callParent:function(t,e){if(t&&e){var i,n=this,o=!1,a="__ll__parent_call"+t;return"undefined"==typeof n[a]?(o=!0,n[a]=0):n[a]++,n[a]>=n.__ll__parent__.length?!1:(i=n.__ll__parent__[n[a]][t]?n.__ll__parent__[n[a]][t].apply(n,e):n.callParent(t,e),o&&delete n[a],i)}},copyProperty:function(t){var e,i=this;for(e in t)if("number"==typeof t[e]||"string"==typeof t[e]||"boolean"==typeof t[e]){if("objectindex"==e||"objectIndex"==e)continue;i[e]=t[e]}else Array.isArray(t[e])&&(i[e]=t[e].slice());t.mask&&(i.mask=t.mask.clone())},toString:function(){return"[object "+this.constructor.name+"]"}},t}(),LColorTransform=function(){function t(t,e,i,n,o,a,r,s){var l=this;LExtends(l,LObject,[]),l.redMultiplier=t,l.greenMultiplier=e,l.blueMultiplier=i,l.alphaMultiplier=n,l.redOffset=o,l.greenOffset=a,l.blueOffset=r,l.alphaOffset=s}return t}(),LTransform=function(){function t(){var t=this;LExtends(t,LObject,[]),t.matrix=null}return t}(),LMatrix=function(){function t(t,e,i,n,o,a,r,s,l){var h=this;LExtends(h,LObject,[]),h.a=1,h.b=0,h.u=0,h.c=0,h.d=1,h.v=0,h.tx=0,h.ty=0,h.w=1,typeof t!=UNDEFINED&&(h.a=t),typeof e!=UNDEFINED&&(h.b=e),typeof i!=UNDEFINED&&(h.c=i),typeof n!=UNDEFINED&&(h.d=n),typeof o!=UNDEFINED&&(h.tx=o),typeof a!=UNDEFINED&&(h.ty=a),typeof r!=UNDEFINED&&(h.u=r),typeof s!=UNDEFINED&&(h.v=s),typeof l!=UNDEFINED&&(h.w=l)}var e={setTo:function(t,e,i,n,o,a,r,s,l){var h=this;return typeof t!=UNDEFINED&&(h.a=t),typeof e!=UNDEFINED&&(h.b=e),typeof i!=UNDEFINED&&(h.c=i),typeof n!=UNDEFINED&&(h.d=n),typeof o!=UNDEFINED&&(h.tx=o),typeof a!=UNDEFINED&&(h.ty=a),typeof r!=UNDEFINED&&(h.u=r),typeof s!=UNDEFINED&&(h.v=s),typeof l!=UNDEFINED&&(h.w=l),h},isIdentity:function(){var t=this;return 1==t.a&&0==t.b&&0==t.c&&1==t.d&&0==t.tx&&0==t.ty&&0==u&&0==v&&1==w},transform:function(t){var e=this;return t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),e},identity:function(){this.setTo(1,0,0,1,0,0,0,0,1)},rotate:function(e){var i=this,n=e*Math.PI/180,o=Math.cos(n),a=Math.sin(n),r=new t(o,a,-a,o,0,0,0,0,1);return i.add(r),i},scale:function(e,i){var n=this,o=new t(e,0,0,i,0,0,0,0,1);return n.add(o),n},translate:function(e,i){var n=this,o=new t(1,0,0,1,e,i,0,0,1);return n.add(o),n},skew:function(e,i){var n=this,o=new t(1,i,e,1,0,0,0,0,1);return n.add(o),n},add:function(t){var e,i,n,o,a,r,s,l,h,c=this;e=c.a*t.a+c.b*t.c+c.u*t.tx,i=c.a*t.b+c.b*t.d+c.u*t.ty,s=c.a*t.u+c.b*t.v+c.u*t.w,n=c.c*t.a+c.d*t.c+c.v*t.tx,o=c.c*t.b+c.d*t.d+c.v*t.ty,l=c.c*t.u+c.d*t.v+c.v*t.w,a=c.tx*t.a+c.ty*t.c+c.w*t.tx,r=c.tx*t.b+c.ty*t.d+c.w*t.ty,h=c.tx*t.u+c.ty*t.v+c.w*t.w,c.setTo(e,i,n,o,a,r,s,l,h)},toArray:function(t){var e=this;if(Array.isArray(t)&&3==t.length){var i=t[0]*e.a+t[1]*e.c+t[2]*e.tx,n=t[0]*e.b+t[1]*e.d+t[2]*e.ty,o=t[0]*e.u+t[1]*e.v+t[2]*e.w;return[i,n,o]}var a=e.a*t.a+e.b*t.c+e.u*t.tx,r=e.a*t.b+e.b*t.d+e.u*t.ty,s=e.a*t.u+e.b*t.v+e.u*t.w,l=e.c*t.a+e.d*t.c+e.v*t.tx,h=e.c*t.b+e.d*t.d+e.v*t.ty,c=e.c*t.u+e.d*t.v+e.v*t.w,d=e.tx*t.a+e.ty*t.c+e.w*t.tx,u=e.tx*t.b+e.ty*t.d+e.w*t.ty,p=e.tx*t.u+e.ty*t.v+e.w*t.w;return[a,r,l,h,d,u,s,c,p]},clone:function(){var e=this;return new t(e.a,e.b,e.c,e.d,e.tx,e.ty,e.u,e.v,e.w)}};for(var i in e)t.prototype[i]=e[i];return t}(),LVec2=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},t.getMinMax=function(e,i){for(var n=t.dot(e[0],i),o=t.dot(e[0],i),a=0,r=0,s=1;s<e.length;s++){var l=t.dot(e[s],i);n>l&&(n=l,a=s),l>o&&(o=l,r=s)}var h={min_o:n,min_i:a,max_o:o,max_i:r};return h},t.prototype={length:function(){var t=this;return Math.sqrt(t.x*t.x+t.y*t.y)},normalize:function(){var e=this,i=e.length();return new t(e.x/i,e.y/i)},normR:function(){return new t(-this.y,this.x)},normL:function(){return new t(this.y,-this.x)}},t}(),LEventDispatcher=function(){function t(){var t=this;LExtends(t,LObject,[]),t._eventList=new Array}var e={addEventListener:function(t,e){this._eventList.push({listener:e,type:t})},removeEventListener:function(t,e){var i,n,o=this;for(n=o._eventList.length,i=0;n>i;i++)if(o._eventList[i]&&t==o._eventList[i].type&&o._eventList[i].listener==e)return void o._eventList.splice(i,1)},removeAllEventListener:function(){this._eventList=[]},dispatchEvent:function(t){var e,i=this,n=i._eventList.length,o="string"==typeof t?t:t.eventType;for(e=0;n>e;e++)if(i._eventList[e]&&o==i._eventList[e].type){if("string"==typeof t)i.currentTarget=i.target=i,i.eventType=i.event_type=o,i._eventList[e].listener(i),delete i.currentTarget,delete i.target,delete i.eventType;else if(t.target||(t.target=i),t.currentTarget||(t.currentTarget=t.target),t._ll_preventDefault=!1,i._eventList[e].listener(t),t._ll_preventDefault)return!1;return!0}return!1},hasEventListener:function(t,e){var i,n=this,o=n._eventList.length;for(i=0;o>i;i++)if(n._eventList[i]&&t==n._eventList[i].type&&(typeof e==UNDEFINED||e==n._eventList[i].listener))return!0;return!1}};for(var i in e)t.prototype[i]=e[i];return t}(),LDisplayObject=function(){function t(){var t=this;LExtends(t,LEventDispatcher,[]),t.name="instance"+t.objectIndex,t.x=0,t.y=0,t.width=0,t.height=0,t.scaleX=1,t.scaleY=1,t.alpha=1,t.visible=!0,t.rotate=0,t.mask=null,t.blendMode=null,t.filters=null,t.transform=new LTransform}var e={_createCanvas:function(){var t=this;t._canvas||(t._canvas=document.createElement("canvas"),t._context=t._canvas.getContext("2d"))},ll_show:function(){var t=this,e=LGlobal.canvas;t._canShow()&&(t._ll_trans=!1,LGlobal.box2d||"function"!=typeof t._ll_loopframe||t._ll_loopframe(),e.save(),t._showReady(e),t.blendMode&&(e.globalCompositeOperation=t.blendMode),t.filters&&t._ll_setShadow(),t._rotateReady(),null!=t.mask&&t.mask.ll_show&&(t.mask.ll_show(),e.clip()),t._transformRotate(),t._transformScale(),t._coordinate(e),t.transform.matrix&&t.transform.matrix.transform(e),t.alpha<1&&(t._ll_trans=!0,e.globalAlpha=t.alpha),LGlobal.fpsStatus&&(LGlobal.fpsStatus.display++,t._ll_trans&&LGlobal.fpsStatus.transform++),t._ll_show(e),e.restore(),null!=LGlobal.box2d&&"function"==typeof t._ll_loopframe&&t._ll_loopframe())},_canShow:function(){return this.visible},_coordinate:function(t){var e=this;(0!=e.x||0!=e.y)&&(e._ll_trans=!0,t.transform(1,0,0,1,e.x,e.y))},_rotateReady:function(){},_showReady:function(t){},_ll_show:function(t){},_ll_setShadow:function(){var t,e,i=this,n=i.filters;if(n)for(t=0,e=n.length;e>t;t++)n[t].ll_show()},_transformRotate:function(){var t,e=this;0!=e.rotate&&(e._ll_trans=!0,t=LGlobal.canvas,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof e.rotatex==UNDEFINED&&(e.rotatex=0,e.rotatey=0),e.box2dBody&&(rotateFlag=1),rotateObj.a=Math.cos(e.rotate*rotateFlag),rotateObj.b=Math.sin(e.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a,rotateObj.tx=e.x+e.rotatex,rotateObj.ty=e.y+e.rotatey,rotateObj.transform(t).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(t))},_transformScale:function(){var t,e=this,i=LGlobal.canvas;(1!=e.scaleX||1!=e.scaleY)&&(e._ll_trans=!0,t=new LMatrix,1!=e.scaleX&&(t.tx=e.x),1!=e.scaleY&&(t.ty=e.y),t.a=e.scaleX,t.d=e.scaleY,t.transform(i).setTo(1,0,0,1,-t.tx,-t.ty).transform(i))},getAbsoluteScale:function(){var t,e,i,n=this;for(t=n.scaleX,e=n.scaleY,i=n.parent;i&&"root"!=i;)t*=i.scaleX,e*=i.scaleY,i=i.parent;return{scaleX:t,scaleY:e}},getRootCoordinate:function(){var t,e,i,n=this;for(t=n.x,e=n.y,i=n.parent;i&&"root"!=i;)t*=i.scaleX,e*=i.scaleY,t+=i.x,e+=i.y,i=i.parent;return new LPoint(t,e)},getBounds:function(t){if(typeof t==UNDEFINED)return new LRectangle(0,0,0,0);var e,i,n=this,o=0,a=0,r=0,s=0;return n.objectIndex!=t.objectIndex&&(e=n.getRootCoordinate(),i=t.getRootCoordinate(),o=e.x-i.x,a=e.y-i.y),t.getWidth&&(r=t.getWidth()),t.getHeight&&(s=t.getHeight()),new LRectangle(o,a,r,s)},getDataCanvas:function(){var t,e,i,n,o,a,r=this;return r._createCanvas(),e=LGlobal.canvasObj,n=LGlobal.canvas,t=r._canvas,i=r._context,r.width=r.getWidth(),r.height=r.getHeight(),t.width=r.width,t.height=r.height,i.clearRect(0,0,r.width,r.height),LGlobal.canvasObj=r._canvas,LGlobal.canvas=r._context,o=r.x,a=r.y,r.x=r.y=0,r.ll_show(),r.x=o,r.y=a,r._canvas=t,r._context=i,LGlobal.canvasObj=e,LGlobal.canvas=n,r._canvas},getDataURL:function(){var t=this,e=t.getDataCanvas();return e.toDataURL.apply(e,arguments)},ismouseonShapes:function(t,e,i){var n,o,a,r,s,l=this;for(typeof t==UNDEFINED&&(t=l.shapes),n=l.getRootMatrix(),a=t.length-1;a>=0;a--)if(o=t[a],s=o.arg,r=l._changeShape(o.type,s,n),o.type==LShape.VERTICES){if(LGlobal.hitPolygon(r,e,i))return!0}else if(o.type==LShape.RECT){if(LGlobal.hitPolygon(r,e,i))return!0}else if(o.type==LShape.ARC&&(r[0]-e)*(r[0]-e)+(r[1]-i)*(r[1]-i)<r[3])return!0;return!1},_changeShape:function(t,e,i){var n,o,a,r,s,l,e=e;if(t==LShape.VERTICES)for(n=[],a=0,r=e.length;r>a;a++)n[a]=i.toArray([e[a][0],e[a][1],1]);else if(t==LShape.RECT)for(n=[[e[0],e[1]],[e[0]+e[2],e[1]],[e[0]+e[2],e[1]+e[3]],[e[0],e[1]+e[3]]],a=0,r=n.length;r>a;a++)n[a]=i.toArray([n[a][0],n[a][1],1]);else t==LShape.ARC&&(s=i.toArray([e[0],e[1],1]),l=i.toArray([e[0]+e[2],e[1],1]),o=(s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]),n=[s[0],s[1],Math.sqrt(o),o]);return n},getRootMatrix:function(){for(var t=this,e=new LMatrix;t&&"root"!=t;)(1!=t.scaleX||1!=t.scaleY)&&e.scale(t.scaleX,t.scaleY),0!=t.rotate&&e.rotate(t.rotate),(0!=t.x||0!=t.y)&&e.translate(t.x,t.y),t=t.parent;return e},remove:function(){var t=this,e=t.parent;e&&"root"!=e&&(e.removeChild(t),t._ll_removeFromSelf=!0)}};for(var i in e)t.prototype[i]=e[i];return t}(),LInteractiveObject=function(){function t(){var t=this;LExtends(t,LDisplayObject,[]),t.type="LInteractiveObject",t.mouseEnabled=!0,t.mouseList=new Array}var e={addEventListener:function(t,e){var i=this;if(t.indexOf("mouse")>=0||t.indexOf("touch")>=0||t==LMouseEvent.DOUBLE_CLICK){if(LMouseEventContainer.container[t]||(t==LMouseEvent.MOUSE_OVER||t==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return void LMouseEventContainer.addMouseEvent(i,t,e);i.mouseList.push({listener:e,type:t})}else i._eventList.push({listener:e,type:t})},removeEventListener:function(t,e){var i,n,o=this;if(!(t.indexOf("mouse")>=0||t.indexOf("touch")>=0||t==LMouseEvent.DOUBLE_CLICK))return o.callParent("removeEventListener",arguments);if(LMouseEventContainer.container[t]||(t==LMouseEvent.MOUSE_OVER||t==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return void LMouseEventContainer.removeMouseEvent(o,t,e);for(n=o.mouseList.length,i=0;n>i;i++)if(o.mouseList[i]&&t==o.mouseList[i].type&&o.mouseList[i].listener==e)return void o.mouseList.splice(i,1)},removeAllEventListener:function(){var t=this;t.mouseList.length=0,t._eventList.length=0,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_DOWN),LMouseEventContainer.container[LMouseEvent.MOUSE_UP]&&LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_UP),LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&(LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_MOVE),LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_OVER),LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_OUT))},hasEventListener:function(t){var e,i,n=this;if(!(t.indexOf("mouse")>=0||t.indexOf("touch")>=0||t==LMouseEvent.DOUBLE_CLICK))return n.callParent("hasEventListener",arguments);for(i=n.mouseList.length,e=0;i>e;e++)if(n.mouseList[e]&&t==n.mouseList[e].type)return!0;return!1}};for(var i in e)t.prototype[i]=e[i];return t}(),LDisplayObjectContainer=function(){function t(){var t=this;LExtends(t,LInteractiveObject,[]),t.childList=new Array,t.numChildren=0,t.mouseChildren=!0}var e={addChild:function(t){var e,i=this;return t.parent&&(e=LGlobal.destroy,LGlobal.destroy=!1,t.parent.removeChild(t),LGlobal.destroy=e),t.parent=i,i.childList.push(t),i.numChildren=i.childList.length,i._ll_removeFromSelf=!1,t},addChildAt:function(t,e){var i,n=this;if(!(0>e||e>n.childList.length))return"function"==typeof t.remove&&(i=LGlobal.destroy,LGlobal.destroy=!1,t.remove(),LGlobal.destroy=i),t.parent=n,n.childList.splice(e,0,t),n.numChildren=n.childList.length,n._ll_removeFromSelf=!1,t},removeChild:function(t){var e,i,n=this,o=n.childList;for(e=0,i=o.length;i>e;e++)if(t.objectIndex==o[e].objectIndex){LGlobal.destroy&&t.die&&t.die(),n.childList.splice(e,1);break}n.numChildren=n.childList.length,delete t.parent},getChildAt:function(t){var e=this,i=e.childList;return 0==i.length||i.length<=t?null:i[t]},getChildByName:function(t){var e=this,n=e.childList;for(i=0,l=n.length;i<l;i++)if(n[i]&&n[i].name==t)return n[i];return null},removeChildAt:function(t){var e=this,i=e.childList;if(!(i.length<=t)){LGlobal.destroy&&i[t].die&&i[t].die();var n=e.childList.splice(t,1);return e.numChildren=e.childList.length,n}},getChildIndex:function(t){if(!t)return-1;var e,i=this,n=i.childList,o=n.length;for(e=0;o>e;e++)if(n[e].objectIndex==t.objectIndex)return e;return-1},setChildIndex:function(t,e){var i,n=this,o=n.childList,a=o.length;if("root"==t.parent||t.parent.objectIndex!=n.objectIndex||0>e||e>=a)return-1;for(i=0;a>i&&o[i].objectIndex!=t.objectIndex;i++);return n.childList.splice(i,1),n.childList.splice(e,0,t),e},resize:function(){var t=this;t.width=t.getWidth(),t.height=t.getHeight()},removeAllChild:function(){var t,e,i=this,n=i.childList;for(t=0,e=n.length;e>t;t++)LGlobal.destroy&&n[t].die&&n[t].die();i.childList.length=0,i.width=0,i.height=0,i.numChildren=0}};for(var n in e)t.prototype[n]=e[n];return t}(),LLoader=function(){function t(){var t=this;LExtends(t,LEventDispatcher,[]),t.type="LLoader"}return t.TYPE_BITMAPDATE="bitmapData",t.prototype.load=function(e,i){var n=this;i||(i=t.TYPE_BITMAPDATE),n.loadtype=i,i==t.TYPE_BITMAPDATE&&(n.content=new Image,n.content.onload=function(){n.content.onload=null;var t=new LEvent(LEvent.COMPLETE);t.currentTarget=n,t.target=n.content,n.dispatchEvent(t),delete n.content},n.content.src=e)},t}(),LURLLoader=function(){function t(){var t=this;LExtends(t,LEventDispatcher,[]),t.type="LURLLoader",t.loadtype="",t.content=null,t.event={}}return t.TYPE_TEXT="text",t.TYPE_JS="js",t.prototype.load=function(e,i){var n,o,a=this;if(i||(o=getExtension(e),"txt"==o?i=t.TYPE_TEXT:"js"==o&&(i=t.TYPE_JS)),a.loadtype=i,i==t.TYPE_TEXT)LAjax.get(e,{},function(t){n=new LEvent(LEvent.COMPLETE),a.data=t,n.currentTarget=a,n.target=t,a.dispatchEvent(n),delete a.content,delete a.data});else if(i==t.TYPE_JS){var r=document.createElement("script");r.onload=function(){n=new LEvent(LEvent.COMPLETE),n.currentTarget=a,n.target=a,a.dispatchEvent(n),delete a.content},r.src=e,r.type="text/javascript",document.querySelector("head").appendChild(r)}},t}(),LWebAudio=function(){function t(){var t=this;LExtends(t,LEventDispatcher,[]),
t.currentTime=0,t.currentStart=0,t.currentSave=0,t.length=0,t.loopStart=0,t.loopEnd=0,t.loopIndex=0,t.loopLength=1,t.playing=!1,t.volume=1,LSound.Container.add(t)}t.container=[],t.containerCount=0,t.audioTag=new Audio,t._context=null;var e={getWebAudio:function(){var e;if(t.containerCount>0)e=t.container.shift();else if(typeof AudioContext!==UNDEFINED)try{e=new AudioContext}catch(i){t.containerCount=t.container.length,e=t.container.shift()}else{if(typeof webkitAudioContext===UNDEFINED)throw"AudioContext not supported.:(";try{e=new webkitAudioContext}catch(i){t.containerCount=t.container.length,e=t.container.shift()}}return e.createGainNode||(e.createGainNode=e.createGain),t.container.push(e),e},onload:function(t){var e=this;if("[object AudioBuffer]"!==Object.prototype.toString.apply(t))return void e.load(t);e.data||(e.data=e.getWebAudio()),e.buffer=t,e.length=e.buffer.duration;var i=new LEvent(LEvent.COMPLETE);i.currentTarget=e,i.target=e.buffer,e.dispatchEvent(i)},_onended:function(){var t=this;t.dispatchEvent(LEvent.SOUND_COMPLETE),t.close(),++t.loopIndex<t.loopLength&&t.play(t.currentStart,void 0,t.currentTimeTo)},load:function(e){var i=this;if("string"!=typeof e)return void("[object AudioBuffer]"==Object.prototype.toString.apply(e)?i.onload(e):"[object ArrayBuffer]"==Object.prototype.toString.apply(e)&&(i.data||(i.data=i.getWebAudio()),i.data.decodeAudioData(e,i.onload.bind(i),function(t){throw"AudioContext decodeAudioData error:"+t.toString()})));var n,o,a,r,s,l={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};for(n=e.split(","),r=0;r<n.length;r++){if(o=n[r].split("."),s=o[o.length-1],s=l[s]?l[s]:[s],a=s.some(function(e,n,o){return t.audioTag.canPlayType(i._type+"/"+e)}))return LAjax.responseType=LAjax.ARRAY_BUFFER,void LAjax.get(n[r],{},i.onload.bind(i));console.warn("Not support "+o[o.length-1]+":"+n[r]);var h=new LEvent(LEvent.COMPLETE);h.currentTarget=h.target=i,i.dispatchEvent(h)}},getCurrentTime:function(){var t=this;return t.playing?t.data.currentTime-t.currentSave+t.currentTime:t.currentSave},setVolume:function(t){var e=this;e.volume=t,e.playing&&(e.volumeNode.gain.value=t)},getVolume:function(){return this.volume},play:function(t,e,i){var n=this;0!=n.length&&(typeof e!==UNDEFINED&&(n.loopIndex=0,n.loopLength=e),typeof t!==UNDEFINED&&(n.currentTime=t,n.currentStart=t),n.currentTimeTo=typeof i!==UNDEFINED?i>n.length?n.length:i:n.length,n.data.loop=!1,n.playing=!0,n.timeout&&(clearTimeout(n.timeout),delete n.timeout),n.timeout=setTimeout(n._onended.bind(n),1e3*(n.currentTimeTo-n.currentTime)),n.bufferSource=n.data.createBufferSource(),n.bufferSource.buffer=n.buffer,n.volumeNode=n.data.createGainNode(),n.volumeNode.gain.value=n.volume,n.volumeNode.connect(n.data.destination),n.bufferSource.connect(n.volumeNode),n.currentSave=n.data.currentTime,n.bufferSource.start?n.bufferSource.start(0,n.currentTime,n.length-n.currentTime):n.bufferSource.noteGrainOn(0,n.currentTime,n.length-n.currentTime))},playSegment:function(t,e,i){this.playTo(t,t+e,i)},playTo:function(t,e,i){this.play(t,i,e)},stop:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.bufferSource.stop?t.bufferSource.stop(0):t.bufferSource.noteOff(0),t.currentSave=t.getCurrentTime(),t.currentTime=t.currentSave,t.playing=!1)},close:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.bufferSource.stop?t.bufferSource.stop(0):t.bufferSource.noteOff(0),t.playing=!1,t.currentTime=0,t.currentSave=0)},ll_check:function(){var t=this;t.playing&&t.currentTimeTo<t.data.currentTime-t.currentSave+.001*LSound.Container.time&&t._onended()},die:function(){LSound.Container.remove(this)}};for(var i in e)t.prototype[i]=e[i];return t}(),LMedia=function(){function t(){var t=this;LExtends(t,LDisplayObject,[]),t.length=0,t.loopIndex=0,t.loopLength=1,t.playing=!1,t.oncomplete=null,t.onsoundcomplete=null,t.currentStart=0,LSound.Container.add(this)}var e={onload:function(){var t=this;if(t.data.readyState){t.length=t.data.duration-(LGlobal.android?.1:0);var e=new LEvent(LEvent.COMPLETE);return e.currentTarget=t,e.target=t.data,void t.dispatchEvent(e)}t.data.addEventListener("canplaythrough",function(){t.onload()},!1)},_onended:function(){var t,e,i=this;i.dispatchEvent(LEvent.SOUND_COMPLETE),++i.loopIndex<i.loopLength?(t=i.loopIndex,e=i.loopLength,i.close(),i.play(i.currentStart,i.loopLength,i.currentTimeTo),i.loopIndex=t):i.close()},load:function(t){var e=this;if("[object HTMLAudioElement]"==Object.prototype.toString.apply(t))return e.data=t,void e.onload();var i,n,o,a,r,s={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};for(i=t.split(","),a=0;a<i.length;a++){if(n=i[a].split("."),r=n[n.length-1],r=s[r]?s[r]:[r],o=r.some(function(t,i,n){return e.data.canPlayType(e._type+"/"+t)}))return e.data.src=i[a],e.onload(),void e.data.load();console.warn("Not support "+n[n.length-1]+":"+i[a]);var l=new LEvent(LEvent.COMPLETE);l.currentTarget=l.target=e,e.dispatchEvent(l)}e.oncomplete&&e.oncomplete({})},getCurrentTime:function(){return this.data.currentTime},setVolume:function(t){this.data.volume=t},getVolume:function(){return this.data.volume},play:function(t,e,i){var n=this;0!=n.length&&(LGlobal.android&&LSound.Container.stopOther(this),typeof t!=UNDEFINED&&(n.data.currentTime=t,n.currentStart=t),typeof e!=UNDEFINED&&(n.loopLength=e),n.currentTimeTo=typeof i!==UNDEFINED?i>n.length?n.length:i:n.length,n.timeout&&(clearTimeout(n.timeout),delete n.timeout),n.timeout=setTimeout(function(){n._onended()},1e3*(n.currentTimeTo-n.data.currentTime)),n.data.loop=!1,n.loopIndex=0,n.playing=!0,n.data.play())},playSegment:function(t,e,i){this.playTo(t,t+e,i)},playTo:function(t,e,i){this.play(t,i,e)},stop:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.playing=!1,t.data.pause())},close:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.playing=!1,t.data.pause(),t.data.currentTime=0,t.currentSave=0)},ll_check:function(){var t=this;t.playing&&(t.data.duration!=t._ll_duration&&(t._ll_duration=t.data.duration,t.length=t.data.duration-(LGlobal.android?.1:0)),t.currentTimeTo<t.data.currentTime+.005*LSound.Container.time&&t._onended())},die:function(){LSound.Container.remove(this)}};for(var i in e)t.prototype[i]=e[i];return t}(),LSound=function(){function t(e){var i=this;i.type="LSound",i._type="audio",t.webAudioEnabled&&LGlobal.webAudio?LExtends(i,LWebAudio,[]):(LExtends(i,LMedia,[]),i.data=new Audio,i.data.loop=!1,i.data.autoplay=!1),e&&i.load(e)}t.TYPE_SOUND="sound",t.webAudioEnabled=!1;var e=location.protocol;if("http:"==e||"https:"==e){if(typeof AudioContext!==UNDEFINED)try{LWebAudio._context=new AudioContext}catch(i){}else if(typeof webkitAudioContext!==UNDEFINED)try{LWebAudio._context=new webkitAudioContext}catch(i){}LWebAudio._context&&(LWebAudio.container.push(LWebAudio._context),t.webAudioEnabled=!0)}return t.Container={ll_save:0,time:0,list:[],ll_show:function(){var e=t.Container,i=(new Date).getTime();e.time=i-(e.ll_save?e.ll_save:i),e.ll_save=i;for(var n=e.list,o=n.length-1;o>=0;o--)n[o]&&n[o].ll_check()},add:function(e){t.Container.list.indexOf(e)>=0||t.Container.list.push(e)},remove:function(e){for(var i=t.Container.list,n=i.length-1;n>=0;n--)if(i[n].objectIndex==e.objectIndex){i.splice(n,1);break}},stopOther:function(e){for(var i=t.Container.list,n=i.length-1;n>=0;n--)i[n].objectIndex!=e.objectIndex&&i[n].stop()}},LGlobal.childList.push(t.Container),t}(),LVideo=function(){function t(t){var e=this;LExtends(e,LMedia,[]),e.type="LVideo",e._type="video",e.rotatex=0,e.rotatey=0,e.data=document.createElement("video"),e.data.style.display="none",document.body.appendChild(e.data),e.data.id="video_"+e.objectIndex,e.data.loop=!1,e.data.autoplay=!1,t&&e.load(t)}var e={_ll_show:function(t){var e=this;t.drawImage(e.data,e.x,e.y)},die:function(){var t=this;document.body.removeChild(t.data),delete t.data},getWidth:function(){return this.data.width},getHeight:function(){return this.data.height}};for(var i in e)t.prototype[i]=e[i];return t}(),LPoint=function(){function t(t,e){var i=this;i.x=t,i.y=e}return t.distance=function(e,i){return t.distance2(e.x,e.y,i.x,i.y)},t.distance2=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.interpolate=function(e,i,n){return new t(e.x+(i.x-e.x)*(1-n),e.y+(i.y-e.y)*(1-n))},t.polar=function(e,i){return new t(e*Math.cos(i),e*Math.sin(i))},t.prototype={toString:function(){return"[object LPoint("+this.x+","+this.y+")]"},length:function(){return t.distance2(this.x,this.y,0,0)},add:function(e){return t(this.x+e.x,this.y+e.y)},clone:function(){return new t(this.x,this.y)},setTo:function(t,e){this.x=t,this.y=e},copyFrom:function(t){this.setTo(t.x,t.y)},equals:function(t){return this.x==t.x&&this.y==t.y},normalize:function(t){var e=this,i=t/e.length();e.x*=i,e.y*=i},offset:function(t,e){this.x+=t,this.y+=e},subtract:function(e){return new t(this.x-e.x,this.y-e.y)}},t}(),LRectangle=function(){function t(t,e,i,n){var o=this;o.x=t,o.y=e,o.width=i,o.height=n,o.setRectangle()}return t.prototype={setRectangle:function(){var t=this;t.bottom=t.y+t.height,t.right=t.x+t.width,t.left=t.x,t.top=t.y},clone:function(){var e=this;return new t(e.x,e.y,e.width,e.height)},contains:function(t,e){var i=this;return t>=i.x&&t<=i.right&&e>=i.y&&e<=i.bottom},containsRect:function(t){var e=this;return t.x>=e.x&&t.right<=e.right&&t.y>=e.y&&t.bottom<=e.bottom},equals:function(t){var e=this;return t.x==e.x&&t.width==e.width&&t.y==e.y&&t.height==e.height},inflate:function(t,e){var i=this;i.width+=t,i.height+=e,i.setRectangle()},intersection:function(e){var i=this,n=i.x>e.x?i.x:e.x,o=i.y>e.y?i.y:e.y,a=i.right>e.right?e.right:i.right,r=i.bottom>e.bottom?e.bottom:i.bottom;return a>=n&&r>=o?new t(n,o,a,r):new t(0,0,0,0)},intersects:function(t){var e=this,i=e.x>t.x?e.x:t.x,n=e.y>t.y?e.y:t.y,o=e.right>t.right?t.right:e.right,a=e.bottom>t.bottom?t.bottom:e.bottom;return o>=i&&a>=n},isEmpty:function(){var t=this;return 0==t.x&&0==t.y&&0==t.width&&0==t.height},offset:function(t,e){var i=this;i.x+=t,i.y+=e,i.setRectangle()},setEmpty:function(){var t=this;t.x=0,t.y=0,t.width=0,t.height=0,t.setRectangle()},setTo:function(t,e,i,n){var o=this;o.x=t,o.y=e,o.width=i,o.height=n,o.setRectangle()},toString:function(){var t=this;return"[object LRectangle("+t.x+","+t.y+","+t.width+","+t.height+")]"},union:function(e){var i=this;return new t(i.x>e.x?e.x:i.x,i.y>e.y?e.y:i.y,i.right>e.right?i.right:e.right,i.bottom>e.bottom?i.bottom:e.bottom)}},t}(),LGraphics=function(){function t(){var t=this;LExtends(t,LObject,[]),t.type="LGraphics",t.color="#000000",t.alpha=1,t.bitmap=null,t.setList=new Array,t.showList=new Array}var e={ll_show:function(){var t,e=this,i=e.setList.length;if(0!=i)for(t=0;i>t;t++)e.setList[t](),LGlobal.fpsStatus&&LGlobal.fpsStatus.graphics++},clone:function(){var e,i,n,o=this,a=new t;for(a.color=o.color,a.alpha=o.alpha,a.bitmap=o.bitmap,e=0,i=o.setList.length;i>e;e++)n=o.setList[e],a.setList.push(n);for(e=0,i=o.showList.length;i>e;e++)n=o.showList[e],a.showList.push(n);return a},lineCap:function(t){var e=this;e.setList.push(function(){LGlobal.canvas.lineCap=t})},lineJoin:function(t){var e=this;e.setList.push(function(){LGlobal.canvas.lineJoin=t})},lineWidth:function(t){var e=this;e.setList.push(function(){LGlobal.canvas.lineWidth=t})},strokeStyle:function(t){var e=this;e.setList.push(function(){LGlobal.canvas.strokeStyle=t})},stroke:function(){var t=this;t.setList.push(function(){LGlobal.canvas.stroke()})},beginPath:function(){var t=this;t.setList.push(function(){LGlobal.canvas.beginPath()})},closePath:function(){var t=this;t.setList.push(function(){LGlobal.canvas.closePath()})},moveTo:function(t,e){var i=this;i.setList.push(function(){LGlobal.canvas.moveTo(t,e)}),i.showList.push({type:LShape.POINT,arg:[t,e]})},lineTo:function(t,e){var i=this;i.setList.push(function(){LGlobal.canvas.lineTo(t,e)}),i.showList.push({type:LShape.POINT,arg:[t,e]})},rect:function(t,e,i,n){var o=this;o.setList.push(function(){LGlobal.canvas.rect(t,e,i,n)}),o.showList.push({type:LShape.RECT,arg:[t,e,i,n]})},fillStyle:function(t){var e=this;e.setList.push(function(){LGlobal.canvas.fillStyle=t})},fill:function(){var t=this;t.setList.push(function(){LGlobal.canvas.fill()})},arc:function(t,e,i,n,o,a){var r=this;r.setList.push(function(){LGlobal.canvas.arc(t,e,i,n,o,a)}),r.showList.push({type:LShape.ARC,arg:n})},lineStyle:function(t,e){var i,n=this;null==e&&(e=n.color),n.color=e,n.setList.push(function(){i=LGlobal.canvas,i.lineWidth=t,i.strokeStyle=e})},clear:function(){var t=this;t.bitmap=null,t.setList.length=0,t.showList.length=0},beginBitmapFill:function(t){var e=this;e.setList.push(function(){e.bitmap=t})},drawEllipse:function(t,e,i,n,o){var a=this;a.setList.push(function(){var r,s,l,h,c,d,u,p,f,g,v,m;return r=LGlobal.canvas,r.beginPath(),d=.5522848,s=i[0],l=i[1],h=i[2],c=i[3],u=h/2*d,p=c/2*d,f=s+h,g=l+c,v=s+h/2,m=l+c/2,r.moveTo(s,m),r.bezierCurveTo(s,m-p,v-u,l,v,l),r.bezierCurveTo(v+u,l,f,m-p,f,m),r.bezierCurveTo(f,m+p,v+u,g,v,g),r.bezierCurveTo(v-u,g,s,m+p,s,m),a.bitmap?(r.save(),r.clip(),r.drawImage(a.bitmap.image,a.bitmap.x,a.bitmap.y,a.bitmap.width,a.bitmap.height,0,0,a.bitmap.width,a.bitmap.height),r.restore(),void(a.bitmap=null)):(n&&(r.fillStyle=o,r.fill()),void(t>0&&(r.lineWidth=t,r.strokeStyle=e,r.stroke())))}),a.showList.push({type:LShape.RECT,arg:i})},drawArc:function(t,e,i,n,o){var a=this;a.setList.push(function(){var r=LGlobal.canvas;return r.beginPath(),i.length>6&&i[6]&&r.moveTo(i[0],i[1]),r.arc(i[0],i[1],i[2],i[3],i[4],i[5]),i.length>6&&i[6]&&r.lineTo(i[0],i[1]),a.bitmap?(r.save(),r.clip(),r.drawImage(a.bitmap.image,a.bitmap.x,a.bitmap.y,a.bitmap.width,a.bitmap.height,0,0,a.bitmap.width,a.bitmap.height),r.restore(),void(a.bitmap=null)):(n&&(r.fillStyle=o,r.fill()),void(t>0&&(r.lineWidth=t,r.strokeStyle=e,r.stroke())))}),a.showList.push({type:LShape.ARC,arg:i})},drawRect:function(t,e,i,n,o){var a=this;a.setList.push(function(){var r=LGlobal.canvas;return r.beginPath(),r.rect(i[0],i[1],i[2],i[3]),r.closePath(),a.bitmap?(r.save(),r.clip(),r.drawImage(a.bitmap.image,a.bitmap.x,a.bitmap.y,a.bitmap.width,a.bitmap.height,0,0,a.bitmap.width,a.bitmap.height),r.restore(),void(a.bitmap=null)):(n&&(r.fillStyle=o,r.fill()),void(t>0&&(r.lineWidth=t,r.strokeStyle=e,r.stroke())))}),a.showList.push({type:LShape.RECT,arg:i})},drawRoundRect:function(t,e,i,n,o){var a=this;a.setList.push(function(){var r=LGlobal.canvas;return r.beginPath(),r.moveTo(i[0]+i[4],i[1]),r.lineTo(i[0]+i[2]-i[4],i[1]),r.arcTo(i[0]+i[2],i[1],i[0]+i[2],i[1]+i[4],i[4]),r.lineTo(i[0]+i[2],i[1]+i[3]-i[4]),r.arcTo(i[0]+i[2],i[1]+i[3],i[0]+i[2]-i[4],i[1]+i[3],i[4]),r.lineTo(i[0]+i[4],i[1]+i[3]),r.arcTo(i[0],i[1]+i[3],i[0],i[1]+i[3]-i[4],i[4]),r.lineTo(i[0],i[1]+i[4]),r.arcTo(i[0],i[1],i[0]+i[4],i[1],i[4]),r.closePath(),a.bitmap?(r.save(),r.clip(),r.drawImage(a.bitmap.image,0,0,a.bitmap.width,a.bitmap.height,0,0,a.bitmap.width,a.bitmap.height),r.restore(),void(a.bitmap=null)):(n&&(r.fillStyle=o,r.fill()),void(t>0&&(r.lineWidth=t,r.strokeStyle=e,r.stroke())))}),a.showList.push({type:LShape.RECT,arg:i})},drawVertices:function(t,e,i,n,o){var a=this;i.length<3||(a.setList.push(function(){var r=LGlobal.canvas;r.beginPath(),r.moveTo(i[0][0],i[0][1]);var s,l,h=i.length;for(s=1;h>s;s++)l=i[s],r.lineTo(l[0],l[1]);return r.lineTo(i[0][0],i[0][1]),r.closePath(),a.bitmap?(r.save(),r.clip(),r.drawImage(a.bitmap.image,a.bitmap.x,a.bitmap.y,a.bitmap.width,a.bitmap.height,0,0,a.bitmap.width,a.bitmap.height),r.restore(),void(a.bitmap=null)):(n&&(r.fillStyle=o,r.fill()),void(t>0&&(r.lineWidth=t,r.strokeStyle=e,r.closePath(),r.stroke())))}),a.showList.push({type:LShape.VERTICES,arg:i}))},drawTriangles:function(t,e,i,n,o){var a,r,s,l=this,h=e.length;l.setList.push(function(){s=LGlobal.canvas;var c,d,u,p=t;for(a=0,r=0;h>a;a+=3){if(c=0,s.save(),s.beginPath(),s.moveTo(p[2*e[a]],p[2*e[a]+1]),s.lineTo(p[2*e[a+1]],p[2*e[a+1]+1]),s.lineTo(p[2*e[a+2]],p[2*e[a+2]+1]),s.lineTo(p[2*e[a]],p[2*e[a]+1]),s.closePath(),n&&(s.lineWidth=n,s.strokeStyle=o,s.stroke()),s.clip(),a%6==0){u=-1;var f=(i[2*e[a+1+r]]-i[2*e[a+r]])*l.bitmap.width,g=(i[2*e[a+2]+1]-i[2*e[a]+1])*l.bitmap.height;if(0==r&&0>f){for(d=a+9;h>d;d+=3)if(i[2*e[a+2]+1]==i[2*e[d+2]+1]){r=d-a;break}0==r&&(r=h-a),f=(i[2*e[a+1+r]]-i[2*e[a+r]])*l.bitmap.width}a+r>=h?(f=(i[2*e[a+r-h]]-i[2*e[a+1]])*l.bitmap.width,u=1==i[2*e[a]]?0:l.bitmap.width*i[2*e[a]]+f,u>l.bitmap.width&&(u-=l.bitmap.width)):u=l.bitmap.width*i[2*e[a+r]],sh=l.bitmap.height*i[2*e[a]+1],0>g&&(g=(i[2*e[a+2-(a>0?6:-6)]+1]-i[2*e[a-(a>0?6:-6)]+1])*l.bitmap.height,sh=0);var v=(p[2*e[a+1]]-p[2*e[a]])/f,m=(p[2*e[a+1]+1]-p[2*e[a]+1])/f,y=(p[2*e[a+2]]-p[2*e[a]])/g,L=(p[2*e[a+2]+1]-p[2*e[a]+1])/g;s.transform(v,m,y,L,p[2*e[a]],p[2*e[a]+1]),s.drawImage(l.bitmap.image,l.bitmap.x+u,l.bitmap.y+sh,f,g,0,0,f,g)}else{var f=(i[2*e[a+2+r]]-i[2*e[a+1+r]])*l.bitmap.width,g=(i[2*e[a+2]+1]-i[2*e[a]+1])*l.bitmap.height;if(0==r&&0>f){for(d=a+9;h>d;d+=3)if(i[2*e[a+2]+1]==i[2*e[d+2]+1]){r=d-a;break}0==r&&(r=h-a),f=(i[2*e[a+2+r]]-i[2*e[a+1+r]])*l.bitmap.width}a+1+r>=h?(f=(i[2*e[a+1+r-h]]-i[2*e[a+2]])*l.bitmap.width,u=1==i[2*e[a+1]]?0:l.bitmap.width*i[2*e[a+1]]+f,u>l.bitmap.width&&(u-=l.bitmap.width)):u=l.bitmap.width*i[2*e[a+1+r]],sh=l.bitmap.height*i[2*e[a]+1],0>g&&(g=(i[2*e[a+2-(a>0?6:-6)]+1]-i[2*e[a-(a>0?6:-6)]+1])*l.bitmap.height,sh=0);var v=(p[2*e[a+2]]-p[2*e[a+1]])/f,m=(p[2*e[a+2]+1]-p[2*e[a+1]+1])/f,y=(p[2*e[a+2]]-p[2*e[a]])/g,L=(p[2*e[a+2]+1]-p[2*e[a]+1])/g;s.transform(v,m,y,L,p[2*e[a+1]],p[2*e[a+1]+1]),s.drawImage(l.bitmap.image,l.bitmap.x+u,l.bitmap.y+sh,f,g,0,-g,f,g)}s.restore()}})},drawLine:function(t,e,i){var n=this;n.setList.push(function(){var n=LGlobal.canvas;n.beginPath(),n.moveTo(i[0],i[1]),n.lineTo(i[2],i[3]),n.lineWidth=t,n.strokeStyle=e,n.closePath(),n.stroke()}),n.showList.push({type:LShape.LINE,arg:i})},add:function(t){this.setList.push(t)},ismouseon:function(t,e){var i=this;return null!=t&&t!=UNDEFINED&&0!=i.showList.length&&i.parent?i.parent.ismouseonShapes(i.showList,t.offsetX,t.offsetY):!1},getWidth:function(){var t,e,i,n,o,a,r,s=this;for(t=0,a=s.showList.length;a>t;t++)if(s.showList[t].type==LShape.RECT)(i>s.showList[t].arg[0]||typeof i==UNDEFINED)&&(i=s.showList[t].arg[0]),(n<s.showList[t].arg[0]+s.showList[t].arg[2]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]+s.showList[t].arg[2]);else if(s.showList[t].type==LShape.ARC)(i>s.showList[t].arg[0]-s.showList[t].arg[2]||typeof i==UNDEFINED)&&(i=s.showList[t].arg[0]-s.showList[t].arg[2]),(n<s.showList[t].arg[0]+s.showList[t].arg[2]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]+s.showList[t].arg[2]);else if(s.showList[t].type==LShape.VERTICES)for(e=0,r=s.showList[t].arg.length;r>e;e++)o=s.showList[t].arg[e],(i>o[0]||typeof i==UNDEFINED)&&(i=o[0]),(n<o[0]||typeof n==UNDEFINED)&&(n=o[0]);else s.showList[t].type==LShape.LINE?((i>s.showList[t].arg[0]||typeof i==UNDEFINED)&&(i=s.showList[t].arg[0]),(i>s.showList[t].arg[2]||typeof i==UNDEFINED)&&(i=s.showList[t].arg[2]),(n<s.showList[t].arg[0]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]),(n<s.showList[t].arg[2]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[2])):s.showList[t].type==LShape.POINT&&((i>s.showList[t].arg[0]||typeof i==UNDEFINED)&&(i=s.showList[t].arg[0]),(n<s.showList[t].arg[0]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]));return typeof i==UNDEFINED&&(i=n=0),s.left=i,a>0&&n==i&&(n=i+1),n-i},getHeight:function(){var t,e,i,n,o,a=this,r=null,s=null;for(r=0,t=a.showList.length;t>r;r++)if(a.showList[r].type==LShape.RECT)(i>a.showList[r].arg[1]||typeof i==UNDEFINED)&&(i=a.showList[r].arg[1]),(n<a.showList[r].arg[1]+a.showList[r].arg[3]||typeof n==UNDEFINED)&&(n=a.showList[r].arg[1]+a.showList[r].arg[3]);else if(a.showList[r].type==LShape.ARC)(i>a.showList[r].arg[1]-a.showList[r].arg[2]||typeof i==UNDEFINED)&&(i=a.showList[r].arg[1]-a.showList[r].arg[2]),(n<a.showList[r].arg[1]+a.showList[r].arg[2]||typeof n==UNDEFINED)&&(n=a.showList[r].arg[1]+a.showList[r].arg[2]);else if(a.showList[r].type==LShape.VERTICES)for(s=0,e=a.showList[r].arg.length;e>s;s++)o=a.showList[r].arg[s],(i>o[1]||typeof i==UNDEFINED)&&(i=o[1]),(n<o[1]||typeof n==UNDEFINED)&&(n=o[1]);else a.showList[r].type==LShape.LINE?((i>a.showList[r].arg[1]||typeof i==UNDEFINED)&&(i=a.showList[r].arg[1]),(i>a.showList[r].arg[3]||typeof i==UNDEFINED)&&(i=a.showList[r].arg[3]),(n<a.showList[r].arg[1]||typeof n==UNDEFINED)&&(n=a.showList[r].arg[1]),(n<a.showList[r].arg[3]||typeof n==UNDEFINED)&&(n=a.showList[r].arg[3])):a.showList[r].type==LShape.POINT&&((i>a.showList[r].arg[1]||typeof i==UNDEFINED)&&(i=a.showList[r].arg[1]),(n<a.showList[r].arg[1]||typeof n==UNDEFINED)&&(n=a.showList[r].arg[1]));return typeof i==UNDEFINED&&(i=n=0),a.top=i,t>0&&n==i&&(n=i+1),n-i},startX:function(){var t=this;return t.getWidth(),t.left},startY:function(){var t=this;return t.getHeight(),t.top}};for(var i in e)t.prototype[i]=e[i];return t}(),LShape=function(){function t(){var t=this;LExtends(t,LInteractiveObject,[]),t.type="LShape",t.graphics=new LGraphics,t.graphics.parent=t}t.POINT="point",t.LINE="line",t.ARC="arc",t.RECT="rect",t.VERTICES="vertices";var e={_ll_show:function(t){var e=this;e.graphics.ll_show()},getWidth:function(t){var e,i,n=this,o=n.graphics.startX(),a=o+n.graphics.getWidth();return t&&n.mask&&(e=n.mask._startX?n.mask._startX():n.mask.startX(),i=n.mask.getWidth(),e>o&&(o=e),a>e+i&&(a=e+i)),n.ll_left=n.x+o,n.ll_right=n.x+a,(a-o)*n.scaleX},getHeight:function(t){var e,i,n=this,o=n.graphics.startY(),a=o+n.graphics.getHeight();return t&&n.mask&&(e=n.mask._startY?n.mask._startY():n.mask.startY(),i=n.mask.getHeight(),e>o&&(o=e),a>e+i&&(a=e+i)),n.ll_top=n.y+o,n.ll_bottom=n.y+a,(a-o)*n.scaleY},_startX:function(){var t=this;return t.getWidth(),t.ll_left},startX:function(){var t=this;return t._startX()*t.scaleX},_startY:function(){var t=this;return t.getHeight(),t.ll_top},startY:function(){var t=this;return t._startY()*t.scaleY},clone:function(){var e=this,i=new t;return i.copyProperty(e),i.graphics=e.graphics.clone(),i.graphics.parent=i,i},ismouseon:function(t,e){var i,n=this,o=!1;return n.visible&&null!=t?n.mask&&(n.mask.parent||(n.mask.parent=n.parent),!n.mask.ismouseon(t,e))?!1:(i={x:n.x*e.scaleX+e.x,y:n.y*e.scaleY+e.y,scaleX:e.scaleX*n.scaleX,scaleY:e.scaleY*n.scaleY},n.graphics&&(o=n.graphics.ismouseon(t,i)),o):!1},die:function(){var t=this;t.graphics.clear()}};for(var i in e)t.prototype[i]=e[i];return t}(),LSprite=function(){function t(){var t=this;LExtends(t,LDisplayObjectContainer,[]),t.type="LSprite",t.rotatex,t.rotatey,t.graphics=new LGraphics,t.graphics.parent=t,t.box2dBody=null,t.shapes=new Array,t.dragRange=null}var e={setRotate:function(t){var e=this;e.box2dBody?e.box2dBody.SetAngle(t):e.rotate=t},_rotateReady:function(){var t=this;t.box2dBody&&(typeof t.rotatex==UNDEFINED&&t.getRotateXY(),t.x=t.box2dBody.GetPosition().x*LGlobal.box2d.drawScale-t.parent.x-t.rotatex,t.y=t.box2dBody.GetPosition().y*LGlobal.box2d.drawScale-t.parent.y-t.rotatey,t.rotate=t.box2dBody.GetAngle())},_ll_show:function(t){var e=this;e.graphics.ll_show(),LGlobal.show(e.childList),e._ll_debugShape()},startDrag:function(t){var e=this;e.ll_dragStart||(e.ll_touchPointID=t,e.ll_dragStartX=e.x,e.ll_dragStartY=e.y,e.ll_dragMX=mouseX,e.ll_dragMY=mouseY,e.ll_dragStart=!0,LGlobal.dragList.push(e))},stopDrag:function(){var t,e,i=this;for(t=0,e=LGlobal.dragList.length;e>t;t++)if(i.objectIndex==LGlobal.dragList[t].objectIndex){i.ll_dragStart=!1,LGlobal.dragList.splice(t,1);break}},getRotateXY:function(t,e){var i=this;t&&e||(t=i.getWidth(),e=i.getHeight()),i.rotatex=t/2,i.rotatey=e/2},getWidth:function(t){var e,i,n,o,a,r,s,l=this,h=l.graphics.startX(),c=h+l.graphics.getWidth();for(e=0,i=l.childList.length;i>e;e++)n=l.childList[e],typeof n.visible!=UNDEFINED&&n.visible&&(o=n.x,"function"==typeof n._startX&&(o=n._startX()),a=o+n.getWidth(t),h>o&&(h=o),a>c&&(c=a));return t&&l.mask&&(r=l.mask._startX?l.mask._startX():l.mask.startX(),s=l.mask.getWidth(),r>h&&(h=r),c>r+s&&(c=r+s)),l.ll_left=l.x+h,l.ll_right=l.x+c,(c-h)*l.scaleX},getHeight:function(t){var e,i,n,o,a,r,s,l=this,h=l.graphics.startY(),c=h+l.graphics.getHeight();for(e=0,i=l.childList.length;i>e;e++)n=l.childList[e],typeof n.visible!=UNDEFINED&&n.visible&&(o=n.y,"function"==typeof n._startY&&(o=n._startY()),a=o+n.getHeight(t),h>o&&(h=o),a>c&&(c=a));return t&&l.mask&&(r=l.mask._startY?l.mask._startY():l.mask.startY(),s=l.mask.getHeight(),r>h&&(h=r),c>r+s&&(c=r+s)),l.ll_top=l.y+h,l.ll_bottom=l.y+c,(c-h)*l.scaleY},_startX:function(){var t=this;return t.getWidth(),t.ll_left},startX:function(){var t=this;return t._startX()*t.scaleX},_startY:function(){var t=this;return t.getHeight(),t.ll_top},startY:function(){var t=this;return t._startY()*t.scaleY},_ll_loopframe:function(){this.dispatchEvent(LEvent.ENTER_FRAME)},clone:function(){var e,i,n,o,a=this,r=new t;for(r.copyProperty(a),r.graphics=a.graphics.clone(),r.graphics.parent=r,r.childList.length=0,n=0,o=a.childList.length;o>n;n++)e=a.childList[n],e.clone&&(i=e.clone(),i.parent=r,r.childList.push(i));return r},_mevent:function(t){var e,i=this;for(e=0;e<i.mouseList.length;e++){var n=i.mouseList[e];if(n.type==t)return!0}return!1},ll_dispatchMouseEvent:function(t,e,n,o,a){var r=this;if(r.mouseEnabled)for(i=0;i<r.mouseList.length;i++){var s=r.mouseList[i];s.type==t&&(e.selfX=(o-(r.x*n.scaleX+n.x))/(n.scaleX*r.scaleX),e.selfY=(a-(r.y*n.scaleY+n.y))/(n.scaleY*r.scaleY),e.currentTarget=e.clickTarget=r,e.target||(e.target=r),s.listener(e,r))}},ll_mouseout:function(t,e,i,n,o){var a=this;if(e==LMouseEvent.MOUSE_MOVE&&a.ll_mousein&&(a.ll_mousein=!1,a._mevent(LMouseEvent.MOUSE_OUT)&&a.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OUT,t,i,n,o),a.mouseChildren))for(var r=a.childList.length-1;r>=0;r--)a.childList[r].mouseEvent&&a.childList[r].ll_mouseout&&a.childList[r].ll_mouseout(t,e,i,n,o)},mouseEvent:function(t,e,i){if(!t)return!1;var n,o,a,r,s=this,l=t.offsetX,h=t.offsetY;if(!s.visible)return!1;if(null==i&&(i={x:0,y:0,scaleX:1,scaleY:1}),a=s.ismouseon(t,i)){if(e!=LMouseEvent.MOUSE_MOVE||s.ll_mousein||(s.ll_mousein=!0,s._mevent(LMouseEvent.MOUSE_OVER)&&s.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OVER,t,i,l,h)),s.mouseChildren){for(r={x:s.x*i.scaleX+i.x,y:s.y*i.scaleY+i.y,scaleX:i.scaleX*s.scaleX,scaleY:i.scaleY*s.scaleY},o=s.childList.length-1;o>=0&&(!s.childList[o].mouseEvent||(n=s.childList[o].mouseEvent(t,e,r),!n||(t.target=s.childList[o],e==LMouseEvent.MOUSE_MOVE)));o--);s._mevent(e)&&s.ll_dispatchMouseEvent(e,t,i,l,h)}return!0}return s.ll_mouseout(t,e,i,l,h),!1},hitTestPoint:function(t,e){var i=this,n=i.shapes;return n&&0!=n.length||(i.getWidth(),i.getHeight(),n=[{type:LShape.RECT,arg:[i.ll_left-i.x,i.ll_top-i.y,i.ll_right-i.ll_left,i.ll_bottom-i.ll_top]}]),i.ismouseonShapes(n,t,e)},hitTestObject:function(t){var e,i,n,o,a,r,s,l,h=this,c=h.shapes,d=t.shapes;for(c&&0!=c.length||(h.getWidth(),h.getHeight(),c=[{type:LShape.RECT,arg:[h.ll_left-h.x,h.ll_top-h.y,h.ll_right-h.ll_left,h.ll_bottom-h.ll_top]}]),d&&0!=d.length||(t.getWidth(),t.getHeight(),d=[{type:LShape.RECT,arg:[t.ll_left-t.x,t.ll_top-t.y,t.ll_right-t.ll_left,t.ll_bottom-t.ll_top]}]),e=h.getRootMatrix(),i=t.getRootMatrix(),n=c.length-1;n>=0;n--)for(o=c[n],l=h._changeShape(o.type,o.arg,e),a=d.length-1;a>=0;a--)if(r=d[a],s=t._changeShape(r.type,r.arg,i),o.type==LShape.VERTICES||o.type==LShape.RECT){if(r.type==LShape.VERTICES||r.type==LShape.RECT){if(LGlobal.hitTestPolygon(l,s))return!0}else if(r.type==LShape.ARC&&LGlobal.hitTestPolygonArc(l,s))return!0}else if(r.type==LShape.VERTICES||r.type==LShape.RECT){if(LGlobal.hitTestPolygonArc(s,l))return!0}else if(r.type==LShape.ARC&&Math.sqrt((l[0]-s[0])*(l[0]-s[0])+(l[1]-s[1])*(l[1]-s[1]))<l[2]+s[2])return!0;return!1},addShape:function(t,e){var i=this;if(!(t==LShape.VERTICES&&e.length<3))return i.shapes.push({type:t,arg:e}),i.shapes},addShapes:function(t){var e=this;e.shapes=0==e.shapes.length?t:e.shapes.concat(t)},clearShape:function(){this.shapes=[]},_ll_debugShape:function(){var t,e,i,n,o,a,r,s=this;if(LGlobal.traceDebug&&0!=s.shapes.length)for(t=0,e=s.shapes.length;e>t;t++){if(i=s.shapes[t],n=LGlobal.canvas,o=i.arg,n.beginPath(),i.type==LShape.RECT)n.rect(o[0],o[1],o[2],o[3]);else if(i.type==LShape.ARC)n.arc(o[0],o[1],o[2],0,2*Math.PI);else if(i.type==LShape.VERTICES){for(n.moveTo(o[0][0],o[0][1]),a=1,r=o.length;r>a;a++)n.lineTo(o[a][0],o[a][1]);n.lineTo(o[0][0],o[0][1])}n.closePath(),n.strokeStyle="#00FF00",n.stroke()}},ismouseon:function(t,e){var i=this;if(!i.visible||null==t)return!1;if(i.mask&&(i.mask.parent||(i.mask.parent=i.parent),!i.mask.ismouseon(t,e)))return!1;if(i.shapes&&i.shapes.length>0)return i.ismouseonShapes(i.shapes,t.offsetX,t.offsetY);var n,o=!1,a=i.childList,r={x:i.x*e.scaleX+e.x,y:i.y*e.scaleY+e.y,scaleX:e.scaleX*i.scaleX,scaleY:e.scaleY*i.scaleY};for(n=a.length-1;n>=0;n--)if(a[n].ismouseon&&(o=a[n].ismouseon(t,r)),o){t.target=i.childList[n];break}return o||(o=i.graphics.ismouseon(t,r)),o},die:function(){var t,e,i,n=this;for(n.graphics.clear(),n.removeAllEventListener(),n.stopDrag(),n.box2dBody&&n.clearBody(),t=0,e=n.childList,i=e.length;i>t;t++)e[t].die&&e[t].die()}};for(var i in e)t.prototype[i]=e[i];return t}(),LButton=function(){function t(e,i,n,o){var a=this;LExtends(a,LSprite,[]),a.type="LButton",a.addChild(e),i?a.addChild(i):i=e,n?a.addChild(n):n=i,o?a.addChild(o):o=e,a.upState=a.bitmap_up=e,a.overState=a.bitmap_over=i,a.downState=n,a.disableState=o,a._ll_down_sx=a.downState.scaleX,a._ll_down_sy=a.downState.scaleY,a.overState.visible=!1,a.downState.visible=!1,a.upState.visible=!0,a.buttonMode=!0,a.staticMode=!1,a._ll_cursorEnabled=!0,a.setState(t.STATE_ENABLE),LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.pushButton(a),a.addEventListener(LMouseEvent.MOUSE_DOWN,a.ll_modeDown)}t.STATE_DISABLE="disable",t.STATE_ENABLE="enable";var e={setState:function(e){var i=this;if(e==t.STATE_DISABLE)i.upState.visible=!1,i.overState.visible=!1,i.downState.visible=!1,i.disableState.visible=!0,i.mouseEnabled=!1;else{if(e!=t.STATE_ENABLE)return;i.overState.visible=!1,i.downState.visible=!1,i.disableState.visible=!1,i.upState.visible=!0,i.mouseEnabled=!0}i.state=e},ll_mouseout:function(t,e,i,n,o){var a=this;a.ll_mousein&&(t.clickTarget=a,a.ll_modeOut(t),a.ll_mousein=!1)},mouseEvent:function(t,e,i){if(!t)return!1;var n=this;return e==LMouseEvent.MOUSE_MOVE&&n.ll_button_mode&&n.ll_button_mode(t),this.callParent("mouseEvent",arguments)},ll_button_mode:function(t){var e=this;e.visible&&(t.clickTarget=e,e.hitTestPoint(t.offsetX,t.offsetY)?e.ll_modeOver(t):e.ll_modeOut(t))},ll_modeDown:function(e){var i,n,o,a,r,s,l,h,c,d=e.clickTarget;if(d.buttonMode&&!d.tween){if(d.state==t.STATE_DISABLE)return d.upState.visible=!1,d.overState.visible=!1,d.downState.visible=!1,void(d.disableState.visible=!0);d.upState.visible=!1,d.overState.visible=!1,d.downState.visible=!0,d._tweenOver=d.ll_modeOver,c=function(t){var e=t.parent;delete e.tween,e._tweenOver({clickTarget:e}),delete e._tweenOver},d.staticMode?d.tween=LTweenLiteTimeline.to(d.downState,.3,{}).to(d.downState,.1,{onComplete:c}):(i=d.downState.getWidth(),n=d.downState.getHeight(),o=1.1*i,a=1.1*n,r=d.downState.x,s=d.downState.y,l=r+.5*(i-o),h=s+.5*(n-a),d.tween=LTweenLiteTimeline.to(d.downState,.3,{x:l,y:h,scaleX:1.1*d._ll_down_sx,scaleY:1.1*d._ll_down_sy,ease:Quart.easeOut}).to(d.downState,.1,{x:r,y:s,scaleX:d._ll_down_sx,scaleY:d._ll_down_sy,ease:Quart.easeOut,onComplete:c}))}},ll_modeOver:function(e){var i=e.clickTarget;if(i.buttonMode){if(i.tween)return void(i._tweenOver=i.ll_modeOver);if(i.state==t.STATE_DISABLE)return i.upState.visible=!1,i.overState.visible=!1,i.downState.visible=!1,void(i.disableState.visible=!0);i.upState.visible=!1,i.downState.visible=!1,i.overState.visible=!0,LGlobal.os==OS_PC&&i._ll_cursorEnabled&&i.parent&&(LGlobal.cursor="pointer")}},ll_modeOut:function(e){
var i=e.clickTarget;if(i.buttonMode){if(i.tween)return void(i._tweenOver=i.ll_modeOut);if(i.state==t.STATE_DISABLE)return i.upState.visible=!1,i.overState.visible=!1,i.downState.visible=!1,void(i.disableState.visible=!0);i.overState.visible=!1,i.downState.visible=!1,i.upState.visible=!0}},setCursorEnabled:function(t){this._ll_cursorEnabled=t},clone:function(){var e=this;return new t(e.upState.clone(),e.overState.clone(),e.downState.clone(),e.disableState.clone())},die:function(){var t=this;LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.removeButton(t),t.callParent("die",arguments)}};for(var i in e)t.prototype[i]=e[i];return t}();LBlendMode.SOURCE_OVER="source-over",LBlendMode.SOURCE_ATOP="source-atop",LBlendMode.SOURCE_IN="source-in",LBlendMode.SOURCE_OUT="source-out",LBlendMode.DESTINATION_OVER="destination-over",LBlendMode.DESTINATION_ATOP="destination-atop",LBlendMode.DESTINATION_IN="destination-in",LBlendMode.DESTINATION_OUT="destination-out",LBlendMode.LIGHTER="lighter",LBlendMode.COPY="copy",LBlendMode.XOR="xor",LBlendMode.NONE=null,LBlendMode.NORMAL=null;var LTextFieldType=function(){throw"LTextFieldType cannot be instantiated"};LTextFieldType.INPUT="input",LTextFieldType.DYNAMIC=null,LStyleSheet=function(){function t(){var t=this;LExtends(t,LObject,[]),t.styleIndex=0,t.styleNames={}}return t.prototype.clone=function(){var t=this,e=new t.constructor;return e.copyProperty(t),e},t.prototype.setStyle=function(t,e){if(this.styleIndex++,null===e)return void(this.styleNames[t]&&delete this.styleNames[t]);var i,n,o=e.replace(/(^\{)|(\}$)/g,"").split(";");for(e={},i=0;i<o.length;i++)if(o[i]){var n=o[i].split(":");n[0]&&(e[n[0]]=n[1])}this.styleNames[t]=e},t.prototype.getStyle=function(t){return this.styleNames[t]},t}(),LTextFormat=function(){function t(t,e,i,n,o,a){var r=this;LExtends(r,LObject,[]),r.font=t?t:"Arial",r.size=e?e:15,r.color=i?i:"#000000",r.bold=n?n:!1,r.italic=o?o:!1,r.underline=a?a:!1}return t.prototype.clone=function(){var t=this,e=new t.constructor;return e.copyProperty(t),e},t.prototype.getFontText=function(){var t=this;return(t.italic?"italic ":"")+(t.bold?"bold ":"")+t.size+"px "+t.font},t.prototype.setCss=function(t){var e,i=this;for(e in t)switch(e){case"color":i.color=t[e];break;case"font-family":i.font=t[e];break;case"font-size":i.size=t[e];break;case"font-style":i.italic="italic"==t[e];break;case"font-weight":i.bold="bold"==t[e];break;case"text-decoration":i.color="underline"==t[e]}},t}();var LTextField=function(){function t(){var e=this;LExtends(e,LInteractiveObject,[]),e.type="LTextField",e.texttype=null,e.text="",e.htmlText="",e.styleSheet="",e.font="Arial",e.size=15,e.color="#000000",e.weight="normal",e.textAlign="left",e.textBaseline="top",e.heightMode=t.HEIGHT_MODE_BOTTOM,e.stroke=!1,e.lineWidth=1,e.lineColor="#000000",e.width=150,e.height=e.size,e.displayAsPassword=!1,e.wordWrap=!1,e.multiline=!1,e.numLines=1,e.speed=0,e._speedIndex=100}t.HEIGHT_MODE_BOTTOM="bottom",t.HEIGHT_MODE_BASELINE="baseline";var e={_showReady:function(t){var e=this;t.font=e.weight+" "+e.size+"px "+e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline},ll_getStyleSheet:function(t,e,i,n){var o,a=this,r=t.clone();if("font"==e)for(var s=0;i&&!(s++>4);){o=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g;var l=o.exec(i);if(!l||!l[0])break;switch(l[2]){case"face":r.font=l[6];break;case"color":r.color=l[6];break;case"size":r.size=l[6]}i=i.replace(l[0],"").replace(/(^\s*)|(\s*$)|(\n)/g,"")}else if("b"==e)r.bold=!0;else if("u"==e)r.underline=!0;else if("i"==e)r.italic=!0;else if("p"==e&&a.wordWrap)n="\n"+n+"\n";else if(a.styleSheet){var h;if("span"==e){o=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g;var l=o.exec(i);if(l&&l[0])switch(l[2]){case"class":h=a.styleSheet.getStyle("."+l[6])}}else a.styleSheet.getStyle(e)&&(h=a.styleSheet.getStyle(e));h&&r.setCss(h)}a.ll_getHtmlText(r,n)},ll_getHtmlText:function(t,e){if(e){var i,n,o,a,r=this,s=/<(.*?)(\s*)(.*?)>(.*?)<\/\1>/g,l=s.exec(e);if(!l||!l[0])return void r.ll_htmlTexts.push({textFormat:t.clone(),text:e});l.index>0&&r.ll_htmlTexts.push({textFormat:t.clone(),text:e.substring(0,l.index)}),i=l[1],o=l.index,a=o;do a=e.indexOf("</"+i,a+1),o=e.indexOf("<"+i,o+1);while(o>0&&a>o);n=e.substring(e.indexOf(">",l.index)+1,a),r.ll_getStyleSheet(t,i,l[3],n),r.ll_getHtmlText(t,e.substring(a+i.length+3))}},_ll_show:function(e){var i,n,o,a,r,s,l,h,c,d,u,p,f=this;if(f.texttype!=LTextFieldType.INPUT||(f.inputBackLayer.ll_show(),o=f.getRootCoordinate(),LGlobal.inputBox.name=="input"+f.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((o.y+f.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((o.x+f.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px"),!LGlobal.inputTextField||LGlobal.inputTextField.objectIndex!=f.objectIndex)){if(LGlobal.fpsStatus&&LGlobal.fpsStatus.text++,e.fillStyle=f.color,f.stroke&&(e.strokeStyle=f.lineColor,e.lineWidth=f.lineWidth+1),f.htmlText)return(f.ll_htmlText!=f.htmlText||f.styleSheet&&(f.ll_style_objectIndex!=f.styleSheet.objectIndex||f.ll_styleIndex==f.styleSheet.styleIndex))&&(u=new LTextFormat,f.ll_htmlTexts=[],f.ll_htmlText=f.htmlText,f.styleSheet&&(f.ll_style_objectIndex=f.styleSheet.objectIndex,f.ll_styleIndex=f.styleSheet.styleIndex),f.ll_getHtmlText(u,f.htmlText)),a=0,s=0,l=0,h=0,f._wordHeight=f.wordHeight||30,t.underlineY||(t.underlineY={alphabetic:0,top:1,bottom:-.2,middle:.4,hanging:.8}),void f.ll_htmlTexts.forEach(function(i){var o=i.textFormat,h=i.text;for(e.font=o.getFontText(),e.fillStyle=o.color,n=0,r=h.length;r>n;n++)d=/(?:\r\n|\r|\n|n)/.exec(h.substr(n,1)),d?(a=0,s=n+1,l++):(c=1.2*e.measureText("O").width,f.stroke&&e.strokeText(h.substr(n,1),a,l*f._wordHeight),e.fillText(h.substr(n,1),a,l*f._wordHeight),o.underline&&(e.beginPath(),p=l*f._wordHeight+c*t.underlineY[f.textBaseline],e.moveTo(a,p),e.lineTo(a+e.measureText(h.substr(n,1)).width,p),e.stroke())),a+=e.measureText(h.substr(n,1)).width,f.wordWrap&&a+e.measureText(h.substr(n+1,1)).width>f.width&&(a=0,s=n+1,l++);f.height=(l+1)*f._wordHeight});if(i=f.text,f.displayAsPassword)for(i="",n=0,r=f.text.length;r>n;n++)i+="*";if(f.wordWrap||f.multiline){for(a=0,s=0,l=0,h=0,n=0,r=f.text.length;r>n;n++)d=/(?:\r\n|\r|\n|n)/.exec(i.substr(n,1)),d?(a=0,s=n+1,l++):(f.stroke&&e.strokeText(i.substr(n,1),a,l*f.wordHeight),e.fillText(i.substr(n,1),a,l*f.wordHeight)),f.numLines=l,a=e.measureText(f.text.substr(s,n+1-s)).width,f.wordWrap&&a+e.measureText(i.substr(n,1)).width>f.width&&(a=0,s=n+1,l++);f.height=(l+1)*f.wordHeight}else f.numLines=1,f.stroke&&e.strokeText(i,0,0,e.measureText(i).width),e.fillText(i,0,0,e.measureText(i).width);f.windRunning&&f._ll_windRun()}},_wordHeight:function(t){var e=this;t>0?e.wordHeight=t:(e.wordWrap=!1,e.wordHeight=e.getHeight()),e.height=0},setMultiline:function(t,e){var i=this;t&&i._wordHeight(e),i.multiline=t},setWordWrap:function(t,e){var i=this;t&&i._wordHeight(e),i.wordWrap=t},setType:function(t,e){var i=this;i.texttype!=t&&t==LTextFieldType.INPUT?(null==e||"LSprite"!=e.type?(i.inputBackLayer=new LSprite,i.inputBackLayer.graphics.drawRect(1,"#000000",[0,.4*-i.getHeight(),i.width,1.5*i.getHeight()])):i.inputBackLayer=e,i.inputBackLayer.parent=i,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.pushInputBox(i)):(i.inputBackLayer=null,LMouseEventContainer.removeInputBox(i)),i.texttype=t},ismouseon:function(t,e){var i=this;return t&&i.visible?(e||(e={x:0,y:0,scaleX:1,scaleY:1}),i.mask&&(i.mask.parent||(i.mask.parent=i.parent),!i.mask.ismouseon(t,e))?!1:i.inputBackLayer?i.inputBackLayer.ismouseon(t,{x:i.x*e.scaleX+e.x,y:i.y*e.scaleY+e.y,scaleX:e.scaleX*i.scaleX,scaleY:e.scaleY*i.scaleY}):i.ismouseonShapes([{type:LShape.RECT,arg:[0,0,i._getWidth(),i._getHeight()]}],t.offsetX,t.offsetY)):!1},clone:function(){var t=this,e=new t.constructor;return e.copyProperty(t),e.texttype=null,t.texttype==LTextFieldType.INPUT&&e.setType(LTextFieldType.INPUT),e},mouseEvent:function(t,e,i){var n,o=this;null!=o.inputBackLayer&&e==LMouseEvent.MOUSE_DOWN&&(n=o.ismouseon(t,i),n&&o.focus())},_ll_getValue:function(){LGlobal.inputBox.style.display!=NONE&&(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),LGlobal.inputTextField=null)},updateInput:function(){var t=this;t.texttype==LTextFieldType.INPUT&&LGlobal.inputTextField.objectIndex==t.objectIndex&&(LGlobal.inputTextBox.value=LGlobal.inputTextField.text)},_ll_input:function(t){var e=new LEvent(LTextEvent.TEXT_INPUT);e.keyCode=t.keyCode,LGlobal.inputTextField.text=LGlobal.inputTextBox.value,t.returnValue=LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)?LGlobal.inputTextField.dispatchEvent(e):!0},focus:function(){var t,e,i=this;i.parent&&i.texttype==LTextFieldType.INPUT&&(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=i.objectIndex&&i._ll_getValue(),i.dispatchEvent(LFocusEvent.FOCUS_IN),t=i.getAbsoluteScale(),LGlobal.inputBox.style.display="",LGlobal.inputBox.name="input"+i.objectIndex,LGlobal.inputTextField=i,LGlobal.inputTextareaBoxObj.style.display=NONE,LGlobal.inputTextBoxObj.style.display=NONE,LGlobal.passwordBoxObj.style.display=NONE,LGlobal.inputTextBox=i.displayAsPassword?LGlobal.passwordBoxObj:i.multiline?LGlobal.inputTextareaBoxObj:LGlobal.inputTextBoxObj,e=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height,LGlobal.inputTextBox.style.display="",LGlobal.inputTextBox.value=i.text,LGlobal.inputTextBox.style.height=i.inputBackLayer.getHeight()*t.scaleY*i.scaleY*sy+"px",LGlobal.inputTextBox.style.width=i.inputBackLayer.getWidth()*t.scaleX*i.scaleX*e+"px",LGlobal.inputTextBox.style.color=i.color,LGlobal.inputTextBox.style.fontSize=(i.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px",LGlobal.inputTextBox.style.fontFamily=i.font,LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),i.texttype==LTextFieldType.INPUT&&(rc=i.getRootCoordinate(),LGlobal.inputBox.name=="input"+i.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+i.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+i.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")),setTimeout(function(){LGlobal.inputTextBox.focus()},0))},_getWidth:function(){var t=this;return t.wordWrap?t.width:(LGlobal.canvas.font=t.size+"px "+t.font,LGlobal.canvas.measureText(t.text).width)},getWidth:function(t){var e,i,n,o=this;return e=o._getWidth()*o.scaleX,t&&o.mask?(i=o.mask._startX?o.mask._startX():o.mask.startX(),i>e?0:(n=o.mask.getWidth(),i+n>e?e-i:n)):e},_getHeight:function(){var e,i,n,o,a,r,s=this,l=LGlobal.canvas;if(s.wordWrap){if(l.font=s.weight+" "+s.size+"px "+s.font,0==s.height){for(n=0,o=0,a=0,e=0,i=s.text.length;i>e;e++)n=l.measureText(s.text.substr(o,e-o)).width,r=/(?:\r\n|\r|\n|n)/.exec(s.text.substr(e,1)),(s.wordWrap&&n>s.width||r)&&(n=0,o=e,a++,r&&o++);s.height=(a+1)*s.wordHeight}return s.height}return l.font=s.weight+" "+s.size+"px "+s.font,i=1.2*l.measureText("O").width,s.heightMode==t.HEIGHT_MODE_BASELINE&&(i=1.2*i),i},getHeight:function(t){var e,i,n,o=this;return e=o._getHeight()*o.scaleY,t&&o.mask?(i=o.mask._startY?o.mask._startY():o.mask.startY(),i>e?0:(n=o.mask.getHeight(),i+n>e?e-i:n)):e},wind:function(t){var e=this;e.wind_over_function=t,e.windRunning=!0,e._ll_wind_text=e.text,e.text="",e._ll_wind_length=0},_ll_windRun:function(){var t=this;if(!(t._speedIndex++<t.speed)){if(t._speedIndex=0,t._ll_wind_length>t._ll_wind_text.length)return t.windRunning=!1,t.wind_over_function&&t.wind_over_function(),void t.dispatchEvent(new LEvent(LTextEvent.WIND_COMPLETE));t.text=t._ll_wind_text.substring(0,t._ll_wind_length),t._ll_wind_length++}},die:function(){LMouseEventContainer.removeInputBox(this)}};for(var i in e)t.prototype[i]=e[i];return t}(),LBitmap=function(){function t(t){var e=this;LExtends(e,LDisplayObject,[]),e.type="LBitmap",e.rotateCenter=!0,e.bitmapData=t,e.bitmapData&&(e.width=e.bitmapData.width,e.height=e.bitmapData.height)}var e={_canShow:function(){return this.visible&&this.bitmapData},_rotateReady:function(){var t=this;0!=t.rotate&&t.rotateCenter?(t.rotatex=.5*t.getWidth(),t.rotatey=.5*t.getHeight()):t.rotatex=t.rotatey=0},_coordinate:function(t){},_ll_show:function(){this.ll_draw()},ll_draw:function(){var t=this;LGlobal.fpsStatus&&LGlobal.fpsStatus.bitmapData++,LGlobal.canvas.drawImage(t.bitmapData.image,t.bitmapData.x,t.bitmapData.y,t.bitmapData.width,t.bitmapData.height,t.x,t.y,t.bitmapData.width,t.bitmapData.height)},clone:function(){var e=this,i=new t(e.bitmapData.clone());return i.copyProperty(e),i.rotateCenter=e.rotateCenter,i},ismouseon:function(t,e){var i=this;return t&&i.visible&&i.bitmapData?i.mask&&(i.mask.parent||(i.mask.parent=i.parent),!i.mask.ismouseon(t,e))?!1:i.ismouseonShapes([{type:LShape.RECT,arg:[0,0,i.bitmapData.width,i.bitmapData.height]}],t.offsetX,t.offsetY):!1},getWidth:function(t){var e,i,n,o=this;return e=null!=o.bitmapData?o.bitmapData.width*(o.scaleX>0?o.scaleX:-o.scaleX):0,t&&o.mask?(i=o.mask._startX?o.mask._startX():o.mask.startX(),i>e?0:(n=o.mask.getWidth(),i+n>e?e-i:n)):e},getHeight:function(t){var e,i,n,o=this;return e=null!=o.bitmapData?o.bitmapData.height*(o.scaleY>0?o.scaleY:-o.scaleY):0,t&&o.mask?(i=o.mask._startY?o.mask._startY():o.mask.startY(),i>e?0:(n=o.mask.getHeight(),i+n>e?e-i:n)):e},startX:function(){return this.x},startY:function(){return this.y},die:function(){}};for(var i in e)t.prototype[i]=e[i];return t}(),LBitmapData=function(){function t(e,i,n,o,a,r){var s=this;if(LExtends(s,LObject,[]),s.type="LBitmapData",typeof r==UNDEFINED&&(r=t.DATA_IMAGE),s.oncomplete=null,s._locked=!1,s._setPixel=!1,s.x=null==i?0:i,s.y=null==n?0:n,s.width=0,s.height=0,s.dataType=null,e&&"object"==typeof e)s.image=e,s.dataType=t.DATA_IMAGE,s.width=null==o?s.image.width:o,s.height=null==a?s.image.height:a,s._setDataType(r);else{if(s._createCanvas(),s.dataType=t.DATA_CANVAS,s._canvas.width=s.width=null==o?1:o,s._canvas.height=s.height=null==a?1:a,"string"==typeof e&&(e=parseInt(e.replace("#","0x"))),"number"==typeof e){for(var l=s._context.createImageData(s.width,s.height),h=0;h<l.data.length;h+=4)l.data[h+0]=e>>16&255,l.data[h+1]=e>>8&255,l.data[h+2]=255&e,l.data[h+3]=255;s._context.putImageData(l,0,0)}s.image=s._canvas,r==t.DATA_IMAGE&&s._setDataType(r)}s.resize()}t.DATA_IMAGE="data_image",t.DATA_CANVAS="data_canvas";var e={_setDataType:function(e){var i=this;i.dataType!=e&&(e==t.DATA_CANVAS?(i._createCanvas(),i._canvas.width=i.image.width,i._canvas.height=i.image.height,i._context.clearRect(0,0,i._canvas.width,i._canvas.height),i._context.drawImage(i.image,0,0),i.image=i._canvas):e==t.DATA_IMAGE&&(i.image=new Image,i.image.width=i._canvas.width,i.image.height=i._canvas.height,i.image.src=i._canvas.toDataURL()),i.dataType=e)},_createCanvas:function(){var t=this;t._canvas||(t._canvas=document.createElement("canvas"),t._context=t._canvas.getContext("2d"))},clear:function(){var e=this;e._createCanvas(),e._canvas.width=e.image.width,e.dataType==t.DATA_IMAGE&&(e.image.src=e._canvas.toDataURL())},setProperties:function(t,e,i,n){var o=this;o.x=t,o.y=e,o.width=i,o.height=n,o.resize()},setCoordinate:function(t,e){var i=this;i.x=t,i.y=e,i.resize()},clone:function(){var e=this;return new t(e.image,e.x,e.y,e.width,e.height,e.dataType)},_ready:function(){var e=this;e._dataType=e.dataType,e._setDataType(t.DATA_CANVAS),e._data=e._context.getImageData(e.x,e.y,e.width,e.height)},_update:function(){var t=this;t._context.putImageData(t._data,t.x,t.y,0,0,t.width,t.height),t._setDataType(t._dataType),t._data=null},getPixel:function(t,e,i){var n,o,a=this;return t>>=0,e>>=0,a._locked||a._ready(),n=4*a.width*e+4*t,o=a._data.data,a._locked||a._update(),"number"==i?o[n]<<16|o[n+1]<<8|o[n+2]:[o[n],o[n+1],o[n+2],o[n+3]]},setPixel:function(t,e,i){var n=this;t>>=0,e>>=0,n._locked||n._ready();var o=n._data,a=4*n.width*e+4*t;"object"==typeof i?(o.data[a+0]=i[0],o.data[a+1]=i[1],o.data[a+2]=i[2],o.data[a+3]=i[3]):("string"==typeof i&&(i=parseInt(i.replace("#","0x"))),o.data[a+0]=i>>16&255,o.data[a+1]=i>>8&255,o.data[a+2]=255&i,o.data[a+3]=255),n._locked||n._update()},getPixels:function(t){var e,i=this;return i._locked||i._ready(),e=i._context.getImageData(i.x+t.x,i.y+t.y,t.width,t.height),i._locked||i._update(),e},setPixels:function(t,e){var i,n,o,a,r,s,l=this;if(l._locked||l._ready(),o=l._data,"object"==typeof e)for(a=l._canvas.width,r=t.x;r<t.right;r++)for(s=t.y;s<t.bottom;s++)i=4*a*(l.y+s)+4*(l.x+r),n=4*e.width*(s-t.y)+4*(r-t.x),o.data[i+0]=e.data[n+0],o.data[i+1]=e.data[n+1],o.data[i+2]=e.data[n+2],o.data[i+3]=e.data[n+3];else for("string"==typeof e&&(e=parseInt(e.replace("#","0x"))),e=[e>>16&255,e>>8&255,255&e],a=l._canvas.width,r=t.x;r<t.right;r++)for(s=t.y;s<t.bottom;s++)i=4*a*(l.y+s)+4*(l.x+r),o.data[i+0]=e[0],o.data[i+1]=e[1],o.data[i+2]=e[2],o.data[i+3]=255;l._locked||l._update()},putPixels:function(e,i){var n=this;n.dataType==t.DATA_CANVAS&&"object"==typeof i&&n._context.putImageData(i,n.x+e.x,n.y+e.y,0,0,e.width,e.height)},lock:function(){var t=this;t._locked=!0,t._ready()},unlock:function(){var t=this;t._locked=!1,t._update()},draw:function(e,i,n,o,a){var r,s,l,h,c,d=this,u=e,p=!1,f=d.dataType;return d._setDataType(t.DATA_CANVAS),(i||n||o||a)&&(d._context.save(),p=!0),a&&(u instanceof t?(s=u.x,l=u.y):s=l=0,u=new t(u.getDataCanvas(),s+a.x,l+a.y,a.width,a.height,t.DATA_CANVAS)),h=u.getWidth()>>>0,c=u.getHeight()>>>0,0==h||0==c?void d._setDataType(f):(r=u.getDataCanvas(),n&&(u.colorTransform(new LRectangle(0,0,h,c),n),r=u.image),i&&d._context.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),o&&(d._context.globalCompositeOperation=o),d._context.drawImage(r,u.x,u.y,h,c,0,0,h,c),p&&d._context.restore(),d._setDataType(f),void d.resize())},getDataCanvas:function(){var e=this,i=e.dataType;return e._setDataType(t.DATA_CANVAS),e._setDataType(i),e._canvas},getWidth:function(){return this.width},getHeight:function(){return this.height},resize:function(){var t=this,e=t.image.width-t.x,i=t.image.height-t.y;t.width=t.width<e?t.width:e,t.height=t.height<i?t.height:i},colorTransform:function(e,i){var n=this;if(n.dataType==t.DATA_CANVAS){for(var o=(e.x>>0,e.y>>0,e.width>>0,e.height>>0,n._context.getImageData(n.x+e.x,n.y+e.y,e.width,e.height)),a=o.data,r=0,s=a.length;s>r;r+=4){var l=r,h=r+1,c=r+2,d=r+3;a[l]=a[l]*i.redMultiplier+i.redOffset,a[h]=a[h]*i.greenMultiplier+i.greenOffset,a[c]=a[c]*i.blueMultiplier+i.blueOffset,a[d]=a[d]*i.alphaMultiplier+i.alphaOffset}n._context.putImageData(o,n.x+e.x,n.y+e.y,0,0,e.width,e.height)}},copyPixels:function(e,i,n){var o,a,r,s,l=this,h=e;l.dataType==t.DATA_CANVAS&&(o=h.x,a=h.y,r=h.width,s=h.height,h.setProperties(i.x+h.x,i.y+h.y,i.width,i.height),l._context.drawImage(h.image,h.x,h.y,h.width,h.height,n.x,n.y,h.width,h.height),h.x=o,h.y=a,h.width=r,h.height=s)}};for(var i in e)t.prototype[i]=e[i];return t}(),LDropShadowFilter=function(){function t(t,e,i,n){var o=this;LExtends(o,LObject,[]),o.type="LDropShadowFilter",o.distance=t?t:0,o.angle=e?e:0,o.shadowColor=i?i:"#000000",o.shadowBlur=n?n:20,o.setShadowOffset()}var e={setShadowOffset:function(){var t=this,e=t.angle*Math.PI/180;t.shadowOffsetX=t.distance*Math.cos(e),t.shadowOffsetY=t.distance*Math.sin(e)},ll_show:function(){var t=this,e=LGlobal.canvas;e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY},setDistance:function(t){this.distance=t,this.setShadowOffset()},setAngle:function(t){this.angle=t,this.setShadowOffset()},setColor:function(t){this.shadowColor=t},setBlur:function(t){this.shadowBlur=t}};for(var i in e)t.prototype[i]=e[i];return t}(),LAnimation=function(){function t(t,e,i){var n=this;LExtends(n,LSprite,[]),n.type="LAnimation",n.rowIndex=0,n.colIndex=0,n._ll_stepIndex=0,n._ll_stepArray=[],n.mode=1,n.isMirror=!1,n.bitmapList=Array.isArray(e)?e:[e],n.bitmap=new LBitmap(n.bitmapList[0]),n.imageArray=i,n.addChild(n.bitmap),null!=t&&t.addChild(n),n.onframe(),n.colIndex=0}var e={setAction:function(t,e,i,n){var o=this,a=!1;null!=t&&t>=0&&t<o.imageArray.length&&(o.rowIndex=t,a=!0),null!=e&&e>=0&&e<o.imageArray[t].length&&(o.colIndex=e,a=!0),null!=i&&(o.mode=i,a=!0),null!=n&&(o.isMirror=n,o.isMirror?(o.bitmap.x=o.bitmap.getWidth(),o.bitmap.scaleX=-1*Math.abs(o.bitmap.scaleX)):(o.bitmap.x=0,o.bitmap.scaleX=Math.abs(o.bitmap.scaleX)),a=!0),a&&(o._ll_stepIndex=0)},getAction:function(){var t=this;return[t.rowIndex,t.colIndex,t.mode,t.isMirror]},onframe:function(){var t,e=this,n=0,o=null;if(e.colIndex>=e.imageArray[e.rowIndex].length&&(e.colIndex=0),t=e.imageArray[e.rowIndex][e.colIndex],o=e._ll_stepArray[e.rowIndex]&&e._ll_stepArray[e.rowIndex][e.colIndex]?e._ll_stepArray[e.rowIndex][e.colIndex]:0,0==e._ll_stepIndex){if("number"==typeof t.dataIndex&&Array.isArray(e.bitmapList)&&t.dataIndex<e.bitmapList.length&&(e.bitmap.bitmapData=e.bitmapList[t.dataIndex]),t.script)for(i=0;i<t.script.length;i++)obj=t.script[i],l=e.ll_labelList[obj.name],l&&l.rowIndex==e.rowIndex&&l.colIndex==e.colIndex&&l.mode==e.mode&&l.isMirror==(-1==e.bitmap.scaleX)&&obj.func(e,obj.params);typeof t.width!=UNDEFINED&&typeof t.height!=UNDEFINED?e.bitmap.bitmapData.setProperties(t.x,t.y,t.width,t.height):e.bitmap.bitmapData.setCoordinate(t.x,t.y),typeof t.sx!=UNDEFINED&&(n=t.sx),typeof t.sy!=UNDEFINED&&(e.bitmap.y=t.sy),typeof t.mirror!=UNDEFINED&&(e.bitmap.rotateCenter=!1,e.bitmap.scaleX=t.mirror?-1:1),e.bitmap.x=n+(1==e.bitmap.scaleX?0:e.bitmap.getWidth())}e._ll_stepIndex++<o||(e._ll_stepIndex=0,e.colIndex+=e.mode,(e.colIndex>=e.imageArray[e.rowIndex].length||e.colIndex<0)&&(e.colIndex=e.mode>0?0:e.imageArray[e.rowIndex].length-1,"LAnimationTimeline"==e.constructor.name?e._send_complete=!0:e.dispatchEvent(LEvent.COMPLETE)))},clone:function(){var t=this,e=new t.constructor(null,t.bitmapList,t.imageArray.slice(0));return e.copyProperty(t),e.childList.length=0,e.bitmap=t.bitmap.clone(),e.addChild(e.bitmap),e}};for(var n in e)t.prototype[n]=e[n];return t}(),LAnimationTimeline=function(){function t(t,e){var i=this;LExtends(i,LAnimation,[null,t,e]),i.type="LAnimationTimeline",i.speed=0,i._speedIndex=0,i.ll_labelList={};for(var n,o,a,r=0;r<e.length;r++)for(n=e[r],o=0;o<n.length;o++)a=n[o],a.label&&i.setLabel(a.label,r,o,1,a.isMirror?!0:!1);i.addEventListener(LEvent.ENTER_FRAME,i._ll_onframe)}var e={clone:function(){var t,e,i=this,n=new i.constructor(i.bitmapList,i.imageArray.slice(0));n.copyProperty(i),n.childList.length=0,n.bitmap=i.bitmap.clone(),n.addChild(n.bitmap);for(t in i.ll_labelList)e=i.ll_labelList[t],n.ll_labelList[t]={rowIndex:e.rowIndex,colIndex:e.colIndex,mode:e.mode,isMirror:e.isMirror};return n},setFrameSpeedAt:function(t,e,i){var n=this;n._ll_stepArray[t]||(n._ll_stepArray[t]=[]),n._ll_stepArray[t][e]=i},_ll_onframe:function(t){var e=t.target;e._ll_stop||e._speedIndex++<e.speed||e._send_complete&&(e.dispatchEvent(LEvent.COMPLETE),e._send_complete=!1,e._ll_stop)||(e._speedIndex=0,e.onframe())},setLabel:function(t,e,i,n,o){this.ll_labelList[t]={rowIndex:e,colIndex:i,mode:typeof n==UNDEFINED?1:n,isMirror:typeof o==UNDEFINED?!1:o}},play:function(){this._ll_stop=!1},stop:function(){this._ll_stop=!0},gotoAndPlay:function(t){var e=this,i=e.ll_labelList[t];e.setAction(i.rowIndex,i.colIndex,i.mode,i.isMirror),e.onframe(),e.play()},gotoAndStop:function(t){var e=this,i=e.ll_labelList[t];e.setAction(i.rowIndex,i.colIndex,i.mode,i.isMirror),e.onframe(),e.stop()},addFrameScript:function(t,e,i){var n=this.ll_labelList[t],o=this.imageArray[n.rowIndex][n.colIndex];o.script||(o.script=[]),o.script.push({func:e,params:i,name:t})},removeFrameScript:function(t){var e,i,n,o=this.ll_labelList[t];if(i=this.imageArray[o.rowIndex][o.colIndex].script)for(n=0;n<i.length;n++)if(e=i[n],e.name==t){i.splice(n,1);break}}};for(var i in e)t.prototype[i]=e[i];return t}(),LLoadManage=function(){function t(){this.llname="ll.file.",this.llload="ll.load."}return t.prototype={load:function(t,e,i){var n=this;return t&&0!=t.length?(n.list=t,n.onupdate=e,n.oncomplete=i,n.loader=n,n.index=0,n.loadIndex=0,n.result=[],n.lresult=[],void n.loadInit()):void i([])},loadInit:function(){var t=this;t.index>=t.list.length||(t.loadIndex=0,t.loadStart(),t.reloadtime=setTimeout(t.loadInit.bind(t),1e4))},loadStart:function(){var t,e,i=this;i.loadIndex>=i.list.length||(t=i.list[i.loadIndex],t.name||(t.name=i.llname+i.loadIndex),i.lresult[i.llload+t.name]||(t.type||(e=getExtension(t.path),"txt"==e?t.type=LURLLoader.TYPE_TEXT:"js"==e?t.type=LURLLoader.TYPE_JS:new Array("mp3","ogg","wav","m4a").indexOf(e)>=0&&(t.type=LSound.TYPE_SOUND)),t.type==LURLLoader.TYPE_TEXT||t.type==LURLLoader.TYPE_JS?(i.loader=new LURLLoader,i.loader.name=t.name,i.loader.addEventListener(LEvent.COMPLETE,i.loadComplete.bind(i)),i.loader.load(i.url(t.path),t.type)):t.type==LSound.TYPE_SOUND?(i.loader=new LSound,i.loader.name=t.name,i.loader.addEventListener(LEvent.COMPLETE,i.loadComplete.bind(i)),i.loader.load(t.path)):(i.loader=new LLoader,i.loader.name=t.name,i.loader.addEventListener(LEvent.COMPLETE,i.loadComplete.bind(i)),i.loader.load(i.url(t.path),LLoader.TYPE_BITMAPDATE))),i.loadIndex++,i.loadStart())},loadComplete:function(t){var e=this;if(t&&t.currentTarget&&t.currentTarget.name){if(t.currentTarget.removeEventListener(LEvent.COMPLETE,e.loadComplete),t.currentTarget.name.indexOf(e.llname)>=0&&(t.target=1),e.lresult[e.llload+t.currentTarget.name])return;e.result[t.currentTarget.name]=t.target,e.lresult[e.llload+t.currentTarget.name]=1}if(e.index++,e.onupdate&&e.onupdate(Math.floor(100*e.index/e.list.length)),e.index>=e.list.length){e.reloadtime&&clearTimeout(e.reloadtime),e.loader=null;var i=e.result;LGlobal.forceRefresh=!0,e.oncomplete(i)}},url:function(t){return LGlobal.traceDebug?t+(t.indexOf("?")>=0?"&":"?")+"t="+(new Date).getTime():t}},new t}(),LEasing={None:{easeIn:function(t,e,i,n){return e+t*i/n},easeOut:function(t,e,i,n){return e+t*i/n},easeInOut:function(t,e,i,n){return e+t*i/n}},Quad:{easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOut:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOut:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOut:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}},Strong:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Expo:{easeIn:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOut:function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},easeInOut:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e}},Circ:{easeIn:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOut:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,i,n,o,a){var r;return 0==t?e:1==(t/=n)?e+i:(a||(a=.3*n),!o||o<Math.abs(i)?(o=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/a))+e)},easeOut:function(t,e,i,n,o,a){var r;return 0==t?e:1==(t/=n)?e+i:(a||(a=.3*n),!o||o<Math.abs(i)?(o=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/a)+i+e)},easeInOut:function(t,e,i,n,o,a){var r;return 0==t?e:2==(t/=n/2)?e+i:(a||(a=.3*n*1.5),!o||o<Math.abs(i)?(o=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/a)+e:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/a)*.5+i+e)}},Back:{easeIn:function(t,e,i,n,o){return typeof o==UNDEFINED&&(o=1.70158),i*(t/=n)*t*((o+1)*t-o)+e},easeOut:function(t,e,i,n,o){return typeof o==UNDEFINED&&(o=1.70158),i*((t=t/n-1)*t*((o+1)*t+o)+1)+e},easeInOut:function(t,e,i,n,o){return typeof o==UNDEFINED&&(o=1.70158),(t/=n/2)<1?i/2*t*t*(((o*=1.525)+1)*t-o)+e:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e}},Bounce:{easeIn:function(t,e,i,n){return i-LEasing.Bounce.easeOut(n-t,0,i,n)+e},easeOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,i,n){return n/2>t?.5*LEasing.Bounce.easeIn(2*t,0,i,n)+e:.5*LEasing.Bounce.easeOut(2*t-n,0,i,n)+.5*i+e}}},Quad=LEasing.Quad,Cubic=LEasing.Cubic,Quart=LEasing.Quart,Quint=LEasing.Quint,Sine=LEasing.Sine,Strong=LEasing.Strong,Expo=LEasing.Expo,Circ=LEasing.Circ,Elastic=LEasing.Elastic,Back=LEasing.Back,Bounce=LEasing.Bounce,LTweenLiteTimeline,LTweenLite=function(){function t(t,e,i){var n=this;LExtends(n,LObject,[]),n.type="LTweenLiteChild",n.toNew=[],n.init(t,e,i)}function e(){var t=this;LExtends(t,LObject,[]),t.type="LTweenLite",t.tweens=[]}var i={init:function(t,i,n){var o=this,a=null;typeof n.tweenTimeline==UNDEFINED&&(n.tweenTimeline=e.TYPE_FRAME),o.target=t,o.duration=i||.001,o.vars=n,o.delay=o.vars.delay||0,o.vars.tweenTimeline==e.TYPE_TIMER?(o.currentTime=(new Date).getTime()/1e3,o.initTime=o.currentTime,o.startTime=o.initTime+o.delay):(o.currentTime=0,o.duration*=1e3,o.currentTime-=1e3*o.delay),o.combinedTimeScale=o.vars.timeScale||1,o.active=0==o.duration&&0==o.delay,o.varsto={},o.varsfrom={},o.stop=!1,"function"!=typeof o.vars.ease&&(o.vars.ease=LEasing.None.easeIn),o.ease=o.vars.ease,delete o.vars.ease,o.vars.onComplete&&(o.onComplete=o.vars.onComplete,delete o.vars.onComplete),o.vars.onUpdate&&(o.onUpdate=o.vars.onUpdate,delete o.vars.onUpdate),o.vars.onStart&&(o.onStart=o.vars.onStart,delete o.vars.onStart);for(a in o.vars)o.varsto[a]=o.vars[a],o.varsfrom[a]=o.target[a]},pause:function(){this.stop=!0},resume:function(){this.stop=!1},tween:function(){var t,i=this,n=i.vars.tweenTimeline==e.TYPE_TIMER;if(n){var o=(new Date).getTime()/1e3,a=o-i.startTime;if(0>a)return}else{if(i.stop)return;if(i.currentTime+=LGlobal.speed,i.currentTime<0)return}for(t in i.varsto)"tweenTimeline"!=t&&(i.target[t]=n?i.ease(a,i.varsfrom[t],i.varsto[t]-i.varsfrom[t],i.duration):i.ease(i.currentTime,i.varsfrom[t],i.varsto[t]-i.varsfrom[t],i.duration));i.onStart&&(i._dispatchEvent(i.onStart),delete i.onStart);var r;if(r=n?a>=i.duration:i.currentTime>=i.duration){for(t in i.varsto)i.target[t]=i.varsto[t];return i.onComplete&&i._dispatchEvent(i.onComplete),!0}return i.onUpdate&&i._dispatchEvent(i.onUpdate),!1},_dispatchEvent:function(t){var e=this;e.target.target=e.target,e.target.currentTarget=e,t(e.target),delete e.target.currentTarget,delete e.target.target},to:function(t,e,i){var n=this;return n.toNew.push({target:t,duration:e,vars:i}),n},keep:function(){var t,e,i,n=this;if(n.toNew.length>0){if(t=n.toNew.shift(),t.vars.loop&&(n.loop=!0),n.loop){e={};for(i in t.vars)e[i]=t.vars[i];n.to(t.target,t.duration,e)}return n.init(t.target,t.duration,t.vars),
!0}return!1}};for(var n in i)t.prototype[n]=i[n];e.TYPE_FRAME="type_frame",e.TYPE_TIMER="type_timer",i={count:function(){return this.tweens.length},ll_show:function(){var t,e,i=this,n=i.tweens.length;for(t=0;n>t;t++)e=i.tweens[t],e&&e.tween&&e.tween()&&(i.tweens.splice(t,1),t--,n=i.tweens.length,e.keep()&&i.add(e))},to:function(e,i,n){if(e){var o=this,a=new t({},0,{});return o.tweens.push(a),a.to(e,i,n),a}},add:function(t){this.tweens.push(t)},remove:function(t){var e=this;if(typeof t!=UNDEFINED)for(var i=0,n=e.tweens.length;n>i;i++)if(t.objectIndex==e.tweens[i].objectIndex){e.tweens.splice(i,1);break}},removeAll:function(){this.tweens.splice(0,this.tweens.length)},pauseAll:function(){for(var t=0,e=this.tweens.length;e>t;t++)this.tweens[t].pause()},resumeAll:function(){for(var t=0,e=this.tweens.length;e>t;t++)this.tweens[t].resume()}};for(var n in i)e.prototype[n]=i[n];LTweenLiteTimeline=new e,LGlobal.childList.push(LTweenLiteTimeline);var o=new e;return o.TYPE_FRAME=e.TYPE_FRAME,o.TYPE_TIMER=e.TYPE_TIMER,LGlobal.childList.push(o),o}(),LAjax=function(){function t(){this.responseType=null}return t.prototype={TEXT:"text",JSON:"json",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",get:function(t,e,i,n){this.getRequest("GET",t,e,i,n)},post:function(t,e,i,n){this.getRequest("POST",t,e,i,n)},getRequest:function(t,e,i,n,o){var a,r=this,s="",l="";r.err=o;var h=r.getHttp();if(h){if(i)for(a in i)s+=l+a+"="+i[a],l="&";if("get"==t.toLowerCase()&&s.length>0&&(e+=(e.indexOf("?")>=0?"&":"?")+s,s=null),h.open(t,e,!0),r.responseType){if(r.responseType==r.JSON)try{h.responseType=r.responseType}catch(c){h.responseType=r.TEXT,h._responseType="json"}else h.responseType=r.responseType;r.responseType=r.TEXT}h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.onreadystatechange=function(){4==h.readyState&&(h.status>=200&&h.status<300||304===h.status?n&&(h._responseType==r.JSON?(h._responseType=r.TEXT,n(JSON.parse(h.responseText))):n(h.responseType==r.ARRAY_BUFFER||h.responseType==r.BLOB||h.responseType==r.JSON?h.response:h.responseText.length>0?h.responseText:null)):o&&o(h))},h.send(s)}},getHttp:function(){if(typeof XMLHttpRequest!=UNDEFINED)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){this.err||this.err(t)}}return!1}},new t}(),LStageWebView=function(){function t(){var t=this;LExtends(t,LEventDispatcher,[]),t.display=document.createElement("div"),t.iframe=document.createElement("iframe"),t.display.style.position="absolute",t.display.style.marginTop="0px",t.display.style.marginLeft="0px",t.display.style.zIndex=11,LGlobal.ios&&(t.display.style.overflow="auto",t.display.style.webkitOverflowScrolling="touch"),t.display.appendChild(t.iframe),t.idAdded=!1}var e={loadURL:function(t){var e=this;e.iframe.src=t,e.iframe.onload=function(){e.dispatchEvent(LEvent.COMPLETE)}},show:function(){var t=this;t.idAdded||(LGlobal.object.appendChild(t.display),t.idAdded=!0),"none"==t.display.style.display&&(t.display.style.display="")},die:function(){LGlobal.object.removeChild(this.display),this.idAdded=!1},hide:function(){this.display.style.display="none"},setViewPort:function(t){var e=this,i=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,n=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;e.display.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+(t.y*n>>>0)+"px",e.display.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+(t.x*i>>>0)+"px",e.iframe.style.width=e.display.style.width=(t.width*i>>>0)+"px",e.iframe.style.height=e.display.style.height=(t.height*n>>>0)+"px"}};for(var i in e)t.prototype[i]=e[i];return t}(),FPS=function(){function t(){var t=this;LExtends(t,LSprite,[]),LGlobal.fpsStatus||(LGlobal.fpsStatus={a:0,b:0,c:0,d:0,e:0,bitmapData:0,display:0,transform:0,graphics:0,text:0,reset:function(){this.a=this.bitmapData,this.b=this.display-1,this.c=this.transform-1,this.d=this.graphics-1,this.e=this.text-5,this.bitmapData=0,this.display=0,this.transform=0,this.graphics=0,this.text=0}}),t.fps=[],t.back=new LShape,t.back.alpha=.5,t.addChild(t.back);for(var e=0;5>e;e++){var i=new LTextField;i.color="#ffffff",i.y=20*e,t.addChild(i),t.fps.push(i)}t.fpsCount=0,t.fpsTime=(new Date).getTime(),t.addEventListener(LEvent.ENTER_FRAME,t.showFPS)}return t.prototype.showFPS=function(t){var e,i,n=t.currentTarget;n.fpsCount++,e=(new Date).getTime(),e-n.fpsTime<1e3||(n.fps[0].text="FPS:"+Math.round(1e4*n.fpsCount/(e-n.fpsTime))/10,i=LGlobal.fpsStatus,n.fps[1].text="DisplayObject:"+i.c+"/"+i.b,n.fps[2].text="Draw image:"+i.a,n.fps[3].text="Drwa graphics:"+i.d,n.fps[4].text="Draw text:"+i.e,n.fpsTime=e,n.fpsCount=0,n.back.graphics.clear(),n.back.graphics.drawRect(0,"#000000",[0,0,n.fps[1].getWidth(),100],!0,"#000000"))},t.prototype.die=function(){var t=this;LGlobal.fpsStatus=null,t.callParent("die",arguments)},t}(),LQuadTree=function(){function t(t){var e=this;LExtends(e,LObject,[]),e.q1=null,e.q2=null,e.q3=null,e.q4=null,e.parent=null,e.data=[],e.rect=t,e.root=e}var e={createChildren:function(e){if(0!=e){var i=this,n=i.rect.width/2,o=i.rect.height/2;i.q1=new t(new LRectangle(i.rect.x+n,i.rect.y,n,o)),i.q2=new t(new LRectangle(i.rect.x+n,i.rect.y+o,n,o)),i.q3=new t(new LRectangle(i.rect.x,i.rect.y+o,n,o)),i.q4=new t(new LRectangle(i.rect.x,i.rect.y,n,o)),i.q1.parent=i.q2.parent=i.q3.parent=i.q4.parent=i,i.q1.root=i.q2.root=i.q3.root=i.q4.root=i.root,i.q1.createChildren(e-1),i.q2.createChildren(e-1),i.q3.createChildren(e-1),i.q4.createChildren(e-1)}},hasChildren:function(){var t=this;return t.q1&&t.q2&&t.q3&&t.q4},clear:function(){var t=this;return t.hasChildren()?t.q1.clear()||t.q2.clear()||t.q3.clear()||t.q4.clear():(t.q1=null,t.q2=null,t.q3=null,t.q4=null,t.parent=null,t.data=[],t)},add:function(t,e,i){var n=this;return n.isIn(e,i)?n.hasChildren()?n.q1.add(t,e,i)||n.q2.add(t,e,i)||n.q3.add(t,e,i)||n.q4.add(t,e,i):(n.data.push(t),n):null},remove:function(t,e,i){var n=this;if(!n.isIn(e,i))return null;if(n.hasChildren())return n.q1.remove(t,e,i)||n.q2.remove(t,e,i)||n.q3.remove(t,e,i)||n.q4.remove(t,e,i);var o=n.data.indexOf(t);return-1!=o?(n.data.splice(o,1),n):null},isIn:function(t,e){var i=this;return(typeof t==UNDEFINED||t>=i.rect.x&&t<i.rect.right)&&(typeof e==UNDEFINED||e>=i.rect.y&&e<i.rect.bottom)},getDataInRect:function(t){var e=this;if(!e.rect.intersects(t))return[];var i=e.data.concat();return e.hasChildren()&&(i.push.apply(i,e.q1.getDataInRect(t)),i.push.apply(i,e.q2.getDataInRect(t)),i.push.apply(i,e.q3.getDataInRect(t)),i.push.apply(i,e.q4.getDataInRect(t))),i}};for(var i in e)t.prototype[i]=e[i];return t}(),LoadingSample1=function(){function t(t,e,i){base(this,LSprite,[]);var n=this;n.numberList=new Array([1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,0,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,0,0,1,1,1,1]),n.backgroundColor=null==e?"#000000":e,n.color=null==i?"#ffffff":i,n.progress=0,n.step=null==t?.5*LGlobal.width/15:t,n.back=new LSprite,n.addChild(n.back),n.num=new LSprite,n.addChild(n.num),n.num.mask=new LSprite,n.screenX=(LGlobal.width-15*n.step)/2,n.screenY=(LGlobal.height-5*n.step)/2,n.num.x=n.screenX,n.num.y=n.screenY,n.setProgress(n.progress)}return t.prototype.setProgress=function(t){var e,i,n,o=this,a=LGlobal.canvas,r="",s=o.step;t>=100?(r=o.getNumber(1),e=o.getNumber(0),i=o.getNumber(0),s=3*o.step):t>=10?(e=o.getNumber(Math.floor(t/10)),i=o.getNumber(t%10)):(e=o.getNumber(0),i=o.getNumber(t)),o.back.graphics.clear(),o.back.graphics.add(function(){if(a.beginPath(),a.fillStyle=o.backgroundColor,a.fillRect(0,0,LGlobal.width,LGlobal.height),a.closePath(),a.fillStyle=o.color,t>=100)for(n=0;n<r.length;n++)0!=r[n]&&a.fillRect(o.screenX+Math.floor(n%3)*o.step,o.screenY+Math.floor(n/3)*o.step,o.step,o.step);for(n=0;n<e.length;n++)0!=e[n]&&a.fillRect(o.screenX+s+Math.floor(n%3)*o.step,o.screenY+Math.floor(n/3)*o.step,o.step,o.step);for(n=0;n<i.length;n++)0!=i[n]&&a.fillRect(o.screenX+s+Math.floor(n%3)*o.step+4*o.step,o.screenY+Math.floor(n/3)*o.step,o.step,o.step);a.moveTo(o.screenX+s+9.7*o.step,o.screenY),a.lineTo(o.screenX+s+10.5*o.step,o.screenY),a.lineTo(o.screenX+s+9.3*o.step,o.screenY+5*o.step),a.lineTo(o.screenX+s+8.5*o.step,o.screenY+5*o.step),a.lineTo(o.screenX+s+9.7*o.step,o.screenY),a.fill(),a.moveTo(o.screenX+s+8.5*o.step,o.screenY+o.step),a.arc(o.screenX+s+8.5*o.step,o.screenY+o.step,.6*o.step,0,360+Math.PI/180),a.moveTo(o.screenX+s+10.5*o.step,o.screenY+4*o.step),a.arc(o.screenX+s+10.5*o.step,o.screenY+4*o.step,.6*o.step,0,360+Math.PI/180),a.fill()}),o.num.mask.graphics.clear(),o.num.mask.graphics.add(function(){if(t>=100)for(n=0;n<r.length;n++)0!=r[n]&&a.rect(o.screenX+Math.floor(n%3)*o.step,o.screenY+Math.floor(n/3)*o.step,o.step,o.step);for(var n=0;n<e.length;n++)0!=e[n]&&a.rect(o.screenX+s+Math.floor(n%3)*o.step,o.screenY+Math.floor(n/3)*o.step,o.step,o.step);for(var n=0;n<i.length;n++)0!=i[n]&&a.rect(o.screenX+s+Math.floor(n%3)*o.step+4*o.step,o.screenY+Math.floor(n/3)*o.step,o.step,o.step)}),a.fillStyle=LGlobal._create_loading_color(),o.num.graphics.clear(),o.num.graphics.drawRect(1,a.fillStyle,[0,5*o.step*(100-t)*.01,LGlobal.width,LGlobal.height],!0,a.fillStyle)},t.prototype.getNumber=function(t){return this.numberList[t]},t}();LoadingSample2.prototype.setProgress=function(t){var e=this,i=LGlobal.canvas;e.progressLabel.text=t+"%",e.showLabel.mask.clear(),e.showLabel.mask.drawRect(0,"#000000",[e.screenX,0,e.screenWidth*t*.01,LGlobal.height]),t>=100&&(i.shadowOffsetX=0,i.shadowOffsetY=0)},LoadingSample3.prototype.onframe=function(t){var e,i,n;if(t.progress>=100){if(t.star.length>0){for(e=0,n=t.star.length;n>e;e++)t.removeChild(t.star[e]);t.star.length=0}}else{for(e=0,n=t.star.length;n>e;e++)i=t.star[e],i.alpha-=.1,i.x+=i.speedx,i.y+=i.speedy,i.alpha<=0&&(t.star.splice(e,1),t.removeChild(i),e--,n--);t.star.length<10&&t.addStar()}},LoadingSample3.prototype.addStar=function(){var t=this,e=LGlobal.canvas,i=new LSprite,n=1+Math.floor(4*Math.random());i.graphics.add(function(){e.beginPath(),e.fillStyle="#ffffff",e.lineTo(2*n,n),e.lineTo(4*n,0),e.lineTo(3*n,2*n),e.lineTo(4*n,4*n),e.lineTo(2*n,3*n),e.lineTo(0,4*n),e.lineTo(n,2*n),e.lineTo(0,0),e.fill()}),i.x=t.screenX+t.screenWidth*t.progress*.01,i.y=t.screenY,i.speedx=4-8*Math.random(),i.speedy=4-8*Math.random(),t.star.push(i),t.addChild(i)},LoadingSample3.prototype.setProgress=function(t){var e=this,i=LGlobal.canvas;t>100&&(t=100),e.progress=t,e.back.graphics.clear(),e.back.graphics.add(function(){i.beginPath(),i.fillStyle="#00FFFF",i.rect(e.screenX-3,e.screenY-3,e.screenWidth+6,e.screenHeight+6),i.fill(),i.beginPath(),i.fillStyle="#990033",i.rect(e.screenX,e.screenY,e.screenWidth,e.screenHeight),i.fill(),i.beginPath(),i.fillStyle=e.color,i.rect(e.screenX,e.screenY,e.screenWidth*t*.01,e.screenHeight),i.fill()}),e.label.text=t+"%"},LoadingSample4.prototype.onframe=function(t){t.target.arc.rotate+=20},LoadingSample4.prototype.setProgress=function(t){var e=this;t>100&&(t=100),e.progress=t,e.label.text=t+"%",e.label.x=.5*LGlobal.width-.5*e.label.getWidth()},LoadingSample5.prototype.onframe=function(t){var e=t.target;e.index++<e.max||(e.index=0,e.arc.rotate+=30)},LoadingSample5.prototype.setProgress=function(t){var e=this;t>100&&(t=100),e.progress=t,e.label.text=t+"%",e.label.x=.5*LGlobal.width-.5*e.label.getWidth()},LoadingSample6.prototype._addHole=function(){for(var t=this,e=t.holeAmount,i=2*t.holeR+t.holesx,n=t.holeR,o=0;e>o;o++){var a=new LSprite;a.x=o*i,a.graphics.drawArc(1,"#111",[0,0,n,0,2*Math.PI],!0,"#000"),a.graphics.drawArc(1,"#333",[0,0,n,1.7*Math.PI,.7*Math.PI],!1),t.holeLayer.addChild(a)}},LoadingSample6.prototype.setProgress=function(t){var e=this,i=2*e.holeR+e.holesx,n=e.holeR;e.progress=t/100;for(var o=new Array;Math.floor(e.progress/.2)>e.step;){var a=2*n,r=a,s=LGlobal.canvas.createLinearGradient(0,2*-r,0,r);s.addColorStop(0,"white"),s.addColorStop(1,e.progressColor);var l=new LSprite;l.x=e.step*i,l.scaleX=0,l.scaleY=0,l.graphics.drawArc(0,"",[0,0,n,0,2*Math.PI],!0,s),e.progressLayer.addChild(l),o.push(l),e.step++}for(var h=function(t){var i=new LSprite;i.alpha=.9,i.x=t.x,i.graphics.drawArc(1,e.filterColor,[0,0,n,0,2*Math.PI],!1),e.progressLayer.addChild(i);var o=new LDropShadowFilter(0,5,e.filterColor,10);i.filters=[o],LTweenLite.to(i,.5,{scaleX:1.7,scaleY:1.7,alpha:0,onComplete:function(t){t.parent.removeChild(t)}})},c=0;c<o.length;c++){var d=o[c];LTweenLite.to(d,1,{scaleX:1,scaleY:1,onComplete:h})}},LoadingSample7.prototype._addHole=function(){for(var t=this,e=t.holeAmount,i=t.holeW+t.holesx,n=(t.holeW,t.holeH),o=0;e>o;o++){var a=new LSprite;a.x=o*i,a.graphics.drawRect(1,"#333",[1,1,t.holeW,t.holeH],!1),a.graphics.drawRect(1,"#111",[0,0,t.holeW,t.holeH],!0,"#000"),t.holeLayer.addChild(a);var r=LGlobal.canvas.createLinearGradient(0,-n,0,n);r.addColorStop(0,"white"),r.addColorStop(1,t.progressColor);var s=new LSprite;s.alpha=0,s.x=o*i,s.graphics.drawRect(0,"",[0,0,t.holeW,t.holeH],!0,r),t.progressLayer.addChild(s)}},LoadingSample7.prototype.setProgress=function(t){var e=this;if(e.progress=t/100,Math.floor(e.progress/.1)>e.step){var i=Math.ceil(e.progress/.1);i>10&&(i=10);for(var n=0;i>n;n++){var o=e.progressLayer.childList;if(!(o[n].alpha>0)){var a=e.progressLayer.childList[n];LTweenLite.to(a,1,{alpha:1})}}e.step++}};var LBox2d=function(){function t(e,i,n){var o=this;Box2D.Dynamics.b2World.prototype.LAddController=Box2D.Dynamics.b2World.prototype.AddController,Box2D.Dynamics.b2World.prototype.AddController=function(e){var i,n={};for(i in e)n[i]=e[i];return t&&(t.m_controllerList=n),this.LAddController(e)};var a,r,s,l=Box2D,h=[l.Collision,l.Common,l.Common.Math,l.Dynamics,l.Dynamics.Contacts,l.Dynamics.Controllers,l.Dynamics.Joints,l.Collision.Shapes];for(a in h)for(r in h[a])o[r]=h[a][r];typeof n==UNDEFINED&&(n=30),o.stop=!1,o.drawScale=30,o.selectedBody=null,o.mouseJoint=null,o.mousePVec=null,o.contactListener=null,e=typeof e==UNDEFINED?new o.b2Vec2(0,9.8):new o.b2Vec2(e[0],e[1]),typeof i==UNDEFINED&&(i=!0),o.world=new o.b2World(e,i),o.removeList=new Array,LGlobal.traceDebug&&(s=new o.b2DebugDraw,s.SetSprite(LGlobal.canvas),s.SetLineThickness(1),s.SetFillAlpha(.5),s.SetAlpha(1),s.SetDrawScale(o.drawScale),s.SetFlags(o.b2DebugDraw.e_shapeBit|o.b2DebugDraw.e_jointBit),o.world.SetDebugDraw(s)),LGlobal.destroy=!0}return t.prototype={setEvent:function(t,e){var i=this;if(t==LEvent.ENTER_FRAME)return void(i.ll_enterFrame=e);switch(i.contactListener||(i.contactListener=new i.b2ContactListener,i.world.SetContactListener(i.contactListener)),t){case LEvent.END_CONTACT:i.contactListener.EndContact=e;break;case LEvent.PRE_SOLVE:i.contactListener.PreSolve=e;break;case LEvent.POST_SOLVE:i.contactListener.PostSolve=e;break;case LEvent.BEGIN_CONTACT:default:i.contactListener.BeginContact=e}},setWeldJoint:function(t,e){var i=this,n=new i.b2WeldJointDef;return n.Initialize(e,t,e.GetWorldCenter()),i.world.CreateJoint(n)},setLineJoint:function(t,e,i,n,o){var a=this,r=new a.b2Vec2(i[0],i[1]),s=new a.b2LineJointDef;return s.Initialize(t,e,e.GetWorldCenter(),r),null==n?s.enableLimit=!1:(s.lowerTranslation=n[0],s.upperTranslation=n[1],s.enableLimit=!0),null==o?s.enableMotor=!1:(s.maxMotorForce=o[0],s.motorSpeed=o[1],s.enableMotor=!0),a.world.CreateJoint(s)},setGearJoint:function(t,e,i,n,o){var a=this,r=new a.b2GearJointDef;return r.joint1=n,r.joint2=o,r.bodyA=t,r.bodyB=e,r.ratio=i*a.b2Settings.b2_pi/(300/a.drawScale),a.world.CreateJoint(r)},setPrismaticJoint:function(t,e,i,n,o){var a=this,r=new a.b2Vec2(i[0],i[1]),s=new a.b2PrismaticJointDef;return s.Initialize(e,t,e.GetWorldCenter(),r),null==n?s.enableLimit=!1:(s.lowerTranslation=n[0],s.upperTranslation=n[1],s.enableLimit=!0),null==o?s.enableMotor=!1:(s.maxMotorForce=o[0],s.motorSpeed=o[1],s.enableMotor=!0),a.world.CreateJoint(s)},setRevoluteJoint:function(t,e,i,n){var o=this,a=new o.b2RevoluteJointDef;return a.Initialize(t,e,e.GetWorldCenter()),null==i?a.enableLimit=!1:(a.lowerAngle=i[0]*o.b2Settings.b2_pi/180,a.upperAngle=i[1]*o.b2Settings.b2_pi/180,a.enableLimit=!0),null==n?a.enableMotor=!1:(a.maxMotorTorque=n[0],a.motorSpeed=n[1],a.enableMotor=!0),o.world.CreateJoint(a)},setDistanceJoint:function(t,e){var i=this,n=new i.b2DistanceJointDef;return n.Initialize(t,e,t.GetWorldCenter(),e.GetWorldCenter()),i.world.CreateJoint(n)},setPulleyJoint:function(t,e,i,n,o){var a=this,r=t.GetWorldCenter(),s=e.GetWorldCenter(),l=new a.b2Vec2(r.x+i[0]/a.drawScale,r.y+i[1]/a.drawScale),h=new a.b2Vec2(s.x+n[0]/a.drawScale,s.y+n[1]/a.drawScale),c=new a.b2PulleyJointDef;return c.Initialize(t,e,l,h,r,s,o),c.maxLengthA=i[2]/a.drawScale,c.maxLengthB=n[2]/a.drawScale,a.world.CreateJoint(c)},addCircle:function(t,e,i,n,o,a,r){var s=this;s.bodyDef=new s.b2BodyDef,s.bodyDef.type=n,s.fixDef=new s.b2FixtureDef,s.fixDef.density=o,s.fixDef.friction=a,s.fixDef.restitution=r,s.fixDef.shape=new s.b2CircleShape(t),s.bodyDef.position.x=e,s.bodyDef.position.y=i;var l=s.world.CreateBody(s.bodyDef);return l.CreateFixture(s.fixDef),l},addPolygon:function(t,e,i,n,o,a,r,s){var l=this;l.bodyDef=new l.b2BodyDef,l.bodyDef.type=o,l.fixDef=new l.b2FixtureDef,l.fixDef.density=a,l.fixDef.friction=r,l.fixDef.restitution=s,l.fixDef.shape=new l.b2PolygonShape,l.fixDef.shape.SetAsBox(t,e),l.bodyDef.position.x=i,l.bodyDef.position.y=n;var h=l.world.CreateBody(l.bodyDef);return h.CreateFixture(l.fixDef),h},addVertices:function(t,e,i,n,o){var a,r,s=this;s.bodyDef=new s.b2BodyDef,s.bodyDef.type=e;var l=s.world.CreateBody(s.bodyDef);for(a=0,r=t.length;r>a;a++)s.createShapeAsArray(l,t[a],e,i,n,o);return l},createShapeAsArray:function(t,e,i,n,o,a){var r=this,s=new r.b2PolygonShape,l=r.createVerticesArray(e);s.SetAsArray(l,0);var h=new r.b2FixtureDef;h.shape=s,h.density=n,h.friction=o,h.restitution=a,t.CreateFixture(h)},createVerticesArray:function(t){var e,i,n=this,o=new Array;if(t.length<3)return o;for(e=0,i=t.length;i>e;e++)o.push(new n.b2Vec2(t[e][0]/n.drawScale,t[e][1]/n.drawScale));return o},getBodyAtMouse:function(t,e){var i=this;i.mousePVec=new i.b2Vec2(t,e);var n=new i.b2AABB;return n.lowerBound.Set(t-.001,e-.001),n.upperBound.Set(t+.001,e+.001),i.selectedBody=null,i.world.QueryAABB(i.getBodyCallBack,n),i.selectedBody},getBodyCallBack:function(t){var e=LGlobal.box2d;return t.GetBody().GetType()!=e.b2Body.b2_staticBody&&t.GetShape().TestPoint(t.GetBody().GetTransform(),e.mousePVec)?(e.selectedBody=t.GetBody(),!1):!0},ll_show:function(){var t=this,e=null;for(e in t.removeList)t.world.DestroyBody(t.removeList[e]);t.removeList.splice(0,t.removeList.length),t.stop||(t.ll_enterFrame&&t.ll_enterFrame({target:t}),t.world.Step(1/30,10,10),t.world.ClearForces(),LGlobal.traceDebug&&t.world.DrawDebugData())},synchronous:function(){var e,i,n,o=this,a=null,r=null,s=0,l=0;for(i=o.world.GetBodyList();i;i=i.GetNext())e=i.GetUserData(),e&&(null==r&&(a=e.parent,s=i.GetPosition().x,l=i.GetPosition().y),i.SetPosition(new o.b2Vec2((e.x+e.rotatex+a.x)/o.drawScale,(e.y+e.rotatey+a.y)/o.drawScale)),null==r&&(r={x:i.GetPosition().x-s,y:i.GetPosition().y-l}));for(n=o.world.GetJointList();n;n=n.GetNext())n.m_groundAnchor1&&(n.m_groundAnchor1.x+=r.x,n.m_groundAnchor1.y+=r.y),n.m_groundAnchor2&&(n.m_groundAnchor2.x+=r.x,n.m_groundAnchor2.y+=r.y);t.m_controllerList&&o.world.m_controllerList&&a&&(LGlobal.box2d.world.m_controllerList.offset=t.m_controllerList.offset-a.y/LGlobal.box2d.drawScale)}},t}();LSprite.prototype.setBodyMouseJoint=function(t){var e=this;e.box2dBody&&(e.box2dBody.mouseJoint=t)},LSprite.prototype.clearBody=function(t){var e=this;e.box2dBody&&(LGlobal.box2d.removeList.push(e.box2dBody),e.box2dBody=null)},LSprite.prototype.addBodyCircle=function(t,e,i,n,o,a,r){var s=this;s.rotatex=t,s.rotatey=t,s.box2dBody=LGlobal.box2d.addCircle(t/LGlobal.box2d.drawScale,(s.x+e)/LGlobal.box2d.drawScale,(s.y+i)/LGlobal.box2d.drawScale,1==n?LGlobal.box2d.b2Body.b2_dynamicBody:LGlobal.box2d.b2Body.b2_staticBody,null==o?.5:o,null==a?.4:a,null==r?.8:r),s.box2dBody.SetUserData(s)},LSprite.prototype.addBodyPolygon=function(t,e,i,n,o,a){var r=this;r.rotatex=t/2,r.rotatey=e/2,r.box2dBody=LGlobal.box2d.addPolygon(.5*t/LGlobal.box2d.drawScale,.5*e/LGlobal.box2d.drawScale,r.x/LGlobal.box2d.drawScale,r.y/LGlobal.box2d.drawScale,1==i?LGlobal.box2d.b2Body.b2_dynamicBody:LGlobal.box2d.b2Body.b2_staticBody,null==n?.5:n,null==o?.4:o,null==a?.8:a),r.box2dBody.SetUserData(r)},LSprite.prototype.addBodyVertices=function(t,e,i,n,o,a,r){var s=this;s.rotatex=0,s.rotatey=0,s.box2dBody=LGlobal.box2d.addVertices(t,1==n?LGlobal.box2d.b2Body.b2_dynamicBody:LGlobal.box2d.b2Body.b2_staticBody,o,a,r),s.box2dBody.SetUserData(s),s.box2dBody.SetPosition(new LGlobal.box2d.b2Vec2((s.x+e)/LGlobal.box2d.drawScale,(s.y+i)/LGlobal.box2d.drawScale))},LGlobal.mouseJoint_start=function(t){if(LGlobal.IS_MOUSE_DOWN&&LGlobal.box2d&&!LGlobal.box2d.mouseJoint&&!LGlobal.box2d.stop){var e=t.offsetX/LGlobal.box2d.drawScale,i=t.offsetY/LGlobal.box2d.drawScale,n=LGlobal.box2d.getBodyAtMouse(e,i);if(n&&n.mouseJoint){var o=new LGlobal.box2d.b2MouseJointDef;o.bodyA=LGlobal.box2d.world.GetGroundBody(),o.bodyB=n,o.target.Set(e,i),o.collideConnected=!0,o.maxForce=3e5*n.GetMass(),LGlobal.box2d.mouseJoint=LGlobal.box2d.world.CreateJoint(o),n.SetAwake(!0)}}},LGlobal.mouseJoint_move=function(t){LGlobal.IS_MOUSE_DOWN&&LGlobal.box2d&&LGlobal.box2d.mouseJoint&&(mX=t.offsetX/LGlobal.box2d.drawScale,mY=t.offsetY/LGlobal.box2d.drawScale,LGlobal.box2d.mouseJoint.SetTarget(new LGlobal.box2d.b2Vec2(mX,mY)))},LGlobal.mouseJoint_end=function(){null!=LGlobal.box2d&&LGlobal.box2d.mouseJoint&&(LGlobal.box2d.world.DestroyJoint(LGlobal.box2d.mouseJoint),LGlobal.box2d.mouseJoint=null)};var LTransition=function(){function t(t,e){this.child=t,this.trans=e}return t.prototype={startTransition:function(){var e=this;switch(e.trans.type){case t.Blinds:e.blinds();break;case t.Fade:e.fade();break;case t.Fly:e.fly();break;case t.Iris:e.iris();break;case t.Squeeze:e.squeeze();break;case t.Wipe:e.wipe();break;case t.Zoom:e.zoom();break;case t.PixelDissolve:e.pixelDissolve();break;case t.Curtain:e.curtain();break;default:throw"the type is not exists."}},blindsComplete:function(e){e.trans.direction==t.OUT?e.child.mask.clear():e.blindsUpdateRun(),e.child.mask=null,e.trans.onComplete&&e.trans.onComplete(e.child)},blindsUpdateRun:function(){var t=this,e=t.child.mask,i=LGlobal.canvas;e.clear(),e.add(t.trans.dimension?function(){i.save();for(var e=0;e<t.trans.numStrips;e++)i.rect(e*t.maxSize,0,t.blindsSize,t.child.getHeight());i.restore()}:function(){i.save();for(var e=0;e<t.trans.numStrips;e++)i.rect(0,0+e*t.maxSize,t.child.getWidth(),t.blindsSize);i.restore()})},blindsUpdate:function(t){t.blindsUpdateRun(),t.trans.onUpdate&&t.trans.onUpdate(t.child)},blinds:function(){var e=this;e.trans.numStrips||(e.trans.numStrips=1),e.blindsSize=0,e.maxSize=e.trans.dimension?e.child.getWidth()/e.trans.numStrips>>0:e.child.getHeight()/e.trans.numStrips>>0;var i=new LGraphics;e.child.mask=i;var n=e.maxSize;e.trans.direction==t.OUT&&(e.blindsSize=e.maxSize,n=0),LTweenLite.to(e,e.trans.duration,{blindsSize:n,onComplete:e.blindsComplete,onUpdate:e.blindsUpdate,ease:e.trans.easing})},fadeComplete:function(t){t.child.alpha=t.alpha,t.trans.onComplete&&t.trans.onComplete(t.child)},fadeUpdate:function(t){t.child.alpha=t.alpha,t.trans.onUpdate&&t.trans.onUpdate(t.child)},fade:function(){var e=this,i=1;e.alpha=0,e.trans.direction==t.OUT&&(e.alpha=1,i=0),e.child.alpha=e.alpha,LTweenLite.to(e,e.trans.duration,{alpha:i,onComplete:e.fadeComplete,onUpdate:e.fadeUpdate,ease:e.trans.easing})},flyComplete:function(t){t.child.x=t.x,t.child.y=t.y,t.trans.onComplete&&t.trans.onComplete(t.child)},flyUpdate:function(t){t.child.x=t.x,t.child.y=t.y,t.trans.onUpdate&&t.trans.onUpdate(t.child)},fly:function(){var e=this,i=e.child.x,n=e.child.y;switch(e.trans.startPoint){case 1:e.x=-e.child.getWidth(),e.y=-e.child.getHeight();break;case 2:e.x=.5*(LGlobal.width-e.child.getWidth()),e.y=-e.child.getHeight();break;case 3:e.x=LGlobal.width,e.y=-e.child.getHeight();break;case 4:e.x=-e.child.getWidth(),e.y=.5*(LGlobal.height-e.child.getHeight());break;case 6:e.x=LGlobal.width,e.y=.5*(LGlobal.height-e.child.getHeight());break;case 7:e.x=-e.child.getWidth(),e.y=LGlobal.height;break;case 8:e.x=.5*(LGlobal.width-e.child.getWidth()),e.y=LGlobal.height;break;case 9:e.x=LGlobal.width,e.y=LGlobal.height;break;case 5:default:e.x=.5*(LGlobal.width-e.child.getWidth()),e.y=.5*(LGlobal.height-e.child.getHeight())}if(e.trans.direction==t.OUT){var i=e.x,n=e.y;e.x=e.child.x,e.y=e.child.y}else e.child.x=e.x,e.child.y=e.y;LTweenLite.to(e,e.trans.duration,{x:i,y:n,onComplete:e.flyComplete,onUpdate:e.flyUpdate,ease:e.trans.easing})},irisComplete:function(e){e.trans.direction==t.OUT?e.child.mask.clear():e.irisUpdateRun(),e.child.mask=null,e.trans.onComplete&&e.trans.onComplete(e.child)},irisUpdateRun:function(){{var t=this,e=t.child.mask;LGlobal.canvas}e.clear(),t.trans.shape==LIris.CIRCLE?e.drawArc(0,"#000000",[t.x,t.y,t.r,0,2*Math.PI]):e.drawRect(0,"#000000",[t.x+t.sLeft,t.y+t.sTop,t.width,t.height])},irisUpdate:function(t){t.irisUpdateRun(),t.trans.onUpdate&&t.trans.onUpdate(t.child)},iris:function(){var e=this;switch(e.sLeft=0,e.sTop=0,e.width=0,e.height=0,e.x=0,e.y=0,e.r=0,e.eWidth=e.child.getWidth(),e.eHeight=e.child.getHeight(),e.trans.startPoint){case 1:e.eR=Math.sqrt(e.eWidth*e.eWidth+e.eHeight*e.eHeight);break;case 2:e.eR=Math.sqrt(.5*e.eWidth*.5*e.eWidth+e.eHeight*e.eHeight),e.x=.5*e.child.getWidth();break;case 3:e.eR=Math.sqrt(e.eWidth*e.eWidth+e.eHeight*e.eHeight),e.x=e.child.getWidth();break;case 4:e.eR=Math.sqrt(e.eWidth*e.eWidth+.5*e.eHeight*.5*e.eHeight),e.y=.5*e.child.getHeight();break;case 6:e.eR=Math.sqrt(e.eWidth*e.eWidth+.5*e.eHeight*.5*e.eHeight),e.x=e.child.getWidth(),e.y=.5*e.child.getHeight();break;case 7:e.eR=Math.sqrt(e.eWidth*e.eWidth+e.eHeight*e.eHeight),e.y=e.child.getHeight();break;case 8:e.eR=Math.sqrt(.5*e.eWidth*.5*e.eWidth+e.eHeight*e.eHeight),e.x=.5*e.child.getWidth(),e.y=e.child.getHeight();break;case 9:e.eR=Math.sqrt(e.eWidth*e.eWidth+e.eHeight*e.eHeight),e.x=e.child.getWidth(),e.y=e.child.getHeight();break;case 5:default:e.eR=Math.sqrt(.5*e.eWidth*.5*e.eWidth+.5*e.eHeight*.5*e.eHeight),e.x=.5*e.child.getWidth(),e.y=.5*e.child.getHeight()}e.eLeft=-e.x,e.eTop=-e.y;var i=new LGraphics;e.child.mask=i;e.maxSize;e.trans.direction==t.OUT&&(e.sLeft=e.eLeft,e.sTop=e.eTop,e.eLeft=0,e.eTop=0,e.width=e.eWidth,e.height=e.eHeight,e.eWidth=0,e.eHeight=0,e.r=e.eR,e.eR=0),LTweenLite.to(e,e.trans.duration,{width:e.eWidth,height:e.eHeight,sLeft:e.eLeft,sTop:e.eTop,r:e.eR,onComplete:e.irisComplete,onUpdate:e.irisUpdate,ease:e.trans.easing})},curtainComplete:function(e){e.trans.direction==t.OUT?e.child.mask.clear():e.curtainUpdateRun(),e.child.mask=null,e.trans.onComplete&&e.trans.onComplete(e.child)},curtainUpdateRun:function(){var t=this,e=t.child.mask,i=LGlobal.canvas;e.clear(),e.add(t.trans.dimension?function(){i.save(),i.rect(0,0,t.width,t.child.getHeight()),i.rect(t.child.getWidth()-t.width,0,t.width,t.child.getHeight()),i.restore()}:function(){i.save(),i.rect(0,0,t.child.getWidth(),t.height),i.rect(0,t.child.getHeight()-t.height,t.child.getWidth(),t.height),i.restore()})},curtainUpdate:function(t){t.curtainUpdateRun(),t.trans.onUpdate&&t.trans.onUpdate(t.child)},curtain:function(){var e=this,i=.5*e.child.getWidth(),n=.5*e.child.getHeight();e.trans.dimension?n=0:i=0,e.width=0,e.height=0;var o=new LGraphics;e.child.mask=o;e.maxSize;e.trans.direction==t.OUT&&(e.width=i,e.height=n,i=0,n=0),LTweenLite.to(e,e.trans.duration,{width:i,height:n,onComplete:e.curtainComplete,onUpdate:e.curtainUpdate,ease:e.trans.easing})},squeezeComplete:function(t){t.child.scaleX=t.scaleX,t.child.scaleY=t.scaleY,t.trans.onComplete&&t.trans.onComplete(t.child)},squeezeUpdate:function(t){t.child.scaleX=t.scaleX,t.child.scaleY=t.scaleY,t.trans.onUpdate&&t.trans.onUpdate(t.child)},squeeze:function(){var e=this,i=1,n=1;e.scaleX=0,e.scaleY=0,e.trans.dimension?e.scaleX=1:e.scaleY=1,e.trans.direction==t.OUT&&(i=e.scaleX,n=e.scaleY,e.scaleX=1,e.scaleY=1),e.child.scaleX=e.scaleX,e.child.scaleY=e.scaleY,LTweenLite.to(e,e.trans.duration,{scaleX:i,scaleY:n,onComplete:e.squeezeComplete,onUpdate:e.squeezeUpdate,ease:e.trans.easing})},zoomComplete:function(t){t.child.scaleX=t.scaleX,t.child.scaleY=t.scaleY,t.trans.onComplete&&t.trans.onComplete(t.child)},zoomUpdate:function(t){t.child.scaleX=t.scaleX,t.child.scaleY=t.scaleY,t.trans.onUpdate&&t.trans.onUpdate(t.child)},zoom:function(){var e=this,i=1,n=1;e.scaleX=0,e.scaleY=0,e.trans.direction==t.OUT&&(i=0,n=0,e.scaleX=1,e.scaleY=1),e.child.scaleX=e.scaleX,e.child.scaleY=e.scaleY,LTweenLite.to(e,e.trans.duration,{scaleX:i,scaleY:n,onComplete:e.zoomComplete,onUpdate:e.zoomUpdate,ease:e.trans.easing})},wipeComplete:function(e){e.trans.direction==t.OUT?e.child.mask.clear():e.wipeUpdateRun(),e.child.mask=null,e.trans.onComplete&&e.trans.onComplete(e.child)},wipeUpdateRun:function(){{var t=this,e=t.child.mask;LGlobal.canvas}e.clear(),e.drawVertices(0,"#000000",[[t.leftTopX,t.leftTopY],[t.leftBottomX,t.leftBottomY],[t.rightBottomX,t.rightBottomY],[t.rightTopX,t.rightTopY]])},wipeUpdate:function(t){t.wipeUpdateRun(),t.trans.onUpdate&&t.trans.onUpdate(t.child)},wipe:function(){var e=this,i=e.child.getWidth(),n=e.child.getHeight(),o=e.leftTopX=0,a=e.leftTopY=0,r=e.leftBottomX=0,s=e.leftBottomY=n,l=e.rightTopX=i,h=e.rightTopY=0,c=e.rightBottomX=i,d=e.rightBottomY=n;switch(e.trans.startPoint){case 1:o=e.leftTopX=-i,r=e.leftBottomX=2*-i,e.rightTopX=0,l=2*i,e.rightBottomX=-i,c=i;break;case 2:a=e.leftTopY=-n,e.leftBottomY=0,s=n,h=e.rightTopY=-n,e.rightBottomY=0,d=n;break;case 3:e.leftTopX=i,o=-i,e.leftBottomX=2*i,r=0,l=e.rightTopX=2*i,c=e.rightBottomX=3*i;break;case 4:e.rightTopX=0,l=i,e.rightBottomX=0,c=i;break;case 6:e.leftTopX=i,o=0,e.leftBottomX=i,r=0;break;case 7:r=e.leftBottomX=-i,o=e.leftTopX=2*-i,e.rightBottomX=0,c=2*i,e.rightTopX=-i,l=i;break;case 8:s=e.leftBottomY=n,e.leftTopY=n,a=0,d=e.rightBottomY=n,e.rightTopY=n,h=0;break;case 9:e.leftBottomX=i,r=-i,e.leftTopX=2*i,o=0,c=e.rightBottomX=2*i,l=e.rightTopX=3*i;break;case 5:default:e.leftTopX=.5*i,e.leftTopY=.5*n,e.rightTopX=.5*i,e.rightTopY=.5*n,e.leftBottomX=.5*i,e.leftBottomY=.5*n,e.rightBottomX=.5*i,e.rightBottomY=.5*n,o=0,a=0,r=0,s=n,l=i,h=0,c=i,d=n}var u=new LGraphics;if(e.child.mask=u,e.trans.direction==t.OUT){var p=o,f=a,g=r,v=s,m=l,y=h,L=c,b=d;o=e.leftTopX,a=e.leftTopY,r=e.leftBottomX,s=e.leftBottomY,l=e.rightTopX,h=e.rightTopY,c=e.rightBottomX,d=e.rightBottomY,e.leftTopX=p,e.leftTopY=f,e.leftBottomX=g,e.leftBottomY=v,e.rightTopX=m,e.rightTopY=y,e.rightBottomX=L,e.rightBottomY=b}LTweenLite.to(e,e.trans.duration,{leftTopX:o,leftTopY:a,leftBottomX:r,leftBottomY:s,rightTopX:l,rightTopY:h,rightBottomX:c,rightBottomY:d,onComplete:e.wipeComplete,onUpdate:e.wipeUpdate,ease:e.trans.easing})},pixelDissolveComplete:function(e){e.trans.direction==t.OUT?e.child.mask.clear():e.pixelDissolveUpdateRun(),e.child.mask=null,e.trans.onComplete&&e.trans.onComplete(e.child)},pixelDissolveUpdateRun:function(){var t,e=this,i=e.child.mask,n=LGlobal.canvas;i.clear(),i.add(function(){n.save();for(var i=0;i<e.index;i++)t=e.list[i],n.rect(t[0]*e.w,t[1]*e.h,e.w,e.h);n.restore()})},pixelDissolveUpdate:function(t){t.pixelDissolveUpdateRun(),t.trans.onUpdate&&t.trans.onUpdate(t.child)},pixelDissolve:function(){var e=this,i=new LGraphics;e.child.mask=i,LGlobal.mg=i,e.w=e.child.getWidth()/e.trans.xSections,e.h=e.child.getHeight()/e.trans.ySections,e.list=[];for(var n=0;n<e.trans.xSections;n++)for(var o=0;o<e.trans.ySections;o++)e.list.push([n,o]);e.index=0;var a=e.trans.xSections*e.trans.ySections;e.trans.direction==t.OUT&&(e.index=a,a=0),e.list=e.list.sort(function(t,e){return Math.random()>.5}),e.pixelDissolveUpdateRun(),LTweenLite.to(e,e.trans.duration,{index:a,onComplete:e.pixelDissolveComplete,onUpdate:e.pixelDissolveUpdate,ease:e.trans.easing
})}},t.IN="in",t.OUT="out",t.Blinds=1,t.Fade=2,t.Fly=3,t.Iris=4,t.Curtain=5,t.PixelDissolve=6,t.Squeeze=7,t.Wipe=8,t.Zoom=9,t}(),LIris=function(){function t(){}return t.SQUARE=0,t.CIRCLE=1,t}(),LTransitionManager=function(){function t(t){this.child=t}return t.prototype={startTransition:function(e){return t.start(this.child,e)}},t.start=function(t,e){var i=new LTransition(t,e);return i.startTransition(),i},t}(),LFlash=function(){function t(){}return t.SpriteSheetConvert=function(t){for(var e,i=[],n=0;n<t.length;n++)e=t[n],i.push({x:e.frame.x,sx:e.spriteSourceSize.x,y:e.frame.y,sy:e.spriteSourceSize.y,width:e.frame.w,height:e.frame.h});return i},t}(),LString={trim:function(t){return t.replace(/(^\s*)|(\s*$)|(\n)/g,"")},leftTrim:function(t){return t.replace(/(^\s*)|(^\n)/g,"")},rightTrim:function(t){return t.replace(/(\s*$)|(\n$)/g,"")},numberFormat:function(t,e){return(!e||1>e)&&(e=3),t=String(t).split("."),t[0]=t[0].replace(new RegExp("(\\d)(?=(\\d{"+e+"})+$)","ig"),"$1,"),t.join(".")},isString:function(t){var e=/^([a-z]|[A-Z])+$/;return e.exec(t)},isNumber:function(t){var e=/^\d+\.\d+$/;return e.exec(t)},isInt:function(t){var e=/^\d+$/;return e.exec(t)}};LMath=LString,function(t){function e(){n=document.documentElement.clientHeight-100,o=640,a=908,r=640;s.hwScale=n/o,s.windowHeight=n,s.windowWidth=o,s.gameHeight=a,s.gameWidth=r,s.wScale=o/r,s.hScale=n/a}function i(){var t,e,i=location.href,n=i.indexOf("?");this.rootUrl=i.substr(0,n),i=i.substr(n+1);for(var o=i.split("&"),a=0;a<o.length;a++)n=o[a].indexOf("="),n>0&&(t=o[a].substring(0,n),e=o[a].substr(n+1),this[t]=e)}var n,o,a,r,s={init:e,UrlSearch:i};t.ysStage=s}(window),function(t){function e(){d=t.datalist,p=t.fimglist,u=t.loadData,y=-parseInt((1008*ysStage.wScale-ysStage.windowHeight)/ysStage.wScale),y>0&&(y=0);var e=1008/ysStage.hwScale;e>640?e=640:640>e&&(e=640),f=new LSprite,f.x=-(1008-e)/2,addChild(f),h(E[0]),x.LTreeGame.visible=!0,g=new LSprite,g.x=_.LEarthBg.x,g.y=_.LEarthBg.y,x.LTreeGame.addChild(g),o(),console.log("in")}function i(){T=!0,g.rotate=0,x.LTreeGame.addEventListener(LEvent.ENTER_FRAME,n)}function n(t){g.rotate+=b,g.rotate>360&&(g.rotate=g.rotate-360)}function o(){for(var t in _)"Btn"==t.slice(t.length-3)&&_[t].addEventListener(LMouseEvent.MOUSE_DOWN,a)}function a(t){if(console.info("btnDownFun:"+Math.random()),0==L){L=!0;var e=t.currentTarget.name;0==w&&(w=!0,r(e))}}function r(t){w=!1,"LBtn"==t&&1==T&&(_.LTreeSpMc.alpha=1,_.LTreeSpMc.y=500,0==C&&(C=!0,_.LTreeSpMc.tween=LTweenLite.to(_.LTreeSpMc,.1,{y:650,alpha:0,ease:LEasing.Sine.easeOut,onComplete:s})),l()),L=!1}function s(t){LTweenLite.remove(_.LTreeSpMc.tween),C=!1,_.LTreeSpMc.alpha=0,_.LTreeSpMc.y=500}function l(t){var e=parseInt(-g.rotate+90+180)%360;v=c("LTreeSp",!0),v.x=572*Math.cos(e*Math.PI/180),v.y=572*Math.sin(e*Math.PI/180),v.rotate=90+e,M.push(v),g.addChild(v);for(var i=0;i<S.length;i++){var n="f"==M[i].name?9:5;if(Math.abs(e-S[i])<n)return 1==T&&(T=!1),console.log("conorNum: "+n," rotNum-rotateArr[i]: "+(e-S[i])),void Game.stopGame()}S.push(e),console.log("100"),Game.currentGame.newScore+=50,Game.updateScore(!0,50)}function h(t){var e=new LSprite;e.name=t;for(var i=0;i<u.length;i++)if(u[i].parent==t){var n=new c(u[i].name,!0);n.x=n.initX,n.y=n.initY,e.addChild(n)}x[t]=e,f.addChild(e)}function c(t,e){var i=new LBitmapData(d[t]),n=new LBitmap(i),o=new LSprite;1==e&&(n.x=-n.getWidth()/2,n.y=-n.getHeight()/2),o.bitmap=n,o.bitmapdata=i,o.addChild(n);var a;for(a=0;a<u.length;a++)if(t==u[a].name){1==e?(o.initX=u[a].x+n.getWidth()/2,o.initY=u[a].y+n.getHeight()/2):(o.initX=u[a].x,o.initY=u[a].y);break}return S[t+"Sp"]=o,o.name=t,_[t]=o,o}var d,u,p,f,g,v,m={init:e},y=0,L=!1,b=.8,E=["LTreeGame"],x=[],w=!1,_=[],T=!1,S=[],M=[];m.LTreeIndexInit=function(){S=[],M=[];for(var t=0;7>t;t++)S[t]=60*t;g.removeAllChild(),g.rotate=0;for(var e=["LEF1","LEF2","LEF3","LEF1","LEF2","LEF3"],n=60,t=0;7>t;t++){var o=c(e[t],!0);o.x=636*Math.cos(t*n*Math.PI/180),o.y=636*Math.sin(t*n*Math.PI/180),o.rotate=90+t*n,o.name="f",M.push(o),g.addChild(o)}_.LBtn.tween=LTweenLite.to(_.LBtn,10,{rotate:360,loop:!0}).to(_.LBtn,0,{rotate:0}),i()};var C=!1;m.LGameOver=function(){1==T&&(T=!1),LTweenLite.remove(_.LBtn.tween),x.LTreeGame.removeEventListener(LEvent.ENTER_FRAME,n)},$.extend(t.Game.gameBox.tree,m)}(window),function(t){function e(){o=new LoadingSample5(50,"#ffffff","#000000"),o.label.color="#000000",addChild(o),LLoadManage.load(a,function(t){o.setProgress(t)},i)}function i(e){r=e,t.datalist=r,t.loadData=a,removeChild(o),o=null,Game.gameBox.tree.init()}var n={init:e};t.lMainLoader=n;var o,a=[{path:"../img/LEarthBg.png",name:"LEarthBg",x:0,y:723,parent:"LTreeGame"},{path:"../img/LTreeSp.png",name:"LTreeSp",x:483,y:224,parent:"LTreeGame"},{path:"../img/LTreeSp.png",name:"LTreeSpMc",x:483,y:224,parent:"LTreeGame"},{path:"../img/LLine.png",name:"LLine",x:500,y:390,parent:"LTreeGame"},{path:"../img/LBtn.png",name:"LBtn",x:403,y:190,parent:"LTreeGame"},{path:"../img/LEF3.png",name:"LEF3",x:647,y:910,parent:"nullMC"},{path:"../img/LEF2.png",name:"LEF2",x:529,y:837,parent:"nullMC"},{path:"../img/LEF1.png",name:"LEF1",x:386,y:735,parent:"nullMC"}],r=[]}(window),function(t,e,i){function n(t,i){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in i)this.options[n]=i[n];this.translateZ=this.options.HWCompositing&&s.hasPerspective?" translateZ(0)":"",this.options.useTransition=s.hasTransition&&this.options.useTransition,this.options.useTransform=s.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?s.ease[this.options.bounceEasing]||s.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,i,n){var o=e.createElement("div"),a=e.createElement("div");return n===!0&&(o.style.cssText="position:absolute;z-index:9999",a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),a.className="iScrollIndicator","h"==t?(n===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",a.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(n===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",a.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",i||(o.style.pointerEvents="none"),o.appendChild(a),o}function a(i,n){this.wrapper="string"==typeof n.el?e.querySelector(n.el):n.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in n)this.options[o]=n[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(s.addEvent(this.indicator,"touchstart",this),s.addEvent(t,"touchend",this)),this.options.disablePointer||(s.addEvent(this.indicator,s.prefixPointerEvent("pointerdown"),this),s.addEvent(t,s.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(s.addEvent(this.indicator,"mousedown",this),s.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[s.style.transform]=this.scroller.translateZ,this.wrapperStyle[s.style.transitionDuration]=s.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},s=function(){function n(t){return r===!1?!1:""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}var o={},a=e.createElement("div").style,r=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,n=e.length;n>i;i++)if(t=e[i]+"ransform",t in a)return e[i].substr(0,e[i].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,e){for(var i in e)t[i]=e[i]},o.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)},o.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)},o.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},o.momentum=function(t,e,n,o,a,r){var s,l,h=t-e,c=i.abs(h)/n;return r=void 0===r?6e-4:r,s=t+c*c/(2*r)*(0>h?-1:1),l=c/r,o>s?(s=a?o-a/2.5*(c/8):o,h=i.abs(s-t),l=h/c):s>0&&(s=a?a/2.5*(c/8):0,h=i.abs(t)+s,l=h/c),{destination:i.round(s),duration:l}};var s=n("transform");return o.extend(o,{hasTransform:s!==!1,hasPerspective:n("perspective")in a,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:n("transition")in a}),o.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),o.extend(o.style={},{transform:s,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),o.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},o.addClass=function(t,e){if(!o.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},o.removeClass=function(t,e){if(o.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},o.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},o.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,n=.4;return 0===t?0:1==t?1:n*i.pow(2,-10*t)*i.sin(2*(t-e/4)*i.PI/e)+1}}}),o.tap=function(t,i){var n=e.createEvent("Event");n.initEvent(i,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},o.click=function(t){var i,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,n.dispatchEvent(i))},o}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=s.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&s.eventType[t.type]!==this.initiated)){!this.options.preventDefault||s.isBadAndroid||s.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,n=t.touches?t.touches[0]:t;this.initiated=s.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=s.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&s.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,n,o,a,r=t.touches?t.touches[0]:t,l=r.pageX-this.pointX,h=r.pageY-this.pointY,c=s.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=l,this.distY+=h,o=i.abs(this.distX),a=i.abs(this.distY),!(c-this.endTime>300&&10>o&&10>a)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=o>a+this.options.directionLockThreshold?"h":a>=o+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,h=this.hasVerticalScroll?h:0,e=this.x+l,n=this.y+h,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+l/3:e>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+h/3:n>0?0:this.maxScrollY),this.directionX=l>0?-1:0>l?1:0,this.directionY=h>0?-1:0>h?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,n),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&s.eventType[t.type]===this.initiated){this.options.preventDefault&&!s.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,n,o=(t.changedTouches?t.changedTouches[0]:t,s.getTime()-this.startTime),a=i.round(this.x),r=i.round(this.y),l=i.abs(a-this.startX),h=i.abs(r-this.startY),c=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=s.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(a,r),!this.moved)return this.options.tap&&s.tap(t,this.options.tap),this.options.click&&s.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>o&&100>l&&100>h)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(e=this.hasHorizontalScroll?s.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:a,duration:0},n=this.hasVerticalScroll?s.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},a=e.destination,r=n.destination,c=i.max(e.duration,n.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(a,r);this.currentPage=u,c=this.options.snapSpeed||i.max(i.max(i.min(i.abs(a-u.x),1e3),i.min(i.abs(r-u.y),1e3)),300),a=u.x,r=u.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}return a!=this.x||r!=this.y?((a>0||a<this.maxScrollX||r>0||r<this.maxScrollY)&&(d=s.ease.quadratic),void this.scrollTo(a,r,c,d)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),e==this.x&&i==this.y?!1:(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=s.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;i>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,n){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,n)},scrollTo:function(t,e,i,n){n=n||s.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,n.fn)},scrollToElement:function(t,e,n,o,a){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=s.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,n===!0&&(n=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=n||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?i.max(i.abs(this.x-r.left),i.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,a)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[s.style.transitionDuration]=t+"ms",!t&&s.isBadAndroid&&(this.scrollerStyle[s.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[s.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[s.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(e){var i=e?s.removeEvent:s.addEvent,n=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),s.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,s.prefixPointerEvent("pointerdown"),this),i(n,s.prefixPointerEvent("pointermove"),this),i(n,s.prefixPointerEvent("pointercancel"),this),i(n,s.prefixPointerEvent("pointerup"),this)),s.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,n=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[s.style.transform].split(")")[0].split(", "),e=+(n[12]||n[4]),i=+(n[13]||n[5])):(e=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initIndicators:function(){function t(t){for(var e=s.indicators.length;e--;)t.call(s.indicators[e])}var e,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,r=[],s=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:o("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),r.push(e)),this.options.scrollX&&(e={el:o("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),r.push(e))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var l=r.length;l--;)this.indicators.push(new a(this,r[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){s.addEvent(this.wrapper,"wheel",this),s.addEvent(this.wrapper,"mousewheel",this),s.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){s.removeEvent(this.wrapper,"wheel",this),s.removeEvent(this.wrapper,"mousewheel",this),s.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,n,o,a,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,n=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,n=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,n=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=n=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=n=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=n,n=0),this.options.snap)return o=this.currentPage.pageX,a=this.currentPage.pageY,e>0?o--:0>e&&o++,n>0?a--:0>n&&a++,void this.goToPage(o,a);o=this.x+i.round(this.hasHorizontalScroll?e:0),a=this.y+i.round(this.hasVerticalScroll?n:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),a>0?a=0:a<this.maxScrollY&&(a=this.maxScrollY),this.scrollTo(o,a,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,n,o,a,r,s=0,l=0,h=0,c=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(n=i.round(c/2),o=i.round(d/2);h>-this.scrollerWidth;){for(this.pages[s]=[],t=0,a=0;a>-this.scrollerHeight;)this.pages[s][t]={x:i.max(h,this.maxScrollX),y:i.max(a,this.maxScrollY),width:c,height:d,cx:h-n,cy:a-o},a-=d,t++;h-=c,s++}else for(r=this.options.snap,t=r.length,e=-1;t>s;s++)(0===s||r[s].offsetLeft<=r[s-1].offsetLeft)&&(l=0,e++),this.pages[l]||(this.pages[l]=[]),h=i.max(-r[s].offsetLeft,this.maxScrollX),a=i.max(-r[s].offsetTop,this.maxScrollY),n=h-i.round(r[s].offsetWidth/2),o=a-i.round(r[s].offsetHeight/2),this.pages[l][e]={x:h,y:a,width:r[s].offsetWidth,height:r[s].offsetHeight,cx:n,cy:o},h>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,o=this.pages.length,a=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);o>n;n++)if(t>=this.pages[n][0].cx){t=this.pages[n][0].x;break}for(o=this.pages[n].length;o>a;a++)if(e>=this.pages[0][a].cy){e=this.pages[0][a].y;break}return n==this.currentPage.pageX&&(n+=this.directionX,0>n?n=0:n>=this.pages.length&&(n=this.pages.length-1),t=this.pages[n][0].x),a==this.currentPage.pageY&&(a+=this.directionY,0>a?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),e=this.pages[0][a].y),{x:t,y:e,pageX:n,pageY:a}},goToPage:function(t,e,n,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var a=this.pages[t][e].x,r=this.pages[t][e].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(a-this.x),1e3),i.min(i.abs(r-this.y),1e3)),300):n,this.currentPage={x:a,y:r,pageX:t,pageY:e},this.scrollTo(a,r,n,o)},next:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,t,e)},prev:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,t,e)},_initKeys:function(e){var i,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in n)this.options.keyBindings[i]=this.options.keyBindings[i]||n[i];s.addEvent(t,"keydown",this),this.on("destroy",function(){s.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,n=this.options.snap,o=n?this.currentPage.pageX:this.x,a=n?this.currentPage.pageY:this.y,r=s.getTime(),l=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1),this.keyAcceleration=200>r-l?i.min(this.keyAcceleration+h,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=n?1:this.wrapperWidth:a+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=n?1:this.wrapperWidth:a-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=n?this.pages.length-1:this.maxScrollX,a=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,a=0;break;case this.options.keyBindings.left:o+=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=n?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=n?1:5+this.keyAcceleration>>0;break;default:return}if(n)return void this.goToPage(o,a);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,a,0),this.keyTime=r}},_animate:function(t,e,i,n){function o(){var u,p,f,g=s.getTime();return g>=d?(a.isAnimating=!1,a._translate(t,e),void(a.resetPosition(a.options.bounceTime)||a._execEvent("scrollEnd"))):(g=(g-c)/i,f=n(g),u=(t-l)*f+l,p=(e-h)*f+h,a._translate(u,p),void(a.isAnimating&&r(o)))}var a=this,l=this.x,h=this.y,c=s.getTime(),d=c+i;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},a.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(s.removeEvent(this.indicator,"touchstart",this),s.removeEvent(this.indicator,s.prefixPointerEvent("pointerdown"),this),s.removeEvent(this.indicator,"mousedown",this),s.removeEvent(t,"touchmove",this),s.removeEvent(t,s.prefixPointerEvent("pointermove"),this),s.removeEvent(t,"mousemove",this),s.removeEvent(t,"touchend",this),s.removeEvent(t,s.prefixPointerEvent("pointerup"),this),s.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var i=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=s.getTime(),this.options.disableTouch||s.addEvent(t,"touchmove",this),this.options.disablePointer||s.addEvent(t,s.prefixPointerEvent("pointermove"),this),this.options.disableMouse||s.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){{var e,i,n,o,a=t.touches?t.touches[0]:t;s.getTime()}this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=a.pageX-this.lastPointX,this.lastPointX=a.pageX,i=a.pageY-this.lastPointY,this.lastPointY=a.pageY,n=this.x+e,o=this.y+i,this._pos(n,o),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),s.removeEvent(t,"touchmove",this),s.removeEvent(t,s.prefixPointerEvent("pointermove"),this),s.removeEvent(t,"mousemove",this),this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-n.x),1e3),i.min(i.abs(this.scroller.y-n.y),1e3)),300);

(this.scroller.x!=n.x||this.scroller.y!=n.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=n,this.scroller.scrollTo(n.x,n.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[s.style.transitionDuration]=t+"ms",!t&&s.isBadAndroid&&(this.indicatorStyle[s.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[s.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(s.addClass(this.wrapper,"iScrollBothScrollbars"),s.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(s.removeClass(this.wrapper,"iScrollBothScrollbars"),s.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[s.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>e?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,n=t?0:300;t=t?"1":"0",this.wrapperStyle[s.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),n)}}},n.utils=s,"undefined"!=typeof module&&module.exports?module.exports=n:t.IScroll=n}(window,document,Math);